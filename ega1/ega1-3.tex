\section{Products of preschemes}
\label{section:products-of-preschemes}

\subsection{Sums of preschemes}
\label{subsection:sums-of-preschemes}

Let $(X_\alpha)$ be any family of preschemes; let $X$ be a topological space which is the
\emph{sum} of the underlying spaces $X_\alpha$; $X$ is then the union of pairwise
disjoint open subspaces $X_\alpha'$, and for each $\alpha$ there is a homomorphism
$\vphi_\alpha$ from $X_\alpha$ to $X_\alpha'$. If we equip each of the $X_\alpha'$ with the
sheaf $(\vphi_\alpha)_*(\OO_{X_\alpha})$, it is clear that $X$ becomes a prescheme, which
we call the \emph{sum} of the family of preschemes $(X_\alpha)$ and which we denote
$\bigsqcup_\alpha X_\alpha$. If $Y$ is a prescheme, then the map $f\mapsto(f\circ\vphi_\alpha)$ is a
\emph{bijection} from the set $\Hom(X,Y)$ to the product set $\Pi_\alpha\Hom(X_\alpha,Y)$.
In particular, if the $X_\alpha$ are $S$-preschemes, with structure morphisms $\psi_\alpha$, then
$X$ is an $S$-prescheme by the unique morphism $\psi:X\to S$ such that
$\psi\circ\vphi_\alpha=\psi_\alpha$ for each $\alpha$. The sum of two preschemes $X$ and $Y$ is
denoted by $X\sqcup Y$. It is immediate that, if $X=\Spec(A)$ and $Y=\Spec(B)$, then $X\sqcup Y$
is canonically identified with $\Spec(A\times B)$.

\subsection{Products of preschemes}
\label{subsection:products-of-preschemes}

\begin{defn}[3.2.1]
\label{1.3.2.1}
Given $S$-preschemes $X$ and $Y$, we say that a triple $(Z,p_1,p_2)$, consisting of an
$S$-prescheme $Z$, and $S$-morphisms $p_1:Z\to X$ and $p_2:Z\to Y$, is a product of the
\oldpage[I]{105}
$S$-preschemes $X$ and $Y$, if, for each $S$-prescheme $T$, the map
$f\mapsto(p_1\circ f,p_2\circ f)$ is a bijection from the set of $S$-morphisms from $T$ to
$Z$, to the set of pairs consisting of an $S$-morphism $T\to X$ and an $S$-morphism $T\to Y$
(in other words, a bijection
\[
  \Hom_S(T,Z)\isoto\Hom_S(T,X)\times\Hom_S(T,Y)).
\]
\end{defn}

This is the general notion of a \emph{product} of two objects in a category, applied
to the category of $S$-preschemes (T, I, 1.1); in particular, a product of two $S$-preschemes
is \emph{unique} up to a unique $S$-isomorphism. Because of this uniqueness, most of the time
we will denote a product of two $S$-preschemes $X$ and $Y$ by $X\times_S Y$ (or
simply $X\times Y$, when there is no chance of confusion), with the morphisms $p_1$ and $p_2$
(the \emph{canonical projections} of $X\times_S Y$ to $X$ and to $Y$, respectively) being suppressed
in the notation. If $g:T\to X$ and $h:T\to Y$ are $S$-morphisms, we denote by $(g,h)_S$, or
simply $(g,h)$, the $S$-morphism $f:T\to X\times_S Y$ such that $p_1\circ f=g$,
$p_2\circ f=h$. If $X'$ and $Y'$ ar two $S$-preschemes, $p_1'$ and $p_2'$ the canonical
projections of $X'\times_S Y'$ (assumed to exist), and $u:X'\to X$ and $v:Y'\to Y$ $S$-morphisms, then we write $u\times_S v$ (or simply $u\times v$) for the $S$-morphism
$(u\circ p_1',v\circ p_2')_S$ from $X'\times_S Y'$ to $X\times_S Y$.

When $S$ is an affine scheme given by some ring $A$, we often replace $S$
by $A$ is the above notation.

\begin{prop}[3.2.2]
\label{1.3.2.2}
Let $X$, $Y$, and $S$ be affine schemes, given by rings $B$, $C$, and $A$ (respectively). Let
$Z=\Spec(B\otimes_A C)$, and let $p_1$ and $p_2$ be the $S$-morphisms corresponding \sref{1.2.2.4} to
the canonical $A$-homomorphisms $u:b\mapsto b\otimes 1$ and $v:c\mapsto 1\otimes c$ (respectively) from $B$
and $C$ to $B\otimes_A C$; then $(Z,p_1,p_2)$ is a product of $X$ and $Y$.
\end{prop}

\begin{proof}
\label{proof-1.3.2.2}
According to \sref{1.2.2.4}, it suffices to check that, if, to each $A$-homomorphism
$f:B\otimes_A C\to L$ (where $L$ is an $A$-algebra), we associate the pair
$(f\circ u,f\circ v)$, then this defines a bijection
$\Hom_A(B\otimes_A C,L)\isoto\Hom_A(B,L)\times\Hom_A(C,L)$,\footnote{The notation $\Hom_A$
denotes here the set of homomorphisms of \emph{$A$-algebras}.} which follows immediately
from the definitions and the fact that $b\otimes c=(b\otimes 1)(1\otimes c)$.
\end{proof}

\begin{cor}[3.2.3]
\label{1.3.2.3}
Let $T$ be an affine scheme given by some ring $D$, and $\alpha=({}^a\rho,\widetilde{\rho})$
(resp. $\beta=({}^a\sigma,\widetilde{\sigma})$) an $S$-morphism $T\to X$ (resp. $T\to Y$),
where $\rho$ (resp. $\sigma$) is an $A$-homomorphism from $B$ (resp. $C$) to $D$; then
$(\alpha,\beta)_S=({}^a\tau,\widetilde{\tau})$, where $\tau$ is the homomorphism
$B\otimes_A C\to D$ such that $\tau(b\otimes c)=\rho(b)\sigma(c)$.
\end{cor}

\begin{prop}[3.2.4]
\label{1.3.2.4}
Let $f:S'\to S$ be a \emph{monomorphism} of preschemes \emph{(T, I, 1.1)}, and let $X$ and $Y$ be
$S'$-preschemes, also considered as $S$-preschemes via $f$. Every product of
the $S$-preschemes $X$ and $Y$ is then a product of the $S'$-preschemes $X$ and $Y$, and vice versa.
\end{prop}

\begin{proof}
\label{proof-1.3.2.4}
Let $\vphi:X\to S'$ and $\psi:Y\to S'$ be the structure morphisms. If $T$ is an $S$-prescheme, and
$u:T\to X$ and $v:T\to Y$ are $S$-morphisms, then we have, by definition, that
$f\circ\vphi\circ u=f\circ\psi\circ v=\theta$, the structure morphism of $T$; the hypotheses
on $f$ imply that $\vphi\circ u=\psi\circ v=\theta'$, and so we can consider $T$ as an
$S'$-prescheme with structure morphism $\theta'$, and $u$ and $v$ as $S'$-morphisms. The
conclusion of the proposition follows immediately, taking \sref{1.3.2.1} into account.
\end{proof}

\begin{cor}[3.2.5]
\label{1.3.2.5}
Let $X$ and $Y$ be $S$-preschemes, with structure morphisms $\vphi:X\to S$ and $\psi:Y\to S$, and let
$S'$ be an open subset of $S$ such that $\vphi(X)\subset S'$ and $\psi(Y)\subset S'$. Every product
of the $S$-preschemes $X$ and $Y$ is then also a product of the $S'$-preschemes $X$ and $Y$, and
conversely.
\end{cor}

\oldpage[I]{106}
It suffices to apply \sref{1.3.2.4} to the canonical injection $S'\to S$.

\begin{thm}[3.2.6]
\label{1.3.2.6}
Given $S$-preschemes $X$ and $Y$, there exists a product $X\times_S Y$.
\end{thm}

The proof proceeds in several steps.

\begin{lem}[3.2.6.1]
\label{1.3.2.6.1}
Let $(Z,p,q)$ be a product of $X$ and $Y$, and $U$ and $V$ open subsets of $X$ and $Y$,
respectively. If we let $W=p^{-1}(U)\cap q^{-1}(V)$, then the triple consisting of $W$ and
the restrictions of $p$ and $q$ to $W$ \emph{(considered as the morphisms $W\to U$ and $W\to V$,
respectively)} is a product of $U$ and $V$.
\end{lem}

Indeed, if $T$ is an $S$-prescheme, then we can identify the $S$-morphisms $T\to W$ with the
$S$-morphisms $T\to Z$ mapping $T$ to $W$. Then, if $g:T\to U$ and $h:T\to V$ are any two
$S$-morphisms, we can consider them as $S$-morphisms from $T$ to $X$ and to $Y$, respectively,
and, by hypothesis, there is then a unique $S$-morphism $f:T\to Z$ such that $g=p\circ f$ and
$h=q\circ f$. Since $p(f(Y))\subset U$, $q(f(T))\subset V$, we have
\[
  f(T)\subset p^{-1}(U)\cap q^{-1}(V)=W,
\]
hence our claim.

\begin{lem}[3.2.6.2]
\label{1.3.2.6.2}
Let $Z$ be an $S$-prescheme, $p:Z\to X$ and $q:Z\to Y$ both $S$-morphisms, $(U_\alpha)$ an open
cover of $X$, and $(V_\lambda)$ an open cover of $Y$. Suppose that, for each pair
$(\alpha,\lambda)$, the $S$-prescheme
$W_{\alpha\lambda}=p^{-1}(U_\alpha)\cap q^{-1}(V_\lambda)$ and the restrictions of $p$ and
$q$ to $W_{\alpha\lambda}$ form a product of $U_\alpha$ and $V_\lambda$. Then $(Z,p,q)$ is a
product of $X$ and $Y$.
\end{lem}

We first show that, if $f_1$ and $f_2$ are $S$-morphisms $T\to Z$, then the equations
$p\circ f_1=p\circ f_2$ and $q\circ f_1=q\circ f_2$ imply that $f_1=f_2$. Indeed, $Z$ is the union
of the $W_{\alpha\lambda}$, so the $f_1^{-1}(W_{\alpha\lambda})$ form an open cover of $T$,
and similarly for $f_2^{-1}(W_{\alpha\lambda})$. In addition, we have
\[
  f_1^{-1}(W_{\alpha\lambda})=f_1^{-1}(p^{-1}(U_\alpha))\cap f_1^{-1}(q^{-1}(V_\lambda))
  =f_2^{-1}(p^{-1}(U_\alpha))\cap f_2^{-1}(q^{-1}(V_\lambda))=f_2^{-1}(W_{\alpha\lambda})
\]
by hypothesis, and it thus reduces to noting that the the restrictions of $f_1$ and $f_2$ to
$f_1^{-1}(W_{\alpha\lambda})=f_2^{-1}(W_{\alpha\lambda})$ are identical for each pair of
indices. But since these restrictions can be considered as $S$-morphisms from
$f_1^{-1}(W_{\alpha\lambda})$ to $W_{\alpha\lambda}$, our claim follows from the
hypotheses and Definition~\sref{1.3.2.1}.

Suppose now that we are given $S$-morphisms $g:T\to X$ and $h:T\to Y$. Let
$T_{\alpha\lambda}=g^{-1}(U_\alpha)\cap h^{-1}(V_\lambda)$; then the $T_{\alpha\lambda}$ form an
open cover of $T$. By hypothesis, there exists an $S$-morphism $f_{\alpha\lambda}$ such that
$p\circ f_{\alpha\lambda}$ and $q\circ f_{\alpha\lambda}$ are the restrictions of
$g$ and $h$ to $T_{\alpha\lambda}$ (respectively). Now, we will show that the restrictions of
$f_{\alpha\lambda}$ and $f_{\beta\mu}$ to $T_{\alpha\lambda}\cap T_{\beta\mu}$ coincide,
which will finish the proof of Lemma~\sref{1.3.2.6.2}. The images of
$T_{\alpha\lambda}\cap T_{\beta\mu}$ under $f_{\alpha\lambda}$ and $f_{\beta\mu}$ are
contained in $W_{\alpha\lambda}\cap W_{\beta\mu}$ by definition. Since
\[
  W_{\alpha\lambda}\cap W_{\beta\mu}
  =p^{-1}(U_\alpha\cap U_\beta)\cap q^{-1}(V_\lambda\cap V_\mu),
\]
it follows from Lemma~\sref{1.3.2.6.1} that $W_{\alpha\lambda}\cap W_{\beta\mu}$ and the
restrictions to this prescheme of $p$ and $q$ form a \emph{product} of $U_\alpha\cap U_\beta$
and $V_\lambda\cap V_\mu$. Since $p\circ f_{\alpha\lambda}$ and $p\circ f_{\beta\mu}$ coincide
on $T_{\alpha\lambda}\cap T_{\beta\mu}$ and similarly for $q\circ f_{\alpha\lambda}$ and
$q\circ f_{\beta\mu}$, we see that $f_{\alpha\lambda}$ and $f_{\beta\mu}$ coincide on
$T_{\alpha\lambda}\cap T_{\beta\mu}$.

\begin{lem}[3.2.6.3]
\label{1.3.2.6.3}
\oldpage[I]{107}
Let $(U_\alpha)$ be an open cover of $X$, $(V_\lambda)$ an open cover of $Y$, and suppose
that, for each pair $(\alpha,\lambda)$, there exists a product of $U_\alpha$ and $V_\lambda$;
then there exists a product of $X$ and $Y$.
\end{lem}

Applying Lemma~\sref{1.3.2.6.1} to the open sets $U_\alpha\cap U_\beta$ and
$V_\lambda\cap V_\mu$, we see that there exists a product of $S$-preschemes induced,
respectively, by $X$ and $Y$ on these open sets; in addition, the uniqueness of the product
shows that, if we set $i=(\alpha,\lambda)$ and $j=(\beta,\mu)$, then there is a canonical
isomorphism $h_{ij}$ (resp. $h_{ji}$) from this product to an $S$-prescheme $W_{ij}$
(resp. $W_{ji}$) induced by $U_\alpha\times_S V_\lambda$ (resp. $U_\beta\times_S V_\mu$) on
an open set; then $f_{ij}=h_{ij}\circ h_{ji}^{-1}$ is an isomorphism from $W_{ji}$ to
$W_{ij}$. In addition, for a third pair $k=(\gamma,\nu)$, we have
$f_{ik}=f_{ij}\circ f_{jk}$ on
$W_{ki}\cap W_{kj}$, by applying Lemma \sref{1.3.2.6.1} to
the open sets $U_\alpha\cap U_\beta\cap U_\gamma$ and $V_\lambda\cap V_\mu\cap V_\nu$ in
$U_\beta$ and $V_\mu$, respectively. It follows that we have a prescheme $Z$, an open cover
$(Z_i)$ of the underlying space of $Z$, and, for each $i$, an isomorphism $g_i$ from the
induced prescheme
$Z_i$ to the prescheme $U_\alpha\times_S V_\lambda$, so that, for each pair $(i,j)$, we have
$f_{ij}=g_i\circ g_j^{-1}$ \sref{1.2.3.1}; in addition, we have $g_i(Z_i\cap Z_j)=W_{ij}$.
If $p_i$, $q_i$, and $\theta_i$ are the projections and the structure morphism of the
$S$-prescheme $U_\alpha\times_S V_\lambda$ (respectively), we immediately see that
$p_i\circ g_i=p_j\circ g_j$ on $Z_i\cap Z_j$, and similarly for the two other morphisms. We
can thus define the morphisms of preschemes $p:Z\to X$ (resp. $q:Z\to Y$, $\theta:Z\to S$) by
the condition that $p$ (resp. $q$, $\theta$) coincide with $p_i\circ g_i$
(resp. $q_i\circ g_i$, $\theta_i\circ g_i$) on each of the $Z_i$; $Z$, equipped with
$\theta$, is then an $S$-prescheme. We now show that
$Z_i'=p^{-1}(U_\alpha)\cap q^{-1}(V_\lambda)$ is equal to $Z_i$. For each index
$j=(\beta,\mu)$, we have $Z_j\cap Z_i'=g_j^{-1}(p_j^{-1}(U_\alpha)\cap q_j^{-1}(V_\lambda))$.
We have, by Lemma~\sref{1.3.2.6.1},
\[
  p_j^{-1}(U_\alpha)\cap q_j^{-1}(V_\lambda)
  =p_j^{-1}(U_\alpha\cap U_\beta)\cap q_j^{-1}(V_\lambda\cap V_\mu);
\]
with the restrictions of $p_j$ and $q_j$ to
$p_j^{-1}(U_\alpha)\cap q_j^{-1}(V_\lambda)$ defining, on this $S$-prescheme, the structure of a
product of $U_\alpha\cap U_\beta$ and $V_\lambda\cap V_\mu$; but the uniqueness of the
product then implies that $p_j^{-1}(U_\alpha)\cap q_j^{-1}(V_\lambda)=W_{ji}$. As a result, we
have $Z_j\cap Z_i'=Z_j\cap Z_i$ for each $j$, hence $Z_i'=Z_i$. We then deduce from
Lemma~\sref{1.3.2.6.2} that $(Z,p,q)$ is a product of $X$ and $Y$.

\begin{lem}[3.2.6.4]
\label{1.3.2.6.4}
Let $\vphi:X\to S$ and $\psi:Y\to S$ be the structure morphisms of $X$ and $Y$, $(S_i)$ an open
cover of $S$, and let $X_i=\vphi^{-1}(S_i)$, $Y_i=\psi^{-1}(S_i)$. If each of the products
$X_i\times_S Y_i$ exists, then $X\times_S Y$ exists.
\end{lem}

According to Lemma~\sref{1.3.2.6.3}, everything follows from proving that the products
$X_i\times_S Y_i$ exists for any $i$ and $j$. Set
$X_{ij}=X_i\cap X_j=\vphi^{-1}(S_i\cap S_j)$, $Y_{ij}=Y_i\cap Y_j=\psi^{-1}(S_i\cap S_j)$;
by Lemma~\sref{1.3.2.6.1}, the product $Z_{ij}=X_{ij}\times_S Y_{ij}$ exists. We now
note that, if $T$ is an $S$-prescheme, and if $g:T\to X_i$ and $h:T\to Y_j$ are $S$-morphisms,
then we necessarily have that $\vphi(g(T))=\psi(h(T))\subset S_i\cap S_j$ by the
definition of an $S$-morphism, and thus that $g(T)\subset X_{ij}$ and $h(T)\subset Y_{ij}$; it is
then immediate that $Z_{ij}$ is the product of $X_i$ and $Y_j$.

\begin{env}[3.2.6.5]
\label{1.3.2.6.5}
We can now complete the proof of Theorem~\sref{1.3.2.6}. If $S$ is an \emph{affine
scheme}, then there are covers $(U_\alpha)$ and $(V_\lambda)$ of $X$ and $Y$ (respectively)
consisting of affine open subsets; since $U_\alpha\times_S V_\lambda$ exists, by
\sref{1.3.2.2}, $X\times_S Y$ exists similarly, by Lemma~\sref{1.3.2.6.3}. If $S$
is any prescheme, then there is a cover $(S_i)$ of $S$ consisting of affine open subsets. If
$\vphi:X\to S$ and $\psi:Y\to S$ are the structure morphisms, and if we set
$X_i=\vphi^{-1}(S_i)$ and $Y_i=\psi^{-1}(S_i)$, then the products $X_i\times_{S_i}Y_i$ exist, by the
\oldpage[I]{108}
above; but then the products $X_i\times_S Y_i$ also exist \sref{1.3.2.5}, therefore
$X\times_S Y$ exists similarly, by Lemma~\sref{1.3.2.6.4}.\qed
\end{env}

\begin{cor}[3.2.7]
\label{1.3.2.7}
Let $Z=X\times_S Y$ be the product of two $S$-preschemes, $p$ and $q$ the projections from $Z$
to $X$ and to $Y$ (respectively),and  $\vphi$ (resp. $\psi$) the structure morphism of $X$ (resp. $Y$). Let $S'$ be
an open subset of $S$, and $U$ (resp. $V$) an open subset of $X$ (resp. $Y$) contained in
$\vphi^{-1}(S')$ (resp. $\psi^{-1}(S')$). Then the product $U\times_{S'}V$ is canonically
identified with the prescheme induced on $Z$ by $p^{-1}(U)\cap q^{-1}(V)$ (considered as an
$S'$-prescheme). In addition, if $f:T\to X$ and $g:T\to Y$ are $S$-morphisms such that
$f(T)\subset U$ and $g(T)\subset V$, then the $S'$-morphism $(f,g)_{S'}$ can be identified with the
restriction of $(f,g)_S$ to $p^{-1}(U)\cap q^{-1}(V)$.
\end{cor}

\begin{proof}
\label{proof-1.3.2.7}
This follows from Corollary~\sref{1.3.2.5} and Lemma~\sref{1.3.2.6.1}.
\end{proof}

\begin{env}[3.2.8]
\label{1.3.2.8}
Let $(X_\alpha)$ and $(Y_\lambda)$ be families of $S$-preschemes, and $X$ (resp. $Y$) the sum
of the family $(X_\alpha)$ (resp. $(Y_\lambda)$) \hyperref[subsection:sums-of-preschemes]{(3.1)}. Then $X\times_S Y$ can be identified with
the \emph{sum} of the family $(X_\alpha\times_S Y_\lambda)$; this follows immediately from Lemma~\sref{1.3.2.6.3}.
\end{env}

\begin{env}[3.2.9]
\label{1.3.2.9}
\footnote{\emph{[Trans.] \sref{1.3.2.9} is from the errata of EGA~II, on page 221.}}
\oldpage[II]{221}
It follows from \sref{1.1.8.1} that we can state \sref{1.3.2.2} in the following
manner: $Z=\Spec(B\otimes_A C)$ is not only a product of $X=\Spec(B)$ and $Y=\Spec(C)$ in the
category of \emph{$S$-preschemes}, but also in the category of \emph{locally ringed spaces
over $S$} (with a definition of $S$-morphisms modelled on that of \sref{1.2.5.2}). The
proof of \sref{1.3.2.6} also proves that, for any two $S$-preschemes $X$ and $Y$, the
prescheme $X\times_S Y$ is not only the product of $X$ and $Y$ in the category of
$S$-preschemes, but also in the category of locally ringed spaces over the prescheme $S$.
\end{env}

\subsection{Formal properties of the product; change of the base prescheme}
\label{subsection:product-formal-and-base-change}

\begin{env}[3.3.1]
\label{1.3.3.1}
The reader will notice that all the properties stated in this section, except
\sref{1.3.3.13} and \sref{1.3.3.15}, are true without modification in any
category, whenever the products involved in the statements exist (since it is
clear that the notions of an $S$-object and of an $S$-morphism can be defined
exactly as in \hyperref[subsection:preschemes-over-prescheme]{(2.5)} for any object $S$ of the category).
\end{env}

\begin{env}[3.3.2]
\label{1.3.3.2}
First of all, $X\times_S Y$ is a \emph{covariant bifunctor} in $X$ and $Y$ on the
category of $S$-preschemes: it suffices in fact to note that the diagram
\[
  \xymatrix{
    X\times Y\ar[r]^{f\times 1}\ar[d] &
    X'\times Y\ar[r]^{f'\times 1}\ar[d] &
    X''\times Y\ar[d]\\
    X\ar[r]^f &
    X'\ar[r]^{f'} &
    X''
  }
\]
is commutative.
\end{env}

\begin{prop}[3.3.3]
\label{1.3.3.3}
For each $S$-prescheme $X$, the first (resp. second) projection from
$X\times_S S$ (resp. $S\times_S X$) is a functorial isomorphism from
$X\times_S S$ (resp. $S\times_S X$) to $X$, whose inverse isomorphism is
$(1_X,\vphi)_S$ (resp. $(\vphi,1_X)_S$), where we denote by $\vphi$ the
structure morphism $X\to S$; we can therefore write, up to a canonical
isomorphism,
\[
  X\times_S S=S\times_S X=X.
\]
\end{prop}

\begin{proof}
\label{proof-1.3.3.3}
It suffices to prove that the triple $(X,1_X,\vphi)$ is a product of $X$ and
$S$. If $T$ is an $S$-prescheme, then the only $S$-morphism from $T$ to $S$ is
necessarily the structure morphism $\psi:T\to S$. If $f$ is an $S$-morphism from
$T$ to $X$, we necessarily have $\psi=\vphi\circ f$, hence our claim.
\end{proof}

\begin{cor}[3.3.4]
\label{1.3.3.4}
Let $X$ and $Y$ be $S$-preschemes, with structure morphisms $\vphi:X\to S$ and $\psi:Y\to S$. If we canonically identify $X$ with $X\times_S S$, and $Y$
with $S\times_S Y$, then the projections $X\times_S Y\to X$ and $X\times_S Y\to Y$
are identified with $1_X\times\psi$ and $\vphi\times 1_Y$ (respectively).
\end{cor}

The proof is immediate and is left to the reader.

\begin{env}[3.3.5]
\label{1.3.3.5}
We can define, in a manner similar to \hyperref[subsection:products-of-preschemes]{(3.2)}, the product of a
\oldpage[I]{109}
finite number $n$ of $S$-preschemes, and the existence of these products follows
from \sref{1.3.2.6} by induction on $n$, and by noting that
$(X_1\times_S X_2\times_S\cdots\times_S X_{n-1})\times_S X_n$ satisfies the
definition of a product. The uniqueness of the product implies, as in any
category, its \emph{commutativity} and \emph{associativity} properties. If, for
example, $p_1$, $p_2$, and $p_3$ denote the projections from
$X_1\times_S X_2\times_S X_3$, and if we identify this prescheme with
$(X_1\times_S X_2)\times_S X_3$, then the projection to $X_1\times_S X_2$ is
identified with $(p_1,p_2)_S$.
\end{env}

\begin{env}[3.3.6]
\label{1.3.3.6}
Let $S$ and $S'$ be preschemes, and $\vphi:S'\to S$ a morphism, which lets us consider $S'$ as an
$S$-prescheme. For each $S$-prescheme $X$, consider the product $X\times_S S'$,
and let $p$ and $\pi'$ be the projections to $X$ and to $S'$ (respectively). Equipped
with $\pi'$, this product is an $S'$-prescheme; when we consider it as such, we
denote it by $X_{(S')}$ or $X_{(\vphi)}$, and we say that this is the prescheme
obtained by \emph{base change} (or \emph{a change of base}) from $S$ to $S'$ by means of the morphism
$\vphi$, or the \emph{inverse image} of $X$ by $\vphi$. We note that, if $\pi$ is
the structure morphism of $X$, and $\theta$ the structure morphism of
$X\times_S S'$, considered as an $S$-prescheme, then the diagram
\[
  \xymatrix{
    X\ar[d]_\pi &
    X_{(S')}\ar[l]_p\ar[ld]_\theta\ar[d]^{\pi'}\\
    S &
    S'\ar[l]^\vphi
  }
\]
is commutative.
\end{env}

\begin{env}[3.3.7]
\label{1.3.3.7}
With the notation of \sref{1.3.3.6}, for each $S$-morphism $f:X\to Y$, we
denote by $f_{(S')}$ the $S'$-morphism $f\times_S 1:X_{(S')}\to Y_{(S')}$, and
we say that $f_{(S')}$ is the \emph{base change} (or \emph{inverse image}) of
$f$ by $\vphi$. Therefore $X_{(S')}$ is a \emph{covariant functor} in $X$, from
the category of $S$-preschemes to that of $S'$-preschemes.
\end{env}

\begin{env}[3.3.8]
\label{1.3.3.8}
The prescheme $X_{(S')}$ can be considered as a solution to a \emph{universal
mapping problem}: each $S'$-prescheme $T$ is also an $S$-prescheme via $\vphi$;
each $S$-morphism $g:T\to X$ is then uniquely written as $g=p\circ f$, where $f$
is an $S'$-morphism $T\to X_{(S')}$, as follows from the definition of the
product applied to the $S$-morphisms $f$ and $\psi:T\to S'$ (the structure
morphism of $T$).
\end{env}

\begin{prop}[3.3.9]
\label{1.3.3.9}
\emph{(``Transitivity of base change'')}. Let $S''$ be a prescheme, and
$\vphi':S''\to S$ a morphism. For each $S$-prescheme $X$, there exists a
canonical functorial isomorphism from the $S''$-prescheme
$(X_{(\vphi)})_{(\vphi')}$ to the $S''$-prescheme $X_{(\vphi\circ\vphi')}$.
\end{prop}

\begin{proof}
\label{proof-1.3.3.9}
Let $T$ be a $S''$-prescheme, $\psi$ its structure morphism, and $g$ an
$S$-morphism from $T$ to $X$ ($T$ being considered as an $S$-prescheme with
structure morphism $\vphi\circ\vphi'\circ\psi$). Since $T$ is also an $S'$-prescheme
with structure morphism $\vphi'\circ\psi$, we can write $g=p\circ g'$, where
$g'$ is an $S'$-morphism $T\to X_{(\vphi)}$, and then $g'=p'\circ g''$, where
$g''$ is an $S''$-morphism $T\to(X_{(\vphi)})_{(\vphi')}$:
\[
  \xymatrix{
    X\ar[d]_\pi &
    X_{(\vphi)}\ar[l]_p\ar[d]_{\pi'} &
    (X_{(\vphi)})_{(\vphi')}\ar[l]_{p'}\ar[d]^{\pi''}\\
    S &
    S\ar[l]_\vphi &
    S''\ar[l]_{\vphi'}.
  }
\]
\oldpage[I]{110}
So the result follows by the uniqueness of the solution to a universal
mapping problem.
\end{proof}

This result can be written as the equality (up to a canonical isomorphism)
$(X_{(S')})_{(S'')}=X_{(S'')}$ (if there is no chance of confusion), or also as
\begin{equation*}
\label{1.3.3.9.1}
  (X\times_S S')\times_{S'}S''=X\times_S S'';
  \tag{3.3.9.1}
\end{equation*}
the functorial nature of the isomorphism defined in \sref{1.3.3.9} can
similarly be expressed by the transitivity formula for base change morphisms
\begin{equation*}
\label{1.3.3.9.2}
  (f_{(S')})_{(S'')}=f_{(S'')}
  \tag{3.3.9.2}
\end{equation*}
for each $S$-morphism $f:X\to Y$.

\begin{cor}[3.3.10]
\label{1.3.3.10}
If $X$ and $Y$ are $S$-preschemes, then there exists a canonical functorial
isomorphism from the $S'$-prescheme $X_{(S')}\times_{S'}Y_{(S')}$ to the
$S'$-prescheme $(X\times_S Y)_{(S')}$.
\end{cor}

\begin{proof}
\label{proof-1.3.3.10}
We have, up to canonical isomorphism,
\[
  (X\times_S S')\times_{S'}(Y\times_S S')
  =X\times_S(Y\times_S S')=(X\times_S Y)\times_S S'
\]
according to \sref{1.3.3.9.1} and the associativity of products of $S$-preschemes.
\end{proof}

The functorial nature of the isomorphism defined in
Corollary~\sref{1.3.3.10} can be expressed by the formula
\begin{equation*}
\label{1.3.3.10.1}
  (u_{(S')},v_{(S')})_{S'}=((u,v)_S)_{(S')}
  \tag{3.3.10.1}
\end{equation*}
for each pair of $S$-morphisms $u:T\to X$, $v:T\to Y$.

In other words, the base change functor $X_{(S')}$ \emph{commutes with
products}; it also commutes with sums \sref{1.3.2.8}.

\begin{cor}[3.3.11]
\label{1.3.3.11}
Let $Y$ be an $S$-prescheme, and $f:X\to Y$ a morphism which makes $X$ a
$Y$-prescheme (and, as a result, also an $S$-prescheme). The prescheme $X_{(S')}$
is then identified with the product $X\times_Y Y_{(S')}$, the projection
$X\times_Y Y_{(S')}\to Y_{(S')}$ being identified with $f_{(S')}$.
\end{cor}

\begin{proof}
\label{proof-1.3.3.11}
Let $\psi:Y\to S$ be the structure morphism of $Y$; we have the commutative
diagram
\[
  \xymatrix{
    S'\ar[d] &
    Y_{(S')}\ar[l]\ar[d] &
    X_{(S')}\ar[l]_{f_{(S')}}\ar[d]\\
    S &
    Y\ar[l]_\psi &
    X\ar[l]_f.
  }
\]
We have that $Y_{(S')}$ is identified with $S_{(\psi)}'$, and $X_{(S')}$ with
$S_{(\psi\circ f)}'$; taking \sref{1.3.3.9} and
\sref{1.3.3.4} into account, we thus deduce the corollary.
\end{proof}

\begin{env}[3.3.12]
\label{1.3.3.12}
Let $f:X\to X'$ and $g:Y\to Y'$ be $S$-morphisms which are \emph{monomorphisms}
of preschemes (T, I, 1.1); then $f\times_S g$ is a \emph{monomorphism}. Indeed,
if $p$ and $q$ are the projections of $X\times_S Y$, $p'$ and $q'$ the projections of
$X'\times_S Y'$, and $u$ and $v$ both $S$-morphisms $T\to X\times_S Y$, then the
equation $(f\times_S g)\circ u=(f\times_S g)\circ v$ implies that
$p'\circ(f\times_S g)\circ u=p'\circ(f\times_S g)\circ v$, or, in other words, that
$f\circ p\circ u=f\circ p\circ v$, and since $f$ is a monomorphism,
$p\circ u=p\circ v$; using the fact that $g$ is a monomorphism, we similarly
obtain $q\circ u=q\circ v$, hence $u=v$.

\oldpage[I]{111}
It follows that, for each base change $S'\to S$,
\[
  f_{(S')}:X_{(S')}\to Y_{(S')}
\]
is a monomorphism.
\end{env}

\begin{env}[3.3.13]
\label{1.3.3.13}
Let $S$ and $S'$ be affine schemes of rings $A$ and $A'$ (respectively); a morphism
$S'\to S$ then corresponds to a ring homomorphism $A\to A'$. If $X$ is an
$S$-prescheme, we denote by $X_{(A')}$ or $X\otimes_A A'$ the $S'$-prescheme
$X_{(S')}$; when $X$ is also affine of ring $B$, $X_{(A')}$ is affine of ring
$B_{(A')}=B\otimes_A A'$ obtained by extension of scalars from the $A$-algebra
$B$ to $A'$.
\end{env}

\begin{env}[3.3.14]
\label{1.3.3.14}
With the notation of \sref{1.3.3.6}, for each \emph{$S$-morphism}
$f:S'\to X$, we have that $f'=(f,1_{S'})_S$ is an $S'$-morphism $S'\to X'=X_{(S')}$ such that
$p\circ f'=f$, $\pi'\circ f'=1_{S'}$, or, in other words, an \emph{$S'$-section of
of $X'$}; conversely, if $f'$ is such an $S'$-section, then $f=p\circ f'$ is an
$S$-morphism $S'\to X$. We thus define a canonical
\emph{bijective correspondence}
\[
  \Hom_S(S',X)\isoto\Hom_{S'}(S',X').
\]
We say that $f'$ is the \emph{graph morphism} of $f$, and we denote it by
$\Gamma_f$.
\end{env}

\begin{env}[3.3.15]
\label{1.3.3.15}
Given a prescheme $X$, which we can always consider as a $\bb{Z}$-prescheme,
it follows, in particular, from \sref{1.3.3.14} that the \emph{$X$-sections} of
$X\otimes_\bb{Z}\bb{Z}[T]$ (where $T$ is an indeterminate)
correspond bijectively with \emph{morphisms} $\bb{Z}[T]\to X$. We will show that these
$X$-sections also correspond bijectively with \emph{sections of the structure
sheaf $\OO_X$ over $X$}. Indeed, let $(U_\alpha)$ be a cover of $X$ by
affine open subsets; let $u:X\to X\otimes_\bb{Z}\bb{Z}[T]$ be an $X$-morphism, and let
$u_\alpha$ be its restriction to $U_\alpha$; if $A_\alpha$ is the ring of the
affine scheme $U_\alpha$, then $U_\alpha\otimes_\bb{Z}\bb{Z}[T]$ is an affine
scheme of ring $A_\alpha[T]$ \sref{1.3.2.2}, and $u_\alpha$ canonically
corresponds to an $A_\alpha$-homomorphism $A_\alpha[T]\to A_\alpha$
\sref{1.1.7.3}. Now, since such a homomorphism is completely determined by the
data of the image of $T$ in $A_\alpha$, let
$s_\alpha\in A_\alpha=\Gamma(U_\alpha,\OO_X)$, and if we suppose that the
restrictions of $u_\alpha$ and $u_\beta$ to an affine open subset
$V\subset U_\alpha\cap U_\beta$ coincide, then we see immediately that
$s_\alpha$ and $s_\beta$ coincide on $V$; thus the family $(s_\alpha)$ consists
of the restrictions to $U_\alpha$ of a section $s$ of $\OO_X$ over $X$;
conversely, it is clear that such a section defines a family $(u_\alpha)$ of
morphisms which are the restrictions to $U_\alpha$ of an $X$-morphism
$X\to X\otimes_\bb{Z}\bb{Z}[T]$. This result is generalized in
\sref[II]{2.1.7.12}.
\end{env}

\subsection{Points of a prescheme with values in a prescheme; geometric points}
\label{subsection:prescheme-geometric-points}

\begin{env}[3.4.1]
\label{1.3.4.1}
Let $X$ be a prescheme; for each prescheme $T$, we then denote by $X(T)$ the set
$\Hom(T,X)$ of morphisms $T\to X$, and the elements of this set are called
\emph{the points of $X$ with values in $T$}. If we associate to each morphism
$f:T\to T'$ the map $u'\mapsto u'\circ f$ from $X(T')$ to $X(T)$, we see,
for fixed $X$, that $X(T)$ is a \emph{contravariant functor in $T$}, from the
category of preschemes to that of sets. In addition, each morphism of preschemes
$g:X\to Y$ defines a functorial homomorphism $X(T)\to Y(T)$, which sends
$v\in X(T)$ to $g\circ v$.
\end{env}

\begin{env}[3.4.2]
\label{1.3.4.2}
Given sets $P$, $Q$, and $R$, and maps $\vphi:P\to R$ and $\psi:Q\to R$, we define the
\emph{fibre product of $P$ and $Q$ over $R$} (relative to $\vphi$ and $\psi$) as the subset
of
\oldpage[I]{112}
the product set $P\times Q$ consisting of the pairs $(p,q)$ such that $\vphi(p)=\psi(q)$; we
denote it by $P\times_R Q$. Definition~\sref{1.3.2.1} of the product
of $S$-preschemes can be interpreted, with the notation of \sref{1.3.4.1},
via the formula
\begin{equation*}
\label{1.3.4.2.1}
  (X\times_S Y)(T)=X(T)\times_{S(T)}Y(T).
  \tag{3.4.2.1}
\end{equation*}
the maps $X(T)\to S(T)$ and $Y(T)\to S(T)$ corresponding to the structure morphisms
$X\to S$ and $Y\to S$.
\end{env}

\begin{env}[3.4.3]
\label{1.3.4.3}
If we are given a prescheme $S$ and we consider only the $S$-preschemes and $S$-morphisms,
then we will denote by $X(T)_S$ the set $\Hom_S(T,X)$ of $S$-morphisms $T\to X$, and suppress
the subscript $S$ when there is no chance of confusion; we say that the elements of $X(T)_S$
are the \emph{points} (or \emph{$S$-points}, when there is a possibility of confusion)
\emph{of the $S$-prescheme $X$ with values in the $S$-prescheme $T$}. In particular, an
\emph{$S$-section} of $X$ is none other than a \emph{point of $X$ with values in $S$}. The
formula \sref{1.3.4.2.1} can then be written as
\begin{equation*}
\label{1.3.4.3.1}
  (X\times_S Y)(T)_S=X(T)_S\times Y(T)_S;
  \tag{3.4.3.1}
\end{equation*}
more generally, if $Z$ is an $S$-prescheme, and $X$, $Y$, and $T$ are $Z$-preschemes (thus
\emph{ipso facto} $S$-preschemes), then we have
\begin{equation*}
\label{1.3.4.3.2}
  (X\times_Z Y)(T)_S=X(T)_S\times_{Z(T)_S}Y(T)_S.
  \tag{3.4.3.2}
\end{equation*}

We note that, to show that a triple $(W,r,s)$ consisting of an $S$-prescheme $W$ and
$S$-morphisms $r:W\to X$ and $s:W\to Y$ is a product of $X$ and $Y$ (over $Z$), it suffices, by
definition, to check that, for \emph{each $S$-prescheme $T$}, the diagram
\[
  \xymatrix{
    W(T)_S\ar[r]^{r'}\ar[d]_{s'} &
    X(T)_S\ar[d]^{\vphi'}\\
    Y(T)_S\ar[r]^{\psi'} &
    Z(T)_S
  }
\]
makes $W(T)_S$ the fibre product of $X(T)_S$ and $Y(T)_S$ over $Z(T)_S$, where $r'$ and $s'$
correspond to $r$ and $s$, and $\vphi'$ and $\psi'$ to the structure morphisms $\vphi:X\to Z$ and $\psi:Y\to Z$.
\end{env}

\begin{env}[3.4.4]
\label{1.3.4.4}
When $T$ (resp. $S$) in the above is an affine scheme of ring $B$ (resp. $A$), we replace
$T$ (resp. $S$) by $B$ (resp. $A$) in the above notation, and we then call the elements of
$X(B)$ the \emph{points of $X$ with values in the ring $B$}, and the elements of $X(B)_A$ the
\emph{points of the $A$-prescheme $X$ with values in the $A$-algebra $B$}. We note that
$X(B)$ and $X(B)_A$ are \emph{covariant} functors in $B$. We similarly write $X(T)_A$ for the
set of points of the $A$-prescheme $X$ with values in the $A$-prescheme $T$.
\end{env}

\begin{env}[3.4.5]
\label{1.3.4.5}
Consider, in particular, the case where $T$ is of the form $\Spec(A)$, where $A$ is a
\emph{local} ring; the elements of $X(A)$ then correspond bijectively to \emph{local}
homomorphisms $\OO_x\to A$ for $x\in X$ \sref{1.2.2.4}; we say that the
point $x$ of the underlying space of $X$ is the \emph{location}\footnote{\emph{[Trans.] We also say that
\emph{the geometric point lies over this $x$}.}} of the point of $X$ with values in $A$ to which it corresponds.

More specifically, we define the \emph{geometric points} of a prescheme $S$ to be the \emph{points of
$X$ with values in a field $K$}: the data of such a point is equivalent to the data of its
\oldpage[I]{113}
location $x$ in the underlying subspace of $X$, and of an \emph{extension} $K$ of $\kres(x)$;
$K$ will be called the \emph{field of values} of the corresponding geometric point, and we
say that this geometric point is \emph{located at $x$}. We also define a map $X(K)\to X$,
sending a geometric point with values in $K$ to its location.

If $S'=\Spec(K)$ is an $S$-prescheme (in other words, if $K$ is considered as an extension
of the residue field $\kres(s)$, where $s\in S$), and if $X$ is an $S$-prescheme, then an
element of $X(K)_S$, or, as we say, a \emph{geometric point of $X$ lying over $s$ with values
in $K$}, consists of the data of a $\kres(s)$-monomorphism from the residue field $\kres(x)$
to $K$, where $x$ is a point of $X$ \emph{lying over $s$} (therefore $\kres(x)$ is an
extension of $\kres(s)$).

In particular, if $S=\Spec(K)=\{\xi\}$, \emph{then the geometric points of $X$ with values in
$K$ can be identified with the points $x\in X$ such that $\kres(x)=K$}; we say that these latter
points are the \emph{$K$-rational points of the $K$-prescheme $X$}; if $K'$ is an extension
of $K$, then the geometric points of $X$ with values in $K'$ bijectively correspond to the
$K'$-rational points of $X'=X_{(K')}$ \sref{1.3.3.14}.
\end{env}

\begin{lem}[3.4.6]
\label{1.3.4.6}
Let $X_i$ ($1\leq i\leq n$) be $S$-preschemes, $s$ a point of $S$, and $x_i$
($1\leq i\leq n$) points of $X_i$ lying over $s$. Then there exists an extension
$K$ of $\kres(s)$ and a geometric point of the product
$Y=X_1\times_S X_2\times_S\cdots\times_S X_n$, with values in $K$, whose projections to
the $X_i$ are localized at the $x_i$.
\end{lem}

\begin{proof}
\label{proof-1.3.4.6}
There exist $\kres(s)$-monomorphisms $\kres(x_i)\to K$, all in the same extension $K$ of $\kres(s)$ (Bourbaki, \emph{Alg.}, chap.~V, \textsection4, prop.~2).
The compositions $\kres(s)\to\kres(x_i)\to K$ are all identical, and so the morphisms $\Spec(K)\to X_i$ corresponding to the $\kres(x_i)\to K$ are all $S$-morphisms, and we thus conclude that they define a unique morphism $\Spec(K)\to Y$.
If $y$ is the corresponding point of $Y$, it is clear that its projection in each of the $X_i$ is $x_i$.
\end{proof}

\begin{prop}[3.4.7]
\label{1.3.4.7}
Let $X_i$ ($1\leq i\leq n$) be $S$-preschemes, and, for each index $i$, let $x_i$ be a point of $X_i$.
For there to exist a point $y$ of $Y=X_1\times_S X_2\times\ldots\times_S X_n$ whose image is $x_i$ under the $i$th projection for each $1\leq i\leq n$, it is necessary and sufficient that the $x_i$ all lie above the same point $s$ of $S$.
\end{prop}

\begin{proof}
\label{proof-1.3.4.7}
The condition is evidently necessary; Lemma~\sref{1.3.4.6} proves that it is sufficient.
\end{proof}

In other words, if we denote by $(X)$ the underlying set of $X$, we see that we have a canonical \emph{surjective} function $(X\times_S Y)\to(X)\times_{(S)}(Y)$; we must point out that this function \emph{is not injective} in general; in other words, \emph{there can exist multiple distinct points $z$ in $X\times_S Y$ that have the same projections $x\in X$ and $y\in Y$}; we have already seen this when $S$, $X$, and $Y$ are prime spectra of fields $k$, $K$, and $K'$ (respectively), since the tensor product $K\otimes_k K'$ has, in general, multiple distinct prime ideals (cf.~\sref{1.3.4.9}).

\begin{cor}[3.4.8]
\label{1.3.4.8}
Let $f:X\to Y$ be an $S$-morphism, and $f_{(S')}:X_{(S')}\to Y_{(S')}$ the $S'$-morphism induced by $f$ by an extension $S'\to S$ of the base prescheme.
Let $p$ (\emph{resp. $q$}) be the projection $X_{(S')}\to X$ (\emph{resp. $Y_{(S')}\to Y$}); for every subset $M$ of $X$, we have
\[
  q^{-1}(f(M))=f_{(S')}(p^{-1}(M)).
\]
\end{cor}

\oldpage[I]{114}
\begin{proof}
\label{proof-1.3.4.8}
Indeed \sref{1.3.3.11}, $X_{(S')}$ can be identified with the product $X\times_Y Y_{(S')}$ thanks to the commutative diagram
\[
  \xymatrix{
    X\ar[d]_f &
    X_{(S')}\ar[l]_p\ar[d]^{f_{(S')}}\\
    Y &
    Y_{(S')}\ar[l]_q
  }
\]
By \sref{1.3.4.7}, the equation $q(y')=f(x)$ for $x\in M$ and $y'\in Y_{(S)}$ is equivalent to the existence of some $x'\in X_{(S')}$ such that $p(x')=x$ and $f_{(S')}(x')=y'$, whence the corollary.
\end{proof}

Lemma~\sref{1.3.4.6} can be made clearer in the following manner:
\begin{prop}[3.4.9]
\label{1.3.4.9}
Let $X$ and $Y$ be $S$-preschemes, $x$ a point of $X$, and $y$ a point of $Y$, with both $x$ and $y$ lying above the same point $s\in S$.
The set of points of $X\times_S Y$ with projections $x$ and $y$ is in bijective correspondence with the set of \unsure{types of extensions} composed of $\kres(x)$ and $\kres(y)$ considered as extensions of $\kres(s)$ \emph{(Bourbaki, \emph{Alg.}, chap.~VIII, \textsection8, prop.~2)}.
\end{prop}

\begin{proof}
\label{proof-1.3.4.9}
Let $p$ (resp. $q$) be the projection from $X\times_S Y$ to $X$ (resp. $Y$), and $E$ the subspace $p^{-1}(x)\cap q^{-1}(y)$ of the underlying space of $X\times_S Y$.
First, note that the morphisms $\Spec(\kres(x))\to S$ and $\Spec(\kres(y))\to S$ factor as $\Spec(\kres(x))\to\Spec(\kres(s))\to S$ and $\Spec(\kres(y))\to\Spec(\kres(s))\to S$; since $\Spec(\kres(s))\to S$ is a monomorphism \sref{1.2.4.7}, it follows from \sref{1.3.2.4} that we have
\[
  P=\Spec(\kres(x))\times_S\Spec(\kres(y))=\Spec(\kres(x))\times_{\Spec(\kres(s))}\Spec(\kres(y))=\Spec(\kres(x)\otimes_{\kres(s)}\kres(y)).
\]
We will define two maps, $\alpha:P_0\to E$ and $\beta:E\to P_0$, inverse to one another (where $P_0$ denotes the underlying set of the prescheme $P$).
If $i:\Spec(\kres(x))\to X$ and $j:\Spec(\kres(y))\to Y$ are the canonical morphisms \sref{1.2.4.5}, we take $\alpha$ to be the map of underlying spaces corresponding to the morphism $i\times_S j$.
On the other hand, every $z\in E$ defines, by hypothesis, two $\kres(s)$-monomorphisms, $\kres(x)\to\kres(z)$ and $\kres(y)\to\kres(z)$, and thus a $\kres(s)$-monomorphism $\kres(x)\otimes_{\kres(s)}\kres(y)\to\kres(z)$, and thus a morphism $\Spec(\kres(z))\to P$; $\beta(z)$ will be the image of $z$ in $P_0$ under this morphism.
The verification of the fact that $\alpha\circ\beta$ and $\beta\circ\alpha$ are the identity maps follows from \sref{1.2.4.5} and the definition of the product \sref{1.3.2.1}.
Finally, we know that $P_0$ is in bijective correspondence with the set of \unsure{types of extensions} composed of $\kres(x)$ and $\kres(y)$ (Bourbaki, \emph{Alg.}, chap.~VIII, \textsection8, prop.~1).
\end{proof}

\subsection{Surjections and injections}
\label{subsection:surjections-and-injections}

\begin{env}[3.5.1]
\label{1.3.5.1}
In a general sense, consider a property $\textbf{P}$ of morphisms of preschemes, and the following two propositions:
\begin{enumerate}[label=(\roman*)]
  \item If $f:X\to X'$ and $g:Y\to Y'$ are $S$-morphisms that have property $\textbf{P}$, then $f\times_S g$ also has property $\textbf{P}$.
  \item If $f:X\to Y$ is an $S$-morphism that has property $\textbf{P}$, then every $S'$-morphism $f_{(S')}:X_{(S')}\to Y_{(S')}$, induced by $f$ by an extension of the base prescheme, also has property $\textbf{P}$.
\end{enumerate}

Since $f_{(S')}=f\times_S 1_{S'}$, we see that, if, for every prescheme $X$, the \emph{identity} $1_X$ has property $\textbf{P}$, then (i) implies (ii); on the other hand, since $f\times_S g$ is the composite morphism
\[
  X\times_S Y\xrightarrow{f\times1_Y}X'\times_S Y\xrightarrow{1_{X'}\times g}X'\times_S Y',
\]
we see that, if the \emph{composition} of two morphisms has property $\textbf{P}$, then so does the product $f\times_S g$, and so (ii) implies (i).
\end{env}

A first application of this remark is
\begin{prop}[3.5.2]
\label{1.3.5.2}
\medskip\noindent
\begin{enumerate}[label=\emph{(\roman*)}]
  \item If $f:X\to X'$ and $g:Y\to Y'$ are surjective $S$-morphisms, then $f\times_S g$ is surjective.
  \item If $f:X\to Y$ is a surjective $S$-morphism, then $f_{(S')}$ is surjective for every extension $S'$ of the base prescheme.
\end{enumerate}
\end{prop}

\begin{proof}
\label{proof-1.3.5.2}
The composition of any two surjections being a surjection, it suffices to prove (ii); but this proposition follows immediately from \sref{1.3.4.8} applied to $M=X$.
\end{proof}

\begin{prop}[3.5.3]
\label{1.3.5.3}
For a morphism $f:X\to Y$ to be surjective, it is necessary and sufficient that, for every field $K$ and every morphism $\Spec(K)\to Y$, there exist an extension $K'$ of $K$ and a morphism $\Spec(K')\to X$ that make the following diagram commute:
\[
  \xymatrix{
    X\ar[d]_f &
    \Spec(K')\ar[l]\ar[d]\\
    Y &
    \Spec(K).\ar[l]
  }
\]
\end{prop}

\begin{proof}
\label{proof-prof-1.3.5.3}
The condition is sufficient because, for all $y\in Y$, it suffices to apply it to a morphism $\Spec(K)\to Y$ corresponding to a monomorphism $\kres(y)\to K$, with $K$ being an extension of $\kres(y)$ \sref{1.2.4.6}.
Conversely, suppose that $f$ is surjective, and let $y\in Y$ be the image of the unique point of $\Spec(K)$; there exists some $x\in X$ such that $f(x)=y$; we will consider the corresponding monomorphism $\kres(y)\to\kres(x)$ \sref{1.2.2.1}; it then suffices to take $K'$ to be the extension of $\kres(y)$ such that there exist $\kres(y)$-monomorphisms from $\kres(x)$ and $K$ to $K'$ (Bourbaki, \emph{Alg.}, chap.~V, ยง4, prop.~2); the morphism $\Spec(K')\to X$ corresponding to $\kres(x)\to K'$ is exactly that for which we are searching.
\end{proof}

With the language introduced in \sref{1.3.4.5}, we can say that \emph{every geometric point of $Y$ with values in $K$ comes from a geometric point of $X$ with values in an extension of $K$}.

\begin{defn}[3.5.4]
\label{1.3.5.4}
We say that a morphism $f:X\to Y$ of preschemes is \emph{universally injective}, or a \emph{radicial morphism}, if, for every field $K$, the corresponding map $X(K)\to Y(K)$ is injective.
\end{defn}

It follows also from the definitions that every \emph{monomorphism of preschemes} (T,~1.1) is radicial.

\begin{env}[3.5.5]
\label{1.3.5.5}
For a morphism $f:X\to Y$ to be radicial, it suffices that the condition of Definition~\sref{1.3.5.4} hold for every \emph{algebraically closed} field.
In fact, if $K$ is an arbitrary field, and $K'$ an algebraically-closed extension of $K$, then the diagram
\[
  \xymatrix{
    X(K)\ar[r]^\alpha\ar[d]_\vphi &
    Y(K)\ar[d]^{\vphi'}\\
    X(K')\ar[r]^{\alpha'} &
    Y(K')
  }
\]
commutes, where $\vphi$ and $\vphi'$ come from the morphism $\Spec(K')\to\Spec(K)$, and $\alpha$ and $\alpha'$ corresponding to $f$.
However, $\vphi$ is injective, and so too is $\alpha'$, by hypothesis; hence $\alpha$ is necessarily injective.
\end{env}

\begin{prop}[3.5.6]
\label{1.3.5.6}
Let $f:X\to Y$ and $g:Y\to Z$ be two morphisms of preschemes.
\begin{enumerate}[label=\emph{(\roman*)}]
  \item If $f$ and $g$ are radicial, then so too is $g\circ f$.
  \item Conversely, if $g\circ f$ is radicial, then so too is $f$.
\end{enumerate}
\end{prop}

\begin{proof}
\label{proof-1.3.5.6}
Taking into account Definition~\sref{1.3.5.4}, the proposition reduces to the corresponding claims for the maps $X(K)\to Y(K)\to Z(K)$, and these claims are evident.
\end{proof}

\begin{prop}[3.5.7]
\label{1.3.5.7}
\medskip\noindent
\begin{enumerate}[label=\emph{(\roman*)}]
  \item If the $S$-morphisms $f:X\to X'$ and $g:X\to X'$ are radicial, then so is $f\times_S g$.
  \item If the $S$-morphism $f:X\to Y$ is radicial, then so is $f_{(S')}:X_{(S')}\to Y_{(S')}$ for every extension $S'\to S$ of the base prescheme.
\end{enumerate}
\end{prop}

\begin{proof}
\label{proof-1.3.5.7}
Given \sref{1.3.5.1}, it suffices to prove (i).
We have seen \sref{1.3.4.2.1} that
\[
  (X\times_S Y)(K)=X(K)\times_{S(K)}Y(K),
\]
\[
  (X'\times_S Y')(K)=X'(K)\times_{S(K)}Y'(K),
\]
with the map $(X\times_S Y)(K)\to(X'\times_S Y')(K)$ corresponding to $f\times_S g$ thus being identified with $(u,v)\to(f\circ u,g\circ v)$, and the proposition then follows.
\end{proof}

\begin{prop}[3.5.8]
\label{1.3.5.8}
For a morphism $f=(\psi,\theta):X\to Y$ to be radicial, it is necessary and sufficient for $\psi$ to be injective and for the monomorphism $\theta^x:\kres(\psi(x))\to\kres(x)$ to make $\kres(x)$ a radicial extension of $\kres(\psi(x))$ for every $x\in X$.
\end{prop}

\begin{proof}
\label{proof-1.3.5.8}
We suppose that $f$ is radicial and first show that the equation $\psi(x_1)=\psi(x_2)=y$ necessarily implies that $x_1=x_2$.
Indeed, there exists a field $K$, and an extension of $\kres(y)$, along with $\kres(y)$-monomorphisms $\kres(x_1)\to K$ and $\kres(x_2)\to K$ (Bourbaki, \emph{Alg.}, chap.~V, ยง4, prop.~2); the corresponding morphisms $u_1:\Spec(K)\to X$ and $u_2:\Spec(K)\to X$ are then such that $f\circ u_1=f\circ u_2$, and so $u_1=u_2$ by hypothesis, and this implies, in particular, that $x_1=x_2$.
We now consider $\kres(x)$ as the extension of $\kres(\psi(x))$ by means of $\theta^x$: if $\kres(x)$ is not a radicial algebraically-closed extension, then there exist two distinct $\kres(\psi(x))$-monomorphisms from $\kres(x)$ to an algebraically-closed extension $K$ of $\kres(\psi(x))$, and the two corresponding morphisms $\Spec(K)\to X$ would contradict the hypothesis.
Conversely, taking \sref{1.2.4.6} into account, it is immediate that the conditions stated are sufficient for $f$ to be radicial.
\end{proof}

\begin{cor}[3.5.9]
\label{1.3.5.9}
If $A$ is a ring, and $S$ is a multiplicative set of $A$, then the canonical morphism $\Spec(S^{-1}A)\to\Spec(A)$ is radicial.
\end{cor}

\begin{proof}
\label{proof-1.3.5.9}
Indeed, this morphism is a monomorphism \sref{1.1.6.2}.
\end{proof}

\begin{cor}[3.5.10]
\label{1.3.5.10}
Let $f:X\to Y$ be a radicial morphism, $g:Y'\to Y$ a morphism, and $X'=X_{(Y')}=X\times_Y Y'$.
Then the radicial morphism $f_{(Y')}$ \sref{1.3.5.7}[ii] is a bijection from the underlying space of $X$ to $g^{-1}(f(X))$; further, for every field $K$, the set $X'(K)$ can be identified with the subset of $Y'(K)$ given by the inverse image of the map $Y'(K)\to Y(K)$ (corresponding to $g$) from the subset $X(K)$ of $Y(K)$.
\end{cor}

\begin{proof}
\label{proof-1.3.5.10}
The first claim follows from \sref{1.3.5.8} and \sref{1.3.4.8}; the second, from the commutativity of the following diagram:\oldpage[I]{117}
\[
  \xymatrix{
    X'(K)\ar[r]\ar[d] &
    Y'(K)\ar[d]\\
    X(K)\ar[r] &
    Y(K)
  }
\]
\end{proof}

\begin{rmk}[3.5.11]
\label{1.3.5.11}
We say that a morphism $f=(\psi,\theta)$ of preschemes is \emph{injective} if the map $\psi$ is injective.
For a morphism $f=(\psi,\theta):X\to Y$ to be radicial, it is necessary and sufficient that, for every morphism $Y'\to Y$, the morphism $f_{(Y')}:X_{(Y')}\to Y'$ be injective (which justifies the terminology of a \emph{universally injective} morphism).
In fact, the condition is necessary by \sref{1.3.5.7}[ii] and \sref{1.3.5.8}.
Conversely, the condition implies that $\psi$ is injective; if, for some $x\in X$, the monomorphism $\theta^x:\kres(\psi(x))\to\kres(x)$ were not radicial, then there would be an extension $K$ of $\kres(\psi(x))$, and two distinct morphisms $\Spec(K)\to X$ corresponding to the same morphism $\Spec(K)\to Y$ \sref{1.3.5.8}.
But then, setting $Y'=\Spec(K)$, there would be two distinct $Y'$-sections of $X_{(Y')}$ \sref{1.3.3.14}, which contradicts the hypothesis that $f_{(Y')}$ is injective.
\end{rmk}

\subsection{Fibres}
\label{subsection:fibres}

\begin{prop}[3.6.1]
\label{1.3.6.1}
Let $f:X\to Y$ be a morphism, $y$ a point of $Y$, and $\fk{a}_y$ an ideal of definition for $\OO_y$ for the $\fk{m}_y$-preadic topology.
Then the projection $p:X\times_Y\Spec(\OO_y/\fk{a}_y)\to X$ is a homeomorphism from the underlying space of the prescheme $X\times_Y\Spec(\OO_y/\fk{a}_y)$ to the fibre $f^{-1}(y)$ equipped with the topology induced from that of the underlying space of $X$.
\end{prop}

\begin{proof}
\label{proof-1.3.6.1}
Since $\Spec(\OO_y/\fk{a}_y)\to Y$ is radicial (\sref{1.3.5.4} and \sref{1.2.4.7}), since $\Spec(\OO_y/\fk{a}_y)$ is a single point, and since the ideal $\fk{m}_y/\fk{a}_y$ is nilpotent by hypothesis \sref{1.1.1.12}, we already know (\sref{1.3.5.10} and \sref{1.3.3.4}) that $p$ identifies, as \emph{sets}, the underlying space of $X\times_Y\Spec(\OO_y/\fk{a}_y)$ with $f^{-1}(y)$; everything reduces to proving that $p$ is a homeomorphism.
By \sref{1.3.2.7}, the question is local on $X$ and $Y$, and so we can suppose that $X=\Spec(B)$ and $Y=\Spec(A)$, with $B$ being an $A$-algebra.
The morphism $p$ then corresponds to the homomorphism $1\otimes\vphi:B\to B\otimes_A A'$, where $A'=A_y/\fk{a}_y$ and $\vphi$ is the canonical map from $A$ to $A'$.
Then every element of $B\otimes_A A'$ can be written as
\[
  \sum_i b_i\otimes\vphi(a_i)/\vphi(s)=\left(\sum_i(a_ib_i\otimes1)\right)(1\otimes\vphi(s))^{-1},
\]
where $s\not\in\fk{j}_y$, and Proposition~\sref{1.1.2.4} applies.
\end{proof}

\begin{env}[3.6.2]
\label{1.3.6.2}
Throughout the rest of this treatise, whenever we consider a fibre $f^{-1}(y)$ of a morphism as having the structure of a $\kres(y)$-prescheme, \emph{it will always be the prescheme obtained by transporting the structure of $X\times_Y\Spec(\kres(y))$ by the projection to $X$}.
We will also write this (latter) product as $X\times_Y\kres(y)$, or $X\otimes_{\OO_Y}\kres(y)$; more generally, if $B$ is an $\OO_y$-algebra, we will denote by $X\times_Y B$ or $X\otimes_{\OO_Y}B$ the product $X\times_Y\Spec(B)$.
\end{env}

With the preceding convention, it follows from \sref{1.3.5.10} that the points of $X$ with values in an extension $K$ of $\kres(y)$ are identified with the \emph{points of $f^{-1}(y)$ with values in $K$}.

\begin{env}[3.6.3]
\label{1.3.6.3}
Let $f:X\to Y$ and $g:Y\to Z$ be two morphisms, and $h=g\circ f$ their composition; for all $z\in Z$, the fibre $h^{-1}(z)$ is a prescheme isomorphic to
\[
  X\times_Z\Spec(\kres(z))=(X\times_Y Y)\times_Z\Spec(\kres(z))=X\times_Y g^{-1}(z).
\]
In\oldpage[I]{118} particular, if $U$ is an open subset of $X$, then the prescheme induced on $U\cap f^{-1}(y)$ by the prescheme $f^{-1}(y)$ is isomorphic to $f^{-1}_U(y)$ ($f_U$ being the restriction of $f$ to $U$),
\end{env}

\begin{prop}[3.6.4]
\label{1.3.6.4}
\emph{(Transitivity of fibres)}
Let $f:X\to Y$ and $g:Y'\to Y$ be morphisms; let $X'=X\times_Y Y'=X_{(Y')}$ and $f'=f_{(Y')}:X'\to Y'$.
For every $y'\in Y'$, if we let $y=g(y')$, then the prescheme $f'^{-1}(y')$ is isomorphic to $f^{-1}(y)\otimes_{\kres(y)}\kres(y')$.
\end{prop}

\begin{proof}
\label{proof-1.3.6.4}
Indeed, it suffices to remark that the two preschemes $(X\otimes_Y\kres(y))\otimes_{\kres(y)}\kres(y')$ and $(X\times_Y Y')\otimes_{Y'}\kres(y')$ are both canonically isomorphic to $X\times_Y\Spec(\kres(y'))$ by \sref{1.3.3.9.1}.
\end{proof}

In particular, if $V$ is an open neighborhood of $y$ in $Y$, and we denote by $f_V$ the restriction of $f$ to the induced prescheme on $f^{-1}(V)$, then the preschemes $f^{-1}(y)$ and $f^{-1}_V(y)$ are canonically identified.

\begin{prop}[3.6.5]
\label{1.3.6.5}
Let $f:X\to Y$ be a morphism, $y$ a point of $Y$, $Z$ the local prescheme $\Spec(\OO_y)$, and $p=(\psi,\theta)$ the projection $X\times_Y Z\to X$; then $p$ is a homeomorphism from the underlying space of $X\times_Y Z$ to the subspace $f^{-1}(Z)$ of $X$ (\emph{when the underlying space of $Z$ is identified with a subspace of $Y$, cf.~\sref{1.2.4.2}}), and, for all $t\in X\times_Y Z$, letting $z=\psi(t)$, we have that $\theta_t^\sharp$ is an isomorphism from $\OO_x$ to $\OO_t$.
\end{prop}

\begin{proof}
\label{proof-1.3.6.5}
Since $Z$ (identified as a subspace of $Y$) is contained inside every affine open containing $y$ \sref{1.2.4.2}, we can, as in \sref{1.3.6.1}, reduce to the case where $X=\Spec(A)$ and $Y=\Spec(B)$ are affine schemes, with $A$ being a $B$-algebra.
Then $X\times_Y Z$ is the prime spectrum of $A\otimes_B B_y$, and this ring is canonically identified with $S^{-1}A$, where $S$ is the image of $B\setmin\fk{j}_y$ in $A$ \sref[0]{0.1.5.2}; since $p$ then corresponds to the canonical homomorphism $A\to S^{-1}A$, the proposition follows from \sref{1.1.6.2}.
\end{proof}

\subsection{Application: reduction of a prescheme mod.~$\mathfrak{J}$}
\label{subsection:reduction-of-a-prescheme}

\emph{This section, which makes use of notions and results from Chapter~I and Chapter~II, will not be used in what follows in this treatise, and is only intended for readers familiar with classical algebraic geometry}.

\begin{env}[3.7.1]
\label{1.3.7.1}
Let $A$ be a ring, $X$ an $A$-prescheme, and $\fk{J}$ an ideal of $A$; then $X_0=X\otimes_A(A/\fk{J})$ is an $(A/\fk{J})$-prescheme, which we sometimes say is induced from $X$ by \emph{reduction} mod.~$\fk{J}$.
\end{env}

\begin{env}
\label{1.3.7.2}
This terminology is used foremost when $A$ is a \emph{local ring} and $\fk{J}$ its maximal ideal, in such a way that $X_0$ is a prescheme over the residue field $k=A/\fk{J}$ of $A$.

When $A$ is also integral, with field of fractions $K$, we can consider the $K$-prescheme $X'=X\otimes_A K$.
By an abuse of language which we will not use, it has been said, up until now, that $X_0$ is \emph{induced by $X'$} by reduction mod.~$\fk{J}$.
In the case where this language was used, $A$ was a local ring of dimension~$1$ (most often a discrete valuation ring) and it was implied (be it more or less explicitly) that the given $K$-prescheme $X'$ was a closed subprescheme of a $K$-prescheme $P'$ (in fact, a projective space \unsure{of the form} $\bb{P}_K^r$, cf. \sref[II]{2.4.1.1}), itself of the form $P'=P\otimes_A K$, where $P$ is a given $A$-prescheme (in fact, the $A$-scheme $\bb{P}_A^r$, with the notation of \sref[II]{2.4.1.1}).
In our language, the definition of $X_0$ in terms of $X'$ is formulated as follows:

We consider the affine scheme $Y=\Spec(A)$, formed of two points, the unique closed point
\oldpage[I]{119}
$y=\fk{J}$ and the generic point $(0)$, the singleton set $U$ of the generic point being thus an open $U=\Spec(K)$ in $Y$.
If $X$ is an $A$-prescheme (or, in other words, a $Y$-prescheme), then $X\otimes_A K=X'$ is exactly the prescheme induced by $X$ on $\psi^{-1}(U)$, denoting by $\psi$ the structure morphism $X\to Y$.
In particular, if $\vphi$ is the structure morphism $P\to Y$, then a closed subprescheme $X'$ of $P'=\vphi^{-1}(U)$ is a (locally closed) subprescheme of $P$.
If $P$ is Noetherian (for example, if $A$ is Noetherian and $P$ is of finite type over $A$), then there exists a smaller closed subprescheme $X=\overline{X'}$ of $G$ that through which $X'$ factors \sref{1.9.5.10}, and $X'$ is the prescheme induced by $X$ on the open $\vphi^{-1}(U)\cap X$, and so is isomorphic to $X\otimes_A K$ \sref{1.9.5.10}.
\emph{The immersion of $X'$ into $P'=P\otimes_A K$ thus lets us canonically consider $X'$ as being of the form $X'=X\otimes_A K$, where $X$ is an $A$-prescheme.}
We can then consider the reduced mod.~$\fk{J}$ prescheme $X_0=X\otimes_A k$, which is exactly the fibre $\psi^{-1}(y)$ of the closed point $y$.
Up until now, lacking the adequate terminology, we had avoided explicitly introducing the $A$-prescheme $X$.
One ought to, however, note that all the claims normally made about the ``reduced mod.~$\fk{J}$'' prescheme  $X_0$ should be seen as consequences of more complicated claims about $X$ itself, and cannot be satisfactorily formulated or understood except by interpreting them as such.
It seems also that any hypotheses made on $X_0$ always reduce to hypotheses on $X$ itself (independent of the prior data of an immersion of $X'$ in $\bb{P}_K^r$), which lets us give more intrinsic statements.
\end{env}

\begin{env}[3.7.3]
\label{1.3.7.3}
Lastly, we draw attention to a very particular fact, which has undoubtedly contributed to slowing the conceptual clarification of the situation envisaged here: if $A$ is a discrete valuation ring, and if $X$ is \emph{proper} over $A$ (which is indeed the case if $X$ is a closed subprescheme of some $\bb{P}_A^r$, cf. \sref[II]{2.5.5.4}), then the points of $X$ with values in $A$ and the points of $X'$ with values in $k$ are in bijective correspondence \sref[II]{2.7.3.8}.
This is why we often believe that facts about $X'$ have been proved, when in reality we have proved facts about $X$, and these remain valuable (in this form) whenever we no longer suppose that the base local ring is of dimension~$1$.
\end{env}


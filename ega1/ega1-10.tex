\section{Formal schemes}
\label{section:formal-schemes}

\subsection{Formal affine schemes}
\label{subsection:formal-affine-schemes}

\begin{env}[10.1.1]
\label{1.10.1.1}
Let $A$ be an \emph{admissible} topological ring \sref[0]{0.7.1.2}; for each ideal of definition $\fk{J}$ of $A$, $\Spec(A/\fk{J})$ identifies with the closed subspace $V(\fk{J})$ of $\Spec(A)$ \sref{1.1.1.11}, the set of \emph{open} prime ideals of $A$; this topological space does not depend
\oldpage[I]{181}
on the ideal of definition $\fk{J}$ considered; we denote this topological space by $\fk{X}$. Let $(\fk{J}_\lambda)$ be a fundamental system of neighborhoods of $0$ in $A$, consisting of ideals of definition, and for each $\lambda$, let $\OO_\lambda$ be the structure sheaf of $\Spec(A/\fk{J}_\lambda)$; this sheaf is induced on $\fk{X}$ by $\wt{A}/\wt{\fk{J}_\lambda}$ (which is zero outside of $\fk{X}$).
For $\fk{J}_\mu\subset\fk{J}_\lambda$, the canonical homomorphism $A/\fk{J}_\mu\to A/\fk{J}_\lambda$ thus defines a homomorphism $u_{\lambda\mu}:\OO_\mu\to\OO_\lambda$ of sheaves of rings \sref{1.1.6.1}, and $(\OO_\lambda)$ is a \emph{projective system of sheaves of rings} for these homomorphisms.
As the topology of $\fk{X}$ admits a basis consisting of quasi-compact open subsets, we can associate to each $\OO_\lambda$ a \emph{pseudo-discrete sheaf of topological rings} \sref[0]{0.3.8.1} which have $\OO_\lambda$ as the underlying (without topology) sheaf of rings, and that we denote also by $\OO_\lambda$; and the $\OO_\lambda$ give again a \emph{projective system of sheaves of topological rings} \sref[0]{0.3.8.2}.
We denote by $\OO_\fk{X}$ the \emph{sheaf of topological rings} on $\fk{X}$, the projective limit of the system $(\OO_\lambda)$; for each \emph{quasi-compact} open subset $U$ of $\fk{X}$, $\Gamma(U,\OO_\fk{X})$ is a topological ring, the projective limit of the system of \emph{discrete} rings $\Gamma(U,\OO_\lambda)$ \sref[0]{0.3.2.6}.
\end{env}

\begin{defn}[10.1.2]
\label{1.10.1.2}
Given an admissible topological ring $A$, we define the formal spectrum of $A$, and denote it by $\Spf(A)$, to be the closed subspace $\fk{X}$ of $\Spec(A)$ consisting of the open prime ideals of $A$.
We say that a topologically ringed space is a formal affine scheme if it is isomorphic to a formal spectrum $\Spf(A)=\fk{X}$ equipped with a sheaf of topological rings $\OO_\fk{X}$ which is the projective limit of sheaves of psuedo-discrete topological rings $(\wt{A}/\wt{\fk{J}_\lambda})|\fk{X}$, where $\fk{J}_\lambda$ varies over the filtered set of ideals of definition for $A$.
\end{defn}

When we speak of a \emph{formal spectrum $\fk{X}=\Spf(A)$} as a formal affine scheme, it will always be as the topologically ringed space $(\fk{X},\OO_\fk{X})$ where $\OO_\fk{X}$ is defined as above.

We note that every \emph{affine scheme} $X=\Spec(A)$ can be considered as a formal affine scheme in only one way, by considering $A$ as a discrete topological ring: the topological rings $\Gamma(U,\OO_X)$ are then discrete whenever $U$ is quasi-compact (but not, in general, when $U$ is an arbitrary open subset of $X$).

\begin{prop}[10.1.3]
\label{1.10.1.3}
If $\fk{X}=\Spf(A)$, where $A$ is an admissible ring, then $\Gamma(\fk{X},\OO_X)$ is topologically isomorphic to $A$.
\end{prop}

\begin{proof}
\label{proof-1.10.1.3}
Indeed, since $\fk{X}$ is closed in $\Spec(A)$, it is quasi-compact, and so $\Gamma(\fk{X},\OO_\fk{X})$ is topologically isomorphic to the projective limit of the discrete rings $\Gamma(\fk{X},\OO_\lambda)$; but $\Gamma(\fk{X},\OO_\lambda)$ is isomorphic to $A/\fk{J}_\lambda$ \sref{1.1.3.7}; since $A$ is separated and complete, it is topologically isomorphic to $\varprojlim A/\fk{J}_\lambda$ \sref[0]{0.7.2.1}, whence the proposition.
\end{proof}

\begin{prop}[10.1.4]
\label{1.10.1.4}
Let $A$ be an admissible ring, $\fk{X}=\Spf(A)$, and, for every $f\in A$, let $\fk{D}(f)=D(f)\cap\fk{X}$; then the topologically ringed space $(\fk{D}(f),\OO_\fk{X}|\fk{D}(f))$ is isomorphic to the formal affine spectrum $\Spf(A_{\{f\}}$ \sref[0]{0.7.6.15}.
\end{prop}

\begin{proof}
\label{proof-1.10.1.4}
For every ideal of definition $\fk{J}$ of $A$, the discrete ring $S_f^{-1}A/ S_f^{-1}\fk{J}$ is canonically identified with $A_{\{f\}}/\fk{J}_{\{f\}}$ \sref[0]{0.7.6.9}, so, by \sref{1.1.2.5} and \sref{1.1.2.6}, the topological space $\Spf(A_{\{f\}})$ is canonically identified with $\fk{D}(f)$.
Further, for every quasi-compact open subset $U$ of $\fk{X}$ contained in $\fk{D}(f)$, $\Gamma(U,\OO_\lambda)$ can be identified with the module of sections of the structure sheaf of $\Spec(S_f^{-1}A/ S_f^{-1}\fk{J}_\lambda)$ over $U$ \sref{1.1.3.6}, so, setting $\fk{Y}=\Spf(A_{\{f\}})$, $\Gamma(U,\OO_\fk{X})$ can be identified with the module of sections $\Gamma(U,\OO_\fk{Y})$, which proves the proposition.
\end{proof}

\begin{env}[10.1.5]
\label{1.10.1.5}
As a sheaf of rings \emph{without topology}, the structure sheaf $\OO_\fk{X}$ of $\Spf(A)$ admits, for every $x\in\fk{X}$, a fibre which, by \sref{1.10.1.4}, can be identified with the inductive limit $\varinjlim A_{\{f\}}$ for the $f\not\in\fk{j}_x$.
Then, by \sref[0]{0.7.6.17} and \sref[0]{0.7.6.18}:
\end{env}

\begin{prop}[10.1.6]
\label{1.10.1.6}
For every $x\in\fk{X}=\Spf(A)$, the fibre $\OO_x$ is a local ring whose residue field is isomorphic to $\kres(x)=A_x/\fk{j}_xA_x$.
If, further, $A$ is adic and Noetherian, then $\OO_x$ is a Noetherian ring.
\end{prop}

Since $\kres(x)$ is not reduced at $0$, we conclude from this result that the \emph{support} of the ring of sheaves $\OO_\fk{X}$ is \emph{equal to $\fk{X}$}.

\subsection{Morphisms of formal affine schemes}
\label{subsection:morphisms-of-formal-affine-schemes}

\begin{env}[10.2.1]
\label{1.10.2.1}
Let $A$, $B$ be two admissible rings, and let $\vphi:B\to A$ be a \emph{continuous} morphism.
The continuous map ${}^a\vphi:\Spec(A)\to\Spec(B)$ \sref{1.1.2.1} then maps $\fk{X}=\Spf(A)$ to $\fk{Y}=\Spf(B)$, since the inverse image under $\vphi$ of an open prime ideal of $A$ is an open prime ideal of $B$.
On the other hand, for all $g\in B$, $\vphi$ defines a continuous homomorphism $\Gamma(\fk{D}(g),\OO_\fk{Y})\to\Gamma(\fk{D}(\vphi(g)),\OO_\fk{X})$ according to \sref{1.10.1.4}, \sref{1.10.1.3}, and \sref[0]{0.7.6.7}; as these homomorphisms satisfy the compatibility conditions for the restrictions corresponding to the change from $g$ to a multiple of $g$, and as $\fk{D}(\vphi(g))={}^a\vphi^{-1}(\fk{D}(g))$, they define a \emph{continuous} homomorphisms of sheaves of topological rings $\OO_\fk{Y}\to{}^a\vphi_*(\OO_\fk{X})$ \sref[0]{0.3.2.5}, that we denote by $\wt{\vphi}$; we have thus defined a morphism $\Phi=({}^a\vphi,\wt{\vphi})$ of topologically ringed spaces $\fk{X}\to\fk{Y}$.
We note that as a homomorphism of sheaves without topology, $\wt{\vphi}$ defines a homomorphism $\wt{\vphi}_x^\sharp:\OO_{{}^a\vphi(x)}\to\OO_x$ on the stalks, for all $x\in\fk{X}$.
\end{env}

\begin{prop}[10.2.2]
\label{1.10.2.2}
Let $A$, $B$ be two admissible topological rings, and let $\fk{X}=\Spf(A)$, $\fk{Y}=\Spf(B)$.
For a morphism $u=(\psi,\theta):\fk{X}\to\fk{Y}$ of topologically ringed spaces to be of the form $({}^a\vphi,\wt{\vphi})$, where $\vphi$ is a continuous ring homomorphism $B\to A$, it is necessary and sufficient that for all $x\in\fk{X}$, $\theta_x^\sharp$ is a local homomorphism $\OO_{\vphi(x)}\to\OO_x$.
\end{prop}

\begin{proof}
\label{proof-1.10.2.2}
The condition is necessary: let $\fk{p}=\fk{j}_x\in\Spf(A)$, and let $\fk{q}=\vphi^{-1}(\fk{j}_x)$; if $g\not\in\fk{q}$, then we have $\vphi(g)\not\in\fk{p}$, and it is immediate that the homomorphism
$B_{\{g\}}\to A_{\{\vphi(g)\}}$ induced by $\vphi$ \sref[0]{0.7.6.7} sends $\fk{q}_{\{g\}}$ to a subset of $\fk{p}_{\{\vphi(g)\}}$; by passing to the inductive limit, we see (taking into account \sref{1.10.1.5} and \sref[0]{0.7.6.17}) that $\wt{\vphi}_x^\sharp$ is a local homomorphism.

Conversely, let $(\psi,\theta)$ be a morphism satisying the condition in the statement; according to \sref{1.10.1.3}, $\theta$ defines a continuous ring homomorphism
\[
  \vphi=\Gamma(\theta):B=\Gamma(\fk{Y},\OO_\fk{Y})\to\Gamma(\fk{X},\OO_\fk{X})=A.
\]
By virtue of the hypothesis on $\theta$, for the section $\vphi(g)$ of $\OO_\fk{X}$ over $\fk{X}$ to be an invertible germ at the point $x$, it is necessary and sufficient that $g$ is an invertible germ at the point $\psi(x)$.
But according to \sref[0]{0.7.6.17}, the sections of $\OO_\fk{X}$ (resp. $\OO_\fk{Y}$) over $\fk{X}$ (resp. $\OO_\fk{Y}$) whose germ is not invertible at the point $x$ (resp. $\psi(x)$) are exactly the elements of
$\fk{j}_x$
\oldpage[I]{183}
(resp. $\fk{j}_{\psi(x)}$); the above remark thus shows that ${}^a\vphi=\psi$.
Finally, for all $g\in B$ the diagram
\[
  \xymatrix{
    B=\Gamma(\fk{Y},\OO_\fk{Y})\ar[r]^\vphi\ar[d] &
    \Gamma(\fk{X},\OO_\fk{X})=A\ar[d]\\
    B_{\{g\}}=\Gamma(\fk{D}(g),\OO_\fk{Y})\ar[r]^{\Gamma(\theta_{\fk{D}(g)})} &
    \Gamma(\fk{D}(\vphi(g)),\OO_\fk{X})=A_{\{\vphi(g)\}}
  }
\]
is commutative; by the universal property of completed rings of fractions \sref[0]{0.7.6.6}, $\theta_{\fk{D}(g)}$ is equal to $\wt{\vphi}_{\fk{D}(g)}$ for all $g\in B$, so \sref[0]{0.3.2.5} we have $\theta=\wt{\vphi}$.
\end{proof}

We say that a morphism $(\psi,\theta)$ of topologically ringed spaces satisfying the condition of Proposition \sref{1.10.2.2} is a \emph{morphism of formal affine schemes}.
We can say that the functors $\Spf(A)$ in $A$ and $\Gamma(\fk{X},\OO_\fk{X})$ in $\fk{X}$ define an \emph{equivalence} between the cateory of admissible rings and the opposite category of formal affine schemes (T, I, 1.2).

\begin{env}[10.2.3]
\label{1.10.2.3}
As a particular case of \sref{1.10.2.2}, note that for $f\in A$, the canonical injection of the formal affine scheme induced by $\fk{X}$ on $\fk{D}(f)$ corresponds to the continuous canonical homomorphism $A\to A_{\{f\}}$.
Under the hypotheses of Proposition \sref{1.10.2.2}, let $h$ be an element of $B$, $g$ an element of $A$, multiple of $\vphi(h)$; we then have $\psi(\fk{D}(g))\subset\fk{D}(h)$; the restriction of $u$ to $\fk{D}(g)$, considered as a morphism from $\fk{D}(g)$ to $\fk{D}(h)$, is the unique morphism $v$ making the diagram
\[
  \xymatrix{
    \fk{D}(g)\ar[r]^v\ar[d] &
    \fk{D}(h)\ar[d]\\
    \fk{X}\ar[r]^u &
    \fk{Y}
  }
\]
commutative.

This morphism corresponds to the unique continuous homomorphism $\vphi':B_{\{h\}}\to A_{\{g\}}$ \sref[0]{0.7.6.7} making the diagram
\[
  \xymatrix{
    A\ar[d] &
    B\ar[l]_\vphi\ar[d]\\
    A_{\{g\}} &
    B_{\{h\}}\ar[l]_{\vphi'}
  }
\]
commutative.
\end{env}

\subsection{Ideals of definition for a formal affine scheme}
\label{subsection:ideals-of-definition-formal}

\begin{env}[10.3.1]
\label{1.10.3.1}
Let $A$ be an admissible ring, $\fk{J}$ an open ideal of $A$, $\fk{X}$ the formal affine scheme $\Spf(A)$.
Let $(\fk{J}_\lambda)$ be the set of the ideals of definition for $A$ contained in $\fk{J}$; then $\wt{\fk{J}}/\wt{\fk{J}}_\lambda$ is a sheaf of ideals of $\wt{A}/\wt{\fk{J}}_\lambda$.
Denote by $\fk{J}^\Delta$ the projective limit of the induced sheaves on $\fk{X}$ by $\wt{\fk{J}}/\wt{\fk{J}}_\lambda$, which identifies with a \emph{sheaf of ideals} of $\OO_\fk{X}$ \sref[0]{0.3.2.6}.
For every $f\in A$, $\Gamma(\fk{D}(f),\fk{J}^\Delta)$ is the projective limit of the $S_f^{-1}\fk{J}/S_f^{-1}\fk{J}_\lambda$, in other words, it identifies with the open ideal $\fk{J}_{\{f\}}$ of the ring $A_{\{f\}}$ \sref[0]{0.7.6.9}, and in particular $\Gamma(\fk{X},\fk{J}^\Delta)=\fk{J}$; we conclude (the $\fk{D}(f)$ forming a basis for the topology of $\fk{X}$) that we have
\[
  \fk{J}^\Delta|\fk{D}(f)=(\fk{J}_{\{f\}})^\Delta.
  \tag{10.3.1.1}
\]
\end{env}

\begin{env}[10.3.2]
\label{1.10.3.2}
\oldpage[I]{184}
With the notation of \sref{1.10.3.1}, for all $f\in A$, the canonical map from $A_{\{f\}}=\Gamma(\fk{D}(f),\OO_\fk{X})$ to $\Gamma(\fk{D}(f),(\wt{A}/\wt{\fk{J}})|\fk{X})=S_f^{-1}A/S_f^{-1}\fk{J}$ is \emph{surjective} and has for its kernel $\Gamma(\fk{D}(f),\fk{J}^\Delta)=\fk{J}_{\{f\}}$ \sref[0]{0.7.6.9}; these maps thus define a \emph{surjective} continuous homomorphism, said to be \emph{canonical}, from the sheaf of topological rings $\OO_\fk{X}$ to the sheaf of discrete rings $(\wt{A}/\wt{\fk{J}})|\fk{X}$, whose kernel is $\fk{J}^\Delta$; this homomorphism is none other than $\wt{\vphi}$ \sref{1.10.2.1}, where $\vphi$ is the continuous homomorphism $A\to A/\fk{J}$; the morphism $({}^a\vphi,\wt{\vphi}):\Spec(A/\fk{J})\to\fk{X}$ of formal affine schemes (where ${}^a\vphi$ is the identity homeomorphism from $\fk{X}$ to itself) is also called \emph{canonical}.
We thus have, according to the above, a \emph{canonical isomorphism}
\[
  \OO_\fk{X}/\fk{J}^\Delta\isoto(\wt{A}/\wt{\fk{J}})|\fk{X}.
  \tag{10.3.2.1}
\]

It is clear (since $\Gamma(\fk{X},\fk{J}^\Delta)=\fk{J}$) that the map $\fk{J}\to\fk{J}^\Delta$ is \emph{strictly increasing}; according to the above, for $\fk{J}\subset\fk{J}'$, the sheaf ${\fk{J}'}^\Delta/\fk{J}^\Delta$ is canonically isomorphic to $\wt{\fk{J}'}/\wt{\fk{J}}=(\fk{J}'/\fk{J})^\sim$.
\end{env}

\begin{env}[10.3.3]
\label{1.10.3.3}
The hypotheses and notation being the same as those of \sref{1.10.3.1}, we say that a sheaf of ideals $\sh{J}$ of $\OO_\fk{X}$ is a \emph{sheaf of ideals of definition} for $\fk{X}$ (or an \emph{ideal sheaf of definition} for $\fk{X}$) if, for all $x\in\fk{X}$, there exists an open neighborhood of $x$ of the form $\fk{D}(f)$, where $f\in A$, such that $\sh{J}|\fk{D}(f)$ is of the form $\fk{H}^\Delta$, where $\fk{H}$ is an ideal of definition for $A_{\{f\}}$.
\end{env}

\begin{prop}[10.3.4]
\label{1.10.3.4}
For all $f\in A$, each sheaf of ideals of definition for $\fk{X}$ induces a sheaf of ideals of definition for $\fk{D}(f)$.
\end{prop}

\begin{proof}
\label{proof-1.10.3.4}
This follows from (10.3.1.1).
\end{proof}

\begin{prop}[10.3.5]
\label{1.10.3.5}
If $A$ is an admissible ring, then every sheaf of ideals of definition for $\fk{X}=\Spf(A)$ is of the form $\fk{J}^\Delta$, where $\fk{J}$ is an ideal of definition for $A$, uniquely determined.
\end{prop}

\begin{proof}
\label{proof-1.10.3.5}
Let $\sh{J}$ be a sheaf of ideals of definition of $\fk{X}$; by hypothesis, and since $\fk{X}$ is quasi-compact, there is a finite number of elements $f_i\in A$ such that the $\fk{D}(f_i)$ cover $\fk{X}$ and that $\sh{J}|\fk{D}(f_i)=\fk{H}_i^\Delta$, where $\fk{H}_i$ is an ideal of definition for $A_{\{f_i\}}$.
For each $i$, there exists an open ideal $\fk{K}_i$ of $A$ such that $(\fk{K}_i)_{\{f_i\}}=\fk{H}_i$ \sref[0]{0.7.6.9}; let $\fk{K}$ be an ideal of definition for $A$ containing all the $\fk{K}_i$.
The canonical image of $\sh{J}/\fk{K}^\Delta$ in the structure sheaf $(A/\fk{K})^\sim$ of $\Spec(A/\fk{K})$ \sref{1.10.3.2} is thus such that its restriction to $\fk{D}(f_i)$ is equal to its restriction to $(\fk{K}_i/\fk{K})^\sim$;
we conclude that this canonical image is a \emph{quasi-coherent} sheaf on $\Spec(A/\fk{K})$, so it is of the form $(\fk{J}/\fk{K})^\sim$, where $\fk{J}$ is an ideal of definition for $A$ containing $\fk{K}$ \sref{1.1.4.1} hence $\sh{J}=\fk{J}^\Delta$ \sref{1.10.3.2};
in addition, as for each $i$ there exists an integer $n_i$ such that $\fk{H}_i^{n_i}\subset\fk{K}_{\{f_i\}}$, we will have, by setting $n$ to be the largest of the $n_i$, $(\sh{J}/\fk{K}^\Delta)^n=0$, and as a result \sref{1.10.3.2} $((\fk{J}/\fk{K})^\sim)^n=0$, so finally $(\fk{J}/\fk{K})^n=0$ \sref{1.1.3.13}, which prove that $\fk{J}$ is an ideal of definition for $A$ \sref[0]{0.7.1.4}.
\end{proof}

\begin{prop}[10.3.6]
\label{1.10.3.6}
Let $A$ be an adic ring, $\fk{J}$ an ideal of definition for $A$ such that $\fk{J}/\fk{J}^2$ is an $(A/\fk{J})$-module of finite type. For any integer $n>0$, we then have $(\fk{J}^\Delta)^n=(\fk{J}^n)^\Delta$.
\end{prop}

\begin{proof}
\label{proof-1.10.3.6}
For all $f\in A$, we have (since $\fk{J}^n$ is an open ideal)
\[
  (\Gamma(\fk{D}(f),\fk{J}^\Delta))^n=(\fk{J}_{\{f\}})^n=(\fk{J}^n)_{\{f\}}=\Gamma(\fk{D}(f^n),(\fk{J}^n)^\Delta)
\]
\oldpage[I]{185}
according to (10.3.1.1) and \sref[0]{0.7.6.12}.
As $(\fk{J}^\Delta)^n$ is associated to the presheaf $U\mapsto(\Gamma(U,\fk{J}^\Delta))^n$ \sref[0]{0.4.1.6}, the result follows, since the $\fk{D}(f)$ form a basis for the topology of $\fk{X}$.
\end{proof}

\begin{env}[10.3.7]
\label{1.10.3.7}
We say that a family $(\sh{J}_\lambda)$ of sheaves of ideals of definition for $\fk{X}$ is a \emph{fundamental system of sheaves of ideals of definition} if each sheaf of ideals of definition for $\fk{X}$ contains one of the $\sh{J}_\lambda$; as $\sh{J}_\lambda=\fk{J}_\lambda^\Delta$, it is equivalent to say that the $\fk{J}_\lambda$ for a \emph{fundamental system of neighborhoods of $0$} in $A$.
Let $(f_\alpha)$ be a family of elements of $A$ such that the $\fk{D}(f_\alpha)$ cover $\fk{X}$.
If $(\sh{J}_\lambda)$ is a filtered decreasing family of sheaves of ideals of $\OO_\fk{X}$ such that for each $\alpha$, the family $(\sh{J}_\lambda|\fk{D}(f_\alpha))$ is a fundamental system of sheaves of ideals of definition for $\fk{D}(f_\alpha)$, then $(\sh{J}_\lambda)$ is a fundamental system of sheaves of ideals of definition for $\fk{X}$.
Indeed, for each sheaf of ideals of definition $\sh{J}$ for $\fk{X}$, there is a finite cover of $\fk{X}$ by $\fk{D}(f_i)$ such that, for each $i$, $\sh{J}_{\lambda_i}|\fk{D}(f_i)$ is a sheaf of ideals of definition for $\fk{D}(f_i)$ contained in $\sh{J}|\fk{D}(f_i)$.
If $\mu$ is an index such that $\sh{J}_\mu\subset\sh{J}_{\lambda_i}$ for all $i$, then it follows from \sref{1.10.3.3} that $\sh{J}_\mu$ is a sheaf of ideals of definition for $\fk{X}$, evidently contained in $\sh{J}$, hence our assertion.
\end{env}

\subsection{Formal preschemes and morphisms of formal preschemes}
\label{subsection:formal-preschemes-and-morphisms}

\begin{env}[10.4.1]
\label{1.10.4.1}
Given a topologically ringed space $\fk{X}$, we say that an open $U\subset\fk{X}$ is an \emph{formal affine open} (resp. an \emph{formal adic affine open}, resp. an \emph{formal Noetherian affine open}) if the topologically ringed space induced on $U$ by $\fk{X}$ is a formal affine scheme (resp. a scheme whose ring is adic, resp. adic and Noetherian).
\end{env}

\begin{defn}[10.4.2]
\label{1.10.4.2}
A \emph{formal prescheme} is a topologically ringed spacd $\fk{X}$ which admits a formal affine open neighborhood for each point.
We say that the formal prescheme $\fk{X}$ is adic (resp. locally Noetherian) if each point of $\fk{X}$ admits a formal adic (resp. Noetherian) open neighborhood.
We say that $\fk{X}$ is Noetherian if it is locally Noetherian and if its underlying space is quasi-compact (hence Noetherian).
\end{defn}

\begin{prop}[10.4.3]
\label{1.10.4.3}
If $\fk{X}$ is a formal prescheme (resp. a locally Noetherian formal prescheme), then the formal affine (resp. Noetherian affine) open sets form a basis for the topology of $\fk{X}$.
\end{prop}

\begin{proof}
\label{proof-1.10.4.3}
This follows from Definition \sref{1.10.4.2} and Proposition \sref{1.10.1.4} by taking into account that if $A$ is an adic Noetherian ring, then so if $A_{\{f\}}$ for all $f\in A$ \sref[0]{0.7.6.11}.
\end{proof}

\begin{cor}[10.4.4]
\label{1.10.4.4}
If $\fk{X}$ is a formal prescheme (resp. a locally Noetherian formal prescheme, resp. a Noetherian formal prescheme), then the topologically ringed space induced on each open set of $\fk{X}$ a formal prescheme (resp. a locally Noetherian formal prescheme, resp. a Noetherian formal prescheme).
\end{cor}

\begin{defn}[10.4.5]
\label{1.10.4.5}
Given two formal preschemes $\fk{X}$ and $\fk{Y}$, a morphism (of formal preschemes) from $\fk{X}$ to $\fk{Y}$ is a morphism $(\psi,\theta)$ of topologically ringed spaces such that, for all $x\in\fk{X}$, $\theta_x^\sharp$ is a local homomorphism $\OO_{\psi(x)}\to\OO_x$.
\end{defn}

It is immediate that the composition of any two morphisms of formal preschemes is again a morphism of formal preschemes; the formal preschemes thus form a \emph{category}, and we denote by $\Hom(\fk{X},\fk{Y})$ the set of morphisms from a formal prescheme $\fk{X}$ to a formal prescheme $\fk{Y}$.

\oldpage[I]{186}
If $U$ is an open subset of $\fk{X}$, then the canonical injection into $\fk{X}$ of the formal prescheme induced on $U$ by $\fk{X}$ is a morphism of formal preschemes (and similarly a \emph{momomorphism} of topologically ringed spaces \sref[0]{0.4.1.1}).

\begin{prop}[10.4.6]
\label{1.10.4.6}
Let $\fk{X}$ be a formal prescheme, $\fk{S}=\Spf(A)$ a formal affine scheme.
There exists a canonical bijective equivalence between the morphisms from a formal prescheme $\fk{X}$ to the formal prescheme $\fk{S}$ and the continuous homomorphisms from the ring $A$ to the topological ring $\Gamma(\fk{X}.\OO_\fk{X})$.
\end{prop}

\begin{proof}
\label{proof-1.10.4.6}
The proof is similar to that of \sref{1.2.2.4}, by replacing ``homomorphism'' by ``continuous homomorphism'', ``affine open'' by ``formal affine open'', and by using Proposition \sref{1.10.2.2} instead of Theorem \sref{1.1.7.3}; we leave the details to the reader.
\end{proof}

\begin{env}[10.4.7]
\label{1.10.4.7}
Given a formal prescheme $\fk{S}$, we say that the data of a formal prescheme $\fk{X}$ and a morphism $\vphi:\fk{X}\to\fk{S}$ defines a formal prescheme \emph{$\fk{X}$ over $\fk{S}$} or an \emph{formal $\fk{S}$-prescheme}, $\vphi$ being called the \emph{structure morphism} of the $\fk{S}$-prescheme $\fk{X}$.
If $\fk{S}=\Spf(A)$, where $A$ is an admissible ring, then we also say that the formal $\fk{S}$-prescheme $\fk{X}$ is a \emph{formal $A$-prescheme} or a formal prescheme \emph{over $A$}.
An arbitrary formal prescheme can be considered as a formal prescheme over $\bb{Z}$ (equipped with the discrete topology).

If $\fk{X}$ and $\fk{Y}$ are two formal $\fk{S}$-preschemes, we say that a morphism $u:\fk{X}\to\fk{Y}$ is a \emph{$\fk{S}$-morphism} if the diagram
\[
  \xymatrix{
    \fk{X}\ar[rr]^u\ar[rd] & &
    \fk{Y}\ar[ld]\\
    & \fk{S}
  }
\]
(where the downwards arrows are the structure morphisms) is commutative.
With this definition, the formal $\fk{S}$-preschemes (for $\fk{S}$ fixed) forms a \emph{category}.
We denote by $\Hom_\fk{S}(\fk{X},\fk{Y})$ the set of $\fk{S}$-morphisms from a formal $\fk{S}$-prescheme $\fk{X}$ to a formal $\fk{S}$-prescheme $\fk{Y}$.
When $\fk{S}=\Spf(A)$, we also say \emph{$A$-morphism} instead of \emph{$\fk{S}$-morphism}.
\end{env}

\begin{env}[10.4.8]
\label{1.10.4.8}
As each affine scheme can be considered as a formal affine scheme \sref{1.10.1.2}, each (usual) prescheme can be considered as a formal prescheme.
In addition, it follows from Definition \sref{1.10.4.5} that for the \emph{usual} preschemes, the morphisms (resp. $S$-morphisms) of \emph{formal} preschemes coincide with the morphisms (resp. $S$-morphisms) defined in \textsection2.
\end{env}

\subsection{Sheaves of ideals of definition for formal preschemes}
\label{subsection:sheaves-of-ideals-of-definition-formal-preschemes}

\begin{env}[10.5.1]
\label{1.10.5.1}
Let $\fk{X}$ be a formal prescheme; we say that an $\OO_\fk{X}$-ideal $\sh{J}$ is a \emph{sheaf of ideals of definition} (or an \emph{ideal sheaf of definition}) for $\fk{X}$ if every $x\in\fk{X}$ has a formal affine open neighborhood $U$ such that $\sh{J}|U$ is a sheaf of ideals of definition for the formal affine scheme induced on $U$ by $\fk{X}$ \sref{1.10.3.3}; according to (10.3.1.1) and Proposition \sref{1.10.4.3}, for each open $V\subset\fk{X}$, $\sh{J}|V$ is then a sheaf of ideals of definition for the formal prescheme induced on $V$ by $\fk{X}$.

We say that a family $(\sh{J}_\lambda)$ of sheaves of ideals of definition for $\fk{X}$ is a \emph{fundamental system}
\oldpage[I]{187}
\emph{of sheaves of ideals of definition} if there exists a cover $(U_\alpha)$ of $\fk{X}$ by formal affine open sets such that, for each $\alpha$, the family of the $\sh{J}_\lambda|U_\alpha$ is a fundamental system of sheaves of ideals of definition \sref{1.10.3.6} for the formal affine scheme induced on $U_\alpha$ by $\fk{X}$.
It follows from the last remark of \sref{1.10.3.7} that when $\fk{X}$ is a formal affine scheme, this definition coincides with the definition given in \sref{1.10.3.7}.
For an open subset $V$ of $\fk{X}$, the restrictions $\sh{J}_\lambda|V$ then form a fundamental system of sheaves of ideals of definition for the formal prescheme induced on $V$, according to (10.3.1.1).
If $\fk{X}$ is a \emph{locally Noetherian} formal prescheme, and $\sh{J}$ is a sheaf of ideals of definition for $\fk{X}$, then it follows from Proposition \sref{1.10.3.6} that the powers $\sh{J}^n$ form a fundamental system of sheaves of ideals of definition for $\fk{X}$.
\end{env}

\begin{env}[10.5.2]
\label{1.10.5.2}
Let $\fk{X}$ be a formal prescheme, $\sh{J}$ a sheaf of ideals of definition for $\fk{X}$.
Then the ringed space $(\fk{X},\OO_\fk{X}/\sh{J})$ is a (usual) \emph{prescheme}, which is affine (resp. locally Noetherian, resp. Noetherian) when $\fk{X}$ is a formal affine scheme (resp. a locally Noetherian formal scheme, resp. a Noetherian formal scheme);  we can reduce to the affine case, and then the proposition has already been proven in \sref{1.10.3.2}.
In addition, if $\theta:\OO_\fk{X}\to\OO_\fk{X}/\sh{J}$ is the canonical homomorphism, then $u=(1_\fk{X},\theta)$ is a \emph{morphism} (said to be \emph{canonical}) of formal preschemes $(\fk{X},\OO_\fk{X}/\sh{J})\to(\fk{X},\OO_\fk{X})$, because again, this was proven in the affine case \sref{1.10.3.2}, to which it is immediately reduced.
\end{env}

\begin{prop}[10.5.3]
\label{1.10.5.3}
Let $\fk{X}$ be a formal prescheme, $(\sh{J}_\lambda)$ a fundamental system of sheaves of ideals of definition for $\fk{X}$.
Then the sheaf of topological rings $\OO_\fk{X}$ is the projective limit of the pseudo-discrete sheaves of rings \sref[0]{0.3.8.1} $\OO_\fk{X}/\sh{J}_\lambda$.
\end{prop}

\begin{proof}
\label{proof-1.10.5.3}
As the topology of $\fk{X}$ admits a basis of formal quasi-compact affine open sets \sref{1.10.4.3}, we reduce to the affine case, where the proposition is a consequence of Proposition \sref{1.10.3.5}, \sref{1.10.3.2}, and the definition \sref{1.10.1.1}.
\end{proof}

It is not true that any formal prescheme admits a sheaf of ideals of definition.
However:
\begin{prop}[10.5.4]
\label{1.10.5.4}
Let $\fk{X}$ be a locally Noetherian formal prescheme.
There exists a largest sheaf of ideals of definition $\sh{T}$ for $\fk{X}$; this is the unique sheaf of ideals of definition $\sh{J}$ such that the prescheme $(\fk{X},\OO_\fk{X}/\sh{J})$ is reduced.
If $\sh{J}$ is a sheaf of ideals of definition for $\fk{X}$, then $\sh{T}$ is the inverse image under $\OO_\fk{X}\to\OO_\fk{X}/\sh{J}$ of the nilradical of $\OO_\fk{X}/\sh{J}$.
\end{prop}

\begin{proof}
\label{proof-1.10.5.4}
Suppose first that $\fk{X}=\Spf(A)$, where $A$ is an adic Noetherian ring.
The existence and the properties of $\sh{T}$ follow immediately from Propositions \sref{1.10.3.5} and \sref{1.5.1.1}, taking into account the existence and the properties of the largest ideal of definition for $A$ (\sref[0]{0.7.1.6} and \sref[0]{0.7.1.7}).

To prove the existence and the properties of $\sh{T}$ in the general case, it suffices to show that if $U\supset V$ are two Noetherian formal affine open subsets of $X$, then the largest sheaf of ideals of definition $\sh{T}_U$ for $U$ induces the largest sheaf of ideals of definition $\sh{T}_V$ for $V$; but as $(V,(\OO_\fk{X}|V)/(\sh{T}_U|V))$ is reduced, this follows from the above.
\end{proof}

We denote by $\fk{X}_\text{red}$ the (usual) reduced prescheme $(\fk{X},\OO_\fk{X}/\sh{T}$).

\begin{cor}[10.5.5]
\label{1.10.5.5}
Let $\fk{X}$ be a locally Noetherian formal prescheme, $\sh{T}$ the largest sheaf of ideals of definition for $\fk{X}$; for each open subset $V$ of $\fk{X}$, $\sh{T}|V$ is the largest sheaf of ideals of definition for the formal prescheme induced on $V$ by $\fk{X}$.
\end{cor}

\begin{prop}[10.5.6]
\label{1.10.5.6}
Let $\fk{X}$ and $\fk{Y}$ be two formal preschemes, $\sh{J}$ (resp. $\sh{K}$) be a sheaf of ideals of definition for $\fk{X}$ (resp. $\fk{Y}$), $f:\fk{X}\to\fk{Y}$ a morphism of formal preschemes.
\begin{enumerate}[label=\emph{(\roman*)}]
  \item If $f^*(\sh{K})\OO_\fk{X}\subset\sh{J}$, then there exists a unique morphism $f':(\fk{X},\OO_\fk{X}/\sh{J})\to(\fk{Y},\OO_\fk{Y}/\sh{K})$ of usual preschemes making the diagram
    \[
      \xymatrix{
        (\fk{X},\OO_\fk{X})\ar[r]^f &
        (\fk{Y},\OO_\fk{Y})\\
        (\fk{X},\OO_\fk{X}/\sh{J})\ar[r]^{f'}\ar[u] &
        (\fk{Y},\OO_\fk{Y}/\sh{K})\ar[u]
      }
      \tag{10.5.6.1}
    \]
    commutative, where the vertical arrows are the canonical morphisms.
  \item Suppose that $\fk{X}=\Spf(A)$ and $\fk{Y}=\Spf(B)$ are two formal affine schemes, $\sh{J}=\fk{J}^\Delta$ and $\sh{K}=\fk{K}^\Delta$, where $\fk{J}$ (resp. $\fk{K}$) is an ideal of definition for $A$ (resp. $B$), and $f=({}^a\vphi,\wt{\vphi})$, where $\vphi:B\to A$ is a continuous homomorphism;
    for $f^*(\sh{K})\OO_\fk{X}\subset\sh{J}$ to hold, it is necessary and sufficient that $\vphi(\fk{K})\subset\fk{J}$, and $f'$ is then the morphism $({}^a\vphi',\wt{\vphi'})$, where $\vphi':B/\fk{K}\to A/\fk{J}$ is the homomorphism induced from $\vphi$ by passing to quotients.
\end{enumerate}
\end{prop}

\begin{proof}
\label{proof-1.10.5.6}
\medskip\noindent
\begin{enumerate}[label=(\roman*)]
  \item If $f=(\psi,\theta)$, then the hypotheses imply that the image under $\theta^\sharp:\psi^*(\OO_\fk{Y})\to\OO_\fk{X}$ of the sheaf of ideals $\psi^*(\sh{K})$ of $\psi^*(\OO_\fk{Y})$ is contained in $\sh{J}$ \sref[0]{0.4.3.5}.
    By passing to quotients, we thus induce from $\theta^\sharp$ a homomorphism of sheaves of rings
    \[
      \omega:\psi^*(\OO_\fk{Y}/\sh{K})=\psi^*(\OO_\fk{Y})/\psi^*(\sh{K})\to\OO_\fk{X}/\sh{J};
    \]
    in addition, as for all $x\in\fk{X}$, $\theta_x^\sharp$ is a \emph{local} homomorphism, so is $\omega_x$.
    The morphism of ringed spaces $(\psi,\omega^\flat)$ is thus \sref{1.2.2.1} the unique morphism $f'$ of ringed spaces which we need.
  \item The canonical functorial correspondence between morphisms of formal affine schemes and continuous homomorphisms of rings \sref{1.10.2.2} shows that in the case considered, the relation $f^*(\sh{K})\OO_\fk{X}\subset\fk{J}$ impliex that we have $f'=({}^a\vphi',\wt{\vphi'})$, where $\vphi':B/\fk{K}\to A/\fk{J}$ is the unique homomorphism making the diagram
    \[
      \xymatrix{
        B\ar[r]^\vphi\ar[d] &
        A\ar[d]\\
        B/\fk{K}\ar[r]^{\vphi'} &
        A/\fk{J}
      }
      \tag{10.5.6.2}
    \]
    commutative.
    The existence of $\vphi'$ thus implies that $\vphi(\fk{K})\subset\fk{J}$.
    Conversely, if this condition is satisfied, then denoting by $\vphi'$ the unique homomorphism making the diagram (10.5.6.2) commutative and setting $f'=({}^a\vphi',\wt{\vphi'})$, it is clear that the diagram (10.5.6.1) is commutative; the consideration of the homomorphisms ${}^a\vphi^*(\OO_\fk{Y})\to\OO_\fk{X}$ and ${}^a{\vphi'}^*(\OO_\fk{Y}/\sh{K})\to\OO_\fk{X}/\sh{J}$ corresponding to $f$ and $f'$ respectively then shows that this implies the relation $f^*(\sh{K})\OO_\fk{X}\subset\sh{J}$.
\end{enumerate}
\end{proof}

It is clear that the correspondence $f\mapsto f'$ defined above is \emph{functorial}.

\subsection{Formal preschemes as inductive limits of preschemes}
\label{subsection:formal-preschemes-as-inductive-limits}

\begin{env}[10.6.1]
\label{1.10.6.1}
Let $\fk{X}$ be a formal prescheme, $(\sh{J}_\lambda)$ a fundamental system of sheaves of ideals of definition for $\fk{X}$; for each $\lambda$, let $f_\lambda$ be the canonical morphism $(\fk{X},\OO_\fk{X}/\sh{J}_\lambda)\to\fk{X}$ \sref{1.10.5.2}; for $\sh{J}_\mu\subset\sh{J}_\lambda$, the canonical morphism $\OO_\fk{X}/\sh{J}_\mu\to\OO_\fk{X}/\sh{J}_\lambda$ defines a canonical morphism
\oldpage[I]{189}
$f_{\mu\lambda}:(\fk{X},\OO_\fk{X}/\sh{J}_\lambda)\to(\fk{X},\OO_\fk{X}/\sh{J}_\mu)$ of (usual) preschemes such that we have $f_\lambda=f_\mu\circ f_{\mu\lambda}$.
The preschemes $X_\lambda=(\fk{X},\OO_\fk{X}/\sh{J}_\lambda)$ and the morphisms $f_{\mu\lambda}$ thus form (according to \sref{1.10.4.8}) a \emph{inductive system} in the category of formal preschemes.
\end{env}

\begin{prop}[10.6.2]
\label{1.10.6.2}
With the notation of \sref{1.10.6.1}, the formal prescheme $\fk{X}$ and the morphisms $f_\lambda$ form an inductive limit (T, I, 1.8) of the system $(X_\lambda,f_{\mu\lambda})$ in the category of formal preschemes.
\end{prop}

\begin{proof}
\label{proof-1.10.6.2}
Let $\fk{Y}$ be a formal prescheme, and for each index $\lambda$, let
\[
  g_\lambda=(\psi_\lambda,\theta_\lambda):X_\lambda\to\fk{Y}
\]
be a morphism such that we have $g_\lambda=g_\mu\circ f_{\mu\lambda}$ for $\sh{J}_\mu\subset\sh{J}_\lambda$.
This latter condition and the definition of the $X_\lambda$ imply first that the $\psi_\lambda$ are identical to a continuous map $\psi:\fk{X}\to\fk{Y}$ of the underlying spaces; in addition, the homomorphism $\theta_\lambda^\sharp:\psi^*(\OO_\fk{Y})\to\OO_{X_i}=\OO_\fk{X}/\sh{J}_\lambda$ form a \emph{projective system} of homomorphisms of sheaves of rings.
By passing to the projective limit, we thus induce a homomorphism $\omega:\psi^*(\OO_\fk{Y})\to\varprojlim\OO_\fk{X}/\sh{J}_\lambda=\OO_\fk{X}$, and it is clear that the morphism $g=(\psi,\omega^\flat)$ of \emph{ringed spaces} is the \emph{unique} morphism making the diagrams
\[
  \xymatrix{
    X_\lambda\ar[rr]^{g_\lambda}\ar[rd]_{f_\lambda} & &
    \fk{Y}\\
    & \fk{X}\ar[ru]_g
  }
  \tag{10.6.2.1}
\]
commutative.
It remains to prove that $g$ is a morphism of \emph{formal preschemes}; the question is local on $\fk{X}$ and $\fk{Y}$, so we can assume $\fk{X}=\Spf(A)$ and $\fk{Y}=\Spf(B)$, $A$ and $B$ admissible rings, with $\sh{J}_\lambda=\fk{J}_\lambda^\Delta$, where $(\fk{J}_\lambda)$ is a fundamental system of ideal of definition for $A$ \sref{1.10.3.5}; as $A=\varprojlim A/\fk{J}_\lambda$, the existence of a morphism $g$ of formal affine schemes making the diagrams (10.6.2.1) commutative then follows from the bijective correspondence \sref{1.10.2.2} between morphisms of formal affine schemes and continuous ring homomorphisms, and from the definition of the projective limit.
But the uniqueness of $g$ as a morphism of ringed spaces shows that it coincides with the morphism in the beginning of the proof.
\end{proof}

The following proposition establishes, under certain additional conditions, the existence of the inductive limit of a given inductive system of (usual) preschemes in the category of formal preschemes:
\begin{prop}[10.6.3]
\label{1.10.6.3}
Let $\fk{X}$ be a topological space, $(\OO_i,u_{ji})$ a projective system of sheaves of rings on $\fk{X}$, with $\bb{N}$ for its set of indices.
Let $\sh{J}_i$ be the kernel of $u_{0i}:\OO_i\to\OO_0$.
Suppose that:
\begin{enumerate}[label=\emph{(\alph*)}]
  \item The ringed space $(\fk{X},\OO_i)$ is a prescheme $X_i$.
  \item For all $x\in\fk{X}$ and all $i$, there exists an open neighborhood $U_i$ of $x$ in $\fk{X}$ such that the restriction $\sh{J}_i|U_i$ is nilpotent.
  \item The homomorphisms $u_{ji}$ are surjective.
\end{enumerate}

\oldpage[I]{190}
Let $\OO_\fk{X}$ be the sheaf of topological rings formed as the projective limit of the pseudo-discrete sheaves of rings $\OO_i$, and let $u_i:\OO_\fk{X}\to\OO_i$ be the canonica homomorphism.
Then the topologically ringed space $(\fk{X},\OO_\fk{X})$ is a formal prescheme; the homomorphisms $u_i$ are surjective; their kernels $\sh{J}^{(i)}$ form a fundamental system of sheaves of ideals of definition for $\fk{X}$, and $\sh{J}^{(0)}$ is the projective limit of the sheaves of ideals $\sh{J}_i$.
\end{prop}

\begin{proof}
\label{proof-1.10.6.3}
We first note that on each stalk, $u_{ji}$ is a surjective homomorphism and \emph{a fortiori} a local homomorphism; thus $v_{ij}=(1_\fk{X},u_{ji})$ is a morphism of preschemes $X_j\to X_i$ ($i\geq j$) \sref{1.2.2.1}.
Suppose first that each $X_i$ is an affine scheme woth ring $A_i$.
There exists a \emph{ring} homomorphism $\vphi_{ji}:A_i\to A_j$ such that $u_{ji}=\wt{\vphi_{ji}}$ \sref{1.1.7.3}; as a result \sref{1.1.6.3}, the sheaf $\OO_j$ is a quasi-coherent $\OO_i$-module over $X_i$ (for the external law defined by $u_{ji}$), associated to $A_j$ considered as an $A_i$-module $\vphi_{ji}$.
For all $f\in A_i$, let $f'=\vphi_{ji}(f)$; by hypothesis, the open sets $D(f)$ and $D(f')$ are identical in $\fk{X}$, and the homomorphism from $\Gamma(D(f),\OO_i)=(A_i)_f$ to $\Gamma(D(f),\OO_j)=(A_j)_{f'}$ corresponding to $u_{ji}$ is none other than $(\vphi_{ji})_f$ \sref{1.1.6.1}.
But when we consider $A_j$ as an $A_i$-module, $(A_j)_{f'}$ is the $(A_i)_f$-module $(A_j)_f$, so we also have $u_{ji}=\wt{\vphi_{ji}}$, where $\vphi_{ji}$ is now considered as a homomorphism of \emph{$A_i$-modules}.
Then as $u_{ji}$ is surjective, we conclude that $\vphi_{ji}$ is also surjective \sref{1.1.3.9} and if $\fk{J}_{ji}$ is the kernel of $\vphi_{ji}$, then the kernel of $u_{ji}$ is a quasi-coherent $\OO_i$-module equal to $\wt{\fk{J}_{ji}}$.
In particular, we have $\sh{J}_i=\wt{\fk{J}_i}$, where $\fk{J}_i$ is the kernel of $\vphi_{0i}:A_i\to A_0$.
The hypothesis (b) implies that $\sh{J}_i$ is \emph{nilpotent}: indeed, as $\fk{X}$ is quasi-compact, we can cover $\fk{X}$ by a finite number of open sets $U_k$ such that $(\sh{J}_i|U_k)^{n_k}=0$, and by setting $n$ to be the largest of the $n_k$, we have $\sh{J}_i^n=0$.
We conclude that $\fk{J}_i$ is nilpotent \sref{1.1.3.13}.
Then the ring $A=\varprojlim A_i$ is admissible \sref[0]{0.7.2.2}, the canonical homomorphism $\vphi_i:A\to A_i$ is surjective, and its kernel $\fk{J}^{(i)}$ is equal to the projective limit of the $\fk{J}_{ik}$ for $k\geq i$; the $\fk{J}^{(i)}$ form a fundamental system of neighborhoods of $0$ in $A$.
The assertions of Proposition \sref{1.10.6.3} follow in this case from \sref{1.10.1.1} and \sref{1.10.3.2}, $(\fk{X},\OO_\fk{X})$ being $\Spf(A)$.

In this particular case, we note that if $f=(f_i)$ is an element of the projective limit $A=\varprojlim A_i$, then all the open sets $D(f_i)$ (affine open sets in $X_i$) identify with the open subset $\fk{D}(f)$ of $\fk{X}$, the prescheme induced on $\fk{D}(f)$ by $X_i$ thus identifying with the affine scheme $\Spec((A_i)_{f_i})$.

In the general case, we remark first that for every quasi-compact open subset $U$ of $\fk{X}$, each of the $\sh{J}_i|U$ is nilpotent, as shown by the above reasoning.
We will see that for every $x\in\fk{X}$, there exists an open neighborhood $U$ of $x$ in $\fk{X}$ which is an \emph{affine open set} for \emph{all} the $X_i$.
Indeed, we take $U$ to be an affine open set for $X_0$, and observe that $\OO_{X_0}=\OO_{X_i}/\sh{J}_i$.
As $\sh{J}_i|U$ is nilpotent according to the above, $U$ is also an affine open set for each $X_i$ by Proposition \sref{1.5.1.9}.
This being so, for each $U$ satsifying the preceding conditions, the study of the affine case as above shows that $(U,\OO_X|U)$ is a formal prescheme whose $\sh{J}^{(i)}|U$ for a fundamental system of sheaves of ideals of definition, and $\sh{J}^{(0)}|U$ is the projective limit of the $\sh{J}_i|U$; hence the conclusion.
\end{proof}

\begin{cor}[10.6.4]
\label{1.10.6.4}
Suppose that for $i\geq j$, the kernel of $u_{ji}$ is $\sh{J}_i^{j+1}$ and that $\sh{J}_1/\sh{J}_1^2$
\oldpage[I]{191}
is of finite type over $\OO_0=\OO_1/\sh{J}_1$.
Then $\fk{X}$ is an adic formal prescheme, and if $\sh{J}^{(n)}$ is the kernel of $\OO_\fk{X}\to\OO_n$, then we have $\sh{J}^{(n)}=\sh{J}^{n+1}$ and $\sh{J}/\sh{J}^2$ is isomorphic to $\sh{J}_1$.
If in addition $X_0$ is locally Noetherian (resp. Noetherian), then $\fk{X}$ is locally Noetherian (resp. Noetherian).
\end{cor}

\begin{proof}
\label{proof-1.10.6.4}
As the underlying spaces of $\fk{X}$ and $X_0$ are the same, the question is local, and we can suppose that all the $X_i$ are affine; taking into account the relations $\sh{J}_{ij}=\wt{\fk{J}_{ji}}$ (with the notation of Proposition \sref{1.10.3.6}), we immediately reduce to the corresponding assertions of Proposition \sref[0]{0.7.2.7} and Corollary \sref[0]{0.7.2.8}, by noting that $\fk{J}_1/\fk{J}_1^2$ is then an $A_0$-module of finite type \sref{1.1.3.9}.
\end{proof}

In particular, \emph{every locally Noetherian formal prescheme $\fk{X}$} is the inductive limit of a sequence $(X_n)$ of locally Noetherian (usual) preschemes satisfying the conditions of Proposition \sref{1.10.3.6} and Corollary \sref{1.10.6.4}: it suffices to consider a sheaf of ideals of definition $\sh{J}$ for $\fk{X}$ \sref{1.10.5.4} and by setting $X_n=(\fk{X},\OO_\fk{X}/\sh{J}^{n+1})$ (\sref{1.10.5.1} and Proposition \sref{1.10.6.2}).

\begin{cor}[10.6.5]
\label{1.10.6.5}
Let $A$ be an admissible ring.
For the formal affine scheme $\fk{X}=\Spf(A)$ to be Noetherian, it is necessary and sufficient for $A$ to be adic and Noetherian.
\end{cor}

\begin{proof}
\label{proof-1.10.6.5}
The condition is evidently sufficient.
Conversely, suppose that $\fk{X}$ is Noetherian, and let $\fk{J}$ be an ideal of definition for $A$, $\sh{J}=\fk{J}^\Delta$ the corresponding sheaf of ideals of definition for $\fk{X}$.
The (usual) preschemes $X_n=(\fk{X},\OO_\fk{X}/\sh{J}^{n+1})$ are then affine and Noetherian, so the rings $A_n=A/\fk{J}^{n+1}$ are Noetherian \sref{1.6.1.3}, hence we conclude that $\fk{J}/\fk{J}^2$ is an $A/\fk{J}$-module of finite type.
As the $\sh{J}^n$ form a fundamental system of sheaves of ideals of definition for $\fk{X}$ \sref{1.10.5.1}, we have $\OO_\fk{X}=\varprojlim\OO_\fk{X}/\sh{J}^n$ \sref{1.10.5.3}; we conclude \sref{1.10.1.3} that $A$ is topologically isomorphic to $\varprojlim A/\fk{J}^n$, which is adic and Noetherian \sref[0]{0.7.2.8}.
\end{proof}

\begin{rmk}[10.6.6]
\label{1.10.6.6}
With the notation of Proposition \sref{1.10.6.3}, let $\sh{F}_i$ be an $\OO_i$-module, and suppose we are given, for $i\geq i$, a $v_{ij}$-morphism $\theta_{ji}:\sh{F}_i\to\sh{F}_j$, such that $\theta_{kj}\circ\theta_{ji}=\theta_{ki}$ for $k\leq j\leq i$.
As the continuous underlying map of $v_{ij}$ is the identity, $\theta_{ji}$ is a homomorphism of sheaves of abelian groups on the space $\fk{X}$; in addition, if $\sh{F}$ is the projective limit of the projective system $(\sh{F}_i)$ of sheaves of abelian groups, the fact that the $\theta_{ji}$ are $v_{ij}$-morphism allows one to define on $\sh{F}$ an $\OO_\fk{X}$-module structure by passing to the projective limit; equipped with this structure, we say that $\sh{F}$ is the \emph{projective limit} (with respect to the $\theta_{ji}$) of the system of $\OO_i$-modules $(\sh{F}_i)$.
In the particular case where $v_{ij}^*(\sh{F}_i)=\sh{F}_j$, and where $\theta_{ji}$ is the \emph{identity}, we say that $\sh{F}$ is the projective limit of a system $(\sh{F}_i)$ such that $v_{ij}^*(\sh{F}_i)=\sh{F}_j$ for $j\leq i$ (without mentioning the $\theta_{ji}$).
\end{rmk}

\begin{env}[10.6.7]
\label{1.10.6.7}
Let $\fk{X}$ and $\fk{Y}$ be two formal preschemes, $\sh{J}$ (resp. $\sh{K}$) a sheaf of ideals of definition for $\fk{X}$ (resp. $\fk{Y}$), $f:\fk{X}\to\fk{Y}$ a morphism such that $f^*(\sh{K})\OO_\fk{X}\subset\sh{J}$.
We then have for every integer $n>0$, $f^*(\sh{K}^n)\OO_\fk{X}=(f^*(\fk{K})\OO_\fk{X})^n\subset\sh{J}^n$; we can thus \sref{1.10.5.6} induce from $f$ a morphism of (usual) preschemes $f_n:X_n\to Y_n$, by setting $X_n=(\fk{X},\OO_\fk{X}/\sh{J}^{n+1})$ and $Y_n=(\sh{Y},\OO_\fk{Y}/\sh{K}^{n+1})$, and it immediately follows from the definitions that the diagrams
\[
  \xymatrix{
    X_m\ar[r]^{f_m}\ar[d] &
    Y_m\ar[d]\\
    X_n\ar[r]^{f_n} &
    Y_n
  }
  \tag{10.6.7.1}
\]
\oldpage[I]{192}
are commutative for $m\leq n$; in other words, $(f_n)$ is an \emph{inductive system} of morphisms.
\end{env}

\begin{env}[10.6.8]
\label{1.10.6.8}
Conversely, let $(X_n)$ (resp. $(Y_n)$) be an inductive system of (usual) preschemes satisfying conditions (b) and (c) of Proposition \sref{1.10.6.3}, and let $\fk{X}$ (resp. $\fk{Y}$) its inductive limit.
By definition of the inductive limit, each sequence $(f_n)$ of morphisms $X_n\to Y_n$ form an inductive system admitting an \emph{inductive limit $f:\fk{X}\to\fk{Y}$}, which is the unique morphism of formal preschemes making the diagrams
\[
  \xymatrix{
    X_n\ar[r]^{f_n}\ar[d] &
    Y_n\ar[d]\\
    \fk{X}\ar[r]^f &
    \fk{Y}
  }
\]
commutative.
\end{env}

\begin{prop}[10.6.9]
\label{1.10.6.9}
Let $\fk{X}$ and $\fk{Y}$ be locally Notherian formal preschemes, $\sh{J}$ (resp. $\sh{K}$) be a sheaf of ideals of definition for $\fk{X}$ (resp. $\fk{Y}$); the map $f\mapsto(f_n)$ defined in \sref{1.10.6.7} is a bijection from the set of morphisms $f:\fk{X}\to\fk{Y}$ such that $f^*(\sh{K})\OO_\fk{X}\subset\sh{J}$ to the set of sequences $(f_n)$ of morphisms making the diagrams (10.6.7.1) commutative.
\end{prop}

\begin{proof}
\label{proof-1.10.6.9}
If $f$ is the inductive limit of this sequence, then it is necessary to show that $f^*(\sh{K})\OO_\fk{X}\subset\sh{J}$.
The statement being local on $\fk{X}$ and $\fk{Y}$, we can reduce to the case where $\fk{X}=\Spf(A)$ and $\fk{Y}=\Spf(B)$ are affine, $A$ and $B$ adic Noetherian rings, $\sh{J}=\fk{J}^\Delta$ and $\sh{K}=\fk{K}^\Delta$, where $\fk{J}$ (resp. $\fk{K}$) is an ideal of definition for $A$ (resp. $B$).
We then have $X_n=\Spec(A_n)$ and $Y_n=\Spec(B_n)$, with $A_n=A/\fk{J}^{n+1}$ and $B_n=B/\fk{K}^{n+1}$, according to Proposition \sref{1.10.3.6} and \sref{1.10.3.2}; $f_n=({}^a\vphi_n,\wt{\vphi_n})$, where the homomorphisms $\vphi_n:B_n\to A_n$ forms a projective system, thus $f=({}^a\vphi,\wt{\vphi})$, so $f=({}^a\vphi,\wt{\vphi})$, where $\vphi=\varprojlim\vphi_n$.
The commutativity of the diagram (10.6.7.1) for $m=0$ then gives the condition $\vphi_n(\fk{K}/\fk{K}^{n+1})\subset\fk{J}/\fk{J}^{n+1}$ for all $n$, so by passing to the projective limit we have $\vphi(\fk{K})\subset\fk{J}$, and this implies that $f^*(\sh{K})\OO_\fk{X}\subset\sh{J}$ \sref{1.10.5.6}[ii].
\end{proof}

\begin{cor}[10.6.10]
\label{1.10.6.10}
Let $\fk{X}$ and $\fk{Y}$ be two locally Noetherian formal preschemes, $\sh{T}$ the largest sheaf of ideals of definition for $\fk{X}$ \sref{1.10.5.4}.
\begin{enumerate}[label=\emph{(\roman*)}]
  \item For every sheaf of ideals of definition $\sh{K}$ for $\fk{Y}$ and every morphism $f:\fk{X}\to\fk{Y}$, we have $f^*(\sh{K})\OO_\fk{X}\subset\sh{T}$.
  \item There is a canonical bijective correspondence between $\Hom(\fk{X},\fk{Y})$ and the set of sequences $(f_n)$ of morphisms making the diagrams (10.6.7.1) commutative, where $X_n=(\fk{X},\OO_\fk{X}/\sh{T}^{n+1})$ and $Y_n=(\fk{Y},\OO_\fk{Y}/\sh{K}^{n+1})$.
\end{enumerate}
\end{cor}

\begin{proof}
\label{proof-1.10.6.10}
(ii) follows immediately from (i) and Proposition \sref{1.10.6.9}.
To prove (i), we can reduce to the case where $\fk{X}=\Spf(A)$ and $\fk{Y}=\Spf(B)$, $A$ and $B$ Noetherian, $\sh{T}=\fk{T}^\Delta$ and $\sh{K}=\fk{K}^\Delta$, where $\fk{T}$ is the largest ideal of definition for $A$ and $\fk{K}$ is an ideal of definition for $B$.
Let $f=({}^a\vphi,\wt{\vphi})$, where $\vphi:B\to A$ is a continuous homomorphism; as the elements of $\fk{K}$ are topologically nilpotent \sref[0]{0.7.1.4}[ii], so are those of $\vphi(\fk{K})$, so $\vphi(\fk{K})\subset\fk{T}$ since $\fk{T}$ is the set of topologically nilpotent elements of $A$ \sref[0]{0.7.1.6}; hence, by Proposition \sref{1.10.5.6}[ii], we are done.
\end{proof}

\begin{cor}[10.6.11]
\label{1.10.6.11}
Let $\fk{S}$, $\fk{X}$, $\fk{Y}$ be locally Noetherian formal preschemes, $f:\fk{X}\to\fk{S}$ and $g:\fk{Y}\to\fk{S}$ the morphisms making $\fk{X}$ and $\fk{Y}$ formal $\fk{S}$-preschemes.
Let $\sh{J}$ (resp. $\sh{K}$, $\sh{L}$) be a sheaf of ideals of definition for $\fk{S}$ (resp. $\fk{X}$, $\fk{Y}$), and suppose that $f^*(\sh{J})\OO_\fk{X}\subset\sh{K}$ and $g^*(\sh{J})\OO_\fk{Y}=\sh{L}$; set $S_n=(\fk{S},\OO_\fk{S}/\sh{J}^{n+1})$, $X_n=(\fk{X},\OO_\fk{X}/\sh{K}^{n+1})$, and $Y_n=(\fk{Y},\OO_\fk{Y}/\sh{L}^{n+1})$.
Then there exists a canonical bijective correspondence
\oldpage[I]{193}
between $\Hom_\fk{S}(\fk{X},\fk{Y})$ and the set of sequences $(u_n)$ of $S_n$-morphisms $u_n:X_n\to Y_n$ making the diagrams (10.6.7.1) commutative.
\end{cor}

\begin{proof}
\label{proof-1.10.6.11}
For each $\fk{S}$-morphism $u:\fk{X}\to\fk{Y}$, we have by definition that $f=g\circ u$, so
\[
  u^*(\sh{L})\OO_\fk{X}=u^*(g^*(\sh{J}\OO_\fk{Y})\OO_\fk{X}=f^*(\sh{J})\OO_\fk{X}\subset\sh{K},
\]
and the corollary follows from Proposition \sref{1.10.6.9}.
\end{proof}

We note that for $m\leq n$, the data of a morphism $f_n:X_n\to Y_n$ determines a unique morphism $f_m:X_m\to Y_m$ making the diagram (10.6.7.1) commutative, as we immediately see that we can reduce to the affine case; we thus have defined a map $\vphi_{mn}:\Hom_{S_n}(X_n,Y_n)\to\Hom_{S_m}(X_m,Y_m)$ and the $\Hom_{S_n}(X_n,Y_n)$ form with the $\vphi_{mn}$ a \emph{projective system of sets}; Corollary \sref{1.10.6.11} says that there is a canonical bijection
\[
  \Hom_\fk{S}(\fk{X},\fk{Y})\isoto\varprojlim_n\Hom_{S_n}(X_n,Y_n).
\]

\subsection{Products of formal preschemes}
\label{subsection:products-of-formal-preschemes}

\begin{env}[10.7.1]
\label{1.10.7.1}
Let $\fk{S}$ be a formal prescheme; the formal $\fk{S}$-preschemes form a category, and we can define a notion of a \emph{product} of formal $\fk{S}$-preschemes.
\end{env}

\begin{prop}[10.7.2]
\label{1.10.7.2}
Let $\fk{X}=\Spf(B)$ and $\fk{Y}=\Spf(C)$ be two formal affine schemes over a formal affine scheme $\fk{S}=\Spf(A)$.
Let $\fk{Z}=\Spf(B\wh{\otimes}_A C)$, $p_1$ and $p_2$ the $\fk{S}$-morphisms corresponding \sref{1.10.2.2} to the canonical (continuous) $A$-homomorphisms $\rho$ and $\sigma$ from $B$ and $C$ to $B\wh{\otimes}_A C$; then $(\fk{Z},p_1,p_2)$ is a product of the formal affine $\fk{S}$-schemes $\fk{X}$ and $\fk{Y}$.
\end{prop}

\begin{proof}
\label{proof-1.10.7.2}
According to Proposition \sref{1.10.4.6}, it suffices to check that if we associate to each continuous $A$-homomorphism $\vphi:B\wh{\otimes}_A C\to D$, where $D$ is an admissible ring which is a topological $A$-algebra, the pair $(\vphi\circ\rho,\vphi\circ\sigma)$, then we define a bijection
\[
  \Hom_A(B\wh{\otimes}_A C,D)\isoto\Hom_A(B,D)\times\Hom_A(C,D),
\]
which is none other than the universal property of the completed tensor product \sref[0]{0.7.7.6}.
\end{proof}

\begin{prop}[10.7.3]
\label{1.10.7.3}
Given two formal $\fk{S}$-preschemes $\fk{X}$ and $\fk{Y}$, the produc $\fk{X}\times_\fk{S}\fk{Y}$ exists.
\end{prop}

\begin{proof}
\label{proof-1.10.7.3}
The proof is similar to that of Theorem \sref{1.3.2.6}, by replacing affine schemes (resp. affine open sets) by formal affine schemes (resp. formal affine open sets), and Proposition \sref{1.3.2.2} by Proposition \sref{1.10.7.2}.
\end{proof}

All the formal properties of the product of preschemes (\sref{1.3.2.7} and \sref{1.3.2.8}, \sref{1.3.3.1} and \sref{1.3.3.12}) are valid without modification for the product of formal preschemes.

\begin{env}[10.7.4]
\label{1.10.7.4}
Let $\fk{S}$, $\fk{X}$, $\fk{Y}$ be three formal preschemes and let $f:\fk{X}\to\fk{S}$ and  $g:\fk{Y}\to\fk{S}$ two morphisms.
Suppose that there exist in $\fk{S}$, $\fk{X}$, $\fk{Y}$ respectively three fundamental systems of sheaves of ideals of definitions $(\sh{J}_\lambda)$, $(\sh{K}_\lambda)$, $(\sh{L}_\lambda)$, having the same set of indices $I$, such that $f^*(\sh{J}_\lambda)\OO_\fk{X}\subset\sh{K}_\lambda$ and $g^*(\sh{J}_\lambda)\OO_\fk{Y}\subset\sh{L}_\lambda$ for all $\lambda$.
Set $S_\lambda=(\fk{S},\OO_\fk{S}/\sh{J}_\lambda)$, $X_\lambda=(\fk{X},\OO_\fk{X}/\sh{K}_\lambda)$, $Y_\lambda=(\fk{Y},\OO_\fk{Y}/\sh{L}_\lambda)$; for $\sh{J}_\mu\subset\sh{J}_\lambda$, $\sh{K}_\mu\subset\sh{K}_\lambda$, $\sh{L}_\mu\subset\sh{L}_\lambda$, note that $S_\lambda$ (resp. $X_\lambda$, $Y_\lambda$) is a closed subprescheme of $S_\mu$ (resp. $X_\mu$, $Y_\mu$) having the \emph{same}
\oldpage[I]{194}
underlying space \sref{1.10.6.1}.
As $S_\lambda\to S_\mu$ is a monomorphism of preschemes, we see first that the products $X_\lambda\times_{S_\lambda}Y_\lambda$ and $X_\lambda\times_{S_\mu}Y_\lambda$ are identical \sref{1.3.2.4}, since $X_\lambda\times_{S_\mu}Y_\lambda$ identifies with a closed subprescheme of $X_\mu\times_{S_\mu}Y_\mu$ having the \emph{same} underlying space \sref{1.4.3.1}.
This being so, the product $\fk{X}\times_\fk{S}\fk{Y}$ is the \emph{inductive limit} of the usual preschemes $X_\lambda\times_{S_\lambda}Y_\lambda$: indeed, as we see in Proposition \sref{1.10.6.2}, we can reduce to the case where $\fk{S}$, $\fk{X}$, and $\fk{Y}$ are formal affine schemes.
Taking into account Proposition \sref{1.10.5.6}[ii] and the hypotheses on the fundamental systems of sheaves of ideals of definition for $\fk{S}$, $\fk{X}$, and $\fk{Y}$, we immediately see that our assertion follows from the definition of the completed tensor product of two algebras \sref[0]{0.7.7.1}.

In addition, let $\fk{Z}$ be a formal $\fk{S}$-prescheme, $(\sh{M}_\lambda)$ a fundamental system of ideals of definition for $\fk{Z}$ having $I$ for its set of indices, $u:\fk{Z}\to\fk{X}$ and $v:\fk{Z}\to\fk{Y}$ two $\fk{S}$-morphisms such that $u^*(\sh{K}_\lambda)\OO_\fk{Z}\subset\sh{M}_\lambda$ and $v^*(\sh{L}_\lambda)\OO_\fk{Z}\subset\sh{M}_\lambda$ for all $\lambda$.
If we set $Z_\lambda=(\fk{Z},\OO_\fk{Z}/\sh{M}_\lambda)$, and if $u_\lambda:Z_\lambda\to X_\lambda$ and $v_\lambda:Z_\lambda\to Y_\lambda$ are the $S_\lambda$-morphisms corresponding to $u$ and $v$ \sref{1.10.5.6}, then we have immediately that $(u,v)_\fk{S}$ is the inductive limit of the $S_\lambda$-morphisms $(u_\lambda,v_\lambda)_{S_\lambda}$.

The considerations of this section apply in particular when $\fk{S}$, $\fk{X}$, and $\fk{Y}$ are locally Noetherian, taking for the fundamental systems of sheaves of ideals of definition the systems consisting of the powers of a sheaf of ideals of definition \sref{1.10.5.1}.
But we note that $\fk{X}\times_\fk{S}\fk{Y}$ is not necessarily locally Noetherian (see however \sref{1.10.13.5}).
\end{env}

\subsection{Formal completion of a prescheme along a closed subset}
\label{subsection:formal-completion-along-closed-subset}

\begin{env}[10.8.1]
\label{1.10.8.1}
Let $X$ be a \emph{locally Noetherian} (usual) prescheme, $X'$ a closed subset of the underlying space of $X$; we denote by $\Phi$ the set of \emph{coherent} sheaves of ideals $\sh{J}$ of $\OO_X$ such that the support of $\OO_X/\sh{J}$ is $X'$.
The set $\Phi$ is nonempty (\sref{1.5.2.1}, \sref{1.4.1.4}, \sref{1.6.1.1}); we order it by the relation $\supset$.
\end{env}

\begin{lem}[10.8.2]
\label{1.10.8.2}
The ordered set $\Phi$ is filtered; if $X$ is Noetherian, then for all $\sh{J}_0\in\Phi$, the set of powers $\sh{J}_0^n$ ($n>0$) is cofinal in $\Phi$.
\end{lem}

\begin{proof}
\label{proof-1.10.8.2}
If $\sh{J}_1$ and $\sh{J}_2$ are in $\Phi$, and if we set $\sh{J}=\sh{J}_1\cap\sh{J}_2$, then $\sh{J}$ is coherent since $\OO_X$ is coherent (\sref{1.6.1.1} and \sref[0]{0.5.3.4}), and we have $\sh{J}_x=(\sh{J}_1)_x\cap(\sh{J}_2)_x$ for all $x\in X$, so $\sh{J}_x=\OO_x$ for $x\not\in X'$ and $\sh{J}_x\neq\OO_x$ for $x\in X'$, which proves that $\sh{J}\in\Phi$.
On the other hand, if $X$ is Noetherian and if $\sh{J}_0$ and $\sh{J}$ are in $\Phi$, then there exists an integer $n>0$ such that $\sh{J}_0^n(\OO_X/\sh{J})=0$ \sref{1.9.3.4}, which implies that $\sh{J}_0^n\subset\sh{J}$.
\end{proof}

\begin{env}[10.8.3]
\label{1.10.8.2}
Now let $\sh{F}$ be a \emph{coherent} $\OO_X$-module; for all $\sh{J}\in\Phi$, we have that $\sh{F}\otimes_{\OO_X}(\OO_X/\sh{J})$ is a coherent $\OO_X$-module \sref{1.9.1.1} with support contained in $X'$, and we will usually identify it with its restriction to $X'$.
When $\sh{J}$ varies over $\Phi$, these sheaves form a \emph{projective system} of sheaves of abelian groups.
\end{env}

\begin{defn}[10.8.4]
\label{1.10.8.4}
Given a closed subset $X'$ of a locally Noetherian prescheme $X$ and a coherent $\OO_X$-module $\sh{F}$, we call the \emph{completion of $\sh{F}$ along $X'$}, and denote it by $\sh{F}_{/X'}$ (or $\wh{\sh{F}}$ when there is little chance of confusion), the restriction to $X'$ of the sheaf
\oldpage[I]{195}
$\varprojlim_\Phi(\sh{F}\otimes_{\OO_X}(\OO_X/\sh{J}))$; we say that its sections over $X'$ are the \emph{formal sections of $\sh{F}$ along $X'$}.
\end{defn}

It is immediate that for every open $U\subset X$, we have $(\sh{F}|U)_{/(U\cap X')}=(\sh{F}_{/X'})|(U\cap X')$.

By passing to the projective limit, it is clear that the $(\OO_X)_{/X'}$ is a sheaf of rings, and that $\sh{F}_{/X'}$ can be considered as an $(\OO_X)_{/X'}$-module.
In addition, as there exists a basis for the topology of $X'$ consisting of quasi-compat open sets, we can consider $(\OO_X)_{/X'}$ (resp. $\sh{F}_{/X'}$) as a \emph{sheaf of topological rings} (resp. of \emph{topological groups}), the projective limit of the \emph{pseudo-discrete} sheaves of rings (resp. groups) $\OO_X/\sh{F}$ (resp. $\sh{F}\otimes_{\OO_X}(\OO_X/\sh{F})=\sh{F}/\sh{J}\sh{F}$), and by passing to the projective limit, $\sh{F}_{/X'}$ then becomes a \emph{topological $(\OO_X)_{/X'}$-module} (\sref[0]{0.3.8.1} and \sref[0]{3.8.2}); recall that for every \emph{quasi-compact} open $U\subset X$, $\Gamma(U\cap X',(\OO_X)_{/X'})$ (resp. $\Gamma(U\cap X',\sh{F}_{/X'})$) is then the projective limit of the discrete rings (resp. groups) $\Gamma(U,\OO_X/\sh{J})$ (resp. $\Gamma(U,\sh{F}/\sh{J}\sh{F})$).

Now if $u:\sh{F}\to\sh{G}$ is a homomorphism of $\OO_X$-modules, then we canonically induce homomorphisms $u_\sh{J}:\sh{F}\otimes_{\OO_X}(\OO_X/\sh{J})\to\sh{G}\otimes_{\OO_X}(\OO_X/\sh{J})$ for all $\sh{J}\in\Phi$, and these homomorphisms form a projective system.
By passing to the projective limit and restricting to $X'$, they give a continuous $(\OO_X)_{/X'}$-homomorphism $\sh{F}_{/X'}\to\sh{G}_{/X'}$, denoted $u_{/X'}$ or $\wh{u}$, and we call it the \emph{completion} of the homomorphism $u$ along $X'$.
It is clear that if $v:\sh{G}\to\sh{H}$ is a second homomorphism of $\OO_X$-modles, then we have $(v\circ u)_{/X'}=(v_{/X'})\circ(u_{/X'})$, hence $\sh{F}_{/X'}$ is a \emph{covariant additive functor} in $\sh{F}$ from the category of coherent $\OO_X$-modules to the category pf topological $(\OO_X)_{/X'}$-modules.

\begin{prop}[10.8.5]
\label{1.10.8.5}
The support of $(\OO_X)_{/X'}$ is $X'$; the topologically ringed space $(X',(\OO_X)_{/X'})$ is a locally Noetherian formal prescheme, and if $\sh{J}\in\Phi$, then $\sh{J}_{/X'}$ is a sheaf of ideals of definition for this formal prescheme.
If $X=\Spec(A)$ is an affine scheme with Noetherian ring $A$, $\sh{J}=\wt{\fk{J}}$, where $\fk{J}$ is an ideal of $A$, and $X'=V(\fk{J})$, then $(X',(\OO_X)_{/X'})$ canonically identifies with $\Spf(\wh{A})$, where $\wh{A}$ is the separated completion of $A$ with respect to the $\fk{J}$-pre-adic topology.
\end{prop}

\begin{proof}
\label{proof-1.10.8.5}
We can evidently reduce to proving the latter assertion.
We know \sref[0]{0.7.3.3} that the separated completion $\wh{\fk{J}}$ of $\fk{J}$ with respect to the $\fk{J}$-pre-adic topology identifies with the ideal $\fk{J}\wh{A}$ of $\wh{A}$, where $\wh{A}$ is the Noetherian $\wh{\fk{J}}$-adic ring such that $\wh{A}/\wh{\fk{J}}^n=A/\fk{J}^n$ \sref[0]{0.7.2.6}.
This latter relation shows that the open prime ideals of $\wh{A}$ are the ideals $\wh{\fk{p}}=\fk{p}\wh{\fk{J}}$, where $\fk{p}$ is a prime ideal of $A$ containing $\fk{J}$, and that we have $\wh{\fk{p}}\cap A=\fk{p}$, hence $\Spf(\wh{A})=X'$.
As $\OO_X/\sh{J}^n=(A/\fk{J}^n)^\sim$, the proposition immediately follows from the definitions.
\end{proof}

We say that the formal prescheme defined above is the \emph{completion of $X$ along $X'$}, and we denote it by $X_{/X'}$ or $\wh{X}$ when there is little chance of confusion.
When we take $X'=X$, we can set $\sh{J}=0$, and thus we have $X_{/X}=X$.

It is clear that if $U$ is a subprescheme induced on an open subset of $X$, then $U_{/(U\cap X')}$ canonically identifies with the formal subprescheme induced on $X_{/X'}$ by the open subset $U\cap X'$ of $X'$.

\begin{cor}[10.8.6]
\label{1.10.8.6}
The (usual) prescheme $\wh{X}_\red$ is the unique reduced subprescheme of $X$ having $X'$ for its underlying space \sref{1.5.2.1}.
For $\wh{X}$ to be Noetherian, it is necessary and sufficient that $\wh{X}_\red$ is, and it suffices that $X$ is.
\end{cor}

\begin{proof}
\label{proof-1.10.8.6}
Since the determination of $\wh{X}_\red$ is local \sref{1.10.5.4}, we can assume that $X$ is an affine scheme with Noetherian ring $A$; with the notation of Proposition \sref{1.10.8.5}, the ideal $\fk{T}$ of topologically nilpotent elements of $\wh{A}$ is the inverse image under the canonical map $\wh{A}\to\wh{A}/\wh{\fk{J}}=A/\fk{J}$ of the nilradical of $A/\fk{J}$ \sref[0]{0.7.1.3}, so $\wh{A}/\fk{T}$ is isomorphic to the quotient of $A/\fk{J}$ by its nilradical.
The first assertion then follows from Propositions \sref{1.10.5.4} and \sref{1.5.1.1}.
If $\wh{X}_\red$ is Noetherian, then its underlying space $X'$ is as well, so the $X_n'=\Spec(\OO_X/\sh{J}^n)$ are Noetherian \sref{1.6.1.2} and so is $\wh{X}$ \sref{1.10.6.4}; the converse is immediate by Proposition \sref{1.6.1.2}.
\end{proof}

\begin{env}[10.8.7]
\label{1.10.8.7}
The canonical homomorphisms $\OO_X\to\OO_X/\sh{J}$ (for $\sh{J}\in\Phi$) form a projective system and give, by passing to the projective limit, a homomorphism of sheaves of rings $\theta:\OO_X\to\psi_*((\OO_X)_{/X'})=\varprojlim_\Phi(\OO_X/\sh{J})$, denoting by $\psi$ the canonical injection $X'\to X$ of the underlying spaces.
We denote by $i$ (or $i_X$) the morphism (said to be \emph{canonical})
\[
  (\psi,\theta):X_{/X'}\to X
\]
of ringed spaces.

By taking tensor products, for every coherent $\OO_X$-module $\sh{F}$, the canonical homomorphisms $\OO_X\to\OO_X/\sh{J}$ give homomorphisms $\sh{F}\to\sh{F}\otimes_{\OO_X}(\OO_X/\sh{J})$ of $\OO_X$-modules which form a projective system and thus give, by passing to the projective limit, a canonical functorial homomorphism $\gamma:\sh{F}\to\psi_*(\sh{F}_{/X'})$ of $\OO_X$-modules.
\end{env}

\begin{prop}[10.8.8]
\label{1.10.8.8}
\medskip\noindent
\begin{enumerate}[label=\emph{(\roman*)}]
  \item The functor $\sh{F}_{/X'}$ (in $\sh{F}$) is exact.
  \item The functorial homomorphism $\gamma^\sharp:i^*(\sh{F})\to\sh{F}_{/X'}$ of $(\OO_X)_{/X'}$-modules in an isomorphism.
\end{enumerate}
\end{prop}

\begin{proof}
\label{proof-1.10.8.8}
\medskip\noindent
\begin{enumerate}[label=(\roman*)]
  \item It suffices to prove that if $0\to\sh{F}'\to\sh{F}\to\sh{F}''\to 0$ is an exact sequence of coherent $\OO_X$-modules, and if $U$ is an affine open subset $X$ with Noetherian ring $A$, then the sequence
\[
  0\to\Gamma(U\cap X',\sh{F}_{/X'}')\to\Gamma(U\cap X',\sh{F}_{/X'})\to\Gamma(U\cap X',\sh{F}_{/X'}'')\to 0
\]
is exact.
We have that $\sh{F}|U=\wt{M}$, $\sh{F}'|U=\wt{M'}$, $\sh{F}''|U=\wt{M''}$, where $M$, $M'$, $M''$ are three $A$-modules of finite type such that the sequence $0\to M'\to M\to M''\to 0$ is exact (\sref{1.1.5.1} and \sref{1.1.3.11}); let $\sh{J}\in\Phi$ and let $\fk{J}$ be an ideal of $A$ such that $\sh{J}|U=\wt{\fk{J}}$.
We then have
\[
  \Gamma(U\cap X',\sh{F}\otimes_{\OO_X}\OO_X/\sh{J}^n)=M\otimes_A(A/\fk{J}^n)
\]
\sref{1.3.12}; so, by definition of the projective limit, we have
\[
  \Gamma(U\cap X',\sh{F}_{/X'})=\varprojlim_n(M\otimes_A(A/\fk{J}^n))=\wh{M},
\]
the separated completion of $M$ with respect to the $\fk{J}$-pre-adic topology, and similarly
\[
  \Gamma(U\cap X',\sh{F}_{/X'}')=\wh{M'},\ \Gamma(U\cap X',\sh{F}_{/X'}'')=\wh{M''};
\]
our assertion then follows since $A$ is Noetherian, and the functor $\wh{M}$ in $M$ is exact on the category of $A$-modules of finite type \sref[0]{0.7.3.3}.
\oldpage[I]{197}
  \item The question is local, so we can assume that we have an exact sequence $\OO_X^m\to\OO_X^n\to\sh{F}\to 0$ \sref[0]{0.5.3.2}; as $\gamma^\sharp$ is functorial, and the functors $i^*(\sh{F})$ and $\sh{F}_{/X'}$ are right exact (by (i) and \sref[0]{0.4.3.1}), we have the commutative diagram
\[
  \xymatrix{
    i^*(\OO_X^m)\ar[r]\ar[d]_{\gamma^\sharp} &
    i^*(\OO_X^n)\ar[r]\ar[d]_{\gamma^\sharp} &
    i^*(\sh{F})\ar[r]\ar[d]_{\gamma^\sharp} &
    0\\
    (\OO_X^m)_{/X'}\ar[r] &
    (\OO_X^n)_{/X'}\ar[r] &
    \sh{F}_{/X'}\ar[r] &
    0
  }
  \tag{10.8.8.1}
\]
whose rows are exact.
In addition, the two functors $i^*(\sh{F})$ and $\sh{F}_{/X'}$ commute with finite direct sums (\sref[0]{0.3.2.6} and \sref[0]{0.4.3.2}), and thus we reduce to proving our assertion for $\sh{F}=\OO_X$.
We have $i^*(\OO_X)=(\OO_X)_{/X'}=\OO_\wh{X}$ \sref[0]{0.4.3.4}, and $\gamma^\sharp$ is a homomophism of \emph{$\OO_\wh{X}$-modules}; so it suffices to check that $\gamma^\sharp$ sends the unit section of $\OO_\wh{X}$ over an open subset of $X'$ to itself, which is immediate and shows in this case that $\gamma^\sharp$ is the identity.
\end{enumerate}
\end{proof}

\begin{cor}[10.8.9]
\label{1.10.8.9}
The morphism of ringed spaces $i:X_{/X'}\to X$ is flat.
\end{cor}

\begin{proof}
\label{proof-1.10.8.9}
This follows from \sref[0]{0.6.7.3} and Proposition \sref{1.10.8.8}[i].
\end{proof}

\begin{cor}[10.8.10]
\label{1.10.8.10}
If $\sh{F}$ and $\sh{G}$ are two coherent $\OO_X$-modules, then there exist canonical functorial isomorphisms (in $\sh{F}$ and $\sh{G}$)
\[
  (\sh{F}_{/X'})\otimes_{(\OO_X)_{/X'}}(\sh{G}_{/X'})\isoto(\sh{F}\otimes_{\OO_X}\sh{G})_{/X'},
  \tag{10.8.10.1}
\]
\[
  (\shHom_{\OO_X}(\sh{F},\sh{G}))_{/X'}\isoto\shHom_{(\OO_X)_{/X'}}(\sh{F}_{/X'},\sh{G}_{/X'}).
  \tag{10.8.10.2}
\]
\end{cor}

\begin{proof}
\label{proof-1.10.8.10}
This follows from the canonical identification of $i^*(\sh{F})$ and of $\sh{F}_{/X'}$; the existence of the first isomorphism is then a valid result for all morphisms of ringed spaces (\textbf{0},~4.3.3.1), and the second is a valid result for all flat morphism \sref[0]{0.6.7.6}, by Corollary \sref{1.10.8.9}.
\end{proof}

\begin{prop}[10.8.11]
\label{1.10.8.11}
For every coherent $\OO_X$-module $\sh{F}$, the kernel of the canonical homomorphism $\Gamma(X,\sh{F})\to\Gamma(X',\sh{F}_{/X'})$ induced by $\sh{F}\to\sh{F}_{/X'}$ consists of the zero sections in a neighborhood of $X'$.
\end{prop}

\begin{proof}
\label{proof-1.10.8.11}
It follows from the definition of $\sh{F}_{/X'}$ that the canonical image of such a section is zero.
Conversely, if $s\in\Gamma(X,\sh{F})$ has a zero image in $\Gamma(X',\sh{F}_{/X'})$, then it suffices to see that every $x\in X'$ admits a neighborhood in $X$ in which $s$ is zero, and we can thus reduce to the case where $X=\Spec(A)$ is affine, $A$ Noetherian, $X'=V(\fk{J})$, where $\fk{J}$ is an ideal of $A$, and $\sh{F}=\wt{M}$, where $M$ is an $A$-module of finite type.
Then $\Gamma(X',\sh{F}_{/X'})$ is the separated completion $\wh{M}$ of $M$ for the $\fk{J}$-pre-adic topology, and the homomorphism $\Gamma(X,\sh{F})\to\Gamma(X',\sh{F}_{/X'})$ is the canonical homomorphism $M\to\wh{M}$.
We know \sref[0]{0.7.3.7} that the kernel of this homomorphism is the set of the $z\in M$ killed by an element of $1+\fk{J}$.
So we have $(1+f)s=0$ for some $f\in\fk{J}$; for every $x\in X'$ we have $(1_x+f_x)s_x=0$, and as $1_x+f_x$ is invertible in $\OO_x$ ($\fk{J}_x\OO_x$ being contained in the maximal ideal of $\OO_x$), we have $s_x=0$, which proves the proposition.
\end{proof}

\begin{cor}[10.8.12]
\label{1.10.8.12}
The support of $\sh{F}_{/X'}$ is equal to $\Supp(\sh{F})\cap X'$.
\end{cor}

\begin{proof}
\label{proof-1.10.8.12}
It is clear that $\sh{F}_{/X'}$ is an $(\OO_X)_{/X'}$-module of finite type (\sref{1.10.8.8}[ii] and \sref[0]{0.5.2.4}),
\oldpage[I]{198}
so its support is closed \sref[0]{0.5.2.2} and evidently contained in $\Supp(\sh{F})\cap X'$.
To show that it is equal to the latter set, we immediately reduce to proving that the relation $\Gamma(X',\sh{F}_{/X'})=0$ implies that $\Supp(\sh{F})\cap X'=\emp$; this follows from Proposition \sref{1.10.8.11} and from Theorem \sref{1.1.4.1}.
\end{proof}

\begin{cor}[10.8.13]
\label{1.10.8.13}
Let $u:\sh{F}\to\sh{G}$ be a homomorphism of coherent $\OO_X$-modules.
For $u_{/X'}:\sh{F}_{/X'}\to\sh{G}_{/X'}$ to be zero, it is necessary and sufficient for $u$ to be zero on a neighborhood of $X'$.
\end{cor}

\begin{proof}
\label{proof-1.10.8.13}
By Proposition \sref{1.10.8.8}[ii], $u_{/X'}$ identifies with $i^*(u)$, so if we consider $u$ as a section over $X$ of the sheaf $\sh{H}=\shHom_{\OO_X}(\sh{F},\sh{G})$, then $u_{/X'}$ is the section over $X'$ of $i^*(\sh{H})=\sh{H}_{/X'}$ to which it canonically corresponds ((10.8.10.2) and \sref[0]{0.4.4.6}).
It thus suffices to apply Proposition \sref{1.10.8.11} to the coherent $\OO_X$-module $\sh{H}$.
\end{proof}

\begin{cor}[10.8.14]
\label{1.10.8.14}
Let $u:\sh{F}\to\sh{G}$ be a homomorphism of coherent $\OO_X$-modules.
For $u_{/X'}$ to be a monomorphism (resp. an epimorphism), it is necessary and sufficient for $u$ to be a monomorphism (resp. an epimorphism) on a neighborhood of $X'$.
\end{cor}

\begin{proof}
\label{proof-1.10.8.14}
Let $\sh{P}$ and $\sh{N}$ be the cokernel and kernel of $u$, such that we have the exact sequence $0\to\sh{N}\xrightarrow{v}\sh{F}\xrightarrow{u}\sh{G}\xrightarrow{w}\sh{P}\to 0$, hence \sref{1.10.8.8}[i] the exact sequence
\[
  0\to\sh{N}_{/X'}\xrightarrow{v_{/X'}}\sh{F}_{/X'}\xrightarrow{u_{/X'}}\sh{G}_{/X'}\xrightarrow{w_{/X'}}\sh{P}_{/X'}\to 0.
\]
If $u_{/X'}$ is a monomorphism (resp. an epimorphism), then we have $v_{/X'}=0$ (resp. $w_{/X'}=0$), so there exists a neighborhood of $X'$ on which $v=0$ (resp. $w=0$) by Corollary \sref{1.10.8.13}.
\end{proof}

\subsection{Extension of morphisms to completions}
\label{subsection:extension-of-morphisms-to-completions}

\begin{env}[10.9.1]
\label{1.10.9.1}
Let $X$ and $Y$ be two locally Noetherian (usual) preschemes, $f:X\to Y$ a morphism, $X'$ (resp. $Y'$) a closed subset of the underlying space $X$ (resp. $Y$), such that $f(X')\subset Y'$.
Let $\sh{J}$ (resp. $\sh{K}$) be a sheaf of ideals of $\OO_X$ (resp. $\OO_Y$) such that the support of $\OO_X/\sh{J}$ (resp. $\OO_Y/\sh{K}$) is $X'$ (resp. $Y'$) and $f^*(\sh{K})\OO_X\subset\sh{J}$; we note that there always exist such sheaves of ideals, since for example, we can take $\sh{J}$ to be the largest sheaf of ideals of $\OO_X$ defining a subprescheme of $X$ with underlying space $X'$ \sref{1.5.2.1}, and the hypothesis $f(X')\subset Y'$ implies that $f^*(\sh{K})\OO_X\subset\sh{J}$ \sref{1.5.2.4}.
For every integer $n>0$ we have $f^*(\sh{K}^n)\OO_X\subset\sh{J}^n$ \sref[0]{0.4.3.5}; as a result \sref{1.4.4.6}, if we set $X_n'=(X',\OO_X/\sh{J}^{n+1})$ and $Y_n'=(Y',\OO_Y/\sh{K}^{n+1})$, then $f$ induces a morphism $f_n:X_n'\to Y_n'$, and it is immediate that the $f_n$ form an inductive system.
We denote its inductive limit \sref{1.10.6.8} by $\wh{f}:X_{/X'}\to Y_{/Y'}$, and we say (by abuse of language) that $\wh{f}$ is the \emph{extension of $f$ to the completions of $X$ and $Y$ along $X'$ and $Y'$}.
It is immediate to check that this morphism does not depend on the choice of sheaves of ideals $\sh{J}$ and $\sh{K}$ satisfying the above conditions.
It suffices to see that when $X$ and $Y$ are Noetherian affine schemes with rings $A$ and $B$; then $\sh{J}=\wt{\fk{J}}$ and $\sh{K}=\wt{\fk{K}}$, where $\fk{J}$ (resp. $\fk{K}$) is an ideal of $A$ (resp. $B$), $f$ corresponds to a ring homomorphism $\vphi:B\to A$ such that $\vphi(\fk{K})\subset\fk{J}$ (\sref{1.4.4.6} and \sref{1.1.7.4}); \emph{$\wh{f}$ is then the morphism corresponding \sref{1.10.2.2} to the continuous homomorphism $\wh{\vphi}:\wh{B}\to\wh{A}$}, where $\wh{A}$ (resp. $\wh{B}$) is the separated completion of $A$ (resp. $B$) with respect to the $\fk{J}$-pre-adic (resp. $\fk{K}$-pre-adic) topology \sref{1.10.6.8}; we know that if we replace $\sh{J}$ by another
\oldpage[I]{199}
sheaf of ideals $\sh{J}'=\wt{\fk{J}'}$ such that the support of $\OO_X/\sh{J}'$ is $X'$, then the $\fk{J}$-pre-adic and $\fk{J}'$-pre-adic topologies on $A$ are the same \sref{1.10.82}.

We note that by definition the continuous map $X'\to Y'$ of the underlying spaces of $X_{/X'}$ and $Y_{/Y'}$ correspondign to $\wh{f}$ is none other than the restriction to $X'$ of $f$.
\end{env}

\begin{env}[10.9.2]
\label{1.10.9.2}
It follows immediately from the above definition that the diagram of morphisms of ringed spaces
\[
  \xymatrix{
    \wh{X}\ar[r]^{\wh{f}}\ar[d]_{i_X} &
    \wh{Y}\ar[d]^{i_Y}\\
    X\ar[r]^f &
    Y
  }
\]
is commutative, the vertical arrows being the canonical morphisms \sref{1.10.8.7}.
\end{env}

\begin{env}[10.9.3]
\label{1.10.9.3}
Let $Z$ be a third prescheme, $g:Y\to Z$ a morphism, and $Z'$ a closed subset of $Z$ such that $g(Y')\subset Z'$.
If $\wh{g}$ denotes the completion of the morphism $g$ along $Y'$ and $Z'$, then it immediately follows from \sref{1.10.9.1} that we have $(g\circ f)^\wedge=\wh{g}\circ\wh{f}$.
\end{env}

\begin{prop}[10.9.4]
\label{1.10.9.4}
Let $X$ and $Y$ be two locally Noetherian $S$-preschemes, $Y$ being of finite type over $S$.
Let $f$ and $g$ be two $S$-morphisms from $X$ to $Y$ such that $f(X')\subset Y'$ and $g(X')\subset Y'$.
For $\wh{f}=\wh{g}$ to hold, it is necessary and sufficient for $f$ and $g$ to coincide on a neighborhood of $X'$.
\end{prop}

\begin{proof}
\label{proof-1.10.9.4}
The condition is evidently sufficient (without the finiteness hypothesis on $Y$).
To see that it is necessary, we remark first that the hypothesis $\wh{f}=\wh{g}$ implies that $f(x)=g(x)$ for all $x\in X'$.
On the other hand, the question being local, we can assume that $X$ and $Y$ are affine open neighborhoods of $x$ and $y=f(x)=g(x)$ respectively, with Noetherian rings, that $S$ is affine, and that $\Gamma(Y,\OO_Y)$ is a $\Gamma(S,\OO_S)$-algebra of finite type \sref{1.6.3.3}.
Then $f$ and $g$ correspond to two $\Gamma(S,\OO_S)$-homomorphisms $\rho$ and $\sigma$ from $\Gamma(Y,\OO_Y)$ to $\Gamma(X,\OO_X)$ \sref{1.1.7.3}, and by hypotheseis, the extensions by continuity of these homomorphisms to the separated completion of $\Gamma(Y,\OO_Y)$ are the same.
We conclude from Proposition \sref{1.10.8.11} that for every section $s\in\Gamma(Y,\OO_Y)$, the sections $\rho(s)$ and $\sigma(s)$ coincide on a neighborhood of $X'$ (depending on $s$); as $\Gamma(Y,\OO_Y)$ is an algebra of finite type over $\Gamma(S,\OO_S)$, we have that there exists a neighborhood $V$ of $X'$ such that $\rho(s)$ and $\sigma(s)$ coincide on $V$ for \emph{every} section $s\in\Gamma(Y,\OO_Y)$.
If $h\in\Gamma(X,\OO_X)$ is such that $D(h)$ is a neighborhood of $x$ contained in $V$, then we conclude from the above and from Theorem \sref{1.1.4.1}[d] that $f$ and $g$ coincide on $D(h)$.
\end{proof}

\begin{prop}[10.9.5]
\label{1.10.9.5}
Under the hypotheses of \sref{1.10.9.1}, for every coherent $\OO_Y$-module $\sh{G}$, there exists a canonical functorial isomorphism of $(\OO_X)_{/X'}$-modules
\[
  (f^*(\sh{G}))_{/X'}\isoto\wh{f}^*(\sh{G}_{/Y'}).
\]
\end{prop}

\begin{proof}
\label{proof-1.10.9.5}
If we canonically identify $(f^*(\sh{G}))_{/X'}$ with $i_X^*(f^*(\sh{G}))$ and $\wh{f}^*(\sh{G}_{/Y'})$ with $\wh{f}^*(i_Y^*(\sh{G}))$ \sref{1.10.8.8}, then the proposition immediately follows from the commutativity of the diagram in \sref{1.10.9.2}.
\end{proof}

\begin{env}[10.9.6]
\label{1.10.9.6}
Now let $\sh{F}$ be a coherent $\OO_X$-module, and let $\sh{G}$ be a coherent $\OO_Y$-module.
If $u:\sh{G}\to\sh{F}$ is an $f$-morphism from $\sh{G}$ to $\sh{F}$, then it corresonds to an $\OO_X$-homomorphism $u^\sharp:f^*(\sh{G})\to\sh{F}$, thus by completion a continuous $(\OO_X)_{/X'}$-homomorphism $(u^\sharp)_{/X'}:(f^*(\sh{G}))_{/X'}\to\sh{F}_{/X'}$, and by Proposition \sref{1.10.9.5}, there exists a unique $\wh{f}$-morphism $v:\sh{G}_{/Y'}\to\sh{F}_{/X'}$
\oldpage[I]{200}
such that $v^\sharp=(u^\sharp)_{/X'}$.
If we conider the triples $(\sh{F},X,X')$ ($\sh{F}$ being a coherent $\OO_X$-module and $X'$ a closed subset of $X$) as a \emph{category}, the morphisms $(\sh{F},X,X')\to(\sh{G},Y,Y')$ consisting of a morphism of preschemes $f:X\to Y$ such that $f(X')\subset Y'$ and an $f$-morphism $u:\sh{G}\to\sh{F}$, then we can say that $(X_{/X'},\sh{F}_{/X'})$ is a \emph{functor} in $(\sh{F},X,X')$ with values in the category of pairs $(\fk{Z},\sh{H})$ consisting of a locally Noetherian formal prescheme $\fk{Z}$ and an $\OO_\fk{Z}$-module $\sh{H}$, the morphisms of the latter category being the pairs consisting of a morphism $g$ of formal preschemes and a $g$-morphism.
\end{env}

\begin{prop}[10.9.7]
\label{1.10.9.7}
Let $S$, $X$, and $Y$ be three locally Noetherian preschemes, $g:X\to S$ and $h:Y\to S$ two morphisms, $S'$ a closed subset of $S$, $X'$ (resp. $Y'$) a closed subset of $X$ (resp. $Y$) such that $g(X')\subset S'$ (resp. $h(Y')\subset S'$); let $Z=X\times_S Y$; suppose $Z$ is locally Noetherian, and let $Z'=p^{-1}(X')\cap q^{-1}(Y')$, where $p$ and $q$ are the projections of $X\times_S Y$.
With these conditions, the completion $Z_{/Z'}$ identifies with the product of formal $S_{/S'}$-preschemes $(X_{/X'})\times_{S_{/S'}}(Y_{/Y'})$, the structure morphisms identify with $\wh{g}$ and $\wh{h}$, and the projections with $\wh{p}$ and $\wh{q}$.
\end{prop}

\begin{proof}
\label{proof-1.10.9.7}
It is immediate that the question is local for $S$, $X$, and $Y$, and we thus reduce to the case where $S=\Spec(A)$, $X=\Spec(B)$, $Y=\Spec(C)$, $S'=V(\fk{J})$, $X'=V(\fk{K})$, and $Y'=V(\fk{L})$, where $\fk{J}$, $\fk{K}$, and $\fk{L}$ are three ideals such that $\vphi(\fk{J})\subset\fk{K}$ and $\psi(\fk{J})\subset\fk{L}$, where we denote by $\vphi$ and $\psi$ the homomorphisms $A\to B$ and $A\to C$ which correspond to $g$ and $h$.
We know that $Z=\Spec(B\otimes_A C)$ and that $Z'=V(\fk{M})$, where $\fk{M}$ is the ideal $\Im(\fk{K}\otimes_A C)+\Im(B\otimes_A\fk{L})$.
The conclusion follows \sref{1.10.7.2} from the fact that the completed tensor product $(\wh{B}\otimes_\wh{A}\wh{C})^\wedge$ (where $\wh{A}$, $\wh{B}$, and $\wh{C}$ are respectively the separated completions of $A$, $B$, and $C$ with respect to the $\fk{J}$-, $\fk{K}$-, and $\fk{L}$-pre-adic topologies) is the separated completion of the tensor product $B\otimes_A C$ with respect to the $\fk{M}$-pre-adic topology \sref[0]{0.7.7.2}.
\end{proof}

In addition, we note that if $T$ is a locally Noetherian $S$-prescheme, $u:T\to X$ and $v:T\to Y$ two $S$-morphisms, $T'$ a closed subset of $T$ such that $u(T')\subset X'$ and $v(T')\subset Y'$, then the extension to the completion $((u,v)_S)^\wedge$ identifies with $(\wh{u},\wh{v})_{S_{/S'}}$.

\begin{cor}[10.9.8]
\label{1.10.9.8}
Let $X$ and $Y$ be two locally Noetherian $S$-preschemes such that $X\times_S Y$ is locally Noetherian; let $S'$ be a closed subset of $S$, $X'$ (resp. $Y'$) a closed subset of $X$ (resp. $Y$) whose image in $S$ is contained in $S'$.
For every $S$-morphism $f:X\to Y$ such that $f(X')\subset Y'$, the graph morphism $\Gamma_\wh{f}$ identifies with the extension $(\Gamma_f)^\wedge$ of the graph morphism of $f$.
\end{cor}

\begin{cor}[10.9.9]
\label{1.10.9.9}
Let $X$ and $Y$ be two locally Noetherian preschemes, $f:X\to Y$ a morphism, $Y'$ a closed subset of $Y$, and $X'=f^{-1}(Y')$.
Then the prescheme $X_{/X'}$ is identified, by the commutative diagram
\[
  \xymatrix{
    X\ar[d]_f &
    X_{/X'}\ar[l]\ar[d]^{\wh{f}}\\
    Y &
    Y_{/Y'}\ar[l]
  }
\]
with the product $X\times_Y(Y_{/Y'})$ of formal preschemes.
\end{cor}

\begin{proof}
\label{proof-1.10.9.9}
It suffices to apply Proposition \sref{1.10.9.7}, replacing $S$ and $S'$ by $Y$, $X$ and $X'$ by $X$.
\end{proof}

\begin{rmk}[10.9.10]
\label{1.10.9.10}
\oldpage[I]{201}
If $S$ is the sum $X_1\sqcup X_2$ (3.1), $X'$ the union $X_1'\cup X_2'$, where $X_i'$ is a closed subset of $X_i$ ($i=1,2$), then we have $X_{/X'}={X_1}_{/X_1'}\sqcup{X_2}_{/X_2'}$.
\end{rmk}

\subsection{Application to coherent sheaves on formal affine schemes}
\label{subsection:application-to-coherent-sheaves-on-formal-affine-schemes}

\begin{env}[10.10.1]
\label{1.10.10.1}
In this paragraph, $A$ denotes an \emph{adic Noetherian ring}, $\fk{J}$ an ideal of definition for $A$.
Let $X=\Spec(A)$, $\fk{X}=\Spf(A)$, which identifies with the closed subset $V(\fk{J})$ of $X$ \sref{1.10.1.2}.
In addition, the Definitions \sref{1.10.1.2} and \sref{1.10.8.4} show that the \emph{formal affine scheme $\fk{X}$} is identical the completion $X_{/\fk{X}}$ of the affine scheme $X$ along the closed subset $\fk{X}$ of its underling space.
To every coherent $\OO_X$-module $\sh{F}$ corresponds an $\OO_\fk{X}$-module of finite type $\sh{F}_{/\fk{X}}$, which is a sheaf of topological modules over over the sheaf of topological rings $\OO_\fk{X}$.
Every coherent $\OO_X$-module $\sh{F}$ is of the form $\wt{M}$, where $M$ is an $A$-module of finite type \sref{1.1.5.1}; we set $(\wt{M})_{/X}=M^\Delta$.
In addition, if $u:M\to N$ is an $A$-homomorphism of $A$-modules of finite type, then it corresponds to a homomorphism $\wt{u}:\wt{M}\to\wt{N}$, and as a result to a continuous homomorphism $\wt{u}_{/X'}:(\wt{M})_{/X'}\to(\wt{N})_{/X'}$, which we denote by $u^\Delta$.
It is immediate that $(v\circ u)^\Delta=v^\Delta\circ u^\Delta$; we have thus defined a \emph{covariant additive functor $M^\Delta$} from the category of $A$-modules of finite type to the category of $\OO_\fk{X}$-modules of finite type.
When $A$ is a \emph{discrete} ring, we have $M^\Delta=\wt{M}$.
\end{env}

\begin{prop}[10.10.2]
\label{1.10.10.2}
\medskip\noindent
\begin{enumerate}[label=\emph{(\roman*)}]
  \item $M^\Delta$ is an exact functor in $M$, and there exists a canonical functorial isomorphism of $A$-modules $\Gamma(\fk{X},M^\Delta)\isoto M$.
  \item If $M$ and $N$ are two $A$-modules of finite type, then there exist canonical functorial isomorphisms
    \[
      (M\otimes_A N)^\Delta\isoto M^\Delta\otimes_{\OO_\fk{X}}N^\Delta,
      \tag{10.10.2.1}
    \]
    \[
      (\Hom_A(M,N))^\Delta\isoto\shHom_{\OO_\fk{X}}(M^\Delta,N^\Delta).
      \tag{10.10.2.2}
    \]
  \item The map $u\mapsto u^\Delta$ is a functorial isomorphism
    \[
      \Hom_A(M,N)\isoto\Hom_{\OO_X}(M^\Delta,N^\Delta).
      \tag{10.10.2.3}
    \]
\end{enumerate}
\end{prop}

\begin{proof}
\label{proof-1.10.10.2}
The exactness of $M^\Delta$ follows from the exactness of the functors $\wt{M}$ \sref{1.1.3.5} and $\sh{F}_{/X'}$ \sref{1.10.8.8}.
By definition, $\Gamma(X,M^\Delta)$ is the separated completion of the $A$-module $\Gamma(X,\wt{M})=M$ with respect to the $\fk{J}$-pre-adic topology; but as $A$ is complete and $M$ is of finite type, we know \sref[0]{0.7.3.6} that $M$ is separated and complete, which proves (i).
The isomorphism (10.10.2.1) (resp. (10.10.2.2)) coms from the composition of the isomorphisms \sref{1.1.3.12}[i] and (10.8.10.1) (resp. \sref{1.1.3.12}[ii] and (10.8.10.2)).
Finally, as $\Hom_A(M,N)$ is an $A$-mdodule of finite type, we can apply (i), which identifies $\Gamma(\fk{X},(\Hom_A(M,N))^\Delta)$ with $\Hom_A(M,N)$, and we use (10.10.2.2), which proves that the homomorphism (10.10.2.3) is an isomorphism.
\end{proof}

We deduce from Proposition \sref{1.10.10.2} a series of analogous results to those of Theorem \sref{1.1.3.7} and Corollary \sref{1.1.3.12}, which we leave to the reader to formulate.

\oldpage[I]{202}
We note that the exactness property of $M^\Delta$, applied to the exact sequence $0\to\fk{J}\to A\to A/\fk{J}\to 0$ shows that the sheaf of ideals of $\OO_\fk{X}$ denoted here by $\fk{J}^\Delta$ coincides with the one described similarly in \sref{1.10.3.1}, by \sref{1.10.3.2}.

\begin{prop}[10.10.3]
\label{1.10.10.3}
Under the hypotheses of \sref{1.10.10.1}, $\OO_\fk{X}$ is a coherent sheaf of rings.
\end{prop}

\begin{proof}
\label{proof-1.10.10.3}
If $f\in A$, then we know that $A_{\{f\}}$ is an adic Noetherian ring \sref[0]{0.7.6.11}, and as the question is local, we reduce \sref{1.10.1.4} to proving that the kernel of the homomorphism $v:\OO_\fk{X}^n\to\OO_\fk{X}$ is an $\OO_\fk{X}$-module of finite type.
We then have $v=u^\Delta$, where $u$ is an $A$-homomorphism $A^n\to A$ \sref{1.10.10.2}; as $A$ is Noetherian, the kernel of $u$ is of finite type, in other words we have a homomorphism $A^m\xrightarrow{w}A^n$ such that the sequence $A^m\xrightarrow{w}A^n\xrightarrow{u}A$ is exact.
We conclude \sref{1.10.10.2} that the sequence $\OO_\fk{X}^m\xrightarrow{w^\Delta}\OO_\fk{X}^n\xrightarrow{v}\OO_\fk{X}$ is exact, which proves that the kernel of $v$ is of finite type.
\end{proof}

\begin{env}[10.10.4]
\label{1.10.10.4}
With the above notation, set $A_n=A/\fk{J}^{n+1}$, and let $S_n$ be the affine scheme $\Spec(A_n)=(\fk{X},\OO_\fk{X}/\sh{J}^{n+1})$, $\sh{J}=\fk{J}^\Delta$ being the sheaf of ideals of definition for $\OO_\fk{X}$ corresponding to the ideal $\fk{J}$.
Let $u_{mn}$ be the morphism of preschemes $X_m\to X_n$ corresponding to the canonical homomorphism $A_n\to A_m$ for $m\leq n$; the formal scheme $\fk{X}$ is the inductive limit of the $X_n$ with respect to the $u_{mn}$ \sref{1.10.6.3}.
\end{env}

\begin{prop}[10.10.5]
\label{1.10.10.5}
Under the hypothesis of \sref{1.10.10.1}, let $\sh{F}$ be an $\OO_\fk{X}$-module.
The following conditions are equivalent:
\begin{enumerate}[label=\emph{(\alph*)}]
  \item $\sh{F}$ is a coherent $\OO_\fk{X}$-module.
  \item $\sh{F}$ is isomorphic to the projective limit \sref{1.10.6.6} of a sequence $(\sh{F}_n)$ of coherent $\OO_{X_n}$-modules such that $u_{mn}^*(\sh{F}_n)=\sh{F}_m$.
  \item There exists an $A$-module of finite type $M$ (determined up to a canonical isomorphism by Proposition \sref{1.10.10.2}[i]) such that $\sh{F}$ is isomorphic to $M^\Delta$.
\end{enumerate}
\end{prop}

\begin{proof}
\label{proof-1.10.10.5}
We first show that (b) implies (c).
We have $\sh{F}_n=\wt{M_n}$, where $M_n$ is an $A_n$-module of finite type, and the hypotheses imply that $M_m=M_n\otimes_{A_n}A_m$ for $m\leq n$ \sref{1.1.6.5}; the $M_n$ thus form a projective system for the canonical di-homomorphisms $M_n\to M_m$ ($m\leq n$), and it follows immediately from the definition of the $A_n$ that this projective system satisfies the conditions of \sref[0]{0.7.2.9}; as a result, its projective limit $M$ is an $A$-module of finite type such that $M_n=M\otimes_A A_n$ for all $n$.
We deduce that $\sh{F}_n$ is induced over $X_n$ by $\wt{M}\otimes_{\OO_X}(\OO_X/\wt{\fk{J}}^{n+1})$, so $\sh{F}=M^\Delta$ by Definition \sref{1.10.8.4}.

Conversely, (c) implies (b); indeed, if $u_n$ is the immersion morphism $X_n\to X$, then $u_n^*(\wt{M})=(M\otimes_A A_n)^\sim$ is induced over $X_n$ by $\wt{M}\otimes_{\OO_X}(\OO_X/\wt{\fk{J}}^{n+1})$, and $M^\Delta=\varprojlim u_n^*(\wt{M})$ by Definition \sref{1.10.8.4}; as $u_m=u_n\circ u_{mn}$ for $m\leq n$, the $\sh{F}_n=u_n^*(\wt{M})$ satisfy the conditions of (b), hence our assertion.

We now show that (c) implies (a): indeed, we have by definition that $\OO_\fk{X}=A^\Delta$; as $M$ is the cokernel of a homomorphism $A^m\to A^n$, it follows from Proposition \sref{1.10.10.2} that $M^\Delta$ is the cokernel of a homomorphism $\OO_\fk{X}^m\to\OO_\fk{X}^n$, and as the sheaf of rings $\OO_\fk{X}$ is coherent \sref{1.10.10.3}, so is $M^\Delta$ \sref[0]{0.5.3.4}.

\oldpage[I]{203}
Finally, (a) implies (b).
Considered as an $\OO_\fk{X}$-module, we have that $\OO_{X_n}=\OO_\fk{X}/\sh{J}^{n+1}=A_n^\Delta$; $\sh{F}_n=\sh{F}\otimes_{\OO_\fk{X}}\OO_{X_n}$ is a coherent $\OO_\fk{X}$-module \sref[0]{0.5.3.5}, and as it is also an $\OO_{X_n}$-modules and $\sh{J}^{n+1}$ is coherent, we conclude that $\sh{F}_n$ is a coherent $\OO_{X_n}$-module \sref[0]{0.5.3.10}, and it is imediate that $u_{mn}^*(\sh{F}_n)=\sh{F}_m$ for $m\leq n$ (recalling that the continuous map $X_m\to X_n$ of the underlying spaces in the identity on $\fk{X}$).
The sheaf $\sh{G}=\varprojlim\sh{F}_n$ is thus a coherent $\OO_\fk{X}$-module, since we have seen that (b) implies (a). The canonical homomorphisms $\sh{F}\to\sh{F}_n$ form a projective system, which by passing to the limit gives a canonical homomorphism $w:\sh{F}\to\sh{G}$, and it remains to prove that $w$ is bijective.
The question is now \emph{local}, so we can reduce to the case where $\sh{F}$ is the cokernel of a homomorphism $\OO_\fk{X}^p\to\OO_\fk{X}^q$; as this homomorphism is of the form $v^\Delta$, where $v$ is a homomorphism $A^m\to A^n$ \sref{1.10.10.2}, $\sh{F}$ is isomorphic to $M^\Delta$, where $M=\Coker{v}$ \sref{1.10.10.2}.
We then have by Proposition \sref{1.10.10.2} that $\sh{F}_n=M^\Delta\otimes_{\OO_\fk{X}}A_n^\Delta=(M\otimes_A A_n)^\Delta$, and as the $\fk{J}$-adic topology on $M\otimes_A A_n$ is discrete, we have $(M\otimes_A A_n)^\Delta=(M\otimes_A A_n)^\sim$ (as an $\OO_{X_n}$-module); we have seen above that $M^\Delta=\varprojlim\sh{F}_n$, and $w$ is thus the identity in this case.
Q.E.D.
\end{proof}

\begin{cor}[10.10.6]
\label{1.10.10.6}
If $\sh{F}$ satisfies condition \emph{(b)} of Proposition \sref{1.10.10.5}, then the projective system $(\sh{F}_n)$ is isomorphic to the system of the $\sh{F}\otimes_{\OO_\fk{X}}\OO_{X_n}$.
\end{cor}

\begin{env}[10.10.7]
\label{1.10.10.7}
Now let $A$ and $B$ be two adic Noetherian rings, $\vphi:B\to A$ a continuous homomorphism; we denote by $\fk{J}$ (resp. $\fk{K}$) an ideal of definition for $A$ (resp. $B$) such that $\vphi(\fk{K})\subset\fk{J}$, and we set $X=\Spec(A)$, $Y=\Spec(B)$, $\fk{X}=\Spf(A)$, and $\fk{Y}=\Spf(B)$.
Let $f:X\to Y$ be the morphism of preschemes corresponding to $\vphi$ \sref{1.1.6.1}, $\wh{f}:\fk{X}\to\fk{Y}$ its extension to the completions \sref{1.10.9.1}, which is also a morphism of formal preschemes corresponding to $\vphi$ \sref{1.10.2.2}.
\end{env}

\begin{prop}[10.10.8]
\label{1.10.10.8}
For every $B$-module $N$ of finite type, there exists a canonical functorial isomorphism of $\OO_\fk{X}$-modules
\[
  \wh{f}^*(N^\Delta)\isoto(N\otimes_B A)^\Delta.
\]
\end{prop}

\begin{proof}
\label{proof-1.10.10.8}
Denoting by $i_X:\fk{X}\to X$ and $i_Y:\fk{Y}\to Y$ the canonical morphisms, we have \sref{1.10.8.8}, up to canonical functorial isomorphisms, $N^\Delta=i_Y^*(\wt{N})$ and
\[
  (N\otimes_B A)^\Delta=i_X^*((N\otimes_B A)^\sim)=i_X^*(f^*(\wt{N}))
\]
\sref{1.1.6.5}; the proposition then follows from the commutativity of the diagram in \sref{1.10.9.2}.
\end{proof}

\begin{cor}
\label{1.10.10.9}
For every ideal $\fk{b}$ of $B$, we have $\wh{f}^*(\fk{b}^\Delta)\OO_\fk{X}=(\fk{b}A)^\Delta$.
\end{cor}

\begin{proof}
\label{proof-1.10.10.9}
Let $j$ be the canonical injection $\fk{b}\to B$, to which corresponds the canonical injection $j^\Delta:\fk{b}^\Delta\to\OO_\fk{Y}$ of sheaves of $\OO_\fk{Y}$-modules; by definition, $\wh{f}^*(\fk{b}^\Delta)\OO_\fk{X}$ is the image of the homomorphism $\wh{f}^*(j^\Delta):\wh{f}^*(\fk{b}^\Delta)\to\OO_\fk{X}=\wh{f}^*(\OO_\fk{Y})$; but this homomorphism identifies with $(j\otimes 1)^\Delta:(\fk{b}\otimes_B A)^\Delta\to\OO_\fk{X}=(B\otimes_B A)^\Delta$ by Proposition \sref{1.10.10.8}.
As the image of $j\otimes 1$ is the ideal $\fk{b}A$ of $A$, the image of $(j\otimes 1)^\Delta$ is thus $(\fk{b}A)^\Delta$ by Proposition \sref{1.10.10.2}, hence the conclusion.
\end{proof}

\subsection{Coherent sheaves on formal preschemes}
\label{subsection:coherent-sheaves-on-formal-preschemes}

\begin{prop}[10.11.1]
\label{1.10.11.1}
\oldpage[I]{204}
If $\fk{X}$ is a locally Noetherian formal prescheme, then the sheaf of rings $\OO_\fk{X}$ is coherent and every sheaf of ideals of definition for $\fk{X}$ is coherent.
\end{prop}

\begin{proof}
\label{proof-1.10.11.1}
The question is local, so we can reduce to the case of a Noetherian affine formal scheme, and the proposition follows from Propositions \sref{1.10.10.3} and \sref{1.10.10.5}.
\end{proof}

\begin{env}[10.11.2]
\label{1.10.11.2}
Let $\fk{X}$ be a locally Noetherian formal prescheme, $\sh{J}$ a sheaf of ideals of definition for $\fk{X}$, and $X_n$ the locally Noetherian (usual) prescheme $(\fk{X},\OO_\fk{X}/\sh{J}^{n+1})$, such that $\fk{X}$ is the \emph{inductive limit} of the sequence $(X_n)$ with respect to the canonical morphisms $u_{mn}:X_m\to X_n$ \sref{1.10.6.3}.
With these notation:
\end{env}

\begin{thm}[10.11.3]
\label{1.10.11.3}
For an $\OO_\fk{X}$-module $\sh{F}$ to be coherent, it is necessary and sufficient for it to be isomorphic to a projective limit of a sequence $(\sh{F}_n)$, where $\sh{F}_n$ is a coherent $\OO_{X_n}$-module such that $u_{mn}^*(\sh{F}_n)=\sh{F}_m$ for $m\leq n$ \sref{1.10.6.6}.
The projective system $(\sh{F}_n)$ is then isomorphic to the system of the $u_n^*(\sh{F})=\sh{F}\otimes_{\OO_\fk{X}}\OO_{X_n}$, where $u_n$ is the canonical morphism $X_n\to\fk{X}$.
\end{thm}

\begin{proof}
\label{proof-1.10.11.3}
The question is local, so we can reduce to the case where $\fk{X}$ is a Noetherian affine formal scheme, and the theorem then is a consequence of Proposition \sref{1.10.10.5} and Corollary \sref{1.10.10.6}.
\end{proof}

We can thus say that \emph{the data of a coherent $\OO_\fk{X}$-module is equivalent to the data of a projective system $(\sh{F}_n)$ of coherent $\OO_{X_n}$-modules such that $u_{mn}(\sh{F}_n)=\sh{F}_m$ for $m\leq n$}.

\begin{cor}[10.11.4]
\label{1.10.11.4}
If $\sh{F}$ and $\sh{G}$ are two coherent $\OO_\fk{X}$-modules, then we can (with the notation of Theorem \sref{1.10.11.3}) define a canonical functorial isomorphism
\[
  \Hom_{\OO_\fk{X}}(\sh{F},\sh{G})\isoto\varprojlim_n\Hom_{\OO_{X_n}}(\sh{F}_n,\sh{G}_n).
  \tag{10.11.4.1}
\]
\end{cor}

\begin{proof}
\label{proof-1.10.11.4}
The projective limit in the right hand side is understood to be with respect to the maps $\theta_n\mapsto u_{mn}^*(\theta_n)$ ($m\leq n$) from $\Hom_{\OO_{X_n}}(\sh{F}_n,\sh{G}_n)$ to $\Hom_{\OO_{X_m}}(\sh{F}_m,\sh{F}_m)$.
The homomorphism (10.11.4.1) sends an element $\theta\in\Hom_{\OO_\fk{X}}(\sh{F},\sh{G})$ to the sequence $(u_n^*(\theta))$; we see that we have defined an inverse homomorphism of the above by sending a projective system $(\theta_n)\in\varprojlim_n\Hom_{\OO_{X_n}}(\sh{F}_n,\sh{G}_n)$ to its projective limit in $\Hom_{\OO_\fk{X}}(\sh{F},\sh{G})$, taking into account Theorem \sref{1.10.11.3}.
\end{proof}

\begin{cor}[10.11.5]
\label{1.10.11.5}
For a homomorphism $\theta:\sh{F}\to\sh{G}$ to be surjective, it is necessary and sufficient for the corresponding homomorphism $\theta_0=u_0^(\theta):\sh{F}_0\to\sh{G}_0$ to be surjective.
\end{cor}

\begin{proof}
\label{proof-1.10.11.5}
The question is local, so we reduce to the case where $\fk{X}=\Spf(A)$, where $A$ is an adic Noetherian ring, $\sh{F}=M^\Delta$, $\sh{G}=N^\Delta$, and $\theta=u^\Delta$, where $M$ and $N$ are two $A$-modules of finite type and $u$ is a homomorphism $M\to N$; we then have that $\theta_0=\wt{u_0}$, where $u_0$ is the homomorphism $u\otimes 1:M\otimes_A A/\fk{J}\to N\otimes_A A/\fk{J}$; the conclusion follows from the fact that $u$ and $u_0$ are simultaneously surjective \sref[0]{0.7.1.14}.
\end{proof}

\begin{env}[10.11.6]
\label{1.10.11.6}
Theorem \sref{1.10.11.3} shows that we can consider every coherent $\OO_\fk{X}$-module $\sh{F}$ as a \emph{topological $\OO_\fk{X}$-module}, considering it as a projective limit of \emph{pseudo-discrete} sheaves of groups $\sh{F}_n$ \sref[0]{0.3.8.1}.
It then follows from Corollary \sref{1.10.11.4} that every homomorphism $u:\sh{F}\to\sh{G}$ of coherent $\OO_\fk{X}$-modules is automatically \emph{continuous}
\oldpage[I]{205}
\sref[0]{0.3.8.2}.
In addition, if $\sh{H}$ is a coherent $\OO_\fk{X}$-submodule of a coherent $\OO_\fk{X}$-module $\sh{F}$, then for every open $U\subset\fk{X}$, $\Gamma(U,\sh{H})$ is a \emph{closed} subgroup of the topological group $\Gamma(U,\sh{F})$, since the functor $\Gamma$ is left exact, $\Gamma(U,\sh{H})$ the kernel of the homomorphism $\Gamma(U,\sh{F})\to\Gamma(U,\sh{F}/\sh{H})$, which is \emph{continuous} by the above, since $\sh{F}/\sh{G}$ is coherent \sref[0]{0.5.3.4}; our assertion follows from the fact that $\Gamma(U,\sh{F}/\sh{H})$ is a separated topological group.
\end{env}

\begin{prop}[10.11.7]
\label{1.10.11.7}
Let $\sh{F}$ and $\sh{G}$ be two coherent $\OO_\fk{X}$-modules.
We can define (with the notation of Theorem \sref{1.10.11.3}) two canonical functorial isomorphisms of topological $\OO_\fk{X}$-modules \sref{1.10.11.6}
\[
  \sh{F}\otimes_{\OO_\fk{X}}\sh{G}\isoto\varprojlim_n(\sh{F}_n\otimes_{\OO_{X_n}}\sh{G}_n),
  \tag{10.11.7.1}
\]
\[
  \shHom_{\OO_\fk{X}}(\sh{F},\sh{G})\isoto\varprojlim_n\shHom_{\OO_{X_n}}(\sh{F}_n\sh{G}_n).
  \tag{10.11.7.2}
\]
\end{prop}

\begin{proof}
\label{proof-1.10.11.7}
The existence of the isomorphism (10.11.7.1) follows from the formula
\[
  \sh{F}_n\otimes_{\OO_{X_n}}\sh{G}_n=(\sh{F}\otimes_{\OO_\fk{X}}\OO_{X_n})\otimes_{\OO_{X_n}}(\sh{G}\otimes_{\OO_\fk{X}}\OO_{X_n})=(\sh{F}\otimes_{\OO_\fk{X}}\sh{G})\otimes_{\OO_\fk{X}}\OO_{X_n}
\]
and from Theorem \sref{1.10.11.3}.
The isomorphism (10.11.7.2) where the two sodes are considered as sheaves of modules without topology, follows from the definition of the sections of $\shHom_{\OO_\fk{X}}(\sh{F},\sh{G})$ and $\shHom_{\OO_{X_n}}(\sh{F}_n,\sh{G}_n)$ and the existence of the isomorphism (10.11.4.1), mapping a prescheme induced on an arbitrary Noetherian formal affine open set to $\fk{X}$.
It rwmains to prove that the isomorphism (10.11.7.2) is bicontinuous over a quasi-compact set, and we can thus reduce to the case where $\fk{X}=\Spf(A)$, $A$ an adic Noetherian ring, hence \sref{1.10.10.5} $\sh{F}=M^\Delta$ and $\sh{G}=N^\Delta$, where $M$ and $N$ are $A$-modules of finite type; taking into account (10.10.2.1), (10.10.2.3), and Corollary \sref{1.1.3.12}[ii], we reduce to showing that the canonical isomorphism $\Hom_A(M,N)\isoto\varprojlim_n\Hom_{A_n}(M_n,N_n)$ (with $M_n=M\otimes_A A_n$ and $N_n=N\otimes_A A_n$) is continuous, which has been proved in \sref[0]{0.7.8.2}.
\end{proof}

\begin{env}[10.11.8]
\label{1.10.11.8}
As $\Hom_{\OO_\fk{X}}(\sh{F},\sh{G})$ is the group of sections of the sheaf of topological groups $\shHom_{\OO_\fk{X}}(\sh{F},\sh{G})$, it is equipped with a group topology.
If $\fk{X}$ is \emph{Noetherian}, then it follows from (10.11.7.2) that the subgroups $\Hom_{\OO_\fk{X}}(\sh{F},\sh{J}^n\sh{G})$ ($n$ arbitrary) form a fundamental system of neighborhoods of $0$ in this group.
\end{env}

\begin{prop}[10.11.9]
\label{1.10.11.9}
Let $\fk{X}$ be a Noetherian formal prescheme, $\sh{F}$ and $\sh{G}$ two coherent $\OO_\fk{X}$-modules.
In the topological group $\Hom_{\OO_\fk{X}}(\sh{F},\sh{G})$, the surjective (resp. injective, bijective) homomorphisms form an open set.
\end{prop}

\begin{proof}
\label{proof-1.10.11.9}
By Corollary \sref{1.10.11.5}, the set of surjective homomorphisms in $\Hom_{\OO_\fk{X}}(\sh{F},\sh{G})$ is the inverse image under the continuous map $\Hom_{\OO_\fk{X}}(\sh{F},\sh{G})\to\Hom_{\OO_{X_0}}(\sh{F}_0,\sh{G}_0)$ of a subset of the discrete group $\Hom_{\OO_{X_0}}(\sh{F}_0,\sh{G}_0)$, hence the first assertion.
To show the second, we cover $\fk{X}$ by a finite number of Noetherian formal affine subsets $U_i$.
For $\theta\in\Hom_{\OO_\fk{X}}(\sh{F},\sh{G})$ to be injective, it is necessary and sufficient for all of the images under the (continuous) restriction maps $\Hom_{\OO_\fk{X}}(\sh{F},\sh{G})\to\Hom_{\OO_\fk{X}|U_i)}(\sh{F}|U_i,\sh{G}|U_i)$ to be injective; we can thus reduce to the affine case, and then this has already been proved in \sref[0]{0.7.8.3}.
\end{proof}

\subsection{Adic morphisms of formal preschemes}
\label{subsection:adic-morphisms-of-formal-preschemes}

\begin{env}[10.12.1]
\label{1.10.12.1}
\oldpage[I]{206}
Let $\fk{X}$ and $\fk{S}$ be two \emph{locally Noetherian} formal preschemes;
we say that a morphism $f:\fk{X}\to\fk{S}$ is \emph{adic} if there exists an ideal of definition $\sh{J}$ of $\fk{S}$ such that $\sh{K}=f^*(\sh{J})\OO_\fk{X}$ is an ideal of definition of $\fk{X}$;
we then also say that $\fk{X}$ is an \emph{adic $\fk{S}$-prescheme} (for $f$).
Whenever this is the case, for \emph{every} ideal of definition $\sh{J}_1$ of $\fk{S}$, $\sh{K}_1=f^*(\sh{J}_1)\OO_\fk{X}$ is an ideal of definition of $\fk{X}$.
Indeed, the question being local, we can assume that $\fk{X}$ and $\fk{S}$ are Noetherian and affine;
there then exists a whole number $n$ such that $\sh{J}^n\subset\sh{J}_1$ and $\sh{J}_1^n\subset\sh{J}$ (\sref{1.10.3.6} and \sref[0]{0.7.1.4}), whence $\sh{K}^n\subset\sh{K}_1$ and $\sh{K}_1^n\subset\sh{K}$.
The first of these equalities shows that $\sh{K}_1=\fk{K}_1^\Delta$, where $\fk{K}_1$ is an open ideal of $A=\Gamma(\fk{X},\OO_\fk{X})$, and the second shows that $\fk{K}_1$ is an ideal of definition of $A$ \sref[0]{0.7.1.4}, whence our claim.
\end{env}

It follows immediately from the above that, if $\fk{X}$ and $\fk{Y}$ are adic $\fk{S}$-preschemes, then \emph{every $\fk{S}$-morphism $u:\fk{X}\to\fk{Y}$ is adic}:
indeed, if $f:\fk{X}\to\fk{S}$ and $g:\fk{Y}\to\fk{S}$ are the structure morphisms, and $\sh{J}$ is an ideal of definition of $\fk{S}$, then we have $f=g\circ u$, and so $u^*(g^*(\sh{J})\OO_\fk{Y})\OO_\fk{X}=f^*(\sh{J})\OO_\fk{X}$ is an ideal of definition of $\fk{X}$, and, by hypothesis, $g^*(\sh{J})\OO_\fk{Y}$ is an ideal of definition of $\fk{Y}$.

\begin{env}[10.12.2]
\label{1.10.12.2}
In what follows, we suppose that we have some fixed locally Noetherian formal prescheme $\fk{S}$, and some ideal of definition $\sh{J}$ of $\fk{S}$;
we set $S_n=(\fk{S},\OO_\fk{S}/\sh{J}^{n+1})$.
The (locally Noetherian) adic $\fk{S}$-preschemes clearly form a \emph{category}.
We say that an inductive system $(X_n)$ of locally Noetherian (usual) $S_n$-preschemes is an \emph{adic inductive $(S_n)$-system} if the structure morphisms $f_n:X_n\to S_n$ are such that, for $m\leq n$, the diagrams
\[
  \xymatrix{
    X_n \ar[d]_{f_n}
    & X_m \ar[l] \ar[d]^{f_m}\\
    S_n
    & S_m \ar[l]
  }
\]
commute and \emph{identify $X_m$ with the product $X_n\times_{S_n}S_m=(X_n)_{(S_n)}$}.
The adic inductive systems form a \emph{category}:
it suffices in fact to define a morphism $(X_n)\to(Y_n)$ of such systems to be an \emph{inductive system of $S_n$-morphisms $u_n:X_n\to Y_n$} such that $u_m$ is identified with $(u_n)_{(S_m)}$ for $m\leq n$.
With this in mind:
\end{env}

\begin{thm}[10.12.3]
\label{1.10.12.3}
There is a canonical equivalence between the category of adic $\fk{S}$-preschemes and the category of adic inductive $(S_n)$-systems.
\end{thm}

The equivalence in question is obtained in the following way:
if $\fk{X}$ is an adic $\fk{S}$-prescheme, and $f:\fk{X}\to\fk{S}$ is the structure morphism, then $\sh{K}=f^*(\sh{J})\OO_\fk{X}$ is an ideal of definition of $\fk{X}$, and we associate to $\fk{X}$ the inductive system of the $X_n=(\fk{X},\OO_\fk{X}/\sh{K}^{n+1})$, with the stucure morphism $f_n:X_n\to S_n$ corresponding to $f$ \sref{1.10.5.6}.
We first show that $(X_n)$ is an \emph{adic inductive system}:
if $f=(\psi,\theta)$, we have $\psi^*(\sh{J})\OO_\fk{X}=\sh{K}$, so $\psi^*(\sh{J}^n)\OO_\fk{X}=\sh{K}^n$ for all $n$, and (by exactness of the functor $\psi^*$) $\sh{K}^{m+1}/\sh{K}^{n+1}=\psi^*(\sh{J}^{m+1}/\sh{J}^{n+1})(\OO_\fk{X}/\sh{K}^{n+1})$ for $m\leq n$;
our conclusion thus follows from \sref{1.4.4.5}.
Furthermore, it can be immediately verified that a $\fk{S}$-morphism $u:\fk{X}\to\fk{Y}$ of adic $\fk{S}$-preschemes corresponds (with the obvious notation)
\oldpage[I]{207}
to an inductive system of $S_n$-morphisms $u_n:X_n\to Y_n$ such that $u_m$ is identified with $(u_n)_{(S_m)}$ for $m\leq n$.

The fact that this equivalence is well defined will follow from the more-precise following proposition.

\begin{prop}[10.12.3.1]
\label{1.10.12.3.1}
Let $(X_n)$ be an inductive system of $S_n$-preschemes;
suppose that the structure morphisms $f_n:X_n\to S_n$ are such that the diagrams in \hyperref[1.10.12.2]{(10.12.2.1)} commute and identify $X_m$ with $X_n\times_{S_n}S_m$ for $m\leq n$.
Then the inductive system $(X_n)$ satisfies conditions \emph{(b)} and \emph{(c)} of \sref{1.10.6.3};
let $\fk{X}$ be the inductive limit, and $f:\fk{X}\to\fk{S}$ the morphism given by the inductive limit of the inductive system $(f_n)$.
Then, if $X_0$ is locally Noetherian, $\fk{X}$ is locally Noetherian, and $f$ is an adic morphism.
\end{prop}

\begin{proof}
\label{proof-1.10.12.3.1}
Since the sheaf of ideals of $\OO_{S_n}$ that defines the subprescheme $S_m$ of $S_n$ is nilpotent, by \sref{1.4.4.5} so is the sheaf of ideals of $\OO_{X_n}$ that defines the subprescheme $X_m$ of $X_n$, so the conditions of \sref{1.10.6.3} are satisfied.
The question being local on $\fk{X}$ and $\fk{S}$, we can assume that $\fk{S}=\Spf(A)$, $\sh{J}=\fk{J}^\Delta$ (with $A$ a Noetherian $\fk{J}$-adic ring), and $X_n=\Spec(B_n)$;
if $A_n=A/\fk{J}^{n+1}$, then the hypothesis implies that $B_0$ is Noetherian, and if we set $\fk{J}_n=\fk{J}/\fk{J}^{n+1}$, then $B_m=B_n/\fk{J}_n^{m+1}B_n$.
The kernel of $B_n\to B_0$ is thus $\fk{K}_n=\fk{J}_nB_n$, and the kernel of $B_n\to B_m$ is $\fk{K}_n^{m+1}$ for $m\leq n$;
further, since $A_1$ is Noetherian, $\fk{J}_1$ is of finite type over $A_1$, and so $\fk{K}_1=\fk{K}_1/\fk{K}_1^2$ is of finite type over $B_1$, and \emph{a fortiori} of finite type over $B_0=B_1/\fk{K}_1$;
the fact that $\fk{X}$ is Noetherian then follows from \sref{1.10.6.4};
if $B=\varprojlim B_n$, then we have $\fk{X}=\Spf(B)$, and if $\fk{K}$ is the kernel of $B\to B_0$, then $B_n=B/\fk{K}^{n+1}$.
If $\rho_n:A/\fk{J}^{n+1}\to B/\fk{K}^{n+1}$ is the homomorphism corresponding to $f_n$, then we have that
\[
    \fk{K}/\fk{K}^{n+1} = (B/\fk{K}^{n+1})\rho_n(\fk{J}/\fk{J}^{n+1})
\]
since the homomorphism $\rho:A\to B$ corresponding to $f$ is equal to $\varprojlim\rho_n$, and that the ideal $\fk{J}B$ of $B$ is dense in $\fk{K}$, and since every ideal of $B$ is closed \sref[0]{0.7.3.5}, we also have that $\fk{K}=\fk{J}B$.
If $\sh{K}=\fk{K}^\Delta$, the equality $f^*(\sh{J})\OO_\fk{X}=\sh{K}$ then follows from \sref{1.10.10.9}, and finishes the proof.
\end{proof}

\begin{env}[10.12.3.2]
\label{1.10.12.3.2}
The above equivalence gives, for adic $\fk{S}$-preschemes $\fk{X}$ and $\fk{Y}$, a \emph{canonical bijection}
\[
  \Hom_\fk{S}(\fk{X},\fk{Y})\isoto\varprojlim_n\Hom_{S_n}(X_n,Y_n)
\]
where the projective limit is relative to the maps $u_n\to(u_n)_{(S_m)}$ for $m\leq n$.
\end{env}

\subsection{Morphisms of finite type}
\label{subsection:morphisms-of-finite-type}

\begin{prop}[10.13.1]
\label{1.10.13.1}
Let $\mathfrak{Y}$ be a locally Noetherian formal prescheme, $\sh{K}$ an ideal of definition of $\fk{Y}$, and $f:\fk{X}\to\fk{Y}$ a morphism of formal preschemes.
Then the following conditions are equivalent.
\begin{enumerate}[label=\emph{(\alph*)}]
  \item $X$ is locally Noetherian, $f$ is an adic morphism \sref{1.10.12.1}, and, if we set $\sh{J}=f^*(\sh{K})\OO_\fk{X}$, the morphism $f_0:(\fk{X},\OO_\fk{X}/\sh{J})\to(\fk{Y},\OO_\fk{Y}/\sh{K})$ induced by $f$ is of finite type.
  \item $\fk{X}$ is locally Noetherian, and is the inductive limit of an adic inductive $(Y_n)$-system $(X_n)$ such that the morphism $X_0\to Y_0$ is of finite type.
\oldpage[I]{208}
  \item Every point of $\fk{Y}$ has a Noetherian formal affine open neighbourhood $V$ that has the following property:
\begin{enumerate}
  \item[(\textbf{Q})] $f^{-1}(V)$ is a finite union of Noetherian formal affine open subsets $U_i$ such that the Noetherian adic ring $\Gamma(U_i,\OO_\fk{X})$ is topologically isomorphic to the quotient of a formal series algebra, restricted \sref[0]{0.7.5.1} to $\Gamma(V,\OO_\fk{Y})$, by an ideal (necessarily closed).
\end{enumerate}
\end{enumerate}
\end{prop}

\begin{proof}
\label{proof-1.10.13.1}
It is immediate that (a) implies (b) by \sref{1.10.12.3}.
To show that (b) implies (c), we can, since the question is local on $\fk{Y}$, assume that $\fk{Y}=\Spf(B)$, where $B$ is Noetherian and adic;
let $\sh{K}=\fk{K}^\Delta$, with $\fk{K}$ an ideal of definition of $B$.
Since, by hypothesis, $X_0$ is of finite type over $Y_0$, $X_0$ is a finite union of affine open subsets $U_i$ such that the ring $A_{i0}$ of the affine scheme induced by $X_0$ on $U_i$ is an algebra of finite type over the ring $B/\fk{K}$ of $Y_0$ \sref{1.6.3.2}.
By \sref{1.5.1.9}, $U_i$ is also an affine open subset in each of the Noetherian preschemes $X_n$, and if $A_{in}$ is the ring of the affine scheme induced by $X_n$ on $U_i$, then hypothesis (b) implies that, for $m\leq n$, $A_{im}$ is isomorphic to $A_{in}/\fk{K}^{m+1}A_{in}$.
Consequently, the formal prescheme induced by $\fk{X}$ on $U_i$ is isomorphic to $\Spf(A_i)$, where $A_i=\varprojlim_n A_{in}$ \sref{1.10.6.4};
$A_i$ is a $\fk{K}A_i$-adic ring, and $A_i/\fk{K}A_i$, isomorphic to $A_{i0}$, is an algebra of finite type over $B/\fk{K}$.
We thus conclude \sref[0]{0.7.5.5} that $A_i$ is topologically isomorphic to a quotient of a formal series algebra restricted to $B$ (by a necessarily-closed ideal, because such an algebra is Noetherian \sref[0]{0.7.5.4}).

To show that (c) implies (a), we can restrict to the case where $\fk{X}=\Spf(A)$ is also affine, with $A$ a Noetherian adic ring that is isomorphic to a quotient of a formal series algebra, restricted to $B$, by a closed ideal.
Then \sref[0]{0.7.5.5} $A/\fk{K}A$ is an algebra of finite type over $B/\fk{K}$, and $\fk{K}A=\fk{J}$ is an ideal of definition of $A$, and so, by \sref{1.10.10.9}, the conditions of (a) are satisfied.
\end{proof}

We note that, if the conditions of Proposition \sref{1.10.13.1} are satisfied, then property~(a) holds true for \emph{any} ideal of definition $\sh{K}$ of $\fk{Y}$ (by \emph{(c)}), and so, in property~(b), \emph{all} the $f_n$ are morphisms of finite type.

\begin{cor}[10.13.2]
\label{1.10.13.2}
If the conditions of \sref{1.10.13.1} are satisfied, then every Noetherian formal affine open subset $V$ of $\fk{Y}$ has property~(\textbf{Q}), and if $\fk{Y}$ is Noetherian, then so is $\fk{X}$.
\end{cor}

\begin{proof}
\label{proof-1.10.13.2}
This follows immediately from \sref{1.10.13.1} and \sref{1.6.3.2}.
\end{proof}

\begin{defn}[10.13.3]
\label{1.10.13.3}
When the equivalent properties (a), (b), and (c) of \sref{1.10.13.1} are satisfied, we say that the morphism $f$ is of finite type, or that $\fk{X}$ is a formal $\fk{Y}$-prescheme of finite type, or a formal prescheme of finite type over $\fk{Y}$.
\end{defn}

\begin{cor}[10.13.4]
\label{1.10.13.4}
Let $\fk{X}=\Spf(A)$ and $\fk{Y}=\Spf(B)$ be Noetherian formal affine schemes;
for $\fk{X}$ to be of finite type over $\fk{Y}$, it is necessary and sufficient for the Noetherian adic ring $A$ to be isomorphic to the quotient of a formal series algebra, restricted to $B$, by some closed ideal.
\end{cor}

\begin{proof}
\label{proof-1.10.13.4}
With the notation of \sref{1.10.13.1}, if $\fk{X}$ is of finite type over $\fk{Y}$, then $A/\fk{K}A$ is a $(B/\fk{K})$-algebra of finite type by \sref{1.6.3.3}, and $\fk{K}A$ is an ideal of definition of $A$ \sref{1.10.10.9}.
We are then done, by \sref[0]{0.7.5.5}.
\end{proof}

\begin{prop}[10.13.5]
\medskip\noindent
\begin{enumerate}[label=\emph{(\roman*)}]
    \item The composition of any two morphisms (of formal preschemes) of finite type is again of finite type.
\oldpage[I]{209}
    \item Let $\fk{X}$, $\fk{S}$, and $\fk{S}'$ be locally Noetherian (resp. Noetherian) formal preschemes, and $f:\fk{X}\to\fk{S}$ and $\fk{X}\to\fk{S}'$ morphisms.
        If $f$ is of finite type, then $\fk{X}\times_\fk{S}\fk{S}'$ is locally Noetherian (resp. Noetherian) and of finite type over $\fk{S}'$.
    \item Let $\fk{S}$ be a locally Noetherian formal prescheme, and $\fk{X}'$ and $\fk{Y}'$ formal $\fk{S}$-preschemes such that $\fk{X}'\times_\fk{S}\fk{Y}'$ is locally Noetherian.
    If $\fk{X}$ and $\fk{Y}$ are locally Noetherian formal $\fk{S}$-preschemes, and $f:\fk{X}\to\fk{X}'$ and $g:\fk{Y}\to\fk{Y}'$ are $\fk{S}$-morphisms of finite type, then $\fk{X}\times_\fk{S}\fk{Y}$ is locally Noetherian, and $f\times_\fk{S}g$ is a $\fk{S}$-morphism of finite type.
\end{enumerate}
\end{prop}

\begin{proof}
\label{proof-1.10.13.5}
By the formal argument of \sref{1.3.5.1}, (iii) follows from (i) and (ii), so it suffices to prove (i) and (ii).

Let $\fk{X}$, $\fk{Y}$, and $\fk{Z}$ be locally Noetherian formal preschemes, and $f:\fk{X}\to\fk{Y}$ and $g:\fk{Y}\to\fk{Z}$ morphisms of finite type.
If $\sh{L}$ is an ideal of definition of $\fk{Z}$, then $\sh{K}=g^*(\sh{L})\OO_\fk{Y}$ is an ideal of definition of $\fk{Y}$, and $\sh{J}=f^*(g^*(\sh{L}))\OO_\fk{X}$ is an ideal of definition for $\fk{X}$.
Let $X_0=(\fk{X},\OO_\fk{X}/\sh{J})$, $Y_0=(\fk{Y},\OO_\fk{Y}/\sh{K})$, and $Z_0=(\fk{Z},\OO_\fk{Z}/\sh{L})$, and let $f_0:X_0\to Y_0$ and $g_0:Y_0\to Z_0$ be the morphisms corresponding to $f$ and $g$ (respectively).
Since, by hypothesis, $f_0$ and $g_0$ are of finite type, so is $g_0\circ f_0$ \sref{1.6.3.4}, which corresponds to $g\circ f$;
thus $g\circ f$ is of finite type, by \sref{1.10.13.1}.

Under the conditions of (ii), $\fk{S}$ (resp. $\fk{X}$, $\fk{S}'$) is the inductive limit of a sequence $(S_n)$ (resp. $(X_n)$, $(S'_n)$) of locally Noetherian preschemes, and we can assume \sref{1.10.13.1} that $X_m=X_n\times_{S_n}S_m$ for $m\leq n$.
The formal prescheme $\fk{X}\times_\fk{S}\fk{S}'$ is then the inductive limit of the preschemes $X_n\times_{S_n}S'_n$ \sref{1.10.7.4}, and we have
\[
    X_m\times_{S_m}S'_m = (X_n\times_{S_n}S_m)\times_{S_m}S'_m = (X_n\times_{S_n}S'_n)\times_{S'_n}S'_m.
\]
Furthermore, $X_0\times_{S_0}S'_0$ is locally Noetherian because $X_0$ of finite type over $S_0$ \sref{1.6.3.8}.
We thus conclude \sref{1.10.12.3.1}, first of all, that $\fk{X}\times_\fk{S}\fk{S}'$ is locally Noetherian;
then, since $X_0\times_{S_0}S'_0$ is of finite type over $S'_0$ \sref{1.6.3.8}, it follows from \hyperref[1.10.12.3]{(10.12.3.1)} and \sref{1.10.13.1} that $\fk{X}\times_\fk{S}\fk{S}'$ is of finite type over $\fk{S}'$, which proves (ii) (the claim about Noetherian preschemes being an immediate consequence of \sref{1.6.3.8}).
\end{proof}

\begin{cor}[10.13.6]
\label{1.10.13.6}
Under the hypotheses of \sref{1.10.9.9}, if $f$ is a morphism of finite type, then so is its extension $\wh{f}$ to the completions.
\end{cor}

\subsection{Closed subpreschemes of formal preschemes}
\label{subsection:closed-subpreschemes-of-formal-preschemes}

\begin{prop}[10.14.1]
\label{1.10.14.1}
Let $\fk{X}$ be a locally Noetherian formal preschemes, and $\sh{A}$ a coherent sheaf of ideals of $\OO_\fk{X}$.
If $\fk{Y}$ if the (closed) support of $\OO_\fk{X}/\sh{A}$, then the topologically ringed space $(\fk{Y},(\OO_\fk{X}/\sh{A})|\fk{Y})$ is a locally Noetherian formal prescheme that is Noetherian if $\fk{X}$ is.
\end{prop}

\begin{proof}
\label{proof-1.10.14.1}
Note that $\OO_\fk{X}/\fk{A}$ is coherent by \sref{1.10.10.3} and \sref[0]{0.5.3.4}, so its support $\fk{Y}$ is closed \sref[0]{0.5.2.2}.
Let $\sh{J}$ be an ideal of definition of $\fk{X}$, and let $X_n=(\fk{X}/\OO_\fk{X}/\sh{J}^{n+1})$;
the sheaf of rings $\OO_\fk{X}/\sh{A}$ is the projective limit of the sheaves $\OO_\fk{X}/(\sh{A}+\sh{J}^{n+1})=(\OO_\fk{X}/\sh{A})\otimes_{\OO_\fk{X}}(\OO_\fk{X}/\sh{J}^{n+1})$ \sref{1.10.11.3}, which all have support $\fk{Y}$.
The sheaf $(\sh{A}+\sh{J}^{n+1})/\sh{J}^{n+1}$ is a coherent $\OO_\fk{X}$-module, since $\sh{J}^{n+1}$ is coherent, and so $(\sh{A}+\sh{J}^{n+1})/\sh{J}^{n+1}$ is also a coherent $(\OO_\fk{X}/\sh{J}^{n+1})$-module \sref[0]{0.5.3.10};
if $Y_n$ is the closed subprescheme of $X_n$ defined by this sheaf of ideals, it is immediate that $(\fk{Y},(\OO_\fk{X}/\sh{A})|\fk{Y})$
\oldpage[I]{210}
is the formal prescheme given by the inductive limit of the $Y_n$, and since the conditions of \sref{1.10.6.4} are satisfied, this proves that this formal prescheme is locally Noetherian, and Noetherian if $\fk{X}$ is (since then $Y_0$ is, by \sref{1.6.1.4}).
\end{proof}

\begin{defn}[10.14.2]
\label{1.10.14.2}
We define a closed subprescheme of a formal prescheme $\fk{X}$ to be any formal prescheme of the form $(\fk{Y},(\OO_\fk{X}/\sh{A})|\fk{Y})$ with $\sh{A}$ a coherent $\OO_\fk{X}$-module;
we say that this prescheme is the subprescheme defined by $\sh{A}$.
\end{defn}

It is clear that the correspondence thus defined between coherent $\OO_\fk{X}$-modules and closed subpreschemes of $\fk{X}$ is bijective.

The morphism of topologically ringed spaces $j=(\psi,\theta):\fk{Y}\to\fk{X}$, where $\psi$ is the injection $\fk{Y}\to\fk{X}$ and $\theta^\sharp$ the canonical homomorphism $\OO_\fk{X}\to\OO_\fk{X}/\sh{A}$, is evidently \sref{1.10.4.5} a morphism of formal preschemes, and we call it the \emph{canonical injection} from $\fk{Y}$ to $\fk{X}$.
Note that, if $\fk{X}=\Spf(A)$, or if $A$ is Noetherian and adic, then we have $\sh{A}=\fk{a}^\Delta$, where $\fk{a}$ is an ideal of $A$ \sref{1.10.10.5}, and it immediately follows from the above that we then have $\fk{Y}=\Spf(A/\fk{a})$, up to isomorphism, and $j$ corresponds \sref{1.10.2.2} to the canonical homomorphism $A\to A/\fk{a}$.

We say that a morphism $f:\fk{Z}\to\fk{X}$ of locally Noetherian formal preschemes is a \emph{closed immersion} if it factors as $\fk{Z}\xrightarrow{g}\fk{Y}\xrightarrow{j}\fk{X}$, where $g$ is an isomorphism from $\fk{Z}$ to a closed subprescheme $\fk{Y}$ of $\fk{X}$, and $j$ the canonical injection.
Since $j$ is a monomorphism of ringed spaces, $g$ and $\fk{Y}$ are necessarily \emph{unique}.

\begin{prop}[10.14.3]
\label{1.10.14.3}
A closed immersion is a morphism of finite type.
\end{prop}

\begin{proof}
\label{proof-1.10.14.3}
We can immediately restrict to the case where $\fk{X}$ is a formal affine scheme $\Spf(A)$ and $\fk{Y}=\Spf(A/\fk{a})$;
the proposition then follows from \sref{1.10.13.1}[\emph{c}].
\end{proof}

\begin{lem}[10.14.4]
\label{1.10.14.4}
Let $f:\fk{Y}\to\fk{X}$ be a morphism of locally Noetherian formal preschemes, and let $(U_\alpha)$ be a cover of $f(\fk{Y})$ by Noetherian formal affine open subsets of $\fk{X}$ such that the $f^{-1}(U_\alpha)$ are Noetherian formal affine open subsets of $\fk{Y}$.
For $f$ to be a closed immersion, it is necessary and sufficient for $f(\fk{Y})$ to be a closed subset of $\fk{X}$ and, for all $\alpha$, for the restriction of $f$ to $f^{-1}(U_\alpha)$ to correspond \sref{1.10.4.6} to a surjective homomorphism $\Gamma(U_\alpha,\OO_\fk{X})\to\Gamma(f^{-1}(U_\alpha),\OO_\fk{Y})$.
\end{lem}

\begin{proof}
\label{proof-1.10.14.4}
The conditions are clearly necessary.
Conversely, if the conditions are satisfied, and if we denote by $\fk{a}_\alpha$ the kernel of $\Gamma(U_\alpha,\OO_\fk{X})\to\Gamma(f^{-1}(U_\alpha),\OO_\fk{Y})$, we can define a coherent sheaf of ideals $\sh{A}$ of $\OO_\fk{X}$ by setting $\sh{A}|U_\alpha=\fk{a}_\alpha^\Delta$, and taking $\sh{A}$ to be zero on the complement of the union of the $U_\alpha$.
Because $f(\fk{Y})$ is closed, and the support of $\fk{a}_\alpha^\Delta$ is $U_\alpha\cap f(\fk{Y})$, everything relies on proving that $\fk{a}_\alpha^\Delta$ and $\fk{a}_\beta^\Delta$ induce the same sheaf on any Noetherian formal affine open subset $V\subset U_\alpha\cap U_\beta$.
But the restriction of $f$ to $f^{-1}(U_\alpha)$ is a closed immersion of this formal prescheme into $U_\alpha$, $f^{-1}(V)$ is a Noetherian formal affine open subsets of $f^{-1}(U_\alpha)$, and the restriction of $f$ to $f^{-1}(V)$ is a closed immersion;
if $\fk{b}$ is the kernel of the surjective homomorphism $\Gamma(V,\OO_\fk{X})\to\Gamma(f^{-1}(V),\OO_\fk{Y})$ corresponding to this restriction, then it is immediate \sref{1.10.10.2} that $\fk{a}_\alpha^\Delta$ induces $\fk{b}^\Delta$ on $V$.
The sheaf of ideals $\sh{A}$ being thus defined, it is then clear that $f=g\circ j$, where $j:\fk{Z}\to\fk{X}$ is the canonical injection of the closed subprescheme $\fk{Z}$ of $\fk{X}$ defined by $\sh{A}$, and $g$ is an isomorphism from $\fk{Y}$ to $\fk{Z}$.
\end{proof}

\begin{prop}[10.14.5]
\label{1.10.14.5}
\medskip\noindent
\begin{enumerate}[label=\emph{(\roman*)}]
  \item If $f:\fk{Z}\to\fk{Y}$ and $g:\fk{Y}\to\fk{X}$ are closed immersions of locally Noetherian formal preschemes, then $g\circ f$ is a closed immersion.
\oldpage[I]{211}
  \item Let $\fk{X}$, $\fk{Y}$, and $\fk{S}$ be locally Noetherian formal preschemes, $f:\fk{X}\to\fk{S}$ a closed immersion, and $g:\fk{Y}\to\fk{S}$ a morphism.
    Then the morphism $\fk{X}\times_\fk{S}\fk{Y}\to\fk{Y}$ is a closed immersion.
  \item Let $\fk{S}$ be a locally Noetherian formal prescheme, and $\fk{X}'$ and $\fk{Y}'$ locally Noetherian formal $\fk{S}$-preschemes such that $\fk{X}'\times_\fk{S}\fk{Y}'$ is locally Noetherian.
    If $\fk{X}$ and $\fk{Y}$ are locally Noetherian $\fk{S}$-preschemes, and $f:\fk{X}\to\fk{X}'$ and $g:\fk{Y}\to\fk{Y}'$ are $\fk{S}$-morphisms that are closed immersions, then $f\times_\fk{S}g$ is a closed immersion.
\end{enumerate}
\end{prop}

\begin{proof}
\label{proof-1.10.14.5}
By \sref{1.3.5.1}, it again suffices to prove (i) and (ii).

To prove (i), we can assume that $\fk{Y}$ (resp. $\fk{Z}$) is a closed subprescheme of $\fk{X}$ (resp. $\fk{Y}$) defined by a coherent sheaf $\sh{J}$ (resp. $\sh{K}$) of ideals of $\OO_\fk{X}$ (resp. $\OO_\fk{Y}$);
if $\psi$ is the injection $\fk{Y}\to\fk{X}$ of underlying spaces, then $\psi_*(\sh{K})$ is a coherent sheaf of ideals of $\psi_*(\OO_\fk{Y})=\OO_\fk{X}/\sh{J}$ \sref[0]{0.5.3.12}, and thus also a coherent $\OO_\fk{X}$-module \sref[0]{0.5.3.10};
the kernel $\sh{K}_1$ of $\OO_\fk{X}\to(\OO_\fk{X}/\sh{J})/\psi_*(\sh{K})$ is thus a coherent sheaf of ideals of $\OO_\fk{X}$ \sref[0]{0.5.3.4}, and $\OO_\fk{X}/\sh{K}_1$ is isomorphic to $\psi_*(\OO_\fk{Y}/\sh{K})$, which proves that $\fk{Z}$ is an isomorphism to a closed subprescheme of $\fk{X}$.

To prove (ii), it is immediate that we can restrict to the case where $\fk{S}=\Spf(A)$, $\fk{X}=\Spf(B)$, and $\fk{Y}=\Spf(C)$, with $A$ a Noetherian $\fk{J}$-adic ring, $B=A/\fk{a}$ (where $\fk{a}$ is an ideal of $A$), and $C$ a Noetherian topological adic $A$-algebra.
Everything then relies on proving that the homomorphism $C\to C\wh{\otimes}_A(A/\fk{a})$ is \emph{surjective}:
but $A/\fk{a}$ is an $A$-module of finite type, and its topology is the $\fk{J}$-adic topology;
it then follows from \sref[0]{0.7.7.8} that $C\wh{\otimes}_A(A/\fk{a})$ can be identified with $C\otimes_A(A/\fk{a})=C/\fk{a}C$, whence our claim.
\end{proof}

\begin{cor}[10.14.6]
\label{1.10.14.6}
Under the hypotheses of \sref{1.10.14.5}[ii], let $p:\fk{X}\times_\fk{S}\fk{Y}\to\fk{X}$ and $q:\fk{X}\times_\fk{S}\fk{Y}\to\fk{Y}$ be the projections, so that the diagram
\[
  \xymatrix{
    \fk{X}\ar[d]_f &
    \fk{X}\times_\fk{S}\fk{Y}\ar[l]_p\ar[d]^q\\
    \fk{S} &
    \fk{Y}\ar[l]_g
  }
\]
commutes.
For every coherent $\OO_\fk{X}$ module $\sh{F}$, we then have a canonical isomorphism of $\OO_\fk{Y}$-modules
\[
  u:g^*(f_*(\sh{F}))\isoto q_*(p^*(\sh{F})).
  \tag{10.14.6.1}
\]
\end{cor}

\begin{proof}
\label{proof-1.10.14.6}
We know that defining a homomorphism $g^*(f_*(\sh{F})) \to q_*(p^*(\sh{F}))$ is equivalent to defining a homomorphism $f_*(\sh{F}) \to g_*(q_*(p^*(\sh{F}))) = f_*(p_*(p^*(\sh{F})))$ \sref[0]{0.4.4.3}:
we take $u=f_*(\rho)$, where $\rho$ is the canonical homomorphism $\sh{F}\to p_*(p^*(\sh{F}))$ \sref[0]{0.4.4.3}.
To see that $u$ is an isomorphism, we can immediately restrict to the case where $\fk{S}$, $\fk{X}$, and $\fk{Y}$ are formal spectra of Noetherian adic rings $A$, $B$, and $C$ (respectively), with the conditions above in \sref{1.10.14.5}[ii];
we then have $\sh{F}=M^\Delta$, where $M$ is an $(A/\fk{a})$-module of finite type \sref{1.10.10.5}, and the two sides of \hyperref[1.10.14.6]{(10.14.6.1)} are then identified, respectively, by \sref{1.10.10.8}, with $(C\otimes_A M)^\Delta$ and $((C/\fk{a}C)\otimes_{A/\fk{a}}M)^\Delta$, whence the corollary, because $(C/\fk{a}C)\otimes_{A/\fk{a}}M = (C\otimes_A(A/\fk{a}))\otimes_{A/\fk{a}}M$ is canonically identified with $C\otimes_A M$.
\end{proof}

\oldpage[I]{212}
\begin{cor}[10.14.7]
\label{1.10.14.7}
Let $X$ be a locally Noetherian usual prescheme, $Y$ a closed subprescheme of $X$, $j$ the canonical injection $Y\to X$, $X'$ a closed subset of $X$, and $Y'=Y\cap X'$;
then $\wh{j}:Y_{/Y'}\to X_{/X'}$ is a closed immersion, and, for every coherent $\OO_Y$-module $\sh{F}$, we have
\[
    \wh{j}_*(\sh{F}_{/Y'}) = (j_*(\sh{F}))_{/X'}.
\]
\end{cor}

\begin{proof}
\label{proof-1.10.14.7}
Since $Y'=j^{-1}(X')$, it suffices to use \sref{1.10.9.9} and apply \sref{1.10.14.5} and \sref{1.10.14.6}.
\end{proof}

\subsection{Separated formal preschemes}
\label{subsection:separated-formal-preschemes}

\begin{defn}[10.15.1]
\label{1.10.15.1}
Let $\fk{S}$ be a formal prescheme, $\fk{X}$ a formal $\fk{S}$-prescheme, and $f:\fk{X}\to\fk{S}$ the structure morphism.
We define the diagonal morphism $\Delta_{\fk{X}|\fk{S}}:\fk{X}\to\fk{X}\times_\fk{S}\fk{X}$ (also denoted by $\Delta_\fk{X}$) to be the morphism $(1_\fk{X},1_\fk{X})_\fk{S}$.
We say that $\fk{X}$ is separated over $\fk{S}$, or is a formal $\fk{S}$-scheme, or that $f$ is a separated morphism, if the image of the underlying space of $\fk{X}$ under $\Delta_\fk{X}$ is a closed subset of the underlying space of $\fk{X}\times_\fk{S}\fk{X}$.
We say that a formal prescheme $\fk{X}$ is separated, or is a formal schemes, if it is separated over $\bb{Z}$.
\end{defn}

\begin{prop}[10.15.2]
\label{1.10.15.2}
Suppose that the formal preschemes $\fk{S}$ and $\fk{X}$ are inductive limits of sequences $(S_n)$ and $(X_n)$ (respectively) of usual preschemes, and that the morphism $f:\fk{X}\to\fk{S}$ is the inductive limit of a sequence of morphisms $f_n:X_n\to S_n$.
For $f$ to be separated, it is necessary and sufficient for the morphism $f_0:X_0\to S_0$ to be separated.
\end{prop}

\begin{proof}
\label{proof-1.10.15.2}
Indeed, $\Delta_{\fk{X}|\fk{S}}$ is then the inductive limit of the sequence of morphisms $\Delta_{X_n|S_n}$ \sref{1.10.7.4}, and the image of the underlying space of $\fk{X}$ (resp. of $\fk{X}\times_\fk{S}\fk{X}$ under $\Delta_{\fk{X}|\fk{S}}$) is identical to the image of the underlying space of $X_0$ (resp. of $X_0\times_{S_0}X_0$) under $\Delta_{X_0|S_0}$;
whence the conclusion.
\end{proof}

\begin{prop}[10.15.3]
\label{1.10.15.3}
Suppose that all the formal preschemes (resp. morphisms of formal preschemes) in what follows are inductive limits of sequences of usual preschemes (resp. of morphisms of usual preschemes).
\begin{enumerate}[label=\emph{(\roman*)}]
    \item The composition of any two separated morphisms is separated.
    \item If $f:\fk{X}\to\fk{X}'$ and $g:\fk{Y}\to\fk{Y}'$ are separated $\fk{S}$-morphisms, then $f\times_\fk{S}g$ is separated.
    \item If $f:\fk{X}\to\fk{Y}$ is a separated $\fk{S}$-morphism, then the $\fk{S}'$-morphism $f_{(\fk{S}')}$ is separated for every extension $\fk{S}'\to\fk{S}$ of the base formal prescheme.
    \item If the composition $g\circ f$ of two morphisms is separated, then $f$ is separated.
\end{enumerate}
\emph{(In the above, it is implicit that if the same formal prescheme $\fk{Z}$ is mentioned more than once in the same proposition, we consider it as the inductive limit of the \emph{same} sequence $(Z_n)$ of usual preschemes wherever it is mentioned, and the morphisms from $\fk{Z}$ to another formal prescheme (resp. from a formal prescheme to $\fk{Z}$) as inductive limits of morphisms from $Z_n$ to some usual preschemes (resp. from some usual preschemes to $Z_n$)).}
\end{prop}

\begin{proof}
\label{proof-1.10.15.3}
With the notation of \sref{1.10.15.2}, we in fact have $(g\circ f)_0=g_0\circ f_0$, and $(f\times_\fk{S}g)_0=f_0\times_{S_0}g_0$;
the claims of \sref{1.10.15.3} are then immediate consequences of \sref{1.10.15.2} and the corresponding claims in \sref{1.5.5.1} for usual preschemes.
\end{proof}

We leave it to the reader to state, for the same type of formal preschemes and morphisms as in \sref{1.10.15.3}, the propositions corresponding to \sref{1.5.5.5}, \sref{1.5.5.9}, and \sref{1.5.5.10}
\oldpage[I]{213}
(by replacing ``affine open subset'' by ``formal affine open subset satisfying condition (b) of \sref{1.10.6.3}'').

A similar argument also shows that every \emph{Noetherian} formal affine scheme is separated, which justifies the terminology.

\begin{prop}[10.15.4]
\label{1.10.15.4}
Let $\fk{S}$ be a locally Noetherian formal prescheme, and $\fk{X}$ and $\fk{Y}$ locally Noetherian formal $\fk{S}$-preschemes such that $\fk{X}$ or $\fk{Y}$ is of finite type over $\fk{S}$ (so that $\fk{X}\times_\fk{S}\fk{Y}$ is locally Noetherian) and such that $\fk{Y}$ is separated over $\fk{S}$.
Let $f:\fk{X}\to\fk{Y}$ be an $\fk{S}$-morphism; then the graph morphism $\Gamma_f(1_\fk{X},f)_\fk{S}:\fk{X}\to\fk{X}\times_\fk{S}\fk{Y}$ is a closed immersion.
\end{prop}

\begin{proof}
\label{proof-1.10.15.4}
We can assume that $\fk{S}$ is the inductive limit of a sequence $(S_n)$ of locally Noetherian preschemes, $\fk{X}$ (resp. $\fk{Y}$) the inductive limit of a sequence $(X_n)$ (resp. $(Y_n)$) of $S_n$-preschemes, and $f$ the inductive limit of a sequence $(f_n:X_n\to Y_n)$ of $S_n$-morphisms;
then $\fk{X}\times_\fk{S}\fk{Y}$ is the inductive limit of the sequence $(X_n\times_{S_n}Y_n)$, and $\Gamma_f$ the inductive limit of the sequence $(\Gamma_{f_n})$ \sref{1.10.7.4};
by hypothesis, $Y_0$ is separated over $S_0$ \sref{1.10.15.2}, so the space $\Gamma_{f_0}(X_0)$ is a closed subspace of $X_0\times_{S_0}Y_0$;
since the underlying spaces of $\fk{X}\times_\fk{S}\fk{Y}$ (resp. $\Gamma_f(\fk{X})$) and $X_0\times_{S_0}Y_0$ (resp. $\Gamma_{f_0}(X_0)$) are the same, we already see that $\Gamma_f(\fk{X})$ is a \emph{closed} subspace of $\fk{X}\times_\fk{S}\fk{Y}$.
Now note that, when $(U,V)$ runs over the set of pairs consisting of a Noetherian formal affine open subset $U$ (resp. $V$) of $\fk{X}$ (resp $\fk{Y}$) such that $f(U)\subset V$, the open subsets $U\times_S V$ form a cover of $\Gamma_f(\fk{X})$ in $\fk{X}\times_\fk{S}\fk{Y}$, and if $f_U:U\to V$ is the restriction of $f$ to $U$, then $\Gamma_{f_U}:U\to U\times_\fk{S}V$ is the restriction of $\Gamma_f$ to $U$.
If we show that $\Gamma_{f_U}$ is a closed immersion, then $\Gamma_f$ will be a closed immersion \sref{1.10.14.4}, or, in other words, we are led to consider the case where $\fk{S}=\Spf(A)$, $\fk{X}=\Spf(B)$, and $\fk{Y}=\Spf(C)$ are affine (with $A$, $B$, and $C$ Noetherian adics), with $f$ corresponding to a continuous $A$-homomorphism $\vphi:C\to B$;
$\Gamma_f$ then corresponds to the unique continuous homomorphism $\omega: B\wh{\otimes}_A C\to B$ which, when composed with the canonical homomorphisms $B\to B\wh{\otimes}_A C$ and $C\to B\wh{\otimes}_A C$, gives (respectively) the identity and $\vphi$.
But it is clear that $\omega$ is \emph{surjective}, whence our claim.
\end{proof}

\begin{cor}[10.15.5]
\label{1.10.15.5}
Let $\fk{S}$ be a locally Noetherian formal prescheme, and $\fk{X}$ a $\fk{S}$-prescheme of finite type;
for $\fk{X}$ to be separated over $\fk{S}$, it is necessary and sufficient for the diagonal morphism $\fk{X}\to\fk{X}\times_\fk{S}\fk{X}$ to be a closed immersion.
\end{cor}

\begin{prop}[10.15.6]
\label{1.10.15.6}
A closed immersion $j:\fk{Y}\to\fk{X}$ of locally Noetherian formal preschemes is a separated morphism.
\end{prop}

\begin{proof}
\label{proof-1.10.15.6}
With the notation of \sref{1.10.14.2}, $j_0:Y_0\to X_0$ is a closed immersion, thus a separated morphism, and so it suffices to apply \sref{1.10.15.2}.
\end{proof}

\begin{prop}[10.15.7]
\label{1.10.15.7}
Let $X$ be a locally Noetherian (usual) prescheme, $X'$ a closed subset of $X$, and $\wh{X}=X_{/X'}$.
For $\wh{X}$ to be separated, it is necessary and sufficient for $\wh{X}_\red$ to be separated, and it is sufficient that $X$ be separated.
\end{prop}

\begin{proof}
\label{proof-1.10.15.7}
With the notation of \sref{1.10.8.5}, for $\wh{X}$ to be separated, it is necessary and sufficient for $X'_0$ to be separated \sref{1.10.15.2}, and since $\wh{X}_\red=(X'_0)_\red$, it is equivalent to ask for $\wh{X}_\red$ to be separated \sref{1.5.5.1}[vi].
\end{proof}

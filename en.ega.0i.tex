\setcounter{chapter}{-1}
\chapter{Preliminaries}
\label{0-prelim}

\section{Rings of fractions}
\label{0-prelim-1}

\setcounter{subsection}{-1}
\subsection{Rings and Algebras}
\label{0-prelim-1.0}

\begin{env}{1.0.1}
\label{env-0.1.0.1}
\oldpage{11}
All the rings considered in this treatise will have a \emph{unit element}; all the modules
on such a ring will be assumed to be \emph{unitary}; the ring homomorphisms will always be
assumed to \emph{send the unit element to a unit element}; unless otherwise stated,
a subring of a ring $A$ will be assumed to \emph{contain the unit element of $A$}. We will
consider especially \emph{commutative} rings, and when we speak of a ring without
specification, it will be implied that it is commutative. If $A$ is a ring not necessarily
commutative, by $A$-module we will we mean a left module, unless stated otherwise.
\end{env}

\begin{env}{1.0.2}
\label{env-0.1.0.2}
Let $A$, $B$ be two rings, not necessarily commutative, $\vphi:A\to B$ a homomorphism.
Any left (resp. right) $B$-module $M$ can be provided with a left (resp. right) $A$-module
structure by $a\cdot m=\vphi(a)\cdot m$ (resp. $m\cdot a=m\cdot\vphi(a)$); when it will
be necessary to distinguish $M$ as an $A$-module or a $B$-module, we will denote by
$M_{[\vphi]}$ the left (resp. right) $A$-module as defined. If $L$ is an $A$-module, then
a homomorphism $u:L\to M_{[\vphi]}$ is a homomorphism of commutative groups such that
$u(a\cdot x)=\vphi(a)\cdot u(x)$ for $a\in A$, $x\in L$; we will also say that it is a
$\vphi$-\emph{homomorphism} $L\to M$, and that the pair $(\vphi,u)$ (or, by misuse of
langauge, $u$) is a \emph{di-homomorphism} of $(A,L)$ in $(B,M)$. The pairs $(A,L)$ formed by
a ring $A$ and an $A$-module $L$ thus form a \emph{category} for which the morphisms are
di-homomorphisms.
\end{env}

\begin{env}{1.0.3}
\label{env-0.1.0.3}
Under the hypothesis of \sref{env}{1.0.2}, if $\mathfrak{J}$ is a left (resp. right) ideal of
$A$, we denote by $B\mathfrak{J}$ (resp. $\mathfrak{J}B$) the left (resp. right) ideal
$B\vphi(\mathfrak{J})$ (resp. $\vphi(\mathfrak{J})B$) of $B$ generated by
$\vphi(\mathfrak{J})$; it is also the image of the canonical homomorphism
$B\otimes_A\mathfrak{J}\to B$ (resp. $\mathfrak{J}\otimes_A B\to B$) of left (resp. right)
$B$-modules.
\end{env}

\begin{env}{1.0.4}
\label{env-0.1.0.4}
If $A$ is a (commutative) ring, $B$ a non necessarily commutative ring, the data of
a structure of an \emph{$A$-algebra} on $B$ is equivalent to the data of a ring
homomorphism $\vphi:A\to B$ such that $\vphi(A)$ is contained in the center of $B$.
For all ideals $\mathfrak{J}$ of $A$, $\mathfrak{J}B=B\mathfrak{J}$ is then a two-sided ideal
of $B$, and for every $B$-module $M$, $\mathfrak{J}M$ is then a $B$-module equal to
$(B\mathfrak{J})M$.
\end{env}

\begin{env}{1.0.5}
\label{env-0.1.0.5}
We will not revisit the notions of \emph{module of finite type} and \emph{algebra}
(commutative) \emph{of finite type}; to say that an $A$-module $M$ is of finite type means
that there exists
\oldpage{12}
an exact sequence $A^p\to M\to 0$. We say that an $A$-module $M$ admits a \emph{finite
presentation} if it is isomorphic to the cokernel of a homomorphism $A^p\to A^q$, in other
words, there exists an exact sequence $A^p\to A^q\to M\to 0$. We note that for a
\emph{Noetherian} ring $A$, every $A$-module of finite type admits a finite presentation.

Let us recall that an $A$-algebra $B$ is called \emph{integral} over $A$ if every element
in $B$ is a root in $B$ of a monic polynomial with coefficients in $A$; equivalently, every
element of $B$ is contained in a subalgebra of $B$ which is an $A$-\emph{module of finite
type}. When this is so, and $B$ is commutative, the subalgebra of $B$ generated by a finite
subset of $B$ is an $A$-module of finite type; for a commutative algebra $B$ to be integral
and of finite type over $A$, it is necessary and therefore sufficient that $B$ be an
$A$-module of finite type; we also say that $B$ is an \emph{integral} $A$-\emph{algebra of
finite type} (or simply \emph{finite} if there is no confusion). It will be observed that in
these definitions, it is not assumed that the homomorphism $A\to B$ defining the structure of
an $A$-algebra is injective.
\end{env}

\begin{env}{1.0.6}
\label{env-0.1.0.6}
An \emph{integral} ring (or an \emph{integral domain}) is a ring in which the product of a
finite family of elements $\neq 0$ is $\neq 0$; equivalently, in such a ring we have
$0\neq 1$ and the product of two elements $\neq 0$ is non zero. A \emph{prime} ideal of a
ring $A$ is an ideal $\mathfrak{p}$ such that $A/\mathfrak{p}$ is integral; this therefore
implies that $\mathfrak{p}\neq A$. For a ring $A$ to have at least one prime ideal, it is
necessary and sufficent that $A\neq\{0\}$.
\end{env}

\begin{env}{1.0.7}
\label{env-0.1.0.7}
A \emph{local} ring is a ring $A$ in which there exists a unique maximal ideal, which is then
the complement of the invertible elements and contains all the ideals $\neq A$. If $A$ and $B$
are two local rings, $\mathfrak{m}$ and $\mathfrak{n}$ their respective maximal ideals, we
say that a homomorphism $\vphi:A\to B$ is \emph{local} if
$\vphi(\mathfrak{m})\subset\mathfrak{n}$ (or, equivalently, if
$\vphi^{-1}(\mathfrak{n})=\mathfrak{m}$). By passing to quotients, such a homomorphism then
defines a momomorphism from the residue field $A/\mathfrak{m}$ to the residue field
$B/\mathfrak{n}$. The composition of two local homomorphisms is a local homomorphism.
\end{env}

\subsection{Radical of an ideal. Nilradical and radical of a ring}
\label{0-prelim-1.1}

\begin{env}{1.1.1}
\label{env-0.1.1.1}
Let $\mathfrak{a}$ be an ideal of a ring $A$; the \emph{radical} of $\mathfrak{a}$, denoted
by $\rad(\mathfrak{a})$, is the set of $x\in A$ such that $x^n\in\mathfrak{a}$ for
an integer $n>0$; it is an ideal containing $\mathfrak{a}$. We have
$\rad(\mathfrak{r}(\mathfrak{a}))=\rad(\mathfrak{a})$; the relation
$\mathfrak{a}\subset\mathfrak{b}$ leads to $\rad(\mathfrak{a})\subset\rad(\mathfrak{b})$;
the radical of a finite intersection of ideals is the intersection of their radicals. If
$\vphi$ is a homomorphism of a ring $A'$ into $A$, then we have
$\rad(\vphi^{-1}(\mathfrak{a}))=\vphi^{-1}(\rad(\mathfrak{a}))$ for any ideal
$\mathfrak{a}\subset A$. For an ideal to be the radical of an ideal, it is necessary and
sufficient that it be an intersection of prime ideals. The radical of an ideal $\mathfrak{a}$
is the intersection of the \emph{minimal} prime ideals which contain $\mathfrak{a}$; if $A$
is Noetherian, these minimal prime ideals are finite in number.

The radical of the ideal $(0)$ is also called the \emph{nilradical} of $A$; it is the set
$\nilrad$ of the nilpotent elements of $A$. It is said that the ring $A$ is \emph{reduced} if
$\nilrad=(0)$; for every ring $A$, the quotient $A/\nilrad$ of $A$ by its nilradical is a
reduced ring.
\end{env}

\begin{env}{1.1.2}
\label{env-0.1.1.2}
Recall that the \emph{nilradical} $\nilrad(A)$ of a ring $A$ (not necessarily commutative) is
the intersection of the maximal left ideals of $A$ (and also the intersection of maximal
right ideals). The nilradical of $A/\nilrad(A)$ is $(0)$.
\end{env}

\subsection{Modules and rings of fractions}
\label{0-prelim-1.2}

\begin{env}{1.2.1}
\label{env-0.1.2.1}
\oldpage{13}
We say that a subset $S$ of a ring $A$ is \emph{multiplicative} if $1\in S$ and if the
product of two elements of $S$ is in $S$. The examples which will be the most important for
the following are: 1\textsuperscript{st} the set $S_f$Â of powers $f^n$ ($n\geqslant 0$) of an
element $f\in A$; 2\textsuperscript{nd} the complement $A-\mathfrak{p}$ of a \emph{prime}
ideal $\mathfrak{p}$ of $A$.
\end{env}

\begin{env}{1.2.2}
\label{env-0.1.2.2}
Let $S$ be a multiplicative subset of a ring $A$, $M$ an $A$-module; in the set $M\times S$,
the relation between pairs $(m_1,s_1)$, $(m_2,s_2)$:
\begin{center}
   ``there exists an $s\in S$ such that $s(s_1 m_2-s_2 m_1)=0$''
\end{center}
is an equivalence relation. We denote by $S^{-1}M$ the quotient set of $M\times S$ by this
relation, by $m/s$ the canonical image in $S^{-1}M$ of the pair $(m,s)$; we call the
\emph{canonical} map of $M$ to $S^{-1}M$ the map $i_M^S:m\mapsto m/1$ (also denoted $i^S$).
This map is generally neither injective nor surjective; its kernel is the set of $m\in M$
such that there exists an $s\in S$ for which $sm=0$.

On $S^{-1}M$ we define an additive group law by taking
\[
  (m_1/s_1)+(m_2/s_2)=(s_2 m_1+s_1 m_2)/(s_1 s_2)
\]
(we check that it is independent of the expressions of the elements of $S^{-1}M$ considered).
On $S^{-1}A$ we further define a multiplicative law by setting
$(a_1/s_1)(a_2/s_2)=(a_1 a_2)/(s_1 s_2)$, and finally an external law on $S^{-1}M$, having
$S^{-1}A$ as a set of operators, by setting $(a/s)(m/s')=(am)/(ss')$. It is thus verified
that $S^{-1}A$ is provided with a ring structure (called \emph{the ring of fractions of $A$
with denominators in $S$}) and $S^{-1}M$ the structure of an $S^{-1}A$-module (called
\emph{the  module of fractions of $M$ with denominators in $S$}); for all $s\in S$, $s/1$ is
invertible in $S^{-1}A$, its inverse being $1/s$. The canonical map $i_A^S$ (resp. $i_M^S$)
is a homomorphism of rings (resp. a homomorphism of $A$-modules, $S^{-1}M$ being considered
as an $A$-module by means of the homomorphism $i_A^S:A\to S^{-1}A$).
\end{env}

\begin{env}{1.2.3}
\label{env-0.1.2.3}
If $S_f=\{f^n\}_{n\geqslant 0}$ for a $f\in A$, we write $A_f$ and $M_f$ instead of
$S_f^{-1}A$ and $S_f^{-1}M$; when $A_f$ is considered as algebra over $A$, we can write
$A_f=A[1/f]$. $A_f$ is isomorphic to the quotient algebra $A[T]/(fT-1)A[T]$. When $f=1$,
$A_f$ and $M_f$ identify canonically with $A$ and $M$; if $f$ is nilpotent, $A_f$ and $M_f$
are reduced to $0$.

When $S=A-\mathfrak{p}$, where $\mathfrak{p}$ is a prime ideal of $A$, we
write $A_\mathfrak{p}$ and $M_\mathfrak{p}$ instead of $S^{-1}A$ and $S^{-1}M$;
$A_\mathfrak{p}$ is a \emph{local ring} whose maximal ideal $\mathfrak{q}$ is generated by
$i_A^S(\mathfrak{p})$, and we have $(i_A^S)^{-1}(\mathfrak{q})=\mathfrak{p}$; by passing to
quotients, $i_A^S$ gives a monomorphism from the integral ring $A/\mathfrak{p}$ to the
field $A_\mathfrak{p}/\mathfrak{q}$, which identifies with the field of fractions of
$A/\mathfrak{p}$.
\end{env}

\begin{env}{1.2.4}
\label{env-0.1.2.4}
The ring of fractions $S^{-1}A$ and the canonical homomorphism $i_A^S$ are a solution of a \emph{universal mapping problem}:
any homomorphism $u$ of $A$ into a ring $B$ such that $u(S)$ is composed of \emph{invertible} elements in $B$ factorizes uniquely as
\[
  u:A\xrightarrow{i_A^S}S^{-1}A\xrightarrow{u^*}B
\]
\oldpage{14}
where $u^*$ is a ring homomorphism. Under the same hypotheses, let $M$ be an $A$-module, $N$
a $B$-module, $v:M\to N$ a homomorphism of $A$-modules (for the $B$-module structure on $N$
defined by $u:A\to B$); then $v$ is factorizes uniquely as
\[
  v:M\xrightarrow{i_M^S}S^{-1}M\xrightarrow{v^*}N
\]
where $v^*$ is a homomorphism of $S^{-1}A$-modules (for the $S^{-1}A$-module structure on $N$
defined by $u^*$).
\end{env}

\begin{env}{1.2.5}
\label{env-0.1.2.5}
We define a canonical isomorphism $S^{-1}A\otimes_A M\isoto S^{-1}M$ of
$S^{-1}A$-modules, sending the element $(a/s)\otimes m$ to the element $(am)/s$, the
isomorphism reciprocally applying $m/s$ to $(1/s)\otimes m$.
\end{env}

\begin{env}{1.2.6}
\label{env-0.1.2.6}
For each ideal $\mathfrak{a}'$ of $S^{-1}A$, $\mathfrak{a}=(i_A^S)^{-1}(\mathfrak{a}')$ is an
ideal of $A$, and $\mathfrak{a}'$ is the ideal of $S^{-1}A$ generated by
$i_A^S(\mathfrak{a})$, which identifies with $S^{-1}\mathfrak{a}$ \sref{env}{1.3.2}. The map
$\mathfrak{p}'\to(i_A^S)^{-1}(\mathfrak{p}')$ is an isomorphism, for the structure order, of
the set of \emph{prime} ideals of $S^{-1}A$ to the set of prime ideals $\mathfrak{p}$ of $A$
such that $\mathfrak{p}\cap S=\emp$. In addition, the local rings $A_\mathfrak{p}$ and
$(S^{-1}A)_{S^{-1}\mathfrak{p}}$ are canonically isomorphic \sref{env}{1.5.1}.
\end{env}

\begin{env}{1.2.7}
\label{env-0.1.2.7}
When $A$ is an \emph{integral} ring, for which $K$ denotes its field of fractions, the
canonical map $i_A^S:A\to S^{-1}A$ is injective for any multiplicative subset $S$ not
containing $0$, and $S^{-1}A$ then identifies canonically with a subring of $K$ containing
$A$. In particular, for every prime ideal $\mathfrak{p}$ of $A$ , $A_\mathfrak{p}$ is a local
ring containing $A$, with maximal ideal $\mathfrak{p}A_\mathfrak{p}$, and we have
$\mathfrak{p}A_\mathfrak{p}\cap A=\mathfrak{p}$.
\end{env}

\begin{env}{1.2.8}
\label{env-0.1.2.8}
If $A$ is a \emph{reduced} ring \sref{env}{1.1.1}, so is $S^{-1}A$: indeed, if $(x/s)^n=0$ for
$x\in A$, $s\in S$, it means that there exists $s'\in S$ such that $s'x^n=0$, hence
$(s'x)^n=0$, which, by hypothesis, implies $s'x=0$, so $x/s=0$.
\end{env}

\subsection{Functorial properties}
\label{0-prelim-1.3}

\begin{env}{1.3.1}
\label{env-0.1.3.1}
Let $M$, $N$ be two $A$-modules, $u$ an $A$-homomorphism $M\to N$. If $S$ is a multiplicative
subset of $A$, we define a $S^{-1}A$-homomorphism $S^{-1}M\to S^{-1}N$, denoted by $S^{-1}u$,
by putting $S^{-1}u(m/s)=u(m)/s$; if $S^{-1}M$ and $S^{-1}N$ are canonically identified with
$S^{-1}A\otimes_A M$ and $S^{-1}A\otimes_A N$ \sref{env}{1.2.5}, $S^{-1}u$ is considered as
$1\otimes u$. If $P$ is a third $A$-module, $v$ an $A$-homomorphism $N\to P$, we have
$S^{-1}(v\circ u)=(S^{-1}v)\circ(S^{-1}u)$; in other words, $S^{-1}M$ is a \emph{covariant
functor in} $M$, of the category of $A$-modules into that of $S^{-1}A$-modules ($A$ and $S$
being fixed).
\end{env}

\begin{env}{1.3.2}
\label{env-0.1.3.2}
The functor $S^{-1}M$ is \emph{exact}; in other words, if the following
\[
  M\xrightarrow{u}N\xrightarrow{v}P
\]
is exact, so is the following
\[
  S^{-1}M\xrightarrow{S^{-1}u}S^{-1}N\xrightarrow{S^{-1}v}S^{-1}P.
\]
In particular, if $u:M\to N$ is injective (resp. surjective), the same is true for $S^{-1}u$;
\oldpage{15}
if $N$ and $P$ are two submodules of $M$, $S^{-1}N$ and $S^{-1}P$ identify canonically with
submodules of $S^{-1}M$, and we have
\[
  S^{-1}(N+P)=S^{-1}N+S^{-1}P\quad\text{and}\quad S^{-1}(N\cap P)=(S^{-1}N)\cap(S^{-1}P).
\]
\end{env}

\begin{env}{1.3.3}
\label{env-0.1.3.3}
Let $(M_\alpha,\vphi_{\beta\alpha})$ be an inductive system of $A$-modules; then
$(S^{-1}M_\alpha,S^{-1}\vphi_{\beta\alpha})$ is an inductive system of $S^{-1}A$-modules.
Expressing the $S^{-1}M_\alpha$ and $S^{-1}\vphi_{\beta\alpha}$ as tensor products
(\sref{env}{1.2.5} and \sref{env}{1.3.1}), it follows from the permutability of the tensor
product and inductive limit operations that we have a canonical isomorphism
\[
  S^{-1}\varinjlim M_\alpha\isoto\varinjlim S^{-1}M_\alpha
\]
which is further expressed by saying that the functor $S^{-1}M$ (in $M$) \emph{commutes with
inductive limits}.
\end{env}

\begin{env}{1.3.4}
\label{env-0.1.3.4}
Let $M$, $N$ be two $A$-modules; there is a canonical \emph{functorial} isomorphism (in $M$
and $N$)
\[
  (S^{-1}M)\otimes_{S^{-1}A}(S^{-1}N)\isoto S^{-1}(M\otimes_A N)
\]
which sends $(m/s)\otimes(n/t)$ to $(m\otimes n)/st$.
\end{env}

\begin{env}{1.3.5}
\label{env-0.1.3.5}
We also have a \emph{functorial} homomorphism (in $M$ and $N$)
\[
  S^{-1}\Hom_A(M,N)\longrightarrow\Hom_{S^{-1}A}(S^{-1}M,S^{-1}N)
\]
which sends $u/s$ to the homomorphism $m/t\mapsto u(m)/st$. When $M$ has a finite
presentation, the preceding homomorphism is an \emph{isomorphism}: it is immediate when $M$
is of the form $A^r$, and we pass to the general case by starting with the following exact
sequence $A^p\to A^q\to M\to 0$, and using the exactness of the functor $S^{-1}M$ and
the left-exactness of the functor $\Hom_A(M,N)$ in $M$. Note that this case always occurs
when $A$ is \emph{Noetherian} and the $A$-module $M$ is \emph{of finite type}.
\end{env}

\subsection{Change of multiplicative subset}
\label{0-prelim-1.4}

\begin{env}{1.4.1}
\label{env-0.1.4.1}
Let $S$, $T$ be two multiplicative subsets of a ring $A$ such that $S\subset T$; there exists
a canonical homomorphism $\rho_A^{T,S}$ (or simply $\rho^{T,S}$) of $S^{-1}A$ into $T^{-1}A$,
sending the element denoted $a/s$ of $S^{-1}A$ to the element denoted $a/s$ in $T^{-1}A$; we
have ${i_A^T=\rho_A^{T,S}\circ i_A^S}$. For every $A$-module $M$, there exists in the same
way an $S^{-1}A$-linear map from $S^{-1}M$ to $T^{-1}M$ (the latter considered as an
$S^{-1}A$-module thanks to the homomorphism $\rho_A^{T,S}$), which sends the element $m/s$ of
$S^{-1}M$ to the element $m/s$ of $T^{-1}M$; we denote this map by $\rho_M^{T,S}$, or simply
$\rho^{T,S}$, and we still have $i_M^T=\rho_M^{T,S}\circ i_M^S$; in the canonical
identification \sref{env}{1.2.5}, $\rho_M^{T,S}$ identifies with $\rho_A^{T,S}\otimes 1$. The
homomorphism $\rho_M^{T,S}$ is a \emph{functorial morphism} (or natural transformation) from
the functor $S^{-1}M$ to the functor $T^{-1}M$, in other words, the diagram
\[
  \xymatrix{
  S^{-1}M\ar[r]^{S^{-1}u}\ar[d]_{\rho_M^{T,S}} & S^{-1}N\ar[d]^{\rho_N^{T,S}}\\
  T^{-1}M\ar[r]^{T^{-1}u} & T^{-1}N
  }
\]
\oldpage{16}
is commutative, for every homomorphism $u:M\to N$; $T^{-1}u$ is entirely determined by
$S^{-1}u$, since for $m\in M$ and $t\in T$, we have
\[
  (T^{-1}u)(m/t)=(t/1)^{-1}\rho^{T,S}((S^{-1}u)(m/1)).
\]
\end{env}

\begin{env}{1.4.2}
\label{env-0.1.4.2}
With the same notations, for two $A$-modules $M$, $N$, the diagrams (cf. \sref{env}{1.3.4}
and \sref{env}{1.3.5})
\[
  \xymatrix{
    (S^{-1}M)\otimes_{S^{-1}A}(S^{-1}N)\ar[r]^\sim \ar[d] & S^{-1}(M\otimes_A N)\ar[d] & &
    S^{-1}\Hom_A(M,N)\ar[r]\ar[d] & \Hom_{S^{-1}A}(S^{-1}M,S^{-1}N)\ar[d]\\
    (T^{-1}M)\otimes_{T^{-1}A}(T^{-1}N)\ar[r]^\sim & T^{-1}(M\otimes_A N) & &
    T^{-1}\Hom_A(M,N)\ar[r] & \Hom_{T^{-1}A}(T^{-1}M,T^{-1}N)
  }
\]
are commutative.
\end{env}

\begin{env}{1.4.3}
\label{env-0.1.4.3}
There is an important case in which the homomorphism $\rho^{T,S}$ is \emph{bijective},
we know that then every element of $T$ is divisor of an element of $S$; we then identify by
$\rho^{T,S}$ the modules $S^{-1}M$ and $T^{-1}M$. We say that $S$ is \emph{saturated} if
every divisor in $A$ of an element of $S$ is in $S$; by replacing $S$ with  the set $T$ of
all the divisors of the elements of $S$ (a set which is multiplicative and saturated), we see
that we can always, if we wish, be limited to the consideration of modules of fractions
$S^{-1}M$, where $S$ is saturated.
\end{env}

\begin{env}{1.4.4}
\label{env-0.1.4.4}
If $S$, $T$, $U$ are three multiplicative subsets of $A$ such that $S\subset T\subset U$, we
have
\[
  \rho^{U,S}=\rho^{U,T}\circ\rho^{T,S}.
\]
\end{env}

\begin{env}{1.4.5}
\label{env-0.1.4.5}
Consider an \emph{increasing filtered family} $(S_\alpha)$ of multiplicative subsets of $A$
(we write $\alpha\leqslant\beta$ for $S_\alpha\subset S_\beta$), and let $S$ be the
multiplicative subset $\bigcup_\alpha S_\alpha$; let us put
$\rho_{\beta\alpha}=\rho_A^{S_\beta,S_\alpha}$ for $\alpha\leq\beta$; according to
\sref{env}{1.4.4}, the homomorphisms $\rho_{\beta\alpha}$ define a ring $A'$ as the
\emph{inductive limit} of the inductive system of rings
$(S_\alpha^{-1}A,\rho_{\beta\alpha})$. Let $\rho_\alpha$ be the canonical map
$S_\alpha^{-1}A\to A'$, and let $\vphi_\alpha=\rho_A^{S,S_\alpha}$; as
$\vphi_\alpha=\vphi_\beta\circ\rho_{\beta\alpha}$ for $\alpha\leqslant\beta$ according to
\sref{env}{1.4.4}, we can uniquely define a homomorphism $\vphi:A'\to S^{-1}A$ such that the
diagram
\[
  \xymatrix{
    & S_\alpha^{-1}A\ar[ddl]_{\rho_\alpha}
                    \ar[d]^{\rho_{\beta\alpha}}
                    \ar[rdd]^{\vphi_\alpha}\\
    & S_\beta^{-1}A\ar[ld]^{\rho_\beta}
                   \ar[rd]_{\vphi_\beta}
    & & (\alpha\leqslant\beta)\\
    A'\ar[rr]_\vphi
    & & S^{-1}A
  }
\]
is commutative. In fact, $\vphi$ is an \emph{isomorphism}; it is indeed immediate by
construction that $\vphi$ is surjective. On the other hand, if
$\rho_\alpha(a/s_\alpha)\in A'$ is such that ${\vphi(\rho_\alpha(a/s_\alpha))=0}$, this means
that $a/s_\alpha=0$ in $S^{-1}A$, that is to say that there exists $s\in S$ such that
$sa=0$; but there is a $\beta\geqslant\alpha$ such that $s\in S_\beta$, and consequently, as
$\rho_\alpha(a/s_\alpha)=\rho_\beta(sa/ss_\alpha)=0$, we find that $\vphi$ is injective.
The case for an $A$-module $M$ is treated likewise, and thus we have defined canonical
isomorphisms
\[
  \varinjlim S_\alpha^{-1}A\isoto(\varinjlim S_\alpha)^{-1}A,\quad
  \varinjlim S_\alpha^{-1}M\isoto(\varinjlim S_\alpha)^{-1}M,
\]
the second being \emph{functorial} in $M$.
\end{env}

\begin{env}{1.4.6}
\label{env-0.1.4.6}
\oldpage{17}
Let $S_1$, $S_2$ be two multiplicative subsets of $A$; then $S_1 S_2$ is also a
multiplicative subset of $A$. Let us denote by $S_2'$ the canonical image of $S_2$ in the
ring $S_1^{-1}A$, which is a multiplicative subset of this ring. For every $A$-module $M$
there is then a functorial isomorphism
\[
  {S_2'}^{-1}(S_1^{-1}M)\isoto(S_1 S_2)^{-1}M
\]
which sends $(m/s_1)/(s_2/1)$ to the element $m/(s_1 s_2)$.
\end{env}

\subsection{Change of ring}
\label{0-prelim-1.5}

\begin{env}{1.5.1}
\label{env-0.1.5.1}
Let $A$, $A'$ be two rings, $\vphi$ a homomorphism $A'\to A$, $S$ (resp. $S'$)
a multiplicative subset of $A$ (resp. $A'$), such that $\vphi(S')\subset S$; the
composition homomorphism $\smash{A'\xrightarrow{\vphi} A\to S^{-1}A}$ factors as
$\smash{A'\to{S'}^{-1}\xrightarrow{\vphi^{S'}} S^{-1}A}$ by virtue of \sref{env}{1.2.4};
where $\vphi^{S'}(a'/s')=\vphi(a')/\vphi(s')$. If $A=\vphi(A')$ and
$S=\vphi(S')$, $\vphi^{S'}$ is \emph{surjective}. If $A'=A$ and if $\vphi$
is the identity, $\vphi^{S'}$ is none other than the homomorphism $\rho_A^{S,S'}$
defined in \sref{env}{1.4.1}.
\end{env}

\begin{env}{1.5.2}
\label{env-0.1.5.2}
Under the hypothesis of \sref{env}{1.5.1}, let $M$ be an $A$-module. There exists a canonical
functorial morphism
\[
  \sigma:{S'}^{-1}(M_{[\vphi]})\longrightarrow(S^{-1}M)_{[\vphi^{S'}]}
\]
of ${S'}^{-1}A'$-modules, sending each element $m/s'$ of ${S'}^{-1}(M_{[\vphi]})$ to
the element $m/\vphi(s')$ of $(S^{-1}M)_{[\vphi^{S'}]}$; in fact, we verify
immediately that this definition does not depend on the expression $m/s'$ of the element
considered. \emph{When $S=\vphi(S')$}, the homomorphism $\sigma$ is \emph{bijective}.
When $A'=A$ and $\vphi$ is the identity, $\sigma$ is none other than the homomorphism
$\rho_M^{S,S'}$ defined in \sref{env}{1.4.1}.

When $M=A$ is taken in particular, the homomorphism $\vphi$ defines on $A$ an $A'$-algebra
structure; ${S'}^{-1}(A_{[\vphi]})$ is then provided with a ring structure, for which it
identifies with $(\vphi(S'))^{-1}A$, and the homomorphism
${\sigma:{S'}^{-1}(A_{[\vphi]})\to S^{-1}A}$ is a homomorphism of ${S'}^{-1}A'$-algebras.
\end{env}

\begin{env}{1.5.3}
\label{env-0.1.5.3}
Let $M$ and $N$ be two $A$-modules; by composing the homomorphisms defined in
\sref{env}{1.3.4} and \sref{env}{1.5.2}, we obtain a homomorphism
\[
  (S^{-1}M\otimes_{S^{-1}A}S^{-1}N)_{[\vphi^{S'}]}
  \longleftarrow{S'}^{-1}((M\otimes A)_{[\vphi]})
\]
which is an isomorphism when $\vphi(S')=S$. Similarly, by composing the homomorphisms in
\sref{env}{1.3.5} and \sref{env}{1.5.2}, we obtain a homomorphism
\[
  {S'}^{-1}((\Hom_A(M,N))_{[\vphi]})
  \longrightarrow(\Hom_{S^{-1}A}(S^{-1}M,S^{-1}N))_{[\vphi^{S'}]}
\]
which is an isomorphism when $\vphi(S')=S$ and $M$ admits a finite presentation.
\end{env}

\begin{env}{1.5.4}
\label{env-0.1.5.4}
Let us now consider an $A'$-module $N'$, and form the tensor product
$N'\otimes_{A'}A_{[\vphi]}$, which can be considered as an $A$-module by setting
$a\cdot(n'\otimes b)=n'\otimes(ab)$. There is a functorial isomorphism of $S^{-1}A$-modules
\[
  \tau:({S'}^{-1}N')\otimes_{{S'}^{-1}A'}(S^{-1}A)_{[\vphi^{S'}]}
  \isoto S^{-1}(N'\otimes_{A'}A_{[\vphi]})
\]
\oldpage{18}
which sends the element $(n'/s')\otimes(a/s)$ to the element $(n'\otimes a)/(\vphi(s')s)$;
indeed, we verify separately that when we replace $n'/s'$ (resp. $a/s$) by another expression
of the same element, $(n'\otimes a)/(\vphi(s')s)$ does not change; on the other hand, we can
define an inverse homomorphism of $\tau$ by sending $(n'\otimes a)/s$ to the element
$(n'/1)\otimes(a/s)$: we use the fact that $S^{-1}(N'\otimes_{A'}A_{[\vphi]})$ is canonically
isomorphic to $(N'\otimes_{A'}A_{[\vphi]})\otimes_A S^{-1}A$ \sref{env}{1.2.5}, so also to
$N'\otimes_{A'}(S^{-1}A)_{[\psi]}$, denoting by $\psi$ the composite homomorphism
$a'\mapsto\vphi(a')/1$ of $A'$ into $S^{-1}A$.
\end{env}

\begin{env}{1.5.5}
\label{env-0.1.5.5}
If $M'$ and $N'$ are two $A'$-modules, by composing the isomorphisms \sref{env}{1.3.4} and
\sref{env}{1.5.4}, we obtain an isomorphism
\[
  {S'}^{-1}M\otimes_{{S'}^{-1}A'}{S'}^{-1}N'\otimes_{{S'}^{-1}A'}S^{-1}A
  \isoto S^{-1}(M'\otimes_{A'}N'\otimes_{A'}A).
\]
Likewise, if $M'$ admits a finite presentation, we have by \sref{env}{1.3.5} and
\sref{env}{1.5.4} an isomorphism
\[
  \Hom_{{S'}^{-1}A'}({S'}^{-1}M',{S'}^{-1}N')\otimes_{{S'}^{-1}A'}S^{-1}A
  \isoto S^{-1}(\Hom_{A'}(M',N')\otimes_{A'}A).
\]
\end{env}

\begin{env}{1.5.6}
\label{env-0.1.5.6}
Under the hypotheses of \sref{env}{1.5.1}, let $T$ (resp. $T'$) be a second multiplicative
subset of $A$ (resp. $A'$) such that $S\subset T$ (resp. $S'\subset T'$) and
$\vphi(T')\subset T$. Then the diagram
\[
  \xymatrix{
    {S'}^{-1}A'\ar[r]^{\vphi^{S'}}\ar[d]_{\rho^{T',S'}} & S^{-1}A\ar[d]^{\rho^{T,S}}\\
    {T'}^{-1}A'\ar[r]^{\vphi^{T'}} & T^{-1}A
  }
\]
is commutative. If $M$ is an $A$-module, the diagram
\[
  \xymatrix{
    {S'}^{-1}(M_{[\vphi]})\ar[r]^\sigma\ar[d]_{\rho^{T',S'}} &
    (S^{-1}M)_{[\vphi^{S'}]}\ar[d]^{\rho^{T,S}}\\
    {T'}^{-1}(M_{[\vphi]})\ar[r]^\sigma & (T^{-1}M)_{[\vphi^{T'}]}
  }
\]
is commutative. Finally, if $N'$ is an $A'$-module, the diagram
\[
  \xymatrix{
    ({S'}^{-1}N')\otimes_{{S'}^{-1}A'}(S^{-1}A)_{[\vphi^{S'}]}\ar[r]^\sim_\tau\ar[d] &
    S^{-1}(N'\otimes_{A'}A_{[\vphi]})\ar[d]^{\rho^{T,S}}\\
    ({T'}^{-1}N')\otimes_{{T'}^{-1}A'}(T^{-1}A)_{[\vphi^{T'}]}
    \ar[r]^\sim_\tau & T^{-1}(N'\otimes_{A'}A_{[\vphi]})
  }
\]
is commutative, the left vertical arrow obtained by applying
$\rho_{N'}^{T',S'}$ to ${S'}^{-1}N'$ and $\rho_A^{T,S}$ to $S^{-1}A$.
\end{env}

\begin{env}{1.5.7}
\label{env-0.1.5.7}
\oldpage{19}
Let $A''$ be a third ring, $\vphi':A''\to A'$ a ring homomorphism, $S''$ a multiplicative
subset of $A''$ such that $\vphi'(S'')\subset S'$. Set $\vphi''=\vphi\circ\vphi'$; then we
have
\[
  {\vphi''}^{S''}=\vphi^{S'}\circ{\vphi'}^{S''}.
\]
Let $M$ be an $A$-module; evidently we have $M_{[\vphi'']}=(M_{[\vphi]})_{[\vphi']}$;
if $\sigma'$ and $\sigma''$ are the homomorphisms defined by $\vphi'$ and $\vphi''$ as
$\sigma$ is defined in \sref{env}{1.5.2} by $\vphi$, we have the transitivity formula
\[
  \sigma''=\sigma\circ\sigma'.
\]

Finally, let $N''$ be an $A''$-module; the $A$-module $N''\otimes_{A''}A_{[\vphi'']}$
identifies canonically with $(N''\otimes_{A''}{A'}_{[\vphi']})\otimes_{A'}A_{[\vphi]}$,
and likewise the $S^{-1}A$-module
${({S''}^{-1}N'')\otimes_{{S''}^{-1}A''}(S^{-1}A)_{[{\vphi''}^{S''}]}}$ identifies
canonically with
$(({S''}^{-1}N'')\otimes_{{S''}^{-1}A''}({S'}^{-1}A')_{[{\vphi'}^{S''}]})
  \otimes_{{S'}^{-1}A'}(S^{-1}A)_{[\vphi^{S'}]}$. With these identifications, if $\tau'$
and $\tau''$ are the isomorphisms defined by $\vphi'$ and $\vphi''$ as $\tau$ is defined
in \sref{env}{1.5.4} by $\vphi$, we have the transitivity formula
\[
  \tau''=\tau\circ(\tau'\otimes 1).
\]
\end{env}

\begin{env}{1.5.8}
\label{env-0.1.5.8}
Let $A$ be a subring of a ring $B$; for every \emph{minimal} prime ideal $\mathfrak{p}$ of
$A$, there exists a minimal prime ideal $\mathfrak{q}$ of $B$ such that
$\mathfrak{p}=A\cap\mathfrak{q}$. Indeed, $A_\mathfrak{p}$ is a subring of $B_\mathfrak{p}$
\sref{env}{1.3.2} and has \emph{a single} prime ideal $\mathfrak{p}'$ \sref{env}{1.2.6};
since $B_\mathfrak{p}$ is not reduced to $0$, it has at least one prime ideal $\mathfrak{q}'$
and we have necessarily $\mathfrak{q}'\cap A_\mathfrak{p}=\mathfrak{p}'$; the prime ideal
$\mathfrak{q}_1$ of $B$, an inverse image of $\mathfrak{q}'$ is thus such that
$\mathfrak{q}_1\cap A=\mathfrak{p}$, and $\emph{a fortiori}$ we have
$\mathfrak{q}\cap A=\mathfrak{p}$ for every minimal prime ideal $\mathfrak{q}$ of $B$
contained in $\mathfrak{q}_1$.
\end{env}

\subsection{Indentification of the module $M_f$ as an inductive limit}
\label{0-prelim-1.6}

\begin{env}{1.6.1}
\label{env-0.1.6.1}
Let $M$ be an $A$-module, $f$ an element of $A$. Consider a sequence $(M_n)$ of $A$-modules,
all identical to $M$, and for each pair of integers $m\leqslant n$, let $\vphi_{nm}$ be the
homomorphism $z\mapsto f^{n-m}z$ of $M_m$ into $M_n$; it is immediate that
$((M_n),(\vphi_{nm}))$ is an \emph{inductive system} of $A$-modules; let $N=\varinjlim M_n$
be the inductive limit of this system. We define a canonical $A$-isomorphism,
\emph{functorial} of $N$ on $M_f$. For this reason, let us note that, for all $n$,
$\theta_n:z\mapsto z/f^n$ is an $A$-homomorphism of $M=M_n$ into $M_f$, and it follows from
the definitions that we have $\theta_n\circ\vphi_{nm}=\theta_m$ for $m\leqslant n$. There
exists therefore an $A$-homomorphism $\theta:N\to M_f$ such that, if $\vphi_n$ denotes the
canonical homomorphism $M_n\to N$, we have $\theta_n=\theta\circ\vphi_n$ for all $n$. Since,
by hypothesis, every element of $M_f$ is of the form $z/f^n$ for at least $n$, it is clear
that $\theta$ is surjective. On the other hand, if $\theta(\vphi_n(z))=0$, in other words
$z/f^n=0$, there exists an integer $k>0$ such that $f^k z=0$, so $\vphi_{n+k,n}(z)=0$, which
gives $\vphi_n(z)=0$. We can therefore identify $M_f$ and $\varinjlim M_n$ by means of
$\theta$.
\end{env}

\begin{env}{1.6.2}
\label{env-0.1.6.2}
Now write $M_{f,n}$, $\vphi_{nm}^f$ and $\vphi_n^f$ instead of $M_n$, $\vphi_{nm}$ and
$\vphi_n$. Let $g$ be a second element of $A$. As $f^n$ divides $f^n g^n$, we have a
functorial homomorphism
\[
  \rho_{fg,f}:M_f\longrightarrow M_{fg}\quad(\sref{env}{1.4.1}\text{ and }\sref{env}{1.4.3});
\]
\oldpage{20}
if we indentify $M_f$ and $M_{fg}$ with $\varinjlim M_{f,n}$ and $\varinjlim M_{fg,n}$
respectively, $\rho_{fg,f}$ identifies with the \emph{inductive limit} of the maps
$\rho_{fg,f}^n:M_{f,n}\to M_{fg,n}$, defined by $\rho_{fg,f}^n(z)=g^n z$. Indeed, this
follows immediately from the commutivity of the diagram
\[
  \xymatrix{
    M_{f,n}\ar[r]^{\rho_{fg,f}^n}\ar[d]_{\vphi_n^f} & M_{fg,n}\ar[d]^{\vphi_n^{fg}}\\
    M_f\ar[r]^{\rho_{fg,f}} & M_{fg}.
  }
\]
\end{env}

\subsection{Support of a module}
\label{0-prelim-1.7}

\begin{env}{1.7.1}
\label{env-0.1.7.1}
Given an $A$-module $M$, we call the \emph{support} of $M$ and denote by $\Supp(M)$
the set of prime ideals $\mathfrak{p}$ of $A$ such that $M_\mathfrak{p}\neq 0$. For $M=0$, it
is necessary and sufficient that $\Supp(M)=\emp$, because if $M_\mathfrak{p}=0$ for all
$\mathfrak{p}$, the annihilator of an element $x\in M$ cannot be contained in any prime
ideal of $A$, so $A$ is \unsure{total}.
\end{env}

\begin{env}{1.7.2}
\label{env-0.1.7.2}
If $0\to N\to M\to P\to 0$ is an exact sequence of $A$-modules, we have
\[
  \Supp(M)=\Supp(N)\cup\Supp(P)
\]
because for every prime ideal $\mathfrak{p}$ of $A$, the sequence
${0\to N_\mathfrak{p}\to M_\mathfrak{p}\to P_\mathfrak{p}\to 0}$ is exact \sref{env}{1.3.2}
and for $M_\mathfrak{p}=0$, it is necessary and sufficient that
$N_\mathfrak{p}=P_\mathfrak{p}=0$.
\end{env}

\begin{env}{1.7.3}
\label{env-0.1.7.3}
If $M$ is the sum of a family $(M_\lambda)$ of submodules, $M_\mathfrak{p}$ is the sum
of the $(M_\lambda)_\mathfrak{p}$ for every prime ideal $\mathfrak{p}$ of $A$
(\sref{env}{1.3.3} and \sref{env}{1.3.2}), so $\Supp(M)=\bigcup_\lambda\Supp(M_\lambda)$.
\end{env}

\begin{env}{1.7.4}
\label{env-0.1.7.4}
If $M$ is an $A$-module \emph{of finite type}, $\Supp(M)$ is the set of prime
ideals \emph{containing the annihilator of} $M$. Indeed, if $M$ is cyclic and
generated by $x$, we say that $M_\mathfrak{p}=0$ means that there exists
$s\not\in\mathfrak{p}$ such that $s\cdot x=0$, so that $\mathfrak{p}$ does not contain the
annihilator of $x$. If now $M$ admits a finite system $(x_i)_{1\leqslant i\leqslant n}$ of
generators and if $\mathfrak{a}_i$ is the annihilator of $x_i$, it follows from
\sref{env}{1.7.3} that $\Supp(M)$ is the set of $\mathfrak{p}$ containing one of
$\mathfrak{a}_i$, or, equivalently, the set of $\mathfrak{p}$ containing
$\mathfrak{a}=\bigcap_i\mathfrak{a}_i$, which is the annihilator of $M$.
\end{env}

\begin{env}{1.7.5}
\label{env-0.1.7.5}
If $M$ and $N$ are two $A$-modules \emph{of finite type}, we have
\[
  \Supp(M\otimes_A N)=\Supp(M)\cap\Supp(N).
\]
It can be seen that if $\mathfrak{p}$ is a prime ideal of $A$, the condition
$M_\mathfrak{p}\otimes_{A_\mathfrak{p}}N_\mathfrak{p}\neq 0$ is equivalent to
``$M_\mathfrak{p}\neq 0$ and $N_\mathfrak{p}\neq 0$'' (taking into account
\sref{env}{1.3.4}). In other words, it is about seeing that if $P$, $Q$ are two modules of
finite type over a \emph{local} ring $B$, not reduced to $0$, then $P\otimes_B Q\neq 0$. Let
$\mathfrak{m}$ be the maximal ideal of $B$. By virtue of Nakayama's lemma, the vector spaces
$P/\mathfrak{m}P$ and $Q/\mathfrak{m}Q$ are not reduced to $0$, so it is the same with the
tensor product
$(P/\mathfrak{m}P)\otimes_{B/\mathfrak{m}}(Q/\mathfrak{m}Q)
  =(P\otimes_B Q)\otimes_B(B/\mathfrak{m})$,
hence the conclusion.

In particular, if $M$ is an $A$-module of finite type, $\mathfrak{a}$ an ideal of $A$,
$\Supp(M/\mathfrak{a}M)$ is the set of prime ideals containing both $\mathfrak{a}$ and the
annihilator $\mathfrak{n}$ of $M$ \sref{env}{1.7.4}, that is, the set of prime ideals
containing $\mathfrak{a}+\mathfrak{n}$.
\end{env}

\section{Irreducible spaces. Noetherian spaces}
\label{0-prelim-2}

\subsection{Irreducible spaces}
\label{0-prelim-2.1}

\begin{env}{2.1.1}
\label{env-0.2.1.1}
\oldpage{21}
We say that a topological space $X$ is \emph{irreducible} if it is nonempty and if it is not
a union of two distinct closed subspaces of $X$. It is the same to say that $X\neq\emp$ and
that the intersection of two nonempty open sets (and consequently of a finite number of open
sets) of $X$ is nonempty, or that every nonempty open set is everywhere dense, or that any
closed set is \emph{rare}, or finally that all open sets of $X$ are \emph{connected}.
\end{env}

\begin{env}{2.1.2}
\label{env-0.2.1.2}
For a subspace $Y$ of a topological space $X$ to be irreducible, it is necessary and
sufficient that its closure $\overline{Y}$ be irreducible. In particular, any subspace which
is the closure $\overline{\{x\}}$ of a singleton is irreducible; we will express the relation
$y\in\overline{\{x\}}$ (equivalent to $\overline{\{y\}}\subset\overline{\{x\}}$) by saying
that there is a \emph{specialization of} $x$ or that there is a \emph{generalization of} $y$.
When there exists in an irreducible space $X$ a point $x$ such that $X=\overline{\{x\}}$, we
will say that $x$ is a \emph{generic point} of $X$. Any nonempty open subset of $X$ then
contains $x$, and any subspace containing $x$ admits $x$ for a generic point.
\end{env}

\begin{env}{2.1.3}
\label{env-0.2.1.3}
Recall that a \emph{Kolmogoroff space} is a topological space $X$ satisfying the axiom of
separation:

$(T_0)$ If $x\neq y$ are any two points of $X$, there is an open set containing one of the
points $x$, $y$ and not the other.

If an irreducible Kolmogoroff space admits a generic point, it admits \emph{only} one since a
nonempty open set contains any generic point.

Recall that a topological space $X$ is said to be \emph{quasi-compact} if, from any
collection of open sets of $X$, one can extract a finite cover of $X$ (or, equivalently, if
any decreasing filtered family of nonempty closed sets has a nonempty intersection). If $X$
is a quasi-compact space, then any nonempty closed subset $A$ of $X$ contains a
\emph{minimal} nonempty closed set $M$, because the set of nonempty closed subsets of $A$ is
inductive for the relation $\supset$; if in addition $X$ is a Kolmogoroff space, $M$ is
necessarily reduced to a single point (or, as we say by abuse of language, is a \emph{closed
point}).
\end{env}

\begin{env}{2.1.4}
\label{env-0.2.1.4}
In an irreducible space $X$, every nonempty open subspace $U$ is irreducible, and if $X$
admits a generic point $x$, $x$ is also a generic point of $U$.

Let $(U_\alpha)$ be a cover (whose set of indices is nonempty) of a topological space $X$,
consisting of nonempty open sets; if $X$ is irreducible, it is necessary and sufficient that
$U_\alpha$ is irreducible for all $\alpha$, and that $U_\alpha\cap U_\beta\neq\emp$ for any
$\alpha$, $\beta$. The condition is clearly necessary; to the that it is sufficient, it
suffices to prove that if $V$ is a nonempty open subset of $X$, then $V\cap U_\alpha$ is
nonempty for all $\alpha$, since then $V\cap U_\alpha$ is dense in $U_\alpha$ for all
$\alpha$, and consequently $V$ is dense in $X$. Now there is at least one index $\gamma$ such
that $V\cap U_\gamma\neq\emp$, so $V\cap U_\gamma$ is dense in $U_\gamma$, and as for all
$\alpha$, $U_\alpha\cap V_\alpha\neq\emp$, we also have
$V\cap U_\alpha\cap U_\gamma\neq\emp$.
\end{env}

\begin{env}{2.1.5}
\label{env-0.2.1.5}
\oldpage{22}
Let $X$ be an irreducible space, $f$ a continuous map of $X$ into a topological space $Y$.
Then $f(X)$ is irreducible, and if $x$ is a generic point of $X$, $f(x)$ is a generic point
of $f(X)$ and hence also of $\overline{f(X)}$. In particular, if in addition $Y$ is
irreducible and with a single generic point $y$, for $f(X)$ to be everywhere dense, it is
necessary and sufficient that $f(x)=y$.
\end{env}

\begin{env}{2.1.6}
\label{env-0.2.1.6}
Any irreducible subspace of a topological space $X$ is contained in a maximal irreducible
subspace, which is necessarily closed. Maximal irreducible subspaces of $X$ are called the
\emph{irreducible components} of $X$. If $Z_1$, $Z_2$ are two irreducible components distinct
from the space $X$, $Z_1\cap Z_2$ is a closed \emph{rare} set in each of the subspaces $Z_1$,
$Z_2$; in particular, if an irreducible component of $X$ admits a generic point
\sref{env}{2.1.2} such a point can not belong to any other irreducible component. If $X$ has
only a \emph{finite} number of irreducible components $Z_i$ ($1\leqslant i\leqslant n$), and
if, for each $i$, we put $U_i=Z_i\cap\mathrm{C}(\bigcup_{j\neq i}Z_j)$, the $U_i$ are open,
irreducible, disjoint, and their union is dense in $X$. Let $U$ be an open subset of a
topological space $X$. If $Z$ is an irreducible subset of $X$ that intersects with $U$,
$Z\cap U$ is open and dense in $Z$, thus irreducible; conversely, for any irreducible closed
subset $Y$ of $U$, the closure $\overline{Y}$ of $Y$ in $X$ is irreducible and
$\overline{Y}\cap U=Y$. We conclude that there is a \emph{bijective correspondence} between
the irreducible components of $U$ and the irreducible components of $X$ which intersect $U$.
\end{env}

\begin{env}{2.1.7}
\label{env-0.2.1.7}
If a topological space $X$ is a union of a \emph{finite} number of irreducible closed
subspaces $Y_i$, the irreducible components of $X$ are the maximal elements of the set of
$Y_i$, because if $Z$ is an irreducible closed subset of $X$, $Z$ is the union of the
$Z\cap Y_i$, from which one sees that $Z$ must be contained in one of the $Y_i$. Let $Y$ be a
subspace of a topological space $X$, and suppose that $Y$ has only a finite number of
irreducible components $Y_i$, ($1\leqslant i\leqslant n$); then the closures $\overline{Y_i}$
in $X$ are the irreducible components of $Y$.
\end{env}

\begin{env}{2.1.8}
\label{env-0.2.1.8}
Let $Y$ be an irreducible space admitting a single generic point $y$. Let $X$ be a
topological space, $f$ a continuous map from $X$ to $Y$. Then, for any irreducible
component $Z$ of $X$ intersecting $f^{-1}(y)$, $f(Z)$ is dense in $Y$. The converse is not
necessarily true; however, if $Z$ has a generic point $z$, and if $f(Z)$ is dense in $Y$, we
must have $f(z)=y$ \sref{env}{2.1.5}; in addition, $Z\cap f^{-1}(y)$ is then the closure of
$\{z\}$ in $f^{-1}(y)$ and is therefore irreducible, and like any irreducible subset of
$f^{-1}(y)$ containing $z$ is necessarily contained in $Z$ \sref{env}{2.1.6}, $z$ is a
generic point of $Z\cap f^{-1}(y)$. As any irreducible component of $f^{-1}(y)$ is contained
in an irreducible component of $X$, we see that if any irreducible component $Z$ of $X$
intersecting $f^{-1}(y)$ admits a generic point, then there is a \emph{bijective
correspondence} between all these components and all the irreducible components
$Z\cap f^{-1}(y)$ of $f^{-1}(y)$, the generic points of $Z$ being identical to those of
$Z\cap f^{-1}(y)$.
\end{env}

\subsection{Noetherian spaces}
\label{0-prelim-2.2}

\begin{env}{2.2.1}
\label{env-0.2.2.1}
\oldpage{23}
We say that a topological space $X$ is \emph{Noetherian} if the set of open subsets of $X$
satisfies the \emph{maximal} condition, or, equivalently, if the set of closed subsets of $X$
satisfies the \emph{minimal} condition. We say that $X$ is \emph{locally Noetherian} if all
$x\in X$ admit a neighborhood which is a Noetherian subspace.
\end{env}

\begin{env}{2.2.2}
\label{env-0.2.2.2}
Let $E$ be an ordered set satisfying the \emph{minimal} condition, and let $\mathbf{P}$ be a
property of the elements of $E$ subject to the following condition: if $a\in E$ is such that
for any $x<a$, $\mathbf{P}(x)$ is true, then $\mathbf{P}(a)$ is true. Under these conditions,
$\mathbf{P}(x)$ \emph{is true for all} $x\in E$ (``principle of Noetherian recurrence'').
Indeed, let $F$ be the set of $x\in E$ for which $\mathbf{P}(x)$ is false; if $F$ were not
empty, it would have a minimal element $a$, and as then $\mathbf{P}(x)$ is true for all
$x<a$, $\mathbf{P}(a)$ would be true, which is a contradiction.

We will apply this principle in particular when $E$ is a \emph{set of closed subsets of a
Noetherian space}.
\end{env}

\begin{env}{2.2.3}
\label{env-0.2.2.3}
Any subspace of a Noetherian space is Noetherian. Conversely, any topological space that is a
finite union of Noetherian subspaces is Noetherian.
\end{env}

\begin{env}{2.2.4}
\label{env-0.2.2.4}
Any Noetherian space is quasi-compact; conversely, any  topological space in which all open
sets are quasi-compact is Noetherian.
\end{env}

\begin{env}{2.2.5}
\label{env-0.2.2.5}
A Noetherian space has only a \emph{finite} number of irreducible components, as we see by
Noetherian recurrence.
\end{env}

\section{Supplement on sheaves}
\label{0-prelim-3}

\subsection{Sheaves with values in a category}
\label{0-prelim-3.1}

\begin{env}{3.1.1}
\label{env-0.3.1.1}
Let $\K$ be a category, $(A_\alpha)_{\alpha\in I}$,
$(A_{\alpha\beta})_{(\alpha,\beta)\in I\times I}$ two families of objects of $\K$ such
that $A_{\beta\alpha}=A_{\alpha\beta}$, and
$(\rho_{\alpha\beta})_{(\alpha,\beta)\in I\times I}$ is a family of morphisms
$\rho_{\alpha\beta}:A_\alpha\to A_{\alpha\beta}$. We say that a pair formed by an object $A$
of $\K$ and a family of morphisms $\rho_\alpha:A\to A_\alpha$ is a \emph{solution to the
universal problem} defined by the data of the families $(A_\alpha)$, $(A_{\alpha\beta})$,
and $(\rho_{\alpha\beta})$ if, for every object $B$ of $\K$, the map which sends
$f\in\Hom(B,A)$ to the family
$(\rho_\alpha\circ f)\in\Pi_\alpha\Hom(B,A_\alpha)$ is a \emph{bijection} of $\Hom(B,A)$ to
the set of all $(f_\alpha)$ such that
$\rho_{\alpha\beta}\circ f_\alpha=\rho_{\beta\alpha}\circ f_\beta$ for any pair of indices
$(\alpha,\beta)$. If such a solution exists, it is unique up to an isomorphism.
\end{env}

\begin{env}{3.1.2}
\label{env-0.3.1.2}
We will not recall the defintion of a \emph{presheaf} $U\mapsto\sh{F}(U)$ on a topological
space $X$ with values in a category $\K$ (G, I, 1.9); we say that such a presheaf is a
\emph{sheaf with values in} $\K$ if it satifies the following axiom:\\

(F) \emph{For any covering $(U_\alpha)$ of an open set $U$ of $X$ by open sets $U_\alpha$
    contained in $U$, if we denote by $\rho_\alpha$ (resp. $\rho_{\alpha\beta}$) the
    restriction morphism}
    \[
      \sh{F}(U)\to\sh{F}(U_\alpha)
      \quad(\text{\emph{resp. }}\sh{F}(U_\alpha)\to\sh{F}(U_\alpha\cap U_\beta)),
    \]
\oldpage{24}
    \emph{the pair formed by $\sh{F}(U)$ and the family $(\rho_\alpha)$ are a solution to
    the universal problem for $(\sh{F}(U_\alpha))$, $(\sh{F}(U_\alpha\cap U_\beta))$, and
    $(\rho_{\alpha\beta})$ in} \sref{env}{3.1.1}\footnote{This is a special case of the more
    general notion of a \emph{projective limit} (non-filtered) (\emph{see} (T, I, 1.8) and
    the book in preparation announced in the introduction).}.\\

Equivalently, we can say that, for each object $T$ of $\K$, the family
$U\mapsto\Hom(T,\sh{F}(U))$ is a \emph{sheaf of sets}.
\end{env}

\begin{env}{3.1.3}
\label{env-0.3.1.3}
Assume that $\K$ is the category defined by a ``type of structure with morphisms''
$\Sigma$,
the objects of $\K$ being the sets with structures of type $\Sigma$ and morphisms those of
$\Sigma$. Suppose that the category $\K$ also satisfies the following condition:\\

(E) If $(A,(\rho_\alpha))$ is a solution of a universal mapping problem \emph{in the
    category $\K$} for families $(A_\alpha)$, $(A_{\alpha\beta})$, $(\rho_{\alpha\beta})$,
    then it is also a solution of the universal mapping problem for the same families
    \emph{in the category of sets} (that is, when we consider $A$, $A_\alpha$, and
    $A_{\alpha\beta}$ as sets, $\rho_\alpha$ and $\rho_{\alpha\beta}$ as
    functions)\footnote{It can be proved that it also means that the canonical functor
    $\K\to(\mathrm{Set})$ \emph{commutes with projective limits} (not necessarily
    filtered).}.\\

Under these conditions, the condition (F) gives that, when considered as a presheaf \emph{of
sets}, $U\mapsto\sh{F}(U)$ is a \emph{sheaf}. In addition, for a map $u:T\to\sh{F}(U)$ to be
a morphism of $\K$, it is necessary and sufficient, under (F), that each map
$\rho_\alpha\circ u$ is a morphism $T\to\sh{F}(U_\alpha)$, which means that the structure of
type $\Sigma$ on $\sh{F}(U)$ is the \emph{initial structure} for the morphisms $\rho_\alpha$.
Conversely, suppose a presheaf $U\mapsto\sh{F}(U)$ on $X$, with values in $\K$, is a
\emph{sheaf of sets} and satisfies the previous condition; it is then clear that it satisfies
(F), so it is a \emph{sheaf with values in} $\K$.
\end{env}

\begin{env}{3.1.4}
\label{env-0.3.1.4}
When $\Sigma$ is a type of a group or ring structure, the fact that the presheaf
$U\mapsto\sh{F}(U)$ with values in $\K$ is a sheaf of \emph{sets} leads \emph{ipso facto}
that it is a sheaf with values in $\K$ (in other words, a sheaf of groups or rings within the
meaning of (G))\footnote{This is because in the category $\K$, any morphism that is a
\emph{bijection} (as a map of sets) is an \emph{isomorphism}. This is no longer true when
$\K$ is the category of topological spaces, for example.}. But it is not the same when, for
example, $\K$ is the category of \emph{topological rings} (with morphisms as continuous
homomorphisms): a sheaf with values in $\K$ is a sheaf of rings $U\mapsto\sh{F}(U)$ such that
for any open $U$ and any covering of $U$ by open sets $U_\alpha\subset U$, the topology of
the ring $\sh{F}(U)$ is to be \emph{the least fine}, making the homomorpisms
$\sh{F}(U)\to\sh{F}(U_\alpha)$ continuous. We will say in this case that $U\mapsto\sh{F}(U)$,
considered as a sheaf of rings (without a topology), is \emph{underlying} the sheaf of
topological rings $U\mapsto\sh{F}(U)$. Morphisms $u_V:\sh{F}(V)\to\sh{G}(V)$ ($V$ an
arbitrary open subset of $X$) of sheaves of topological rings are therefore homomorphisms of
the underlying sheaves of rings, such that $u_V$ be \emph{continuous} for all open
$V\subset X$; to distinguish them from any homomorphisms of the sheaves of the underlying
rings, we will call them continuous homomorphisms of sheaves of topological rings. We have
similar definitions and conventions for sheaves of topological spaces or topological groups.
\end{env}

\begin{env}{3.1.5}
\label{env-0.3.1.5}
\oldpage{25}
It is clear that for any category $\K$, if there is a presheaf (respectively a sheaf)
$\sh{F}$ on $X$ with values in $\K$ and $U$ is an open set of $X$, the $\sh{F}(V)$ for open
$V\subset U$ constitute a presheaf (or a sheaf) with values in $\K$, which we call the
presheaf (or sheaf) \emph{induced} by $\sh{F}$ on $U$ and denote it by $\sh{F}|U$.

For any morphism $u:\sh{F}\to\sh{G}$ of presheaves on $X$ with values in $\K$, we denote by
$u|U$ the morphism $\sh{F}|U\to\sh{G}|U$ formed by the $u_V$ for $V\subset U$.
\end{env}

\begin{env}{3.1.6}
\label{env-0.3.1.6}
Suppose now that the category $\K$ admits \emph{inductive limits} (T, 1.8); then, for any
presheaf (and in particular any sheaf) $\sh{F}$ on $X$ with values in $\K$ and all $x\in X$,
we can define the \emph{stalk} $\sh{F}_x$ as the object of $\K$ defined by the inductive
limit of the $\sh{F}(U)$ with respect to the filtering set (for $\supset$) of the open
neighborhoods $U$ of $x$ in $X$, and for the morphisms $\rho_U^V:\sh{F}(V)\to\sh{F}(U)$. If
$u:\sh{F}\to\sh{G}$ is a morphism of presheaves with values in $\K$, we define for all
$x\in X$ the morphism $u_x:\sh{F}_x\to\sh{G}_x$ as the inductive limit of
$u_U:\sh{F}(U)\to\sh{G}(U)$ with respect to all open neighborhoods of $x$; we thus define
$\sh{F}_x$ as a covariant functor in $\sh{F}$, with values in $\K$, for all $x\in X$.

When $\K$ is further defined by a kind of structure with morphisms $\Sigma$, we call
\emph{sections over $U$} of a \emph{sheaf} $\sh{F}$ with values in $\K$ the elements of
$\sh{F}(U)$, and we write $\Gamma(U,\sh{F})$ instead of $\sh{F}(U)$; for
$s\in\Gamma(U,\sh{F})$, $V$ an open set contained in $U$, we write $s|V$ instead of
$\rho_V^U(s)$; for all $x\in U$, the canonical image of $s$ in $\sh{F}_x$ is the \emph{germ}
of $s$ at the point $x$, denoted by $s_x$ (\emph{we will never replace the notation $s(x)$ in
this sense,} this notation being reserved for another notion relating to sheaves which will
be considered in this treatise \sref{env}{5.5.1}).

If then $u:\sh{F}\to\sh{G}$ is a morphism of sheaves with values in $\K$, we will write
$u(s)$ instead of $u_V(s)$ for all $s\in\Gamma(U,\sh{F})$.

If $\sh{F}$ is a sheaf of commutative groups, or rings, or modules, we say that the set of
$x\in X$ such that $\sh{F}_x\neq\{0\}$ is the \emph{support} of $\sh{F}$, denoted
$\Supp(\sh{F})$; this set is not necessarily closed in $X$.

When $\K$ is defined by a type of structure with morphisms, \emph{we systematically refrain
from using the point of view of ``\'etal\'e spaces''} in terms of relating to sheaves with
values in $\K$; in other words, we will never consider a sheaf as a topological space (nor
even as the whole union of its fibers), and we will not consider also a morphism
$u:\sh{F}\to\sh{G}$ of such sheaves on $X$ as a continuous map of topological spaces.
\end{env}

\subsection{Presheaves on an open basis}
\label{0-prelim-3.2}

\begin{env}{3.2.1}
\label{env-0.3.2.1}
We will restrict to the following categories $\K$ admitting \emph{projective limits}
(generalized, that is, corresponding to not necessarily filtered preordered sets,
cf. (T, 1.8)). Let $X$ be a topological space, $\mathfrak{B}$ an open basis for the topology
of $X$. We will call a \emph{presheaf on $\mathfrak{B}$, with values in $\K$,} to be a family
of objects $\sh{F}(U)\in\K$, corresponding to each $U\in\mathfrak{B}$, and a family of
morphisms $\rho_U^V:\sh{F}(V)\to\sh{F}(U)$ defined for any pair $(U,V)$ of elements of
$\mathfrak{B}$ such that $U\subset V$,
\oldpage{26}
with the conditions $\rho_U^U=$ identity and $\rho_U^W=\rho_U^V\circ\rho_V^W$ if $U$, $V$,
$W$ in $\mathfrak{B}$ are such that $U\subset V\subset W$. We can associate a \emph{presheaf
with values in} $\K$: $U\mapsto\sh{F}(U)$ in the ordinary sense, taking for all open $U$,
$\sh{F}'(U)=\varprojlim\sh{F}(V)$, where $V$ runs through the ordered set (for $\subset$,
\emph{not filtered} in general) of $V\in\mathfrak{B}$ sets such that $V\subset U$, since the
$\sh(V)$ form a projective system for the $\rho_V^W$ ($V\subset W\subset U$,
$V\in\mathfrak{B}$, $W\in\mathfrak{B}$). Indeed, if $U$, $U'$ are two open sets of $X$ such
that $U\subset U'$, we define ${\rho'}_U^{U'}$ as the projective limit (for $V\subset U$) of
the canonical morphisms $\sh{F}'(U')\to\sh{F}(V)$, in other words the unique morphism
$\sh{F}'(U')\to\sh{F}'(U)$, which, when composed with the canonical morphisms
$\sh{F}'(U)\to\sh{F}(V)$, gives the canonical morphisms $\sh{F}'(U')\to\sh{F}(V)$; the
verification of the transitivity of ${\rho'}_U^{U'}$ is then immediate. Moreover, if
$U\in\mathfrak{B}$, the canonical morphism $\sh{F}'(U)\to\sh{F}(U)$ is an isomorphism,
allowing to identify these two objects\footnote{If $X$ is a \emph{Noetherian} space, we can
still define $\sh{F}'(U)$ and show that it is a presheaf (in the ordinary sense) when one
supposes only that $\K$ admits projective limits for \emph{finite} projective systems.
Indeed, if $U$ is any open set of $X$, there is a \emph{finite} covering $(V_i)$ of $U$
formed by sets of $\mathfrak{B}$; for every couple $(i,j)$ of indices, let $(V_{ijk})$ be a
finite covering of $V_i\cap V_j$ formed by sets of $\mathfrak{B}$. Let $I$ be the set of $i$
and triples $(i,j,k)$, ordered only by the relations $i>(i,j,k)$, $j>(i,j,k)$; we then take
$\sh{F}'(U)$ to be the projective limit of the system of $\sh{F}(V_i)$ and $\sh{F}(V_{ijk})$;
it is easy to verify that this does not depend on the coverings $(V_i)$ and $(V_{ijk})$ and
that $U\mapsto\sh{F}'(U)$ is a presheaf.}.
\end{env}

\begin{env}{3.2.2}
\label{env-0.3.2.2}
For the presheaf $\sh{F}'$ thus defined to be a \emph{sheaf}, it is necessary and sufficient
that the presheaf $\sh{F}$ on $\mathfrak{B}$ satisfies the condition:\\

(F$_0$) \emph{For any covering $(U_\alpha)$ of $U\in\mathfrak{B}$ by sets
        $U_\alpha\in\mathfrak{B}$ contained in $U$, and for any object $T\in\K$, the map
        which takes $f\in\Hom(T,\sh{F}(U))$ to the family
        $(\rho_{U_\alpha}^U\circ f)\in\Pi_\alpha\Hom(T,\sh{F}(U_\alpha))$ is a bijection of
        $\Hom(T,\sh{F}(U))$ on the set of all $(f_\alpha)$ such that
        $\rho_V^{U_\alpha}\circ f_\alpha=\rho_V^{U_\beta}\circ f_\beta$ for any pair of
        indices $(\alpha,\beta)$ and any $V\in\mathfrak{B}$ such that
        $V\subset U_\alpha\cap U_\beta$\footnote{It also means that the pair formed by
        $\sh{F}(U)$ and the $\rho_\alpha=\rho_{U_\alpha}^U$ is a \emph{solution to the
        universal problem} defined in \sref{env}{3.1.1} by the data of
        $A_\alpha=\sh{F}(U_\alpha)$, $A_{\alpha\beta}=\Pi\sh{F}(V)$ (for $V\in\mathfrak{B}$
        such that $V\subset U_\alpha\cap U_\beta$) and
        $\rho_{\alpha\beta}=(\rho_V''):\sh{F}(U_\alpha)\to\Pi\sh{F}(V)$ defined by the
        condition that for $V\in\mathfrak{B}$, $V'\in\mathfrak{B}$, $W\in\mathfrak{B}$,
        $V\cup V'\subset U_\alpha\cap U_\beta$, $W\subset V\cap V'$,
        $\rho_W^V\circ\rho_V''=\rho_W^{V'}\circ\rho_{V'}''$.}.}\\

The condition is obviously necessary. To show that it is sufficient, consider first a second
basis $\mathfrak{B}'$ of the topology of $X$, \emph{contained in} $\mathfrak{B}$, and show
that if $\sh{F}''$ denotes the presheaf induced by the subfamily
$(\sh{F}(V))_{V\in\mathfrak{B}'}$, $\sh{F}''$ is \emph{canonically isomorphic} to $\sh{F}'$.
Indeed, firstly the projective limit (for $V\in\mathfrak{B}'$, $V\subset U$) canonical
morphisms ${\sh{F}'(U)\to\sh{F}(V)}$ is a morphism $\sh{F}'(U)\to\sh{F}''(U)$ for all open
$U$. If $U\in\mathfrak{B}$, this morphism is an isomorphism, because by hypothesis the
canonical morphisms $\sh{F}''(U)\to\sh{F}(V)$ for $V\in\mathfrak{B}'$, $V\subset U$,
factorize into $\sh{F}''(U)\to\sh{F}(U)\to\sh{F}(V)$, and it is immediate to see that the
composition of morphisms $\sh{F}(U)\to\sh{F}''(U)$ and $\sh{F}''(U)\to\sh{F}(U)$ thus defined
are the identities. This being so, for all open $U$, the morphisms
$\sh{F}''(U)\to\sh{F}''(W)=\sh{F}(W)$ for $W\in\mathfrak{B}$ and $W\subset U$ satisfy the
conditions characterizing the projective limit of $\sh{F}(W)$ ($W\in\mathfrak{B}$,
$W\subset U$), which proves our assertion given the uniqueness of a projective limit up
to isomorphism.

This posed, let $U$ be any open set of $X$, $(U_\alpha)$ a covering of $U$ by the open sets
contained in $U$, and $\mathfrak{B}'$ the subfamily of $\mathfrak{B}$ formed by the sets
\oldpage{27}
of $\mathfrak{B}$ contained in at least $U_\alpha$; it is clear that $\mathfrak{B}'$ is still
a basis of the topology of $X$, so $\sh{F}'(U)$ (resp. $\sh{F}''(U_\alpha)$) is the
projective limit of $\sh{F}(V)$ for $V\in\mathfrak{B}'$ and $V\subset U$
(resp., $V\subset U_\alpha$), the axiom (F) is then immediately verified by virtue of the
definition of the projective limit.

When (F$_0$) is satisfied, we will say by abuse of language that the presheaf $\sh{F}$ on the
basis $\mathfrak{B}$ is a sheaf.
\end{env}

\begin{env}{3.2.3}
\label{env-0.3.2.3}
Let $\sh{F}$, $\sh{G}$ be two presheaves on a basis $\mathfrak{B}$, with values in $\K$; we
define a \emph{morphism} $u:\sh{F}\to\sh{G}$ as a family $(u_V)_{V\in\mathfrak{B}}$ of
morphisms $u_V:\sh{F}(V)\to\sh{G}(V)$ satisfying the usual compatibility conditions with the
restriction morphisms $\rho_V^W$. With the notation of \sref{env}{3.2.1}, we have a morphism
$u':\sh{F}'\to\sh{G}'$ of (ordinary) presheaves by taking for $u_U'$ the projective limit of
the $u_V$ for $V\in\mathfrak{B}$ and $V\subset U$; the verification of the compatibility
conditions with the ${\rho'}_U^{U'}$ follows from the functorial properties of the projective
limit.
\end{env}

\begin{env}{3.2.4}
\label{env-0.3.2.4}
If the category $\K$ admits inductive limits, and if $\sh{F}$ is a presheaf on the basis
$\mathfrak{B}$, with values in $\K$, for each $x\in X$ the neighborhoods of $x$ belonging to
$\mathfrak{B}$ form a cofinal set (for $\supset$) in the set of neighborhoods of $x$,
therefore, if $\sh{F}'$ is the (ordinary) presheaf corresponding to $\sh{F}$, the stalk
$\sh{F}_x'$ is equal to $\varinjlim_{\mathfrak{B}}\sh{F}(V)$ over the set of
$V\in\mathfrak{B}$ containing $x$. If $u:\sh{F}\to\sh{G}$ is morphism of presheaves on
$\mathfrak{B}$ with values in $\K$, $u':\sh{F}'\to\sh{G}'$ the corresponding morphism of
ordinary presheaves, $u_x'$ is likewise the inductive limit of the morphisms
$u_V:\sh{F}(V)\to\sh{G}(V)$ for $V\in\mathfrak{B}$, $x\in V$.
\end{env}

\begin{env}{3.2.5}
\label{env-0.3.2.5}
We return to the general conditions of \sref{env}{3.2.1}. If $\sh{F}$ is an ordinary
\emph{sheaf} with values in $\K$, $\sh{F}_1$ the sheaf \emph{on} $\mathfrak{B}$ obtained
by the restriction of $\sh{F}$ to $\mathfrak{B}$, the ordinary sheaf $\sh{F}_1'$ obtained
from $\sh{F}_1$ by the procedure of \sref{env}{3.2.1} is canonically isomorphic to $\sh{F}$,
by virtue of the condition (F) and the uniqueness properties of the projective limit. We
identify the ordinary sheaf $\sh{F}$ with $\sh{F}_1'$.

If $\sh{G}$ is a second (ordinary) sheaf on $X$ with values in $\K$, and $u:\sh{F}\to\sh{G}$
a morphism, the preceding remark shows that the data of the $u_V:\sh{F}(V)\to\sh{G}(V)$
\emph{for only the $V\in\mathfrak{B}$} completely determines $u$; conversely, it is
sufficient, the $u_V$ being given for $V\in\mathfrak{B}$, to verify the commutative
diagram with the restriction morphisms $\rho_V^W$ for $V\in\mathfrak{B}$, $W\in\mathfrak{B}$,
and $V\subset W$, for there to exist a morphism $u'$ and a unique $\sh{F}$ in $\sh{G}$ such
that $u_V'=u_V$ for each $V\in\mathfrak{B}$ \sref{env}{3.2.3}.
\end{env}

\begin{env}{3.2.6}
\label{env-0.3.2.6}
Suppose that $\K$ admits projective limits. Then the category of \emph{sheaves on $X$
with values in $\K$} admits \emph{projective limits}; if $(\sh{F}_\lambda)$ is a
projective system of sheaves on $X$ with values in $\K$, the
$\sh{F}(U)=\varprojlim_\lambda\sh{F}_\lambda(U)$ indeed define a presheaf with values in
$\K$, and the verification of the axiom (F) follows from the transitivity of projective
limits; the fact that $\sh{F}$ is then the projective limit of the $\sh{F}_\lambda$ is
immediate.

When $\K$ is the category of sets, for each projective system $(\mathfrak{H}_\lambda)$ such
\oldpage{28}
that $\mathfrak{H}_\lambda$ is a \emph{subsheaf} of $\sh{F}_\lambda$ for each $\lambda$,
$\varprojlim_\lambda\mathfrak{H}_\lambda$ canonically identifies with a \emph{subsheaf} of
$\varprojlim_\lambda\sh{F}_\lambda$. If $\K$ is the category of abelian groups, the covariant
functor $\varprojlim_\lambda\sh{F}_\lambda$ is \emph{additive} and \emph{left exact}.
\end{env}

\subsection{Gluing of sheaves}
\label{0-prelim-3.3}

\begin{env}{3.3.1}
\label{env-0.3.3.1}
Suppose still that the category $\K$ admits (generalized) projective limits. Let $X$ be
a topological space, $\mathfrak{U}=(U_\lambda)_{\lambda\in L}$ an open cover of $X$, and for
each $\lambda\in L$, let $\sh{F}_\lambda$ be a sheaf on $U_\lambda$, with values in $\K$; for
each pair of indices $(\lambda,\mu)$, suppose that we are given an \emph{isomorphism}
$\theta_{\lambda\mu}:\sh{F}_\mu|(U_\lambda\cap U_\mu)\isoto\sh{F}|(U_\lambda\cap U_\mu)$; in
addition, suppose that for each triple $(\lambda,\mu,\nu)$, if we denote by
$\theta_{\lambda\mu}'$, $\theta_{\mu\nu}'$, $\theta_{\lambda\nu}'$ the restrictions of
$\theta_{\lambda\mu}$, $\theta_{\mu\nu}$, $\theta_{\lambda\nu}$ to
$U_\lambda\cap U_\mu\cap U_\nu$, then we have
$\theta_{\lambda\nu}'=\theta_{\lambda\mu}'\circ\theta_{\mu\nu}'$ (\emph{gluing condition} for
the $\theta_{\lambda\mu}$). Then, there exists a sheaf $\sh{F}$ on $X$, with values in $\K$,
and for each $\lambda$ an isomorphism
$\eta_\lambda:\sh{F}|U_\lambda\isoto\sh{F}_\lambda$ such that, for each pair
$(\lambda,\mu)$, if we denote by $\eta_\lambda'$ and $\eta_\mu'$ the restrictions of
$\eta_\lambda$ and $\eta_\mu$ to $U_\lambda\cap U_\mu$, then we have
$\theta_{\lambda\mu}=\eta_\lambda'\circ{\eta_\mu'}^{-1}$; in addition, $\sh{F}$ and the
$\eta_\lambda$ are determined up to unique isomorphism by these conditions. The uniqueness
indeed follows immediately from \sref{env}{3.2.5}. To establish the existence of $\sh{F}$,
denote by $\mathfrak{B}$ the open basis consisting of the open sets contained in at least one
$U_\lambda$, and for each $U\in\mathfrak{B}$, choose (by the Hilbert function $\tau$) one of
the $\sh{F}_\lambda(U)$ for one of the $\lambda$ such that $U\subset U_\lambda$; if we denote
this object by $\sh{F}(U)$, the $\rho_U^V$ for $U\subset V$, $U\in\mathfrak{B}$,
$V\in\mathfrak{B}$ are defined in an evident way (by means of the $\theta_{\lambda\mu}$), and
the transitivity conditions is a consequence of the gluing condition; in addition, the
verification of (F$_0$) is immediate, so the presheaf on $\mathfrak{B}$ thus clearly defines
a sheaf, and we deduce by the general procedure \sref{env}{3.2.1} an (ordinary) sheaf still
denoted $\sh{F}$ and which answers the question. We say that $\sh{F}$ is obtained by
\emph{gluing the $\sh{F}_\lambda$ by means of the $\theta_{\lambda\mu}$} and we usually
indentify the $\sh{F}_\lambda$ and $\sh{F}|U_\lambda$ by means of the $\eta_\lambda$.

It is clear that each sheaf $\sh{F}$ on $X$ with values in $\K$ can be considered as being
obtained by the gluing of the sheaves $\sh{F}_\lambda=\sh{F}|U_\lambda$ (where $(U_\lambda)$
is an arbitrary open cover of $X$), by means of the isomorphisms $\theta_{\lambda\mu}$
reduced to the identity.
\end{env}

\begin{env}{3.3.2}
\label{env-0.3.3.2}
With the same notations, let $\sh{G}_\lambda$ be a second sheaf on $U_\lambda$ (for each
$\lambda\in L$) with values in $\K$, and for each pair $(\lambda,\mu)$ let us be given an
isomorphism
$\omega_{\lambda\mu}:\sh{G}_\mu|(U_\lambda\cap U_\mu)
\isoto\sh{G}_\lambda|(U_\lambda\cap U_\mu)$, these isomorphisms satisfying the
gluing condition. Finally, suppose that we are given for each $\lambda$ a morphism
$u_\lambda:\sh{F}_\lambda\to\sh{G}_\lambda$, and that the diagrams
\[
  \xymatrix{
    \sh{F}_\mu|(U_\lambda\cap U_\mu)\ar[r]^{u_\mu}\ar[d] &
    \sh{G}_\mu|(U_\lambda\cap U_\mu)\ar[d]\\
    \sh{F}_\lambda|(U_\lambda\cap U_\mu)\ar[r]^{u_\lambda} &
    \sh{G}_\lambda|(U_\lambda\cap U_\mu)
  }
  \tag{3.3.2.1}
\]
are commutative. Then, if $\sh{G}$ is obtained by gluing the $\sh{G}_\lambda$ by means of the
$\omega_{\lambda\mu}$, there exists a unique morphism $u:\sh{F}\to\sh{G}$ such that the
diagrams
\oldpage{29}
\[
  \xymatrix{
    \sh{F}|U_\lambda\ar[r]^{u|U_\lambda}\ar[d] &
    \sh{G}|U_\lambda\ar[d]\\
    \sh{F}_\lambda\ar[r]^{u_\lambda} &
    \sh{G}_\lambda
  }
\]
are commutative; this follows immediately from \sref{env}{3.2.3}. The correspondence between
the family $(u_\lambda)$ and $u$ is in a functorial bijection with the subset of
$\Pi_\lambda\Hom(\sh{F}_\lambda,\sh{G}_\lambda)$ satisfying the conditions (3.3.2.1) on
$\Hom(\sh{F},\sh{G})$.
\end{env}

\begin{env}{3.3.3}
\label{env-0.3.3.3}
With the notations of \sref{env}{3.3.1}, let $V$ be an open set of $X$; it is immediate that
the restrictions to $V\cap U_\lambda\cap U_\mu$ of the $\theta_{\lambda\mu}$ satisfy the
gluing condition for the induced sheaves $\sh{F}_\lambda|(V\cap U_\lambda)$ and that the
sheaves on $V$ obtained by gluing the latter identifies canonically with $\sh{F}|V$.
\end{env}

\subsection{Direct images of presheaves}
\label{0-prelim-3.4}

\begin{env}{3.4.1}
\label{env-0.3.4.1}
Let $X$, $Y$ be two topological spaces, $\psi:X\to Y$ a continuous map. Let $\sh{F}$ be a
presheaf on $X$ with values in a category $\K$; for each open $U\subset Y$, let
$\sh{G}(U)=\sh{F}(\psi^{-1}(U))$, and if $U$, $V$ are two open subsets of $Y$ such that
$U\subset V$, let $\rho_U^V$ be the morphism $\sh{F}(\psi^{-1}(V))\to\sh{F}(\psi^{-1}(U))$;
it is immediate that the $\sh{G}(U)$ and the $\rho_U^V$ define a \emph{presheaf} on $Y$ with
values in $\K$, that we call the \emph{direct image of $\sh{F}$ by $\psi$} and we denote it
by $\psi_*(\sh{F})$. If $\sh{F}$ is a sheaf, we immediately verify the axiom (F) for the
presheaf $\sh{G}$, so $\psi_*(\sh{F})$ is a sheaf.
\end{env}

\begin{env}{3.4.2}
\label{env-0.3.4.2}
Let $\sh{F}_1$, $\sh{F}_2$ be two presheaves of $X$ with values in $\K$, and let
$u:\sh{F}_1\to\sh{F}_2$ be a morphism. When $U$ varies over the set of open subsets of $Y$,
the family of morphisms $u_{\psi^{-1}(U)}:\sh{F}_1(\psi^{-1}(U))\to\sh{F}_2(\psi^{-1}(U))$
satisfies the compatibility conditions with the restriction morphisms, and as a result
defines a a morphism $\psi_*(u):\psi_*(\sh{F}_1)\to\psi_*(\sh{F}_2)$. If
$v:\sh{F}_2\to\sh{F}_3$ is a morphism from $\sh{F}_2$ to a third preshead on $X$ with values
in $\K$, we have $\psi_*(v\circ u)=\psi_*(v)\circ\psi_*(u)$; in other words, $\psi_*(\sh{F})$
is a \emph{covariant functor} in $\sh{F}$, from the category of presheaves (resp. sheaves) on
$X$ with values in $\K$, to that of presheaves (resp. sheaves) on $Y$ with values in $\K$.
\end{env}

\begin{env}{3.4.3}
\label{env-0.3.4.3}
Let $Z$ be a third topological space, $\psi':Y\to Z$ a continuous map, and let
$\psi''=\psi'\circ\psi$. It is clear that we have $\psi_*''(\sh{F})=\psi_*'(\psi_*(\sh{F}))$
for each presheaf $\sh{F}$ on $X$ with values in $\K$; in addition, for each morphism
$u:\sh{F}\to\sh{G}$ of such presheaves, we have $\psi_*''(u)=\psi_*'(\psi_*(u))$. In other
words, $\psi_*''$ is the \emph{composition} of the functors $\psi_*'$ and $\psi_*$, and this
can be written as
\[
  (\psi'\circ\psi)_*=\psi_*'\circ\psi_*.
\]

In addition, for each open set $U$ of $Y$, the image under the restriction
$\psi|\psi^{-1}(U)$ of the induced presheaf $\sh{F}|\psi^{-1}(U)$ is none other than the
induced presheaf $\psi_*(\sh{F})|U$.
\end{env}

\begin{env}{3.4.4}
\label{env-0.3.4.4}
Suppose that the category $\K$ admits inductive limits, and let $\sh{F}$ be a presheaf on $X$
with values in $\K$; for all $x\in X$, the morphisms $\Gamma(\psi^{-1}(U),\sh{F})\to\sh{F}_x$
($U$ an open neighborhood of $\psi(x)$ in $Y$) form an inductive limit, which gives by
passing
\oldpage{30}
to the limit a morphism $\psi_x:(\psi_*(\sh{F}))_{\psi(x)}\to\sh{F}_x$ of the stalks; in
general, these morphisms are \emph{neither injective or surjective}. It is functorial;
indeed, if $u:\sh{F}_1\to\sh{F}_2$ is a morphism of presheaves on $X$ with values in $\K$,
the diagram
\[
  \xymatrix{
    (\psi_*(\sh{F}_1))_{\psi(x)}\ar[r]^{\psi_x}\ar[d]_{(\psi_*(u))_{\psi(x)}} &
    (\sh{F}_1)_x\ar[d]^{u_x}\\
    (\psi_*(\sh{F}_2))_{\psi(x)}\ar[r]^{\psi_x} &
    (\sh{F}_2)_x
  }
\]
is commutative. If $Z$ is a third topological space, $\psi':Y\to Z$ a continuous map, and
$\psi''=\psi'\circ\psi$, we have $\psi_x''=\psi_x\circ\psi_{\psi(x)}'$ for $x\in X$.
\end{env}

\begin{env}{3.4.5}
\label{env-0.3.4.5}
Under the hypotheses of \sref{env}{3.4.4}, suppose in addition that $\psi$ is a
\emph{homeomorphism} from $X$ to the subspace $\psi(X)$ of $Y$. Then, for each $x\in X$,
$\psi_x$ is an \emph{isomorphism}. This applies in particular to the canonical injection $j$
of a subset $X$ of $Y$ into $Y$.
\end{env}

\begin{env}{3.4.6}
\label{env-0.3.4.6}
Suppose that $\K$ be the category of groups, or of rings, etc. If $\sh{F}$ is a sheaf on $X$
with a values in $\K$, of support $S$, and if $y\not\in\overline{\psi(S)}$, it follows from
the definition of $\psi_*(\sh{F})$ that $(\psi_*(\sh{F}))_y=\{0\}$, or in other words the
support of $\psi_*(\sh{F})$ is contained in $\overline{\psi(S)}$; but it is not necessarily
contined in $\psi(S)$. Under the same hypotheses, if $j$ is the canonical injection of a
subset $X$ of $Y$ into $Y$, the sheaf $j_*(\sh{F})$ induces $\sh{F}$ on $X$; if moreover
$X$ is \emph{closed} in $Y$, $j_*(\sh{F})$ is the sheaf on $Y$ which induces $\sh{F}$ on $X$
and $0$ on $Y-X$ (G, II, 2.9.2), but it is in general distinct from the latter when we
suppose that $X$ is locally closed but not closed.
\end{env}

\subsection{Inverse images of presheaves}
\label{0-prelim-3.5}

\begin{env}{3.5.1}
\label{env-0.3.5.1}
Under the hypotheses of \sref{env}{3.4.1}, if $\sh{F}$ (resp. $\sh{G}$) is a presheaf on $X$
(resp. $Y$) with values in $\K$, each morphism $u:\sh{G}\to\psi_*(\sh{F})$ of presheaves on
$Y$ is then called a \emph{$\phi$-morphism} from $\sh{G}$ to $\sh{F}$, and we denote it also
by $\sh{G}\to\sh{F}$. We denote also by $\Hom_\phi(\sh{G},\sh{F})$ the set of
$\Hom_Y(\sh{G},\psi_*(\sh{F}))$ the $\psi$-morphisms from $\sh{G}$ to $\sh{F}$. For each
pair $(U,V)$, where $U$ is an open set of $X$, $V$ an open set of $Y$ such that
$\psi(U)\subset V$, we have a morphism $u_{U,V}:\sh{G}(U)\to\sh{F}(U)$ by composing the
restriction morphism $\sh{F}(\psi^{-1}(V))\to\sh{F}(U)$ and the morphism
$u_V:\sh{G}(V)\to\psi_*(\sh{F})(V)=\sh{F}(\psi^{-1}(V))$; it is immediate that these
morphisms renders commutative the diagrams
\[
  \xymatrix{
    \sh{G}(V)\ar[r]^{u_{U,V}}\ar[d] &
    \sh{F}(U)\ar[d]\\
    \sh{G}(V')\ar[r]^{u_{U',V'}} &
    \sh{F}(U')
  }
  \tag{3.5.1.1}
\]
for $U'\subset U$, $V'\subset V$, $\psi(U')\subset V'$. Conversely, the data of a family
$(u_{U,V})$ of morphisms rendering commutative the diagrams (3.5.1.1) define a
$\psi$-morphism $u$, since it suffices to take $u_V=u_{\psi^{-1}(V),V}$.

\oldpage{31}
If the category $\K$ admits (generalized) projective limits, and if $\mathfrak{B}$,
$\mathfrak{B}'$ are the bases of the topologies of $X$ and $Y$ respectively, to define a
$\psi$-morphism $u$ of \emph{sheaves}, we can restrict to giving the $u_{U,V}$ for
$U\in\mathfrak{B}$, $V\in\mathfrak{B}'$, and $\psi(U)\subset V$, satisfying the compatibility
conditions of (3.5.1.1) for $U$, $U'$ in $\mathfrak{B}$ and $V$, $V'$ in $\mathfrak{B}'$; it
indeed suffices to define $u_W$, for each open $W\subset Y$, as the projective limit of the
$u_{U,V}$ for $V\in\mathfrak{B}'$ and $V\subset W$, $U\in\mathfrak{B}$ and
$\psi(U)\subset V$.

When the category $\K$ admits inductive limits, we have, for each $x\in X$, a morphism
$\sh{G}(V)\to\sh{F}(\psi^{-1}(V))\to\sh{F}_x$, for each open neighborhood $V$ of $\psi(x)$ in
$Y$, and these morphisms form an inductive system which gives by passing to the limit a
morphism $\sh{G}_{\psi(x)}\to\sh{F}_x$.
\end{env}

\begin{env}{3.5.2}
\label{env-0.3.5.2}
Under the hypotheses of \sref{env}{3.4.3}, let $\sh{F}$, $\sh{G}$, $\sh{H}$ be presheaves
with values in $\K$ on $X$, $Y$, $Z$ respectively, and let $u:\sh{G}\to\psi_*(\sh{F})$,
$v:\sh{H}\to\psi_*'(\sh{G})$ a $\psi$-morphism and a $\psi'$-morphism respectively. We obtain
a $\psi''$-morphism
$w:\sh{H}\xrightarrow{v}\psi_*'(\sh{G})\xrightarrow{\psi_*'(u)}
\psi_*'(\psi_*(\sh{F}))=\psi_*''(\sh{F})$, that we call, by definition, the
\emph{composition} of $u$ and $v$. We can therefore consider the pairs $(X,\sh{F})$
consisting of a topological space $X$ and a presheaf $\sh{F}$ on $X$ (with values in $\K$) as
forming a \emph{category}, the morphisms being the pairs
$(\psi,\theta):(X,\sh{F})\to(Y,\sh{G})$ consisting of a continuous map $\psi:X\to Y$ and
of a $\psi$-morphism $\theta:\sh{G}\to\sh{F}$.
\end{env}

\begin{env}{3.5.3}
\label{env-0.3.5.3}
Let $\psi:X\to Y$ be a continuous map, $\sh{G}$ a \emph{presheaf} on $Y$ with values in $\K$.
We call the \emph{inverse image of $\sh{G}$ under $\psi$} the pair $(\sh{G}',\rho)$, where
$\sh{G}'$ is a \emph{sheaf} on $X$ with values in $\K$, and $\rho:\sh{G}\to\sh{G}'$ a
$\psi$-morphism (in other words a homomorphism $\sh{G}\to\psi_*(\sh{G}')$) such that, for
each \emph{sheaf} $\sh{F}$ on $X$ with values in $\K$, the map
\[
  \Hom_X(\sh{G}',\sh{F})\longrightarrow\Hom_\psi(\sh{G},\sh{F})
  \longrightarrow\Hom_Y(\sh{G},\psi_*(\sh{F}))
  \tag{3.5.3.1}
\]
sending $v$ to $\psi_*(v)\circ\rho$, is a \emph{bijection}; this map, is functorial in
$\sh{F}$, defines then an isomorphism of functors in $\sh{F}$. The pair $(\sh{G}',\rho)$
is the solution of a universal problem, and we say it is \emph{determined up to unique
isomorphism} when it exists. We then write $\sh{G}'=\psi^*(\sh{G})$, $\rho=\rho_\sh{G}$, and
by abuse of language, we say that $\psi^*(\sh{G})$ is \emph{the inverse image sheaf} of
$\sh{G}$ under $\psi$, and we agree that $\psi^*(\sh{G})$ is considered as equipped with a
\emph{canonical $\psi$-morphism $\rho_\sh{G}:\sh{G}\to\psi^*(\sh{G})$}, that is to say the
\emph{canonical homomorphism} of presheaves on $Y$:
\[
  \rho_\sh{G}:\sh{G}\longrightarrow\psi_*(\psi^*(\sh{G})).
  \tag{3.5.3.2}
\]

For each homomorphism $v:\psi^*(\sh{G})\to\sh{F}$ (where $\sh{F}$ is a sheaf on $X$ with
values in $\K$), we put $v^\flat=\psi_*(v)\circ\rho_\sh{G}:\sh{G}\to\psi_*(\sh{F})$. By
definition, \emph{each} morphism of presheaves $u:\sh{G}\to\psi_*(\sh{F})$ is of the form
$v^\flat$ for a unique $v$, which we will denote $u^\sharp$. In other words, each morphism
$u:\sh{G}\to\psi_*(\sh{F})$ of presheaves factorizes in a unique way as
\[
  u:\sh{G}\xrightarrow{\rho_\sh{G}}\psi_*(\psi^*(\sh{G}))
  \xrightarrow{\psi_*(u^\sharp)}\psi_*(\sh{F}).
  \tag{3.5.3.3}
\]
\end{env}

\begin{env}{3.5.4}
\label{env-0.3.5.4}
\oldpage{32}
Suppose now that the category $\K$ be such\footnote{In the book mentioned in the
introduction, we will give very general conditions on the category $\K$ ensuring the
existence of inverse images of presheaves with values in $\K$.} that \emph{each} presheaf
$\sh{F}$ on $Y$ with values in $\K$ admits an inverse image under $\psi$, and we denote it
by $\psi^*(\sh{G})$.

We will see that we can define $\psi^*(\sh{G})$ as a \emph{covariant functor} in $\sh{G}$,
from the category of presheaves on $Y$ with values in $\K$, to that of sheaves on $X$ with
values in $\K$, in such a way that the isomorphism $v\mapsto v^\flat$ is an \emph{isomorphism
of bifunctors}
\[
  \Hom_X(\psi^*(\sh{G}),\sh{F})\isoto\Hom_Y(\sh{G},\psi_*(\sh{F}))
  \tag{3.5.4.1}
\]
in $\sh{G}$ and $\sh{F}$.

Indeed, for each morphism $w:\sh{G}_1\to\sh{G}_2$ of presheaves on $Y$ with values in $\K$,
consider the composite morphism
$\sh{G}_1\xrightarrow{w}\sh{G}_2\xrightarrow{\rho_{\sh{G}_2}}\psi_*(\psi^*(\sh{G}_2))$; to it
corresponds a morphism $(\rho_{\sh{G}_2}\circ w)^\sharp:\psi^*(\sh{G}_1)\to\psi^*(\sh{G}_2)$,
that we denote by $\psi^*(w)$. We therefore have, according to (3.5.3.3),
\[
  \psi_*(\psi^*(w))\circ\rho_{\sh{G}_1}=\rho_{\sh{G}_2}\circ w.
  \tag{3.5.4.2}
\]
For each morphism $u:\sh{G}_2\to\psi_*(\sh{F})$, where $\sh{F}$ is a sheaf on $X$ with values
in $\K$, we have, according to (3.5.3.3), (3.5.4.2), and the definition of $u^\flat$
\[
  (u^\sharp\circ\psi^*(w))^\flat=\psi_*(u^\sharp)\circ\psi_*(\psi^*(w))\circ\rho_{\sh{G}_1}
  =\psi_*(u^\sharp)\circ\rho_{\sh{G}_2}\circ w=u\circ w
\]
where again
\[
  (u\circ w)^\sharp=u^\sharp\circ\psi^*(w).
  \tag{3.5.4.3}
\]

If we take in particular for $u$ a morphism
$\sh{G}_2\xrightarrow{w'}\sh{G}_3\xrightarrow{\rho_{\sh{G}_3}}\psi_*(\psi^*(\sh{G}_3))$, it
becomes
$\psi^*(w'\circ w)=(\rho_{\sh{G}_3}\circ w'\circ w)^\sharp
=(\rho_{\sh{G}_3}\circ w')^\sharp\circ\psi^*(w)=\psi^*(w')\circ\psi^*(w)$, hence our
assertion.

FInally, for each sheaf $\sh{F}$ on $X$ with values in $\K$, let $i_\sh{F}$ be the identity
morphism of $\psi_*(\sh{F})$ and denote by
\[
  \sigma_\sh{F}:\psi^*(\psi_*(\sh{F})\longrightarrow\sh{F}
\]
the morphism $(i_\sh{F})^\sharp$; the formula (3.5.4.3) gives in particular the factorization
\[
  u^\sharp:\psi^*(\sh{G})\xrightarrow{\psi^*(u)}\psi^*(\psi_*(\sh{F}))
  \xrightarrow{\sigma_\sh{F}}\sh{F}
  \tag{3.5.4.4}
\]
for each morphism $u:\sh{G}\to\psi_*(\sh{F})$. We say that the morphism $\sigma_\sh{F}$ is
\emph{canonical}.
\end{env}

\begin{env}{3.5.5}
\label{env-0.3.5.5}
Let $\psi':Y\to Z$ be a continuous map, and suppose that each presheaf $\sh{H}$ on $Z$ with
values in $\K$ admits an inverse image ${\psi'}^*(\sh{H})$ under $\psi'$. Then (with the
hypotheses of \sref{env}{3.5.4}) each presheaf $\sh{H}$ on $Z$ with values in $\K$ admits
an inverse image under $\psi''=\psi'\circ\psi$ and we have a canonical functorial isomorphism
\[
  {\psi''}^*(\sh{H})\isoto\psi^*({\psi'}^*(\sh{H})).
  \tag{3.5.5.1}
\]
\oldpage{33}
This indeed follows immediately from the definitions, taking into account that
$\psi_*''=\psi_*'\circ\psi_*$. In addition, if $u:\sh{G}\to\psi_*(\sh{F})$ is a
$\psi$-morphism, $v:\sh{H}\to\psi_*'(\sh{G})$ a $\psi'$-morphism, and $w=\psi_*'(u)\circ v$
their composition \sref{env}{3.5.2}, we have immediately that $w^\sharp$ is the composite
morphism
\[
  w^\sharp:\psi^*({\psi'}^*(\sh{H}))\xrightarrow{\psi^*(v^\sharp)}\psi^*(\sh{G})
  \xrightarrow{u^\sharp}\sh{F}.
\]
\end{env}

\begin{env}{3.5.6}
\label{env-0.3.5.6}
We take in particular for $\psi$ the identity map $1_X:X\to X$. Then if the inverse image
under $\psi$ of a presheaf $\sh{F}$ on $X$ with values in $\K$ exists, we say that this
inverse image is the \emph{sheaf associated to the presheaf $\sh{F}$}. Each morphism
$u:\sh{F}\to\sh{F}'$ from $\sh{F}$ to a \emph{sheaf} $\sh{F}'$ with values in $\K$ factorizes
in a unique way as
$\sh{F}\xrightarrow{\rho_\sh{F}}1_X^*(\sh{F})\xrightarrow{u^\sharp}\sh{F}'$.
\end{env}

\subsection{Simple sheaves and locally simple sheaves}
\label{0-prelim-3.6}

\begin{env}{3.6.1}
\label{env-0.3.6.1}
We say that a \emph{presheaf} $\sh{F}$ on $X$, with values in $\K$, is \emph{constant} if
the canonical morphisms $\sh{F}(X)\to\sh{F}(U)$ are \emph{isomorphisms} for each nonempty
open $U\subset X$; we note that $\sh{F}$ is not necessarily a sheaf. We say that a
\emph{sheaf} is \emph{simple} if it is the associated sheaf \sref{env}{3.5.6} of a constant
presheaf. We say that a sheaf $\sh{F}$ is \emph{locally simple} if each $x\in X$ admits an
open neighborhood $U$ such that $\sh{F}|U$ is simple.
\end{env}

\begin{env}{3.6.2}
\label{env-0.3.6.2}
Suppose that $X$ is \emph{irreducible} \sref{env}{2.1.1}; then the following properties are
equivalent:
\begin{enumerate}[label=(\alph*)]
  \item \emph{$\sh{F}$ is a constant presheaf on $X$};
  \item \emph{$\sh{F}$ is a simple sheaf on $X$};
  \item \emph{$\sh{F}$ is a locally simple sheaf on $X$}.
\end{enumerate}
\end{env}

Indeed, let $\sh{F}$ be a constant presheaf on $X$; if $U$, $V$ are two nonempty open sets in
$X$, $U\cap V$ is nonempty, so $\sh{F}(X)\to\sh{F}(U)\to\sh{F}(U\cap V)$ and
$\sh{F}(X)\to\sh{F}(U)$ are isomorphisms, and similarly both
$\sh{F}(U)\to\sh{F}(U\cap V)$ and $\sh{F}(V)\to\sh{F}(U\cap V)$ are isomorphisms. We
therefore conclude immediatelt that the axiom (F) of \sref{env}{3.1.2} is clearly satisfied,
$\sh{F}$ is isomorphic to its associated sheaf, and as a result (a) implies (b).

Now let $(U_\alpha)$ be an open cover of $X$ by nonempty open sets and let $\sh{F}$ be a
sheaf on $X$ such that $\sh{F}|U_\alpha$ is simple for each $\alpha$; as $U_\alpha$ is
irreducible, $\sh{F}|U_\alpha$ is a constant presheaf according to the above. As
$U_\alpha\cap U_\beta$ is not empty, $\sh{F}(U_\alpha)\to\sh{F}(U_\alpha\cap U_\beta)$ and
$\sh{F}(U_\beta)\to\sh{F}(U_\alpha\cap U_\beta)$ are isomorphisms, hence we have a canonical
isomorphism $\theta_{\alpha\beta}:\sh{F}(U_\alpha)\to\sh{F}(U_\beta)$ for each pair of
indices. But them if we apply the condition (F) for $U=X$, we see that for each index
$\alpha_0$, $\sh{F}(U_{\alpha_0})$ and the $\theta_{\alpha_0\alpha}$ are solutions to the
universal problem, which (according to the uniqueness) implies that
$\sh{F}(X)\to\sh{F}(U_{\alpha_0})$ is an isomorphism, and hence proves that (c) implies (a).

\subsection{Inverse images of presheaves of groups or rings}
\label{0-prelim-3.7}

\begin{env}{3.7.1}
\label{env-0.3.7.1}
\oldpage{34}
We will show that when we take $\K$ to be the category of sets, the inverse image under
$\psi$ for each presheaf $\sh{G}$ with values in $\K$ \emph{always exists} (the notations
and hypotheses on $X$, $Y$, $\psi$ being that of \sref{env}{3.5.3}). Indeed, for each open
$U\subset X$, define $\sh{G}'(U)$ as follows: an element $s'$ of $\sh{G}'(U)$ is a family
$(s_x')_{x\in U}$, where $s_x'\in\sh{G}_{\psi(x)}$ for each $x\in U$, and where, for each
$x\in U$, the following condition is satisfied: there exists an open neighborhood $V$ of
$\psi(x)$ in $Y$, a neighborhood $W\subset\psi^{-1}(V)\cap U$ of $x$, and an element
$s\in\sh{G}(V)$ such that $s_z'=s_{\psi(x)}$ for all $z\in W$. We verify immediately that
$U\mapsto\sh{G}'(U)$ clearly satisfies the axioms of a \emph{sheaf}.

Now let $\sh{F}$ be a sheaf of sets on $X$, and let $u:\sh{G}\to\psi_*(\sh{F})$,
$v:\sh{G}'\to\sh{F}$ be morphisms. We define $u^\sharp$ and $v^\flat$ in the following
manner: if $s'$ is a section of $\sh{G}'$ over a neighborhood $U$ of $x\in X$ and if $V$ is
an open neighborhood of $\psi(x)$ and $s\in\sh{G}(V)$ such that we have $s_z'=s_{\psi(x)}$
for $z$ in a neighborhood of $x$ contained in $\psi^{-1}(V)\cap U$, we take
$u_x^\sharp(s_x')=u_{\psi(x)}(s_{\psi(x)})$. Similarly, if $s\in\sh{G}(V)$ ($V$ open in $Y$),
$v^\flat(s)$ is the section of $\sh{F}$ over $\psi^{-1}(V)$, the image under $v$ of the
sectin $s'$ of $\sh{G}'$ such that $s_x'=s_{\psi(x)}$ for all $x\in\psi^{-1}(V)$. In
addition, the canonical homomorphism \sref{env}{3.5.3} $\rho:\sh{G}\to\psi_*(\psi^*(\sh{G}))$
is defined in the following manner: for each open $V\subset Y$ and each section
$s\in\Gamma(V,\sh{G})$, $\rho(s)$ is the section $(s_{\psi(x)})_{x\in\psi^{-1}(V)}$ of
$\psi^*(\sh{G})$ over $\psi^{-1}(V)$. The verification of the relations $(u^\sharp)^\flat=u$,
$(v^\flat)^\sharp=v$, and $v^\flat=\psi_*(v)\circ\rho$ is immediate, and proves our
assertion.

We check that, if $w:\sh{G}_1\to\sh{G}_2$ is a homomorphism of sheaves of sets on $Y$,
$\psi^*(w)$ is expressed in the following manner: if $s'=(s_x')_{x\in U}$ is a section of
$\psi^*(\sh{G}_1)$ over an open set $U$ of $X$, $(\psi^*(w))(s')$ is the family
$(w_{\psi(x)}(s_x'))_{x\in U}$. Finally, it is immediate that for each open set $V$ of $Y$,
the inverse image of $\sh{G}|V$ under the restriction of $\psi$ to $\psi^{-1}(V)$ is
identical to the induced sheaf $\psi^*(\sh{G})|\psi^{-1}(V)$.

When $\psi$ is the identity $1_X$, we recover the definition of a sheaf of sets associated
to a presheaf (G, II, 1.2). The above considerations apply without change when $\K$ is the
category of groups or of rings (not necessarily commutative).

When $X$ is any subset of a topological space $Y$, and $j$ the canonical injection $X\to Y$,
for each sheaf $\sh{G}$ on $Y$ with values in a category $\K$, we call the \emph{induced}
sheaf of $X$ by $\sh{G}$ the inverse image $j^*(\sh{G})$ (whenever it exists); for the
sheaves of sets (or of groups, or of rings) we recover the usual definition (G, II, 1.5).
\end{env}

\begin{env}{3.7.2}
\label{env-0.3.7.2}
Keeping the notations and hypotheses of \sref{env}{3.5.3}, suppose that $\sh{G}$ is a
\emph{sheaf} of groups (resp. of rings) on $Y$. The definition of sections of
$\psi^*(\sh{G})$ \sref{env}{3.7.1} shows (considering \sref{env}{3.4.4}) that the
homomorphism of stalks $\psi_x\circ\rho_{\psi(x)}:\sh{G}_{\psi(x)}\to(\psi^*(\sh{G}))_x$
is a \emph{functorial isomorphism in $\sh{G}$}, that identifies the two stalks; with this
identification, $u_x^\sharp$ is identical to the homomorphism defined in \sref{env}{3.5.1},
and in particular, we have $\Supp(\psi^*(\sh{G}))=\psi^{-1}(\Supp(\sh{G}))$.

An immediate consequence of this result is that \emph{the functor $\psi^*(\sh{G})$ is exact
in $\sh{G}$} in the abelian category of sheaves of abelian groups.
\end{env}

\subsection{Sheaves on pseudo-discrete spaces}
\label{0-prelim-3.8}

\begin{env}{3.8.1}
\label{env-0.3.8.1}
\oldpage{35}
Let $X$ be a topological space whose topology admits a basis $\mathfrak{B}$ consisting of
open \emph{quasi-compact} subsets. Let $\sh{F}$ be a \emph{sheaf of sets} on $X$; if we equip
each of the $\sh{F}(U)$ with the \emph{discrete} topology, $U\mapsto\sh{F}(U)$ is a
\emph{presheaf of topological spaces}. We will see that there exists a \emph{sheaf of
topological spaces $\sh{F}'$ associated to $\sh{F}$} \sref{env}{3.5.6} such that
$\Gamma(U,\sh{F}')$ is the discrete space $\sh{F}(U)$ for each open \emph{quasi-compact}
subsets $U$. It will suffice to show that the presheaf $U\mapsto\sh{F}(U)$ of discrete
topological spaces \emph{on} $\mathfrak{B}$ satisfy the condition (F$_0$) of
\sref{env}{3.2.2}, and more generally that if $U$ is an open quasi-compact subset and if
$(U_\alpha)$ is a cover of $U$ by sets of $\mathfrak{B}$, then the least fine topology
$\mathscr{T}$ on $\Gamma(U,\sh{F})$ renders continuous the maps
$\Gamma(U,\sh{F})\to\Gamma(U_\alpha,\sh{F})$ is the \emph{discrete} topology. There exists
a finite number of indices $\alpha_i$ such that $U=\bigcup_i U_{\alpha_i}$.
Let $s\in\Gamma(U,\sh{F})$ and let $s_i$ be its image in $\Gamma(U_{\alpha_i},\sh{F})$;
the intersection of the inverse images of the sets $\{s_i\}$ is by definition a neighborhood
of $s$ for $\mathscr{T}$; but since $\sh{F}$ is a sheaf of sets and the $U_{\alpha_i}$ cover
$U$, this intersection is reduced to $s$, hence our assertion.

We note that if $U$ is an open non quasi-compact subset of $X$, the topological space
$\Gamma(U,\sh{F}')$ still has $\Gamma(U,\sh{F})$ as the underlying set, but the topology is
not discrete in general: it is the least fine rendering commutative the maps
$\Gamma(U,\sh{F})\to\Gamma(V,\sh{F})$, for $V\in\mathfrak{B}$ and $V\subset U$ (the
$\Gamma(V,\sh{F})$ being discrete).

The above considerations apply without modification to sheaves of groups or of rings (not
necessarily commutative), and associate to them sheaves of \emph{topological
groups} or \emph{topological rings}, respectively. To summarize, we say that the sheaf
$\sh{F}'$ is the \emph{pseudo-discrete} sheaf of \emph{spaces} (resp. \emph{groups},
\emph{rings}) associated to a sheaf of sets (resp. groups, rings) $\sh{F}$.
\end{env}

\begin{env}{3.8.2}
\label{env-0.3.8.2}
Let $\sh{F}$, $\sh{G}$ be two sheaves of sets (resp. groups, rings) on $X$,
$u:\sh{F}\to\sh{G}$ a homomorphism. Then $u$ is thus a \emph{continuous} homomorphism
$\sh{F}'\to\sh{G}'$, if we denote by $\sh{F}'$ and $\sh{G}'$ the pseudo-discrete sheaves
associated to $\sh{F}$ and $\sh{G}$; this follows in effect from \sref{env}{3.2.5}.
\end{env}

\begin{env}{3.8.3}
\label{env-0.3.8.3}
Let $\sh{F}$ be a sheaf of sets, $\sh{H}$ a subsheaf of $\sh{F}$, $\sh{F}'$ and $\sh{H}'$ the
pseudo-discrete sheaves associated to $\sh{F}$ and $\sh{H}$ respectively. Then, for each open
$U\subset X$, $\Gamma(U,\sh{H}')$ is \emph{closed} in $\Gamma(U,\sh{F}')$: indeed, it is the
intersection of the inverse images of the $\Gamma(V,\sh{H})$ (for $V\in\mathfrak{B}$,
$V\subset U$) under the continuous maps $\Gamma(U,\sh{F})\to\Gamma(V,\sh{F})$, and
$\Gamma(V,\sh{H})$ is closed in the discrete space $\Gamma(V,\sh{F})$.
\end{env}

\section{Ringed spaces}
\label{0-prelim-4}

\subsection{Ringed spaces, sheaves of $\sh{A}$-modules, $\sh{A}$-algebras}
\label{0-prelim-4.1}

\begin{env}{4.1.1}
\label{env-0.4.1.1}
A \emph{ringed space} (resp. topologically ringed space) is a couple $(X,\sh{A})$
consisting of a topological space $X$ and a sheaf of rings (not necessarily commutative)
(resp. of a sheaf of topological rings) $\sh{A}$ on $X$; we say that $X$ is the
\emph{underlying} topological space of the ringed space $(X,\sh{A})$, and $\sh{A}$
the \emph{structure sheaf}. The latter is denoted $\OO_X$, and its stalk at a point
$x\in X$ is denotes $\OO_{X,x}$ or simply $\OO_x$ when there is no chance of confusion.

We denote by $1$ or $e$ the \emph{unit section} of $\OO_X$ over $X$ (the unit element
of $\Gamma(X,\OO_X)$).

As in this treatise we will have to consider in particular sheaves of \emph{commutative}
rings, it will be understood, when we speak of a ringed space $(X,\sh{A})$ without
specification, that $\sh{A}$ is a sheaf of commutative rings.

The ringed spaces with with not necessarily commutative structure sheaves
(resp. the topologically ringed spaces) form a \emph{category}, where we define
a \emph{morphism} $(X,\sh{A})\to(Y,\sh{B})$ as a couple $(\psi,\theta)=\Psi$
consisting of a continuous map $\psi:X\to Y$ and a \emph{$\psi$-morphism}
$\theta:\sh{G}\to\sh{F}$ (3.5.1) of sheaves of rings (resp. of sheaves of
topological rings); the \emph{composition} of a second morphism
$\Psi'=(\psi',\theta'):(Y,\sh{B})\to(Z,\sh{C})$ and of $\Psi$, denoted
$\Psi''=\Psi'\circ\Psi$, is the morphism $(\psi'',\theta'')$ where $\psi''=\psi'\circ\psi$,
and $\theta''$ is the composition of $\theta$ and $\theta'$ (equal to
$\psi_*'(\theta)\circ\theta'$, cf. \sref{env}{3.5.2}). For ringed spaces, remember that we
then have ${\theta''}^\sharp=\theta^\sharp\circ\psi^*({\theta'}^\sharp)$ \sref{env}{3.5.5};
therefore if ${\theta'}^\sharp$ and $\theta^\sharp$ are \emph{injective} (resp.
\emph{surjective}), the same is true of ${\theta''}^\sharp$, taking into account that
$\psi_x\circ\rho_{\psi(x)}$ is an isomorphism for all $x\in X$ \sref{env}{3.7.2}. We verify
immediately, thanks to the above, that when $\psi$ is an \emph{injective} continuous map and
$\theta^\sharp$ is a \emph{surjective} homomophism of sheaves of rings, the morphism
$(\psi,\theta)$ is a \emph{momomorphism} (T, 1.1) in the category of ringed spaces.

By abuse of language, we will often replace $\psi$ by $\Psi$ in notation, for
example in writing $\Psi^{-1}(U)$ in place of $\psi^{-1}(U)$ for a subset $U$ of $Y$,
when the is no risk of confusion.
\end{env}

\begin{env}{4.1.2}
\label{env-0.4.1.2}
For each subset $M$ of $X$, the pair $(M,\sh{A}|M)$ is evidently a ringed space, said
to be \emph{induced} on $M$ by the ringed space $(X,\sh{A})$ (and is still called
the \emph{restriction} of $(X,\sh{A})$ to $M$). If $j$ is the canonical injection
$M\to X$ and $\omega$ is the identity map of $\sh{A}|M$, $(j,\omega^\flat)$ is a
monomorphism $(M,\sh{A}|M)\to(X,\sh{A})$ of ringed spaces, called the
\emph{canonical injection}. The composition of a morphism
$\Psi:(X,\sh{A})\to(Y,\sh{B})$ and this injection is called the \emph{restriction}
of $\Psi$ to $M$.
\end{env}

\begin{env}{4.1.3}
\label{env-0.4.1.3}
We will not revisit the defintions of \emph{$\sh{A}$-modules} or
\emph{algebraic sheaves} on a ringed space $(X,\sh{A})$ (G, II, 2.2);
when $\sh{A}$ is a sheaf of not necessarily commutative rings, by $\sh{A}$-module
it will always mean ``left $\sh{A}$-module'' unless expressly stated otherwise. The
$\sh{A}$-submodules of $\sh{A}$ will be called \emph{sheaves of ideals} (left,
right, or two-sided) in $\sh{A}$ or \emph{$\sh{A}$-ideals}.

When $\sh{A}$ is a sheaf of commutative rings, and in the definition of
$\sh{A}$-modules, we replace everywhere the \emph{module} structure by that of
an \emph{algebra}, we obtain the definition of an \emph{$\sh{A}$-algebra} on $X$.
It is the same to say that an $\sh{A}$-algebra (not necessarily commutative) is
a $\sh{A}$-module $\sh{C}$, given with a homomorphism of $\sh{A}$-modules
$\vphi:\sh{C}\otimes_\sh{A}\sh{C}\to\sh{C}$ and a section $e$ over $X$,
such that: 1\textsuperscript{st} the diagram
\[
  \xymatrix{
    \sh{C}\otimes_\sh{A}\sh{C}\otimes_\sh{A}\sh{C}
    \ar[r]^{\vphi\otimes 1}\ar[d]_{1\otimes\vphi} &
    \sh{C}\otimes_\sh{A}\sh{C}\ar[d]^\vphi\\
    \sh{C}\otimes_\sh{A}\sh{C}\ar[r]^\vphi & \sh{C}
  }
\]
is commutative; 2\textsuperscript{nd} for each open $U\subset X$ and each section
$s\in\Gamma(U,\sh{C})$, we have $\vphi((e|U)\otimes s)=\vphi(s\otimes(e|U))=s$.
We say that $\sh{C}$ is a commutative $\sh{A}$-algebra if the diagram
\[
  \xymatrix{
    \sh{C}\otimes_\sh{A}\sh{C}\ar[rr]^\sigma\ar[rd]_\vphi
    & & \sh{C}\otimes_\sh{A}\sh{C}\ar[ld]^\vphi\\
    & \sh{C}
  }
\]
is commutative, $\sigma$ denoting the canonical symmetry (twist) map of the tensor product
$\sh{C}\otimes_\sh{A}\sh{C}$.

The homomorphisms of $\sh{A}$-algebras are also defined as the homomorphisms of
$\sh{A}$-modules in (G, II, 2.2), but naturally no longer form an abelian group.

If $\sh{M}$ is an $\sh{A}$-submodule of an $\sh{A}$-algebra $\sh{C}$, the
\emph{$\sh{A}$-subalgebra of $\sh{C}$ generated by $\sh{M}$} is the sum of the images of the
homomorphisms $\bigotimes^n\sh{M}\to\sh{C}$ (for each $n\geqslant 0$). This is also the sheaf
associated to the presheaf $U\mapsto\sh{B}(U)$ of algebras, $\sh{B}(U)$ being the subalgebra
of $\Gamma(U,\sh{C})$ generated by the submodule $\Gamma(U,\sh{M})$.
\end{env}

\begin{env}{4.1.4}
\label{env-0.4.1.4}
We say that a sheaf of rings $\sh{A}$ on a topological space $X$ is \emph{reduced at a point
$x$ in $X$} if the stalk $\sh{A}_x$ is a \emph{reduced} ring \sref{env}{1.1.1}; we say that
$\sh{A}$ is \emph{reduced} if it is reduced at all points of $X$. Recall that a ring $A$ is
called \emph{regular} if each of the local rings $A_\mathfrak{p}$ (where $\mathfrak{p}$ runs
through the set of prime ideals of $A$) is a regular local ring; we will say that a sheaf of
rings $\sh{A}$ on $X$ is \emph{regular at a point $x$} (resp. \emph{regular}) if the stalk
$\sh{A}_x$ is a regular ring (resp. if $\sh{A}$ is regular at each point). Finally, we will
say that a sheaf of rings $\sh{A}$ on $X$ is \emph{normal at a point $x$} (resp.
\emph{normal}) if the stalk $\sh{A}_x$ is an \emph{integral and integrally closed} ring
(resp. if $\sh{A}$ is normal at each point). We will say that a ringed space $(X,\sh{A})$ has
any of these preceeding properties if the sheaf of rings $\sh{A}$ has that property.

A \emph{graded} sheaf of rings $\sh{A}$ is by definition a sheaf of rings that is the direct
sum (G, II, 2,7) of a family $(\sh{A}_n)_{n\in\bb{Z}}$ of sheaves of abelian groups with the
conditions $\sh{A}_m\sh{A}_n\subset\sh{A}_{m+n}$; a \emph{graded $\sh{A}$-module} is an
$\sh{A}$-module $\sh{F}$ that is the direct sum of a family $(\sh{F}_n)_{n\in\bb{Z}}$ of
sheaves of abelian groups, satisfying the conditions $\sh{A}_m\sh{F}_n\subset\sh{F}_{m+n}$.
It is equivalent to say that $(\sh{A}_m)_x(\sh{A}_n)_x\subset(\sh{A}_{m+n})_x$ (resp.
$(\sh{A}_m)_x(\sh{F}_n)_x\subset(\sh{F}_{m+n})_x$) for each point $x$.
\end{env}

\begin{env}{4.1.5}
\label{env-0.4.1.5}
Given a ringed space $(X,\sh{A})$ (not necessarily commutative), we will not recall here the
definitions of the bifunctors $\sh{F}\otimes_\sh{A}\sh{G}$,
$\shHom_\sh{A}(\sh{F},\sh{F})$, and $\Hom_\sh{A}(\sh{F},\sh{G})$ (G, II, 2.8 and 2.2) in
the categories of left or right (depending on the case) $\sh{A}$-modules, with values in the
category of sheaves of abelian groups (or more generally of $\sh{C}$-modules, if $\sh{C}$ is
the center of $\sh{A}$). The stalk $(\sh{F}\otimes_\sh{A}\sh{G})_x$ for each point $x\in X$
identifies canonically with $\sh{F}_x\otimes_{\sh{A}_x}\sh{G}_x$ and we define a canonical
and functorial homomorphism
$(\shHom_\sh{A}(\sh{F},\sh{G}))_x\to\Hom_{\sh{A}_x}(\sh{F}_x,\sh{G}_x)$ which is in general
not injective or surjective. The bifunctors considered above are additive and in particular,
commute with finite direct limits; $\sh{F}\otimes_\sh{A}\sh{G}$ is right exact in $\sh{F}$
and in $\sh{G}$, commutes with inductive limits, and $\sh{A}\otimes_\sh{A}\sh{G}$ (resp.
$\sh{F}\otimes_\sh{A}\sh{A}$) identifies canonically with $\sh{G}$ (resp. $\sh{F}$). The
functors $\shHom_\sh{A}(\sh{F},\sh{G})$ and $\Hom_\sh{A}(\sh{F},\sh{G})$ are \emph{left
exact} in $\sh{F}$ and $\sh{G}$; more precisely, if we have an exact sequence of the form
$0\to\sh{G}'\to\sh{G}\to\sh{G}''$, the sequence
\[
  0\longrightarrow\shHom_\sh{A}(\sh{F},\sh{G}')\longrightarrow
  \shHom_\sh{A}(\sh{F},\sh{G})\longrightarrow\shHom_\sh{A}(\sh{F},\sh{G}'')
\]
is exact, and if we have an exact sequence of the form $\sh{F}'\to\sh{F}\to\sh{F}''\to 0$,
the sequence
\[
  0\longrightarrow\shHom_\sh{A}(\sh{F}'',\sh{G})\longrightarrow
  \shHom_\sh{A}(\sh{F},\sh{G})\longrightarrow\shHom_\sh{A}(\sh{F}',\sh{G})
\]
is exact, with the analagous properties for the functor $\Hom$. In addiiton,
$\shHom_\sh{A}(\sh{A},\sh{G})$ identifies canonically with $\sh{G}$; finally, for each open
$U\subset X$, we have
\[
  \Gamma(U,\shHom_\sh{A}(\sh{F},\sh{G})=\Hom_{\sh{A}|U}(\sh{F}|U,\sh{G}|U).
\]

For each left (resp. right) $\sh{A}$-module, we define the \emph{dual} of $\sh{F}$ and
denote it by $\dual{\sh{F}}$ the right (resp. left) $\sh{A}$-module
$\shHom_\sh{A}(\sh{F},\sh{A})$.

Finally, if $\sh{A}$ is a sheaf of commutative rings, $\sh{F}$ an $\sh{A}$-module,
$U\mapsto\wedge^p\Gamma(U,\sh{F})$ is a presheaf whose associated sheaf is an $\sh{A}$-module
denoted $\wedge^p\sh{F}$ and is called the \emph{$p$-th exterior power of $\sh{F}$}; we
verify easily that the canonical map of the presheaf $U\mapsto\wedge^p\Gamma(U,\sh{F})$ to
the associated sheaf $\wedge^p\sh{F}$ is \emph{injective}, and for each $x\in X$,
$(\wedge^p\sh{F})_x=\wedge^p(\sh{F}_x)$. It is clear that $\wedge^p\sh{F}$ is a covariant
functor in $\sh{F}$.
\end{env}

\begin{env}{4.1.6}
\label{env-0.4.1.6}
Suppose that $\sh{A}$ is a sheaf of non necessarily commutative rings, $\sh{J}$ a left sheaf
of ideals of $\sh{A}$, $\sh{F}$ an left $\sh{A}$-module; we then denote by $\sh{J}\sh{F}$ the
$\sh{A}$-submodule of $\sh{F}$, the image of $\sh{J}\otimes_\bb{Z}\sh{F}$ (where $\bb{Z}$ is
the sheaf associated to the constant presheaf $U\mapsto\bb{Z}$) under the canonical map
$\sh{J}\otimes_\bb{Z}\sh{F}\to\sh{F}$; it is clear that for each $x\in X$, we have
$(\sh{J}\sh{F})_x=\sh{J}_x\sh{F}_x$. When $\sh{A}$ is commutative, $\sh{J}\sh{F}$ is also
the canonical image of $\sh{J}\otimes_\sh{A}\sh{F}\to\sh{F}$. It is immediate that
$\sh{J}\sh{F}$ is also the $\sh{A}$-module associated to the presheaf
$U\mapsto\Gamma(U,\sh{J})\Gamma(U,\sh{F})$. If $\sh{J}_1$, $\sh{J}_2$ are two left sheaves
of ideals of $\sh{A}$, we have $\sh{J}_1(\sh{J}_2\sh{F})=(\sh{J}_1\sh{J}_2)\sh{F}$.
\end{env}

\begin{env}{4.1.7}
\label{env-0.4.1.7}
Let $(X_\lambda,\sh{A}_\lambda)_{\lambda\in L}$ be a family of ringed spaces; for each couple
$(\lambda,\mu)$, suppose we are given an open subset $V_{\lambda\mu}$ of $X_\lambda$, and an
isomorphism of ringed spaces
$\vphi_{\lambda\mu}:(V_{\mu\lambda},\sh{A}_\mu|V_{\lambda\mu})\isoto
(V_{\lambda\mu},\sh{A}_\lambda|V_{\lambda\mu})$, with $V_{\lambda\lambda}=X_\lambda$,
$\vphi_{\lambda\lambda}$ being the identity. Furthermore, suppose that, for each triple
$(\lambda,\mu,\nu)$, if we denote by $\vphi_{\mu\lambda}'$ the restriction of
$\vphi_{\mu\lambda}$ to $V_{\lambda\mu}\cap V_{\lambda\nu}$, $\vphi_{\mu\lambda}'$ is an
isomorphism from
$(V_{\lambda\mu}\cap V_{\lambda\nu},\sh{A}_\lambda|(V_{\lambda\mu}\cap V_{\lambda\nu}))$ to
$(V_{\mu\nu}\cap V_{\mu\lambda},\sh{A}_\mu|(V_{\mu\nu}\cap V_{\mu\lambda}))$ and that we have
$\vphi_{\lambda\nu}'=\vphi_{\lambda\mu}'\circ\vphi_{\mu\nu}'$ (\emph{gluing condition} for
the $\vphi_{\lambda\mu}$). We can first consider the topological space obtained by gluing
(by means of the $\vphi_{\lambda\mu}$) of the $X_\lambda$
\oldpage{39}
along the $V_{\lambda\mu}$; if we identify $X_\lambda$ with the corresponding open subset
$X_\lambda'$ in $X$, the hypotheses imply that the three sets
$V_{\lambda\mu}\cap V_{\lambda\nu}$, $V_{\mu\nu}\cap V_{\mu\lambda}$,
$V_{\nu\lambda}\cap V_{\nu\mu}$ identify with $X_\lambda'\cap X_\mu'\cap X_\nu'$. We can
also transport to $X_\lambda'$ the ringed space structure of $X_\lambda$, and if
$\sh{A}_\lambda'$ are the transported sheaves of rings corresponding to the $\sh{A}_\lambda$,
the $\sh{A}_\lambda'$ verify the gluing condition \sref{env}{3.3.1} and therefore define a
sheaf of rings $\sh{A}$ on $X$; we say tat $(X,\sh{A})$ is the ringed space obtained by
\emph{gluing the $(X_\lambda,\sh{A}_\lambda)$ along the $V_{\lambda\mu}$}, by means of the
$\vphi_{\lambda\mu}$.
\end{env}

\subsection{Direct image of an $\sh{A}$-module}
\label{0-prelim-4.2}

\begin{env}{4.2.1}
\label{env-0.4.2.1}
Let $(X,\sh{A})$, $(Y,\sh{B})$ be two ringed spaces, $\Psi=(\psi,\theta)$ a morphism
$(X,\sh{A})\to(Y,\sh{B})$; $\psi_*(\sh{A})$ is then a sheaf of rings on $Y$, and $\theta$ a
homomorphism $\sh{B}\to\psi_*(\sh{A})$ of sheaves of rings. Then let $\sh{F}$ be an
$\sh{A}$-module; the direct image $\psi_*(\sh{F})$ is a sheaf of abelian groups on $Y$. In
addition, for each open $U\subset Y$,
\[
  \Gamma(U,\psi_*(\sh{F}))=\Gamma(\psi^{-1}(U),\sh{F})
\]
is equipped with the structure of a module over the ring
$\Gamma(U,\psi_*(\sh{A}))=\Gamma(\psi^{-1}(U),\sh{A})$; the bilinear maps which define these
structures are compatible with the restriction operations, defining on $\psi_*(\sh{F})$ the
structure of a $\psi_*(\sh{A})$-module. The homomorphism $\theta:\sh{B}\to\psi_*(\sh{A})$
then defines also on $\psi_*(\sh{F})$ a \emph{$\sh{B}$-module} structure; we say that this
$\sh{B}$-module is the \emph{direct image of $\sh{F}$ under the morphism $\Psi$}, and we
denote it $\Psi_*(\sh{F})$. If $\sh{F}_1$, $\sh{F}_2$ are two $\sh{A}$-modules over $X$ and
$u$ an $\sh{A}$-homomorphism $\sh{F}_1\to\sh{F}_2$, it is immediate (by considering the
sections over the open subsets of $Y$) that $\psi_*(u)$ is a $\psi_*(\sh{A})$-homomorphism
$\psi_*(\sh{F}_1)\to\psi_*(\sh{F}_2)$, and \emph{a fortiori} a $\sh{B}$-homomorphism
$\Psi_*(\sh{F}_1)\to\Psi_*(\sh{F}_2)$; as a $\sh{B}$-homomorphism, we denote it by
$\Psi_*(u)$. So we see that $\Psi_*$ is a \emph{covariant functor} from the category of
$\sh{A}$-modules to that of $\sh{B}$-modules. In addition, it is immediate that this functor
is \emph{left exact} (G, II, 2.12).

On $\psi_*(\sh{A})$, the structure of a $\sh{B}$-module and the structure of a sheaf of rings
define a $\sh{B}$-algebra structure; we denote by $\Psi_*(\sh{A})$ this $\sh{B}$-algebra.
\end{env}

\begin{env}{4.2.2}
\label{env-0.4.2.2}
Let $\sh{M}$, $\sh{N}$ be two $\sh{A}$-modules. For each open set $U$ of $Y$, we have a
canonical map
\[
  \Gamma(\psi^{-1}(U),\sh{M})\times\Gamma(\psi^{-1}(U),\sh{N})
  \longrightarrow\Gamma(\psi^{-1}(U),\sh{M}\otimes_\sh{A}\sh{N})
\]
which is bilinear over the ring $\Gamma(\psi^{-1}(U),\sh{A})=\Gamma(U,\psi_*(\sh{A}))$, and
\emph{a fortiori} over $\Gamma(U,\sh{B})$; it therefore defines a homomorphism
\[
  \Gamma(U,\Psi_*(\sh{M}))\otimes_{\Gamma(U,\sh{B})}\Gamma(U,\Psi_*(\sh{N}))
  \longrightarrow\Gamma(U,\Psi_*(\sh{M}\otimes_\sh{A}\sh{N}))
\]
and as we check immediately that these homomorphisms are compatible with the restriction
operations, they give a canonical functorial homomorphism of $\sh{B}$-modules
\[
  \Psi_*(\sh{M})\otimes_\sh{B}\Psi_*(\sh{N})
  \longrightarrow\Psi_*(\sh{M}\otimes_\sh{A}\sh{N})
  \tag{4.2.2.1}
\]
\oldpage{40}
which is in general neither injective or surjective. If $\sh{P}$ is a third $\sh{A}$-module,
we check immediately that the diagram
\[
  \xymatrix{
    \Psi_*(\sh{M})\otimes_\sh{B}\Psi_*(\sh{N})\otimes_\sh{B}\Psi_*(\sh{P})\ar[r]\ar[d]
    & \Psi_*(\sh{M}\otimes_\sh{A}\sh{N})\otimes_\sh{B}\Psi_*(\sh{P})\ar[d]\\
    \Psi_*(\sh{M})\otimes_\sh{B}\Psi_*(\sh{N}\otimes_\sh{A}\sh{P})\ar[r]
    & \Psi_*(\sh{M}\otimes_\sh{A}\sh{N}\otimes_\sh{A}\sh{P})
  }
  \tag{4.2.2.2}
\]
is commutative.
\end{env}

\begin{env}{4.2.3}
\label{env-0.4.2.3}
Let $\sh{M}$, $\sh{N}$ be two $\sh{A}$-modules. For each open $U\subset Y$, we have by
definition that
$\Gamma(\psi^{-1}(U),\shHom_\sh{A}(\sh{M},\sh{N}))=\Hom_{\sh{A}|V}(\sh{M}|V,\sh{N}|V)$, where
we put $V=\psi^{-1}(U)$; the map $u\mapsto\Psi_*(u)$ is a homomorphism
\[
  \Hom_{\sh{A}|V}(\sh{M}|V,\sh{N}|V)
  \longrightarrow\Hom_{\sh{B}|U}(\Psi_*(\sh{M})|U,\Psi_*(\sh{N})|U)
\]
on the $\Gamma(U,\sh{B})$-module structures; these homomorphisms are compatible with the
restriction operations, hence they define a canonical functorial homomorphism of
$\sh{B}$-modules
\[
  \Psi_*(\shHom_\sh{A}(\sh{M},\sh{N}))
  \longrightarrow\shHom_\sh{B}(\Psi_*(\sh{M}),\Psi_*(\sh{N})).
  \tag{4.2.3.1}
\]
\end{env}

\begin{env}{4.2.4}
\label{env-0.4.2.4}
If $\sh{C}$ is an $\sh{A}$-algebra, the composite homomorphism
\[
  \Psi_*(\sh{C})\otimes_\sh{B}\Psi_*(\sh{C})
  \longrightarrow\Psi_*(\sh{C}\otimes_\sh{A}\sh{C})
  \longrightarrow\Psi_*(\sh{C})
\]
defines on $\Psi_*(\sh{C})$ the structure of a \emph{$\sh{B}$-algebra}, as a result of
(4.2.2.2). We see similarly that if $\sh{M}$ is a $\sh{C}$-module, $\Psi_*(\sh{M})$ is
canonically equipped with the structure of a $\Psi_*(\sh{C})$-module.
\end{env}

\begin{env}{4.2.5}
\label{env-0.4.2.5}
Consider in particular the case where $X$ is a \emph{closed} subspace of $Y$ and where $\psi$
is the canonical injection $j:X\to Y$. If $\sh{B}'=\sh{B}|X=j^*(\sh{B})$ is the restriction
of the sheaf of rings $\sh{B}$ to $X$, an $\sh{A}$-module $\sh{M}$ can be considered as a
$\sh{B}'$-module by means of the homomorphism $\theta^\sharp:\sh{B}'\to\sh{A}$; then
$\Psi_*(\sh{M})$ is the $\sh{B}$-module which induces $\sh{M}$ on $X$ and $0$ elsewhere. If
$\sh{N}$ is a second $\sh{A}$-module, $\Psi_*(\sh{M})\otimes_\sh{B}\Psi_*(\sh{N})$
canonically identifies with $\Psi_*(\sh{M}\otimes_{\sh{B}'}\sh{N})$ and
$\shHom_\sh{B}(\Psi_*(\sh{M}),\Psi_*(\sh{N}))$ with
$\Psi_*(\shHom_{\sh{B}'}(\sh{M},\sh{N}))$.
\end{env}

\begin{env}{4.2.6}
\label{env-0.4.2.6}
Let $(Z,\sh{C})$ be a third ringed space, $\Psi'=(\psi',\theta')$ a morphism
$(Y,\sh{B})\to(Z,\sh{C})$; if $\Psi''$ is the composite morphism $\Psi'\circ\Psi$, it is
clear that we have $\Psi_*''=\Psi_*'\circ\Psi_*$.
\end{env}

\subsection{Inverse image of an $\sh{A}$-module}
\label{0-prelim-4.3}

\begin{env}{4.3.1}
\label{env-0.4.3.1}
The hypotheses and notation being the same as \sref{env}{4.2.1}, let $\sh{G}$ be a
$\sh{B}$-module and $\psi^*(\sh{G})$ the inverse image \sref{env}{3.7.1} which is therefore
a sheaf of abelian groups on $X$. The deinition of sections of $\psi^*(\sh{G})$ and of
$\psi^*(\sh{B})$ \sref{env}{3.7.1} shows that $\psi^*(\sh{G})$ is canonically equipped with
a $\psi^*(\sh{B})$-module structure. On the other hand, the homomorphism
$\theta^\sharp:\psi^*(\sh{B})\to\sh{A}$ endows $\sh{A}$ with the a $\psi^*(\sh{B})$-module
structure, which we denote by $\sh{A}_{[\theta]}$ when necessary to avoid confusion; the
tensor product $\psi^*(\sh{G})\otimes_{\psi^*(\sh{B})}\sh{A}_{[\theta]}$ is then equipped
with an $\sh{A}$-module structure. We say that this $\sh{A}$-module is \emph{the inverse
image of $\sh{G}$ under the morphism $\Psi$}
\oldpage{41}
and we denote it by $\Psi^*(\sh{G})$. If $\sh{G}_1$, $\sh{G}_2$ are two $\sh{B}$-modules over
$Y$, $v$ a $\sh{B}$-homomorphism $\sh{G}_1\to\sh{G}_2$, $\psi^*(v)$, as we check immediately,
is a $\psi^*(\sh{B})$-homomorphism from $\psi^*(\sh{G}_1)$ to $\psi^*(\sh{G}_2)$; as a result
$\psi^*(v)\otimes 1$ is an $\sh{A}$-homomorphism $\Psi^*(\sh{G}_1)\to\Psi^*(\sh{G}_2)$, which
we denote by $\Psi^*(v)$. So we define $\Psi^*$ as a \emph{covariant functor} from the
category of $\sh{B}$-modules to that of $\sh{A}$-modules. Here, this functor (contrary to
$\psi^*$) is no longer exact in general, but only \emph{right exact}, the tensorization by
$\sh{A}$ being a right exact functor to the category of $\psi^*(\sh{B})$-modules.

For each $x\in X$, we have
$(\Psi^*(\sh{G}))_x=\sh{G}_{\psi(x)}\otimes_{\sh{B}_{\psi(x)}}\sh{A}_x$, according to
\sref{env}{3.7.2}. The support of $\Psi^*(\sh{G})$ is thus contained in
$\psi^{-1}(\Supp(\sh{G}))$.
\end{env}

\begin{env}{4.3.2}
\label{env-0.4.3.2}
Let $(\sh{G}_\lambda)$ be an inductive system of $\sh{B}$-modules, and let
$\sh{G}=\varinjlim\sh{G}_\lambda$ be its inductive limit. The canonical homomorphisms
$\sh{G}_\lambda\to\sh{G}$ define the $\psi^*(\sh{B})$-homomorphisms
$\psi^*(\sh{G}_\lambda)\to\psi^*(\sh{G})$, which give a canonical homomorphism
$\varinjlim\psi^*(\sh{G}_\lambda)\to\psi^*(\sh{G})$. As the stalk at a point of an
inductive limit of sheaves is the inductive limit of the stalks at the same point
(G, II, 1.11), the preceding canonical homomorphism is \emph{bijective} \sref{env}{3.7.2}.
In addition, the tensor product commutes with inductive limits of sheaves, and we thus have
a \emph{canonical functorial isomorphism}
$\varinjlim\Psi^*(\sh{G}_\lambda)\isoto\Psi^*(\varinjlim\sh{G}_\lambda)$ of $\sh{A}$-modules.

On the other hand, for a finite direct sum $\bigoplus_i\sh{G}_i$ of $\sh{B}$-modules, it is
clear that $\psi^*(\bigoplus_i\sh{G}_i)=\bigoplus_i\psi^*(\sh{G}_i)$, therefore, by
tensoring with $\sh{A}_{[\theta]}$,
\[
  \Psi^*\big(\bigoplus_i\sh{G}_i\big)=\bigoplus_i\Psi^*(\sh{G}_i).
  \tag{4.3.2.1}
\]
By passing to the inductive limit, we deduce, in light of the above, that the above
equality is still true for \emph{any} direct sum.
\end{env}

\begin{env}{4.3.3}
\label{env-0.4.3.3}
Let $\sh{G}_1$, $\sh{G}_2$ be two $\sh{B}$-modules; from the definition of the inverse images
of sheaves of abelian groups \sref{env}{3.7.1}, we obtain immediately a canonical
homomorphism
$\psi^*(\sh{G}_1)\otimes_{\psi^*(\sh{B})}\psi^*(\sh{G}_2)
\to\psi^*(\sh{G}_1\otimes_\sh{B}\sh{G}_2)$ of $\psi^*(\sh{B})$-modules, and the stalk at a
point of a tensor product of sheaves being the tensor product of the stalks at this point
(G, II, 2.8), we deduce from \sref{env}{3.7.2} that the above homomorphism is in fact a
\emph{isomorphism}. By tensoring with $\sh{A}$, we obtain a \emph{canonical functorial
isomorphism}
\[
  \Psi^*(\sh{G}_1)\otimes_\sh{A}\Psi^*(\sh{G}_2)\isoto\Psi^*(\sh{G}_1\otimes_\sh{B}\sh{G}_2).
  \tag{4.3.3.1}
\]
\end{env}

\begin{env}{4.3.4}
\label{env-0.4.3.4}
Let $\sh{C}$ be a $\sh{B}$-algebra; the data of the algebra structure on $\sh{C}$ is the same
as the data of a $\sh{B}$-homomorphism $\sh{C}\otimes_\sh{B}\sh{C}\to\sh{C}$ satifying the
associativity and commutativity conditions (conditions which are checked stalk-wise); the
above isomorphism allows us to consider this homomorphism as a homomorphism of
$\sh{A}$-modules $\Psi^*(\sh{C})\otimes_\sh{A}\Psi^*(\sh{C})\to\Psi^*(\sh{C})$ satisfying the
same conditions, so $\Psi^*(\sh{C})$ is thus equipped with an $\sh{A}$-algebra structure. In
particular, it follows immediately from the definitions that the $\sh{A}$-algebra
$\Psi^*(\sh{B})$ is \emph{equal to $\sh{A}$} (up to a canonical isomorphism).

Similarly, if $\sh{M}$ is a $\sh{C}$-module, the data of this module structure is the same
\oldpage{42}
as that of a $\sh{B}$-homomorphism $\sh{C}\otimes_\sh{B}\sh{M}\to\sh{M}$ satisying the
associativity condition; hence we give a $\Psi^*(\sh{C})$-module structure on
$\Psi^*(\sh{M})$.
\end{env}

\begin{env}{4.3.5}
\label{env-0.4.3.5}
Let $\sh{J}$ be a sheaf of ideals of $\sh{B}$; as the functor $\psi^*$ is exact, the
$\psi^*(\sh{B})$-module $\psi^*(\sh{J})$ identifies canonically with a shead of ideals of
$\psi^*(\sh{B})$; the canonical injection $\psi^*(\sh{J})\to\psi^*(\sh{B})$ then gives a
homomorphism of $\sh{A}$-modules
$\Psi^*(\sh{J})=\psi^*(\sh{J})\otimes_{\psi^*(\sh{B})}\sh{A}_{[\theta]}\to\sh{A}$; we denote
by $\Psi^*(\sh{J})\sh{A}$, or $\sh{J}\sh{A}$ if there is no fear of confusion, the image of
$\Psi^*(\sh{J})$ under this homomorphism. So we have by definition
$\sh{J}\sh{A}=\theta^\sharp(\psi^*(\sh{J}))\sh{A}$ and in particular, for each $x\in X$,
$(\sh{J}\sh{A})_x=\theta_x^\sharp(\sh{J}_{\psi(x)})\sh{A}_x$, taking into account the
canonical identification between the stalks of $\psi^*(\sh{J})$ and those of $\sh{J}$
\sref{env}{3.7.2}. If $\sh{J}_1$, $\sh{J}_2$ are two sheaves of ideals of $\sh{B}$, we have
$(\sh{J}_1\sh{J}_2)\sh{A}=\sh{J}_1(\sh{J}_2\sh{A})=(\sh{J}_1\sh{A})(\sh{J}_2\sh{A})$.

If $\sh{F}$ is an $\sh{A}$-module, we put $\sh{J}\sh{F}=(\sh{J}\sh{A})\sh{F}$.
\end{env}

\begin{env}{4.3.6}
\label{env-0.4.3.6}
Let $(Z,\sh{C})$ be a third ringed space, $\Psi'=(\psi',\theta')$ a morphism
$(Y,\sh{B})\to(Z,\sh{C})$; if $\Psi''$ is the composite morphism $\Psi'\circ\Psi$, it follows
from the definition \sref{env}{4.3.1} and from (4.3.3.1) that we have
${\Psi''}^*=\Psi^*\circ{\Psi'}^*$.
\end{env}

\subsection{Relation between direct and inverse images}
\label{0-prelim-4.4}

\begin{env}{4.4.1}
\label{env-0.4.4.1}
The hypotheses and notations being the same as in \sref{env}{4.2.1}, let $\sh{G}$ be a
$\sh{B}$-module. By definition, a homomorphism $u:\sh{G}\to\Psi_*(\sh{F})$ of
$\sh{B}$-modules is still called a \emph{$\Psi$-morphisms from $\sh{G}$ to $\sh{F}$}, or
simply a \emph{homomorphism from $\sh{G}$ to $\sh{F}$} and we write it as $u:\sh{G}\to\sh{F}$
when no confusion will occur. To give such a homomorphism is the same as giving, for each
pair $(U,V)$ where $U$ is an open set of $X$, $V$ an open set of $Y$ such that
$\psi(U)\subset V$, a \emph{homomorphism $u_{U,V}:\Gamma(V,\sh{G})\to\Gamma(U,\sh{F})$ of
$\Gamma(V,\sh{B})$-modules}, $\Gamma(U,\sh{F})$ being considered as a
$\Gamma(V,\sh{B})$-module by means of the ring homomorphism
$\theta_{U,V}:\Gamma(V,\sh{B})\to\Gamma(U,\sh{A})$; the $u_{U,V}$ must in addition render
commutative the diagrams (3.5.1.1). It suffices, moreover, to define $u$ by the data of the
$u_{U,V}$ when $U$ (resp. $V$) varies over a basis $\mathfrak{B}$ (resp. $\mathfrak{B}'$) for
the topology of $X$ (resp. $Y$) and to check the commutativity of (3.5.1.1) for these
restrictions.
\end{env}

\begin{env}{4.4.2}
\label{env-0.4.4.2}
Under the hypotheses of \sref{env}{4.2.1} and \sref{env}{4.2.6}, let $\sh{H}$ be a
$\sh{C}$-module, $v:\sh{H}\to\Psi_*'(\sh{G})$ a $\Psi'$-morphism; then
$w:\sh{H}\xrightarrow{v}\Psi_*'(\sh{G})\xrightarrow{\Psi_*'(u)}\Psi_*'(\Psi_*(\sh{F}))$ is
a $\Psi''$-morphism which we call the \emph{composition} of $u$ and $v$.
\end{env}

\begin{env}{4.4.3}
\label{env-0.4.4.3}
We will now see that we can define a canonical \emph{isomorphism} of \emph{bifunctors} in
$\sh{F}$ and $\sh{G}$
\[
  \Hom_\sh{A}(\Psi^*(\sh{G}),\sh{F})\isoto\Hom_\sh{B}(\sh{G},\Psi_*(\sh{F}))
  \tag{4.4.3.1}
\]
which we denote by $v\mapsto v_\theta^\flat$ (or simply $v\mapsto v^\flat$ if there is no
chance of confusion); we denote by $u\mapsto u_\theta^\sharp$, or $u\mapsto u^\sharp$, the
inverse isomorphism. This definition is the following: by composing
$v:\Psi^*(\sh{G})\to\sh{F}$ with the canonical map $\psi^*(\sh{G})\to\Psi^*(\sh{G})$, we
obtain a homomorphism of sheaves of groups $v':\psi^*(\sh{G})\to\sh{F}$, which is also a
homomorphism of $\psi^*(\sh{B})$-modules. We obtain \sref{env}{3.7.1} a homomorphism
${v'}^\flat:\sh{G}\to\psi_*(\sh{F})=\Psi_*(\sh{F})$, which is also a homomorphism of
$\sh{B}$-modules as we
\oldpage{43}
check easily; we take $v_\theta^\flat={v'}^\flat$. Similarly, for
$u:\sh{G}\to\Psi_*(\sh{F})$, which is a homomorphism of $\sh{B}$-modules, we obtain
\sref{env}{3.7.1} a homomorphism $u^\sharp:\psi^*(\sh{G})\to\sh{F}$ of
$\psi^*(\sh{B})$-modules, hence by tensoring with $\sh{A}$ we have a homomorphism of
$\sh{A}$-modules $\Psi^*(\sh{G})\to\sh{F}$, which we denote by $u_\theta^\sharp$. It is
immediate to check that $(u_\theta^\sharp)_\theta^\flat=u$ and
$(v_\theta^\flat)_\theta^\sharp=v$, so we have established the functorial nature in $\sh{F}$
of the isomorphism $v\mapsto v_\theta^\flat$. The functorial nature in $\sh{G}$ of
$u\mapsto u_\theta^\sharp$ is then formally shown as in \sref{env}{3.5.4} (reasoning that
would also prove the functorial nature of $\Psi^*$ established in \sref{env}{4.3.1}
directly).

If we take for $v$ the identity homomorphism of $\Psi^*(\sh{B})$, $v_\theta^\flat$ is a
homomorphism
\[
  \rho_\sh{G}:\sh{G}\longrightarrow\Psi_*(\Psi^*(\sh{G}));
  \tag{4.4.3.2}
\]
if we take for $u$ the identity homomorphism of $\Psi_*(\sh{F})$, $u_\theta^\sharp$ is a
homomorphism
\[
  \sigma_\sh{F}:\Psi^*(\Psi_*(\sh{F}))\longrightarrow\sh{F};
  \tag{4.4.3.3}
\]
these homomorphisms will be called \emph{canonical}. They are in general neither injective or
surjective. We have canonical factorizations analogous to (3.5.3.3) and (3.5.4.4).

We note that if $s$ is a section of $\sh{G}$ over an open set $V$ of $Y$, $\rho_\sh{G}(s)$ is
the section $s'\otimes 1$ of $\Psi^*)(\sh{G})$ over $\psi^{-1}(V)$, $s'$ being such that
$s_x'=s_{\psi(x)}$ for all $x\in\psi^{-1}(V)$. We also note that if
$u:\sh{G}\to\psi_*(\sh{F})$ is a homomorphism, it defines for all $x\in X$ a homomorphism
$u_x:\sh{G}_{\psi(x)}\to\sh{F}_x$ on the stalks, obtained by composing
$(u^\sharp)_x:(\Psi^*(\sh{G}))_x\to\sh{F}_x$ and the canonical homomorphism
$s_x\mapsto s_x\otimes 1$ from $\sh{G}_{\psi(x)}$ to
$(\Psi^*(\sh{G}))_x=\sh{G}_{\psi(x)}\otimes_{\sh{B}_{\psi(x)}}\sh{A}_x$. The homomorphism
$u_x$ is obtained also by passing to the inductive limit relative to the homomorphisms
$\Gamma(V,\sh{G})\xrightarrow{u}\Gamma(\psi^{-1}(V),\sh{F})\to\sh{F}_x$, where $V$ varies
over the neighborhoods of $\psi(x)$.
\end{env}

\begin{env}{4.4.4}
\label{env-0.4.4.4}
Let $\sh{F}_1$, $\sh{F}_2$ be $\sh{A}$-modules, $\sh{G}_1$, $\sh{G}_2$ be $\sh{B}$-modules,
$u_i$ ($i=1,2$) a homomorphism from $\sh{G}_i$ to $\sh{F}_i$. We denote by $u_1\otimes u_2$
the homomorphism $u:\sh{G}_1\otimes_\sh{B}\sh{G}_2\to\sh{F}_1\otimes_\sh{A}\sh{F}_2$ such
that $u^\sharp=(u_1)^\sharp\otimes(u_2)^\sharp$ (taking into account (4.3.3.1)); we check
that $u$ is also the composition
$\sh{G}_1\otimes_\sh{B}\sh{G}_2\to\Psi_*(\sh{F}_1)\otimes_\sh{B}\Psi_*(\sh{F}_2)
\to\Psi_*(\sh{F}_1\otimes_\sh{A}\sh{F}_2)$, where the first arrow is the ordinary tensor
product $u_1\otimes_\sh{B}u_2$ and the second is the canonical homomorphism (4.2.2.1).
\end{env}

\begin{env}{4.4.5}
\label{env-0.4.4.5}
Let $(\sh{G}_\lambda)_{\lambda\in L}$ be an inductive system of $\sh{B}$-modules, and, for
each $\lambda\in L$, let $u_\lambda$ be a homomorphisme $\sh{G}_\lambda\to\Psi_*(\sh{F})$,
form an inductive limit; we put $\sh{G}=\varinjlim\sh{G}_\lambda$ and
$u=\varinjlim u_\lambda$; then the $(u_\lambda)^\sharp$ form an inductive system of
homomorphisms $\Psi^*(\sh{G}_\lambda)\to\sh{F}$, and the inductive limit of this system is
non other than $u^\sharp$.
\end{env}

\begin{env}{4.4.6}
\label{env-0.4.6.6}
Let $\sh{M}$, $\sh{N}$ be two $\sh{B}$-modules, $V$ an open set of $Y$, $U=\psi^{-1}(V)$; the
map $v\mapsto\Psi^*(v)$ is a homomorphism
\[
  \Hom_{\sh{B}|V}(\sh{M}|V,\sh{N}|V)
  \longrightarrow\Hom_{\sh{A}|U}(\Psi^*(\sh{M})|U,\Psi^*(\sh{N})|U)
\]
for the $\Gamma(V,\sh{B})$-module structures
($\Hom_{\sh{A}|U}(\Psi^*(\sh{M})|U,\Psi^*(\sh{N})|U)$ is normaly equipped with the a
$\Gamma(U,\psi^*(\sh{B}))$-module structure, and thanks to the canonical homomorphism
\oldpage{44}
\sref{env}{3.7.2} $\Gamma(V,\sh{B})\to\Gamma(U,\psi^*(\sh{B}))$, it is also a
$\Gamma(V,\sh{B})$-module). We see immediately that these homomorphisms are compatible with
the restriction morphisms, and as a result define a canonical functorial homomorphism
\[
  \gamma:\shHom_\sh{B}(\sh{M},\sh{N})
  \longrightarrow\Psi_*(\shHom_\sh{A}(\Psi^*(\sh{M}),\Psi^*(\sh{N}));
\]
it also corresponds to this homomorphism the homomorphism
\[
  \gamma^\sharp:\Psi^*(\shHom_\sh{B}(\sh{M},\sh{N}))
  \longrightarrow\shHom_\sh{A}(\Psi^*(\sh{M}),\Psi^*(\sh{N}))
\]
and these canonical morphisms are functorial in $\sh{M}$ and $\sh{N}$.
\end{env}

\begin{env}{4.4.7}
\label{env-0.4.4.7}
Suppose that $\sh{F}$ (resp. $\sh{G}$) is an $\sh{A}$-algebra (resp. a $\sh{B}$-algebra). If
$u:\sh{G}\to\Psi_*(\sh{F})$ is a homomorphism of $\sb{B}$-algebras, $u^\sharp$ is a
homomorphism $\Psi^*(\sh{G})\to\sh{F}$ of $\sh{A}$-algebras; this follows from the
commutativity of the diagram
\[
  \xymatrix{
    \sh{G}\otimes_\sh{B}\sh{G}\ar[r]\ar[d] &
    \sh{G}\ar[d]^u\\
    \Psi_*(\sh{F}\otimes_\sh{A}\sh{F})\ar[r] &
    \Psi_*(\sh{F})
  }
\]
and from \sref{env}{4.4.4}. Similarly, if $v:\Psi^*(\sh{G})\to\sh{F}$ is a homomorphism of
$\sh{A}$-algebras, $v^\flat:\sh{G}\to\Psi_*(\sh{F})$ is a homomorphism of $\sh{B}$-algebras.
\end{env}

\begin{env}{4.4.8}
\label{env-0.4.4.8}
Let $(Z,\sh{C})$ be a third ringed space, $\Psi'=(\psi',\theta')$ a morphism
$(Y,\sh{B})\to(Z,\sh{C})$, and $\Psi'':(X,\sh{A})\to(Z,\sh{C})$ the composite morphism
$\Psi'\circ\Psi$. Let $\sh{H}$ be a $\sh{C}$-module, $u'$ a homomorphsim from $\sh{H}$ to
$\sh{G}$; the composition $v''=v\circ v'$ is by definition the homomorphism from $\sh{H}$ to
$\sh{F}$ defined by
$\sh{H}\xrightarrow{v'}\Psi_*'(\sh{G})\xrightarrow{\Psi_*'(v)}\Psi_*'(\Psi_*(\sh{F}))$; we
check that ${v''}^\sharp$ is the homomorphism
\[
  \Psi^*({\Psi'}^*(\sh{H}))\xrightarrow{\Psi^*({v'}^\sharp)}\Psi^*(\sh{G})
  \xrightarrow{v^\sharp}\sh{F}.
\]
\end{env}

\section{Quasi-coherent and coherent sheaves}
\label{0-prelim-5}

\subsection{Quasi-coherent sheaves}
\label{0-prelim-5.1}

\begin{env}{5.1.1}
\label{env-0.5.1.1}
Let $(X,\OO_X)$ be a ringed space, $\sh{F}$ an $\OO_X$-module. The data of a homomorphism
$u:\OO_X\to\sh{F}$ of $\OO_X$-modules is equivalent to that of the section
$s=u(1)\in\Gamma(X,\sh{F})$. Indeed, when $s$ is given, for each section
$t\in\Gamma(U,\OO_X)$, we necessarily have $u(t)=t\cdot(s|U)$; we say that $u$ is
\emph{defined by the section $s$}. If now $I$ is any set of indices, consider the direct
sum sheaf $\OO_X^{(I)}$, and for each $i\in I$, let $h_i$ be the canonical injection of
the $i$-th factor into $\OO_X^{(I)}$; we know that $u\mapsto(u\circ h_i)$ is an isomorphism
from $\Hom_{\OO_X}(\OO_X^{(I)},\sh{F})$ to the product $(\Hom_{\OO_X}(\OO_X,\sh{F}))^I$. So
there is a canonical one-to-one correspondence between the homomorphisms
$u:\OO_X^{(I)}\to\sh{F}$ and the \emph{families of sections $(s_i)_{i\in I}$ of $\sh{F}$ over
$X$}. The homomorphism $u$ corresponding to $(s_i)$ sends an element
$(a_i)\in(\Gamma(U,\OO_X))^{(I)}$ to $\sum_{i\in I}a_i\cdot(s_i|U)$.

We say that $\sh{F}$ is \emph{generated by the family $(s_i)$} if the homomorphism
$\OO_X^{(I)}\to\sh{F}$ defined
\oldpage{45}
for each family is \emph{surjective} (in other words, if, for each $x\in X$, $\sh{F}_x$ is an
$\OO_x$-module generated by the $(s_i)_x$). We say that $\sh{F}$ is \emph{generated by its
sections over $X$} if it is generated by the family of all these sections (or by a
subfamily), in other words, if there exists a surjective homomorphism $\OO_X^{(I)}\to\sh{F}$
for a suitable $I$.

We note that a $\OO_X$-module $\sh{F}$ can be such that there exists a point $x_0\in X$ for
which $\sh{F}|U$ is not generated by its sections over $U$, \emph{regardless of the choice
of neighborhood $U$ of $x_0$}: it suffices to take $X=\bb{R}$, for $\OO_X$ the simple sheaf
$\bb{Z}$, for $\sh{F}$ the algebraic subsheaf of $\OO_X$ such that $\sh{F}_0=\{0\}$,
$\sh{F}_x=\bb{Z}$ for $x\neq 0$, and finally $x_0=0$: the only section of $\sh{F}|U$ over $U$ 
is $0$ for a neighborhood $U$ of $0$.
\end{env}

\begin{env}{5.1.2}
\label{env-0.5.1.2}
Let $f:X\to Y$ be a morphism of ringed spaces. If $\sh{F}$ is a $\OO_X$-module generated by
its sections over $X$, then the canonical homomorphism $f^*(f_*(\sh{F}))\to\sh{F}$ (4.4.3.3)
is \emph{surjective}; indeed, with the notations of \sref{env}{5.1.1}, $s_i\otimes 1$ is a
section of $f^*(f_*(\sh{F}))$ over $X$, and its image in $\sh{F}$ is $s_i$. The example of
\sref{env}{5.1.1} where $f$ is the identity shows that the inverse of this proposition is
false in general.
\end{env}

\begin{env}{5.1.3}
\label{env-0.5.1.3}
We say that an $\OO_X$-module $\sh{F}$ is \emph{quasi-coherent} if, for each $x\in X$, there
is an open neighborhood $U$ of $x$ wuch that $\sh{F}|U$ is isomorphic to the \emph{cokernel}
of a homomorphism of the form $\OO_X^{(I)}|U\to\OO_X^{(J)}|U$, where $I$ and $J$ are sets of
arbitrary indices. It is clear that $\OO_X$ is itself a quasi-coherent $\OO_X$-module, and
that any direct sum of quasi-coherent $\OO_X$-modules is again a quasi-coherent
$\OO_X$-module. We say that an \emph{$\OO_X$-algebra $\sh{A}$} is \emph{quasi-coherent} if
it is quasi-coherent as an $\OO_X$-module.
\end{env}

\begin{env}{5.1.4}
\label{env-0.5.1.4}
Let $f:X\to Y$ be a morphism of ringed spaces. If $\sh{G}$ is a quasi-coherent
$\OO_Y$-module, then $f^*(\sh{G})$ is a quasi-coherent $\OO_X$-module. Indeed, for each
$x\in X$, there is an open neighborhood $V$ of $f(x)$ in $Y$ such that $\sh{G}|V$ is the
cokernel of a homomorphism $\OO_Y^{(I)}|V\to\OO_Y^{(J)}|V$. If $U=f^{-1}(V)$, and if $f_U$ is
the restriction of $f$ to $U$, we have $f^*(\sh{G})|U=f_U^*(\sh{G}|V)$; as $f_U^*$ is right
exact and commutes with direct sums, $f_U^*(\sh{G}|V)$ is the cokernel of a homomorphism
$\OO_X^{(I)}|U\to\OO_X^{(J)}|U$.
\end{env}

\subsection{Sheaves of finite type}
\label{0-prelim-5.2}

\begin{env}{5.2.1}
\label{env-0.5.2.1}
We say that an $\OO_X$-module $\sh{F}$ is \emph{of finite type} if, for each $x\in X$, there
exists an open neighborhood $U$ of $x$ such that $\sh{F}|U$ is generated by a \emph{finite}
family of sections over $U$, or if it is isomorphic to a sheaf quotient of a sheaf of the
form $(\OO_X|U)^p$ where $p$ is finite. Each sheaf quotient of a sheaf of finite type is
again a sheaf of finite type, as well as each finite direct sum and each finite tensor
product of sheaves of finite type. An $\OO_X$-module of finite type is not necessarily
quasi-coherent, as we can see for the $\OO_X$-module $\OO_X/\sh{F}$, where $\sh{F}$ is the
example in \sref{env}{5.1.1}. If $\sh{F}$ is of finite type, $\sh{F}_x$ is a $\OO_x$-module
of finite type for each $x\in X$, but the example in \sref{env}{5.1.1} shows that this
condition is necessary but not sufficient in general.
\end{env}

\begin{env}{5.2.2}
\label{env-0.5.2.2}
Let $\sh{F}$ be an $\OO_X$-module \emph{of finite type}. If $s_i$ ($1\leqslant i\leqslant n$)
are the sections of $\sh{F}$ over an open neighborhood $U$ of a point $x\in X$ and the
$(s_i)_x$ generate $\sh{F}_x$, there exists an open neighborhood $V\subset U$ of $x$ such
that the $(s_i)_y$ generate $\sh{F}_y$ for all $y\in Y$ (FAC, I, 2, 12, prop.~1). In
particular, we conclude that the support of $\sh{F}$ is \emph{closed}.

\oldpage{46}
Similarly, if $u:\sh{F}\to\sh{G}$ is a homomorphism such that $u_x=0$, then there exists a
neighborhood $U$ of $x$ suc that $u_y=0$ for all $y\in U$.
\end{env}

\begin{env}{5.2.3}
\label{env-0.5.2.3}
Suppose that $X$ is \emph{quasi-compact}, and let $\sh{F}$, $\sh{G}$ be two $\OO_X$-modules
such that $\sh{G}$ is \emph{of finite type}, $u:\sh{F}\to\sh{G}$ a \emph{surjective}
homomorphism. In addition, suppose that $\sh{F}$ is the inductive limit of an inductive
system $(\sh{F}_\lambda)$ of $\OO_X$-modules. Then there exists an index $\mu$ such that the
homomorphism $\sh{F}_\mu\to\sh{G}$ is \emph{surjective}. Indeed, for each $x\in X$, there
exists a finite system of sections $s_i$ of $\sh{G}$ over an open neighborhood $U(x)$ of $x$
such that the $(s_i)_y$ generate $\sh{G}_y$ for all $y\in U(x)$; there is then an open
neighborhood $V(x)\subset U(x)$ of $x$ and $n$ sections $t_i$ of $\sh{F}$ over $V(x)$ such
that $s_i|V(s)=u(t_i)$ for all $i$; we can also suppose that the $t_i$ are the canonical
images of sections of a similar sheaf $\sh{F}_{\lambda(x)}$ over $V(x)$. We then cover $X$
with a finite number of neighborhoods $V(x_k)$, and let $\mu$ be the maximal index of the
$\lambda(x_k)$; it is clear that this index gives the answer.

Suppose still that $X$ is quasi-compact, and let $\sh{F}$ be an $\OO_X$-module of finite type
generated by its sections over $X$ \sref{env}{5.1.1}; then $\sh{F}$ is generated by a
\emph{finite} subfamily of these sections: indeed, it suffices to cover $X$ by a finite
number of open neighborhoods $U_k$ such that, for each $k$, there is a finite number of
sections $s_{ik}$ of $\sh{F}$ over $X$ whose restrictions to $U_k$ generate $\sh{F}|U_k$; it
is clear that the $s_{ik}$ then generate $\sh{F}$.
\end{env}

\begin{env}{5.2.4}
\label{env-0.5.2.4}
Let $f:X\to Y$ be a morphism of ringed spaces. If $\sh{G}$ is an $\OO_Y$-module of finite
type, then $f^*(\sh{G})$ is an $\OO_X$-module of finite type. Indeed, for each $x\in X$,
there is an open neighborhood $V$ of $f(x)$ in $Y$ and a surjective homomorphism
$v:\OO_Y^p|V\to\sh{G}|V$. If $U=f^{-1}(V)$ and if $f_U$ is the restriction of $f$ to $U$, we
have $f^*(\sh{G})|U=f_U^*(\sh{G}|V)$; as $f_U$ is right exact \sref{env}{4.3.1} and commutes
with direct sums \sref{env}{4.3.2}, $f_U^*(v)$ is a surjective homomorphism
$\OO_X^p|U\to f^*(\sh{G})|U$.
\end{env}

\begin{env}{5.2.5}
\label{env-0.5.2.5}
We say that an $\OO_X$-module $\sh{F}$ \emph{admits a finite presentation} if, for each
$x\in X$, there exists an open neighborhood $U$ of $x$ such that $\sh{F}|U$ is isomorphic
to a \emph{cokernel of a $(\OO_X|U)$-homomorphism $\OO_X^p|U\to\OO_X^q|U$}, $p$ and $q$ being
two integers $>0$. Such an $\OO_X$-module is therefore of finite type and quasi-coherent. If
$f:X\to Y$ is a morphism of ringed spaces, and if $\sh{G}$ is an $\OO_Y$-module admitting a
finite presentation, $f^*(\sh{G})$ admits a finite presentation, as shown in the argument of
\sref{env}{5.1.4}.
\end{env}

\begin{env}{5.2.6}
\label{env-0.5.2.6}
Let $\sh{F}$ be an $\OO_X$-module admitting a finite presentation \sref{env}{5.2.5}; then,
for each $\OO_X$-module $\sh{H}$, the canonical functorial homomorphism
\[
  (\shHom_{\OO_X}(\sh{F},\sh{H}))_x\longrightarrow\Hom_{\OO_x}(\sh{F}_x,\sh{H}_x)
\]
is \emph{bijective} (T, 4.1.1).
\end{env}

\begin{env}{5.2.7}
\label{env-0.5.2.7}
Let $\sh{F}$, $\sh{G}$ be two $\OO_X$-modules admitting a finite presentation. If, for an
$x\in X$, $\sh{F}_x$ ad $\sh{G}_x$ are \emph{isomorphic} as $\OO_x$-modules, then there
exists an open neighborhood $U$ of $x$ such that $\sh{F}|U$ and $\sh{G}|U$ are
\emph{isomorphic}. Indeed, if $\vphi:\sh{F}_x\to\sh{G}_x$ and $\psi:\sh{G}_x\to\sh{F}_x$ are
an isomorphism and its inverse isomorphism, then there exists, according to
\sref{env}{5.2.6}, an open neighborhood $V$ of $x$ and a section $u$ (resp. $v$) of
$\shHom_{\OO_X}(\sh{F},\sh{G})$ (resp. $\shHom_{\OO_X}(\sh{G},\sh{F})$) over $V$ such
\oldpage{47}
that $u_x=\vphi$ (resp. $v_x=\psi$). As $(u\circ v)_x$ and $(v\circ u)_x$ are the identity
automorphisms, there exists an open neighborhood $U\subset V$ of $x$ such that $(u\circ v)|U$
and $(v\circ u)|U$ are the identity automorphisms, hence the proposition.
\end{env}

\subsection{Coherent sheaves}
\label{0-prelim-5.3}

\begin{env}{5.3.1}
\label{env-0.5.3.1}
We say that an $\OO_X$-module $\sh{F}$ is \emph{coherent} if it satisfies the two following
conditions:
\begin{enumerate}[label=(\alph*)]
  \item $\sh{F}$ is of finite type.
  \item for each open $U\subset X$, integer $n>0$, and homomorphism $u:\OO_X^n|U\to\sh{F}|U$,
        the kernel of $u$ is of finite type.
\end{enumerate}
We note that these two conditions are of a \emph{local} nature.

For most of the proofs of the properties of coherent sheaves in what follows,
cf. (FAC, I, 2).
\end{env}

\begin{env}{5.3.2}
\label{env-0.5.3.2}
Each coherent $\OO_X$-module admits a finite presentation \sref{env}{5.2.5}; the inverse is
not necessarily true, since $\OO_X$ itself is not necessarily a coherent $\OO_X$-module.

Each $\OO_X$-submodule \emph{of finite type} of a coherent $\OO_X$-module is coherent; each
\emph{finite} direct sum of coherent $\OO_X$-modules is a coherent $\OO_X$-module.
\end{env}

\begin{env}{5.3.3}
\label{env-0.5.3.3}
If $0\to\sh{F}\to\sh{G}\to\sh{H}\to 0$ is an exact sequence  of $\OO_X$-modules and if two of
these $\OO_X$-modules are coherent, so is the third.
\end{env}

\begin{env}{5.3.4}
\label{env-0.5.3.4}
If $\sh{F}$ and $\sh{G}$ are two coherent $\OO_X$-modules, $u:\sh{F}\to\sh{G}$ a
homomorphism, then $\Im(u)$, $\Ker(u)$, and $\Coker(u)$ are coherent $\OO_X$-modules. In
particular, if $\sh{F}$ and $\sh{G}$ are $\OO_X$-submodules of a coherent $\OO_X$-module,
then $\sh{F}+\sh{G}$ and $\sh{F}\cap\sh{G}$ are coherent.
\end{env}

\begin{env}{5.3.5}
\label{env-0.5.3.5}
If $\sh{F}$ and $\sh{G}$ are two coherent $\OO_X$-modules, then so are
$\sh{F}\otimes_{\OO_X}\sh{G}$ are $\shHom_{\OO_X}(\sh{F},\sh{G})$.
\end{env}

\begin{env}{5.3.6}
\label{env-0.5.3.6}
Let $\sh{F}$ be a coherent $\OO_X$-module, $\sh{J}$ a coherent sheaf of ideals of $\OO_X$.
Then the $\OO_X$-module $\sh{J}\sh{F}$ is coherent, as the image of
$\sh{J}\otimes_{\OO_X}\sh{F}$ under the canonical homomorphism
$\sh{J}\otimes_{\OO_X}\sh{F}\to\sh{F}$ (\sref{env}{5.3.4} and \sref{env}{5.3.5}).
\end{env}

\begin{env}{5.3.7}
\label{env-0.5.3.7}
We say that an $\OO_X$-algebra $\sh{A}$ is \emph{coherent} if it is coherent as an
$\OO_X$-module. In particular, $\OO_X$ is a \emph{coherent sheaf of rings} if, and only if,
for each open $U\subset X$ and each homomorphism of the form $u:\OO_X^p|U\to\OO_X|U$, the
kernel of $u$ is an $(\OO_X|U)$-module of finite type.

If $\OO_X$ is a coherent sheaf of rings, each $\OO_X$-module $\sh{F}$ admitting a finite
presentation \sref{env}{5.2.5} is coherent, according to \sref{env}{5.3.4}.

The \emph{annihilator} of an $\OO_X$-module $\sh{F}$ is the kernel $\sh{J}$ of the canonical
homomorphism $\OO_X\to\shHom_{\OO_X}(\sh{F},\sh{F})$ which sends each section
$s\in\Gamma(U,\OO_X)$ to the multiplication by $s$ map in $\Hom(\sh{F}|U,\sh{F}|U)$; if
$\OO_X$ is coherent and if $\sh{F}$ is a coherent $\OO_X$-module, then $\sh{J}$ is coherent
(\sref{env}{5.3.4} and \sref{env}{5.3.5}) and for each $x\in X$, $\sh{J}_x$ is the
annihilator of $\sh{F}_x$ \sref{env}{5.2.6}.
\end{env}

\begin{env}{5.3.8}
\label{env-0.5.3.8}
\oldpage{48}
Suppose that $\OO_X$ is coherent; let $\sh{F}$ be a coherent $\OO_X$-module, $x$ a point of
$X$, $M$ a submodule of finite type of $\sh{F}_x$; then there exists an open neighborhood $U$
of $x$ and a coherent $(\OO_X|U)$-submodule $\sh{G}$ of $\sh{F}|U$ such that $\sh{G}_x=M$
(T, 4.1, Lemma~1).

This result, along with the properties of the $\OO_X$-submodules of a coherent
$\OO_X$-module, impose the necessary conditions on the rings $\OO_x$ such that $\OO_X$ is
coherent. For example \sref{env}{5.3.4}, the intersection of two ideals of finite type of
$\OO_x$ must still be an ideal of finite type.
\end{env}

\begin{env}{5.3.9}
\label{env-0.5.3.9}
Supppose that $\OO_X$ is coherent, and let $M$ be an $\OO_x$-module admitting a finite
presentation, therefore isomorphic to a cokernel of a homomorphism $\vphi:\OO_x^p\to\OO_x^q$;
then there exists an open neighborhood $U$ of $X$ and a coherent $(\OO_X|U)$-module $\sh{F}$
such that $\sh{F}_x$ is isomorphic to $M$. Indeed, according to \sref{env}{5.2.6}, there
exists a section $u$ of $\shHom_{\OO_X}(\OO_X^p,\OO_X^q)$ such that $u_x=\vphi$; the cokernel
$\sh{F}$ of the homomorphism $u:\OO_X^p|U\to\OO_X^q|U$ gives the answer \sref{env}{5.3.4}.
\end{env}

\begin{env}{5.3.10}
\label{env-0.5.3.10}
Suppose that $\OO_X$ is coherent, and let $\sh{J}$ be a coherent sheaf of ideals of $\OO_X$.
For a $(\OO_X/\sh{J})$-module $\sh{F}$ to be coherent, it is necessary and sufficient that it
is coherent as a $\OO_X$-module. In particular $\OO_X/\sh{J}$ is a coherent sheaf of rings.
\end{env}

\begin{env}{5.3.11}
\label{env-0.5.3.11}
Let $f:X\to Y$ be a morphism of ringed spaces, and suppose that $\OO_X$ is coherent; then,
for each coherent $\OO_Y$-module $\sh{G}$, $f^*(\sh{G})$ is a coherent $\OO_X$-module.
Indeed, with the notations of \sref{env}{5.2.4}, we can assume that $\sh{G}|V$ is the
cokernel of a homomorphism $v:\OO_Y^q|V\to\OO_Y^p|V$; as $f_U^*$ is right exact,
$f^*(\sh{G})|U=f_U^*(\sh{G}|V)$ is the cokernel of the homomorphism
$f_U^*(v):\OO_X^q|U\to\OO_X^p|U$, hence our assertion.
\end{env}

\begin{env}{5.3.12}
\label{env-0.5.3.12}
Let $Y$ be a closed subset of $X$, $j:Y\to X$ the canonical injection, $\OO_Y$ a sheaf of
rings on $Y$, and put $\OO_X=j_*(\OO_Y)$. For a $\OO_Y$-module $\sh{G}$ to be of finite type
(resp. quasi-coherent, coherent), it is necessary and sufficient that $j_*(\sh{G})$ is an
$\OO_X$-module of finite type (resp. quasi-coherent, coherent).
\end{env}

\subsection{Locally free sheaves}
\label{0-prelim-5.4}

\begin{env}{5.4.1}
\label{env-0.5.4.1}
Let $X$ be a ringed space. We say that an $\OO_X$-module $\sh{F}$ is \emph{locally free}, if,
for each $x\in X$, there exists an open neighborhood $U$ of $x$ such that $\sh{F}|U$ is
isomorphic to a $(\OO_X|U)$-module of the form $\OO_X^{(I)}|U$, where $I$ can depend on $U$.
If for each $U$, $I$ is finite, we say that $\sh{F}$ is \emph{of finite rank}; if for each
$U$, $I$ has the same finite number of elements $n$, we say that $\sh{F}$ is \emph{of rank
$n$}. A locally free $\OO_X$-module of rank $1$ is called \emph{invertible}
(cf. \sref{env}{5.4.3}). If $\sh{F}$ is a locally free $\OO_X$-module of finite rank, for
each $x\in X$, $\sh{F}_x$ is a free $\OO_x$-module of finite rank $n(x)$, and there exists a
neighborhood $U$ of $x$ such that $\sh{F}|U$, is of rank $n(x)$; if $X$ is connected, then
$n(x)$ is \emph{constant}.

It is clear that each locally free sheaf is quasi-coherent, and if $\OO_X$ is a coherent
sheaf of rings, each locally free $\OO_X$-module of finite rank is coherent.

If $\sh{L}$ is locally free, $\sh{L}\otimes_{\OO_X}\sh{F}$ is an \emph{exact} functor in
$\sh{F}$ to the category of $\OO_X$-modules.

We will mostly consider locally free $\OO_X$-modules of finite rank,
\oldpage{49}
and when we speak of locally free sheaves without specifying, it will be understood that
they are of \emph{finite rank}.
\end{env}

\begin{env}{5.4.2}
\label{env-0.5.4.2}
If $\sh{L}$, $\sh{F}$ are two $\OO_X$-modules, we have a canonical functorial homomorphism
\[
  \dual{\sh{L}}\otimes_{\OO_X}\sh{F}=\shHom_{\OO_X}(\sh{L},\OO_X)\otimes_{\OO_X}\sh{F}
  \longrightarrow\shHom_{\OO_X}(\sh{L},\sh{F})
  \tag{5.4.2.1}
\]
defined in the following way: for each open set $U$, send any pair $(u,t)$, where
$u\in\Gamma(U,\shHom_{\OO_X}(\sh{L},\OO_X))=\Hom(\sh{L}|U,\OO_X|U)$ and
$t\in\Gamma(U,\sh{F})$, to the element of $\Hom(\sh{L}|U,\sh{F}|U)$ which, for each $x\in U$,
sends $s_x\in\sh{L}_x$ to the element $u_x(s_x)t_x$ of $\sh{F}_x$. If $\sh{L}$ is
\emph{locally free of finite rank}, this homomorphism is \emph{bijective}; the property being
local, we can in fact reduce to the case where $\sh{L}=\OO_X^n$; as for each $\OO_X$-module
$\sh{G}$, $\shHom_{\OO_X}(\OO_X^n,\sh{G})$ is canonically isomorphic to $\sh{G}^n$, we have
reduced to the case $\sh{L}=\sh{O}_X$, which is immediate.
\end{env}

\begin{env}{5.4.3}
\label{env-0.5.4.3}
If $\sh{L}$ is invertible, so is its dual $\dual{\sh{L}}=\shHom_{\OO_X}(\sh{L},\OO_X)$, since
we can immediately reduce (as the question is local) to the case $\sh{L}=\OO_X$. In addition,
we have a canonical isomorphism
\[
  \shHom_{\OO_X}(\sh{L},\OO_X)\otimes_{\OO_X}\sh{L}\isoto\OO_X
  \tag{5.4.3.1}
\]
as, according to \sref{env}{5.3.2}, it suffices to define a canonical isomorphism
$\shHom_{\OO_X}(\sh{L},\sh{L})\isoto\OO_X$. For \emph{each} $\OO_X$-module $\sh{F}$, we have
a canonical homomorphism $\OO_X\isoto\shHom_{\OO_X}(\sh{F},\sh{F})$ \sref{env}{5.3.7}. It
remains to prove that if $\sh{F}=\sh{L}$ is invertible, this homomorphism is bijective, and
as the question is local, it reduces to the case $\sh{L}=\OO_X$, which is immediate.

Due to the above, we put $\sh{L}^{-1}=\shHom_{\OO_X}(\sh{L},\OO_X)$, and we say that
$\sh{L}^{-1}$ is the \emph{inverse} of $\sh{L}$. The terminology ``invertible sheaf'' can be
justified in the following way when $X$ is reduced to a point and $\OO_X$ is a \emph{local}
ring $A$ with maximal ideal $\mathfrak{m}$; if $M$ and $M'$ are two $A$-modules ($M$ being of
finite type) such that $M\otimes_A M'$ is isomorphic to $A$, as
$(A/\mathfrak{m})\otimes_A(M\otimes_A M')$ identifies with
$(M/\mathfrak{m}M)\otimes_{A/\mathfrak{m}}(M'/\mathfrak{m}M')$, this latter tensor product
of vector spaces over the field $A/\mathfrak{m}$ is isomorphic to $A/\mathfrak{m}$, which
requires $M/\mathfrak{m}M$ and $M'/\mathfrak{m}M'$ to be of dimension $1$. For each element
$z\in M$ not in $\mathfrak{m}M$, we have $M=Az+\mathfrak{m}M$, which implies that $M=Az$
according to Nakayama's lemma, $M$ being of finite type. Moreover, as the annihilator of $z$
kills $M\otimes_A M'$, which is isomorphic to $A$, this annihilator is $\{0\}$, and as a
result $M$ is \emph{isomorphic to $A$}. In the general case, this shows that $\sh{L}$ is an
$\OO_X$-module of finite type, such that there exists an $\OO_X$-module $\sh{F}$ for which
$\sh{L}\otimes_{\OO_X}\sh{F}$ is isomorphic to $\OO_X$, and if in addition the rings $\OO_x$
are local rings, then the $\sh{L}_x$ is an $\OO_x$-module isomorphic to $\OO_x$ for each
$x\in X$. If $\OO_X$ and $\sh{L}$ are assumed to be \emph{coherent}, we then conclude that
$\sh{L}$ is invertible according to \sref{env}{5.2.7}.
\end{env}

\begin{env}{5.4.4}
\label{env-0.5.4.4}
If $\sh{L}$ and $\sh{L}'$ are two invertible $\OO_X$-modules, then so is
$\sh{L}\otimes_{\OO_X}\sh{L}'$, since the question is local, we can assume that
$\sh{L}=\OO_X$, and the result is then trivial. For each integer $n\geqslant 1$, we denote by
$\sh{L}^{\otimes n}$ the tensor product of $n$ copies of the sheaf
\oldpage{50}
$\sh{L}$; we put by convention $\sh{L}^{\otimes 0}=\OO_X$, and for $n\geqslant 1$,
$\sh{L}^{\otimes(-n)}=(\sh{L}^{-1})^{\otimes n}$. With these notations, there is then a
\emph{canonical functorial isomorphism}
\[
  \sh{L}^{\otimes m}\otimes_{\OO_X}\sh{L}^{\otimes n}\isoto\sh{L}^{\otimes(n+m)}
  \tag{5.4.4.1}
\]
for any rational integers $m$, $n$: indeed, by definition, we immediately reduce to the
case where $m=-1$, $n=1$, and the isomorphism in question is then that defined in
\sref{env}{5.4.3}.
\end{env}

\begin{env}{5.4.5}
\label{env-0.5.4.5}
Let $f:Y\to X$ be a morphism of ringed spaces. If $\sh{L}$ is a locally free
(resp. invertible) $\OO_X$-module, $f^*(\sh{L})$ is a locally free (resp. invertible)
$\OO_Y$-module: this follows immediately from that the inverse images of the two locally
isomorphic $\OO_X$-modules are locally isomorphic, that $f^*$ commutes with finite direct
sums, and that $f^*(\OO_X)=\OO_Y$ \sref{env}{4.3.4}. In addition, we know that we have a
canonical functorial homomorphism $f^*(\dual{\sh{L}})\to\dual{(f^*(\sh{L}))}$
\sref{env}{4.4.6}, and when $\sh{L}$ is locally free, this homomorphism is \emph{bijective}:
indeed, we again reduce to the case where $\sh{L}=\OO_X$ which is trivial. We conclude that
if $\sh{L}$ is invertible, $f^*(\sh{L}^{\otimes n})$ canonically identifies with
$(f^*(\sh{L}))^{\otimes n}$ for each rational integer $n$.
\end{env}

\begin{env}{5.4.6}
\label{env-0.5.4.6}
Let $\sh{L}$ be an invertible $\OO_X$-module; we denote by $\Gamma_*(X,\sh{L})$ or simply
$\Gamma_*(\sh{L})$ the abelian group direct sum
$\bigoplus_{n\in\bb{Z}}\Gamma(X,\sh{L}^{\otimes n})$; we equip it with the structure of a
\emph{graded ring}, by corresponding to a pair $(s_n,s_m)$, where
$s_n\in\Gamma(X,\sh{L}^{\otimes n})$, $s_m\in\Gamma(X,\sh{L}^{\otimes m})$, the section of
$\sh{L}^{\otimes(n+m)}$ over $X$ which corresponds canonically (5.4.4.1) to the section
$s_n\otimes s_m$ of $\sh{L}^{\otimes n}\otimes_{\OO_X}\sh{L}^{\otimes m}$; the associativity
of this multiplication is verified in an immediate way. It is clear that $\Gamma_*(X,\sh{L})$
is a covariant functor in $\sh{L}$, with values in the category of graded rings.

If now $\sh{F}$ is any $\OO_X$-module, we put
\[
  \Gamma_*(\sh{L},\sh{F})
  =\bigoplus_{n\in\bb{Z}}\Gamma(X,\sh{F}\otimes_{\OO_X}\sh{L}^{\otimes n}).
\]
We equip this abelian group with the structure of a \emph{graded module} over the graded
ring $\Gamma_*(\sh{L})$ in the following way: to a pair $(s_n,u_m)$, where
$s_n\in\Gamma(X,\sh{L}^{\otimes n})$ and
$u_m\in\Gamma(X,\sh{F}\otimes_{\OO_X}\sh{L}^{\otimes m})$, we associate the section of
$\sh{F}\otimes_{\OO_X}\sh{L}^{\otimes(m+n)}$ which canonically corresponds (5.4.4.1) to
$s_n\otimes u_m$; the verification of the module axioms are immediate. For $X$ and $\sh{L}$
fixed, $\Gamma_*(\sh{L},\sh{F})$ is a covariant functor in $\sh{F}$ with values in the
category of graded $\Gamma_*(\sh{L})$-modules; for $X$ and $\sh{F}$ fixed, it is a covariant
functor in $\sh{L}$ with values in the category of abelian groups.

If $f:Y\to X$ is a morphism of ringed spaces, the canonical homomorphism (4.4.3.2)
$\rho:\sh{L}^{\otimes n}\to f_*(f^*(\sh{L}^{\otimes n}))$ defines a homomorphism of
abelian groups $\Gamma(X,\sh{L}^{\otimes n})\to\Gamma(Y,f^*(\sh{L}^{\otimes n}))$, and as
$f^*(\sh{L}^{\otimes n})=(f^*(\sh{L}))^{\otimes n})$, it follows from the definitions of the
canonical homomorphisms (4.4.3.2) and (5.4.4.1) that the above homomorphism define a
\emph{functorial homomorphism of graded rings $\Gamma_*(\sh{L})\to\Gamma_*(f^*(\sh{L}))$}.
The same canonical homomorphism \sref{env}{4.4.3} similarly defines a homomorphism of abelian
groups
$\Gamma(X,\sh{F}\otimes_{\OO_X}\sh{L}^{\otimes n})
\to\Gamma(Y,f^*(\sh{F}\otimes_{\OO_X}\sh{L}^{\otimes n}))$, and as
\[
  f^*(\sh{F}\otimes_{\OO_X}\sh{L}^{\otimes n})
  =f^*(\sh{F})\otimes_{\OO_Y}(f^*(\sh{L}))^{\otimes n}
  \quad(4.3.3.1),
\]
\oldpage{51}
these homomorphism (for $n$ variable) define a \emph{di-homomorphism of graded modules
$\Gamma_*(\sh{L},\sh{F})\to\Gamma_*(f^*(\sh{L}),f^*(\sh{F}))$}.
\end{env}

\begin{env}{5.4.7}
\label{env-0.5.4.7}
One can show that there exists a \emph{set} $\mathfrak{M}$ (also denoted $\mathfrak{M}(X)$)
of invertible $\OO_X$-modules such that each invertible $\OO_X$-module is isomorphic to an
element of $\mathfrak{M}$ only one;\footnote{See the book in preparation cited in the
introduction.} we define on $\mathfrak{M}$ a composition law by sendins two elements
$\sh{L}$, $\sh{L}$' of $\mathfrak{M}$ to the unique element of $\mathfrak{M}$ isomorphic to
$\sh{L}\otimes_{\OO_X}\sh{L}'$. With this composition law, \emph{$\mathfrak{M}$ is a group
isomorphic to the cohomology group $\HH^1(X,\OO_X^*)$}, where $\OO_X^*$ is the subsheaf of
$\OO_X$ such that $\Gamma(U,\OO_X^*)$ is the group of invertible elements of the ring
$\Gamma(U,\OO_X)$ for each open $U\subset X$ ($\OO_X^*$ is therefore a sheaf of
\emph{multiplicative} abelian groups).

We will note that for all open $U\subset X$, the group of sections $\Gamma(U,\OO_X^*)$
canonically identifies with the \emph{automorphism group} of the $(\OO_X|U)$-module
$\OO_X|U$, the identification sending a section $\varepsilon$ of $\OO_X^*$ over $U$ to the
automorphism $u$ of $\OO_X|U$ such that $u_x(s_x)=\varepsilon_x s_x$ for all $x\in X$ and
all $s_x\in\OO_x$. Then let $\mathfrak{U}=(U_\lambda)$ be an open cover of $X$; the data, for
each pair of indices $(\lambda,\mu)$, of an automorphism $\theta_{\lambda\mu}$ of
$\OO_X|(U_\lambda\cap U_\mu)$ is the same as giving a \emph{$1$-cochain} of the cover
$\mathfrak{U}$, with values in $\OO_X^*$, and say that the $\theta_{\lambda\mu}$ satisfy the
gluing condition \sref{env}{3.3.1}, meaning that the corresponding cochain is a
\emph{cocycle}. Similarly, the data, for each $\lambda$, of an automorphism $\omega_\lambda$
of $\OO_X|U_\lambda$ is the same as the data of a $0$-cochain of the cover $\mathfrak{U}$,
with values in $\OO_X^*$, and its \emph{coboundary} corresponds to the family of
automorphisms
$(\omega_\lambda|(U_\lambda\cap U_\mu)\circ(\omega_\mu|(U_\lambda\cap U_\mu)^{-1}$. We can
send each $1$-cocycle of $\mathfrak{U}$ with values in $\OO_X^*$ to the element of
$\mathfrak{M}$ isomorphic to an invertible $\OO_X$-module obtained by gluing with respect to
the family of automorphisms $(\theta_{\lambda\mu})$ corresponding to this cocycle, and to
two cohomologous coycles correspond two equal elements of $\mathfrak{M}$ \sref{env}{3.3.2};
in other words, we so define a map
$\vphi_\mathfrak{U}:\HH^1(\mathfrak{U},\OO_X^*)\to\mathfrak{M}$. In addition, if
$\mathfrak{B}$ is a second open cover of $X$, finer than $\mathfrak{U}$, the diagram
\[
  \xymatrix{
    \HH^1(\mathfrak{U},\OO_X^*)\ar[rd]^{\vphi_\mathfrak{U}}\ar[dd]\\
    & \mathfrak{M}\\
    \HH^1(\mathfrak{B},\OO_X^*)\ar[ur]_{\vphi_\mathfrak{B}}
  }
\]
where the vertical arrow is the canonical homomorphism (G, II, 5.7), is commutative, as a
result of \sref{env}{3.3.3}. By passing to the inductive limit, we therefore obtain a map
$\HH^1(X,\OO_X^*)\to\mathfrak{M}$, the \v Cech cohomology group $\check{\HH}^1(X,\OO_X^*)$
identifying as with know with the first homomology group $\HH^1(X,\OO_X^*)$
(G, II, 5.9, Cor. of Thm.~5.9.1). This map is \emph{surjective}: indeed, by definition, for
each invertible $\OO_X$-module $\sh{L}$, there is an open cover $(U_\lambda)$ of $X$ such
that $\sh{L}$ is obtained by gluing the sheaves $\OO_X|U_\lambda$ \sref{env}{3.3.1}. It is
also \emph{injective}, since it suffices to prove for the maps
$\HH^1(\mathfrak{U},\OO_X)\to\mathfrak{M}$, and this follows from \sref{env}{3.3.2}. It
remains to show that
\oldpage{52}
the bijection thus defined is a group homomorphism. Given two invertible $\OO_X$-modules
$\sh{L}$, $\sh{L}'$, there is an open cover $(U_\lambda)$ such that $\sh{L}|U_\lambda$ and
$\sh{L}'|U_\lambda$ are isomorphic to $\OO_X|U_\lambda$ for each $\lambda$; so there is for
each index $\lambda$ an element $a_\lambda$ (resp. $a_\lambda'$) of
$\Gamma(U_\lambda,\sh{L})$ (resp. $\Gamma(U_\lambda,\sh{L}')$) such that the elements of
$\Gamma(U_\lambda,\sh{L})$ (resp. $\Gamma(U_\lambda,\sh{L}')$) are the
$s_\lambda\cdot a_\lambda$ (resp. $s_\lambda\cdot a_\lambda'$), where $s_\lambda$ varies over
$\Gamma(U_\lambda,\OO_X)$. The corresponding cocycles $(\varepsilon_{\lambda\mu})$,
$(\varepsilon_{\lambda\mu}')$ are such that $s_\lambda\cdot a_\lambda=s_\mu\cdot a_\mu$
(resp. $s_\lambda\cdot a_\lambda'=s_\mu\cdot a_\mu'$) over $U_\lambda\cap U_\mu$ is
equivalent to $s_\lambda=\varepsilon_{\lambda\mu}s_\mu$
(resp. $s_\lambda=\varepsilon_{\lambda\mu}'s_\mu$) over $U_\lambda\cap U_\mu$. As the
sections of $\sh{L}\otimes_{\OO_X}\sh{L}'$ over $U_\lambda$ are the finite sums of the
$s_\lambda s_\lambda'\cdot(a_\lambda\otimes a_\lambda')$ where $s_\lambda$ and $s_\lambda'$
vary over $\Gamma(U_\lambda,\OO_X)$, it is clear that the cocycle
$(\varepsilon_{\lambda\mu},\varepsilon_{\lambda\mu}')$ corresponds to
$\sh{L}\otimes_{\OO_X}\sh{L}'$, which finishes the proof.\footnote{For a general form of this
result, see the book cited in the note of p.~51.}
\end{env}

\begin{env}{5.4.8}
\label{env-0.5.4.8}
Let $f=(\psi,\omega)$ be a morphism $Y\to X$ of ringed spaces. The functor $f^*(\sh{L})$ to
the category of free $\OO_X$-modules defines a map (which we still denote $f^*$ by abuse of
language) of the set $\mathfrak{M}(X)$ to the set $\mathfrak{M}(Y)$. Second, we have a
canonical homomorphism (T, 3.2.2)
\[
  \HH^1(X,\OO_X^*)\longrightarrow\HH^1(Y,\OO_Y^*).
  \tag{5.4.8.1}
\]
When we canonically identify \sref{env}{5.4.7} $\mathfrak{M}(X)$ and $\HH^1(X,\OO_X^*)$
(resp. $\mathfrak{M}(Y)$ and $\HH^1(Y,\OO_Y^*)$), the homomorphism (5.4.8.1) \emph{identifies
with the map $f^*$}. Indeed, if $\sh{L}$ comes from a cocycle $(\varepsilon_{\lambda\mu})$
corresponding to an open cover $(U_\lambda)$ of $X$, it suffices to show that $f^*(\sh{L})$
comes from a cocycle whose cohomology class is the image under (5.4.8.1) of
$(\varepsilon_{\lambda\mu})$. If $\theta_{\lambda\mu}$ is the automorphism of
$\OO_X|(U_\lambda\cap U_\mu)$ which corresponds to $\varepsilon_{\lambda\mu}$, it is clear
that $f^*(\sh{L})$ is obtained by gluing the $\OO_Y|\psi^{-1}(U_\lambda)$ by means of the
automorphisms $f^*(\theta_{\lambda\mu})$, and it then suffices to check that these latter
automorphisms corresponds to the cocycle $(\omega^\sharp(\varepsilon_{\lambda\mu}))$, which
follows immediately from te definitions (we can identify $\varepsilon_{\lambda\mu}$ with its
canonical image under $\rho$ \sref{env}{3.7.2}, a section of $\psi^*(\OO_X^*)$ over
$\psi^{-1}(U_\lambda\cap U_\mu)$).
\end{env}

\begin{env}{5.4.9}
\label{env-0.5.4.9}
Let $\sh{E}$, $\sh{F}$ be two $\OO_X$-modules, $\sh{F}$ assumed to be \emph{locally free},
and let $\sh{G}$ be an \emph{$\OO_X$-module extension of $\sh{F}$ by $\sh{E}$}, in other
words there exists an exact sequence
$0\to\sh{E}\xrightarrow{i}\sh{G}\xrightarrow{p}\sh{F}\to 0$. Then, for each $x\in X$, there
exists an open neighborhood $U$ of $x$ such that $\sh{G}|U$ is isomorphic to the \emph{direct
sum $\sh{E}|U\oplus\sh{F}|U$}. In fact, we can reduce to the case where $\sh{F}=\OO_X^n$; let
$e_i$ ($1\leqslant i\leqslant n$) be the canonical sections \sref{env}{5.5.5} of $\OO_X^n$;
there then exists an open neighborhood $U$ of $x$ and $n$ sections $s_i$ of $\sh{G}$ over $U$
such that $p(s_i|U)=e_i|U$ for $1\leqslant i\leqslant n$. That being so, let $f$ be the
homomorphism $\sh{F}|U\to\sh{G}|U$ defined by the sections $s_i|U$ \sref{env}{5.1.1}. It is
immediate that for each open $V\subset U$, and each section $s\in\Gamma(V,\sh{G})$ we have
$s-f(p(s))\in\Gamma(V,\sh{E})$, hence our assertion.
\end{env}

\begin{env}{5.4.10}
\label{env-0.5.4.10}
Let $f:X\to Y$ be a morphism of ringed spaces, $\sh{F}$ an $\OO_X$-module, $\sh{L}$ a locally
free $\OO_Y$-module of finite rank. Then there exists a canonical isomorphism
\[
  f_*(\sh{F})\otimes_{\OO_Y}\sh{L}\isoto f_*(\sh{F}\otimes_{\OO_X}f^*(\sh{L}))
  \tag{5.4.10.1}
\]

\oldpage{53}
Indeed, for each $\OO_Y$-module $\sh{L}$, we have a canonical homomorphism
\[
  f_*(\sh{F})\otimes_{\OO_Y}\sh{L}
  \xrightarrow{1\otimes\rho}f_*(\sh{F})\otimes_{\OO_Y}f_*(f^*(\sh{L}))
  \xrightarrow{\alpha}f_*(\sh{F}\otimes_{\OO_X}f^*(\sh{L})),
\]
$\rho$ the homomorphism (4.4.3.2) and $\alpha$ the homomorphism (4.2.2.1). To show that when
$\sh{L}$ is locally free, this homomorphism is bijective, it suffices, the question being
local, to consider the case where $\sh{L}=\OO_X^n$; in addition, $f_*$ and $f^*$ commute with
finite direct sums, so we can assume $n=1$, and in this case the proposition follows
immediately from the definitions and from the relation $f^*(\OO_Y)=\OO_X$.
\end{env}

\subsection{Sheaves on a locally ringed space}
\label{0-prelim-5.5}

\begin{env}{5.5.1}
\label{env-0.5.5.1}
We say that a ringed space $(X,\OO_X)$ is a \emph{locally ringed space} if, for each
$x\in X$, $\OO_x$ is a local ring; these ringed spaces will be by far the most frequent
ringed spaces that we will consider in this work. We then denote by $\mathfrak{m}_x$ the
\emph{maximal ideal} of $\OO_x$, by $\kres(x)$ the \emph{residue field
$\OO_x/\mathfrak{m}_x$}; for each $\OO_X$-module $\sh{F}$, each open set $U$ of $X$, each
point $x\in U$, and each section $f\in\Gamma(U,\sh{F})$, we denote by $f(x)$ the \emph{class}
of the germ $f_x\in\sh{F}_x$ mod $\mathfrak{m}_x\sh{F}_x$, and we say that this is the
\emph{value} of $f$ at the point $x$. The relation $f(x)=0$ then means that
$f_x\in\mathfrak{m}_x\sh{F}_x$; when this is so, we say (by abuse of language) that
\emph{$f$ is zero at $x$}. We will take care not to confuse this relation with $f_x=0$.
\end{env}

\begin{env}{5.5.2}
\label{env-0.5.5.2}
Let $X$ be a locally ringed space, $\sh{L}$ an invertible $\OO_X$-module, $f$ a section of
$\sh{L}$ over $X$. There is then an \emph{equivalence} between the three following properties
for a point $x\in X$:
\begin{enumerate}[label=(\alph*)]
  \item \emph{$f_x$ is a generator of $\sh{L}_x$};
  \item \emph{$f_x\not\in\mathfrak{m}_x\sh{L}_x$} (in other words, $f(x)\neq 0$);
  \item \emph{there exists a section $g$ of $\sh{L}^{-1}$ over an open neighborhood $V$ of
        $x$ such that the canonical image of $f\otimes g$ in $\Gamma(V,\OO_X)$
        \sref{env}{5.4.3} is the unit section}.
\end{enumerate}

Indeed, the question being local, we can reduce to the case where $\sh{L}=\OO_X$; the
equivalence of (a) and (b) are then evident, and it is clear that (c) implies (b).
Conversely, if $f_x\not\in\mathfrak{m}_x$, $f_x$ is invertible in $\OO_x$, say $f_x g_x=1_x$.
By definition of germs of sections, this means that there exists a neighborhood $V$ of $x$
and a section $g$ of $\OO_X$ over $V$ such that $fg=1$ in $V$, hence (c).

It follows immediately from the condition (c) that the set $X_f$ of $x$ satisfying the
equivalent conditions (a), (b), (c) is \emph{open} in $X$; following the terminology
introduced in \sref{env}{5.5.1}, this is the set of the $x$ for which \emph{$f$ does not
vanish}.
\end{env}

\begin{env}{5.5.3}
\label{env-0.5.5.3}
Under the hypotheses of \sref{env}{5.5.2}, let $\sh{L}'$ be a second invertible
$\OO_X$-module; then, if $f\in\Gamma(X,\sh{L})$, $g\in\Gamma(X,\sh{L}')$, we have
\[
  X_f\cap X_g=X_{f\otimes g}.
\]

We can in fact reduce immediately to the case where $\sh{L}=\sh{L}'=\OO_X$ (the question
being local); as $f\otimes g$ then canonically identifies with the product $fg$, the
proposition is evident.
\end{env}

\begin{env}{5.5.4}
\label{env-0.5.5.4}
\oldpage{54}
Let $\sh{F}$ be a locally free $\OO_X$ of rank $n$; it is immediate that $\wedge^p\sh{F}$ is
a locally free $\OO_X$-module of rank $\binom{n}{p}$ if $p\leqslant n$, reduced to $0$ if
$p>n$, since the question is local and we can reduce to the case where $\sh{F}=\OO_X^n$;
in addition, for each $x\in X$, $(\wedge^p\sh{F})_x/\mathfrak{m}_x(\wedge^p\sh{F})_x$ is a
vector space of dimension $\binom{n}{p}$ over $\kres(x)$, which canonically identifies with
$\wedge^p(\sh{F}_x/\mathfrak{m}_x\sh{F}_x)$. Let $s_1,\dots,s_p$ be the sections of $\sh{F}$
over an open set $U$ of $X$, and let $s=s_1\wedge\cdots\wedge s_p$, which is a section of
$\wedge^p\sh{F}$ over $U$ \sref{env}{4.1.5}; we have $s(x)=s_1(x)\wedge\cdots\wedge s_p(x)$,
and as a result, we say that the $s_1(x),\dots,s_p(x)$ are \emph{linearly dependent} means
that $s(x)=0$. We conclude that the \emph{set of the $x\in X$ such that $s_1(x),\dots,s_p(x)$
are linearly independent is open in $X$}: it suffices in fact, by reducing to the case where
$\sh{F}=\OO_X^n$, to apply \sref{env}{5.5.2} to the section image of $s$ under one of the
projections of $\wedge^p\sh{F}=\OO_X^{\binom{n}{p}}$ to the $\binom{n}{p}$ factors.

In particular, if $s_1,\dots,s_n$ are $n$ sections of $\sh{F}$ over $U$ such that
$s_1(x),\dots,s_n(x)$ are linealy independent for each point $x\in U$, the homomorphism
$u:\OO_X^n|U\to\sh{F}|U$ defined by the $s_i$ \sref{env}{5.1.1} is an \emph{isomorphism}:
indeed, we can restrict to the case where $\sh{F}=\OO_X^n$ and where we canonically identify
$\wedge^n\sh{F}$ and $\OO_X$; $s=s_1\wedge\cdots\wedge s_n$ is then an \emph{invertible}
section of $\OO_X$ over $U$, and we define an inverse homomorphism for $u$ by means of the
Cramer formulas.
\end{env}

\begin{env}{5.5.5}
\label{env-0.5.5.5}
Let $\sh{E}$, $\sh{F}$ be two locally free $\OO_X$-modules (of finite rank), and let
$u:\sh{E}\to\sh{F}$ be a homomorphism. For there to exist a neighborhood $U$ of $x\in X$ such
that $u|U$ is \emph{injective} and that $\sh{F}|U$ is \emph{the direct sum of the
$u(\sh{E}|U$ and of a locally free $(\OO_X|U)$-submodule $\sh{G}$}, it is necessary and
sufficient that $u_x:\sh{E}_x\to\sh{F}_x$ gives, by passing to quotients, an \emph{injective}
homomorphism of vector spaces
$\sh{E}_x/\mathfrak{m}_x\sh{E}_x\to\sh{F}_x/\mathfrak{m}_x\sh{F}_x$. The condition is indeed
\emph{necessary}, since $\sh{F}_x$ is then the direct sum of the free $\OO_x$-modules
$u_x(\sh{E}_x)$ and $\sh{G}_x$, so $\sh{F}_x/\mathfrak{m}_x\sh{F}_x$ is the direct sum of
$u_x(\sh{E}_x)/\mathfrak{m}_x u_x(\sh{E}_x)$ and of $\sh{G}_x/\mathfrak{m}_x\sh{G}_x$. The
condition is \emph{sufficient}, since we can reduce to the case where $\sh{E}=\OO_X^m$; let
$s_1,\dots,s_m$ be the images under $u$ of the sections $e_i$ of $\OO_X^m$ such that
$(e_i)_y$ is equal to the $i$-th element of the canonical basis of $\OO_y^m$ for each
$y\in Y$ (\emph{canonical sections} of $\OO_X^m$); by hypothesis $s_1(x),\dots,s_m(x)$ are
linearly independent, so, if $\sh{F}$ is of rank $n$, there exists $n-m$ sections
$s_{m+1},\dots,s_n$ of $\sh{F}$ over a neighborhood $V$ of $x$ such that the $s_i(x)$
($1\leqslant i\leqslant n$) form a basis for $\sh{F}_x/\mathfrak{m}_x\sh{F}_x$. There then
exists \sref{env}{5.5.4} a neighborhood $U\subset V$ of $x$ such that the $s_i(y)$
($1\leqslant i\leqslant n$) form a basis for $\sh{F}_y/\mathfrak{m}_y\sh{F}_y$ for each
$y\in V$, and we conclude \sref{env}{5.5.4} that there is an isomorphism from $\sh{F}|U$ to
$\OO_X^n|U$, sending the $s_i|U$ ($1\leqslant i\leqslant m$) to the $e_i|U$, which finishes
the proof.
\end{env}

\section{Flatness}
\label{0-prelim-6}

\begin{env}{6.0}
\label{env-0.6.0.0}
The notion of flatness is due to J.-P.~Serre \cite{16}; in the following, we omit the
proofs of the results which are presented in the \emph{Alg\`ebre commutative} of N.~Bourbaki,
to which we refer the reader. We assume that all rings are commutative.\footnote{See the
expos\'e cited of N.~Bourbaki for the generalization from most of the results to the
noncommutative case.}

\oldpage{55}
If $M$, $N$ are two $A$-modules, $M'$ (resp. $N'$) a submodule of $M$ (resp. $N$), we denote
by $\Im(M'\otimes_A N')$ the submodule of $M\otimes_A N$, the image under the canonical map
$M'\otimes_A N'\to M\otimes_A N$.
\end{env}

\subsection{Flat modules}
\label{0-prelim-6.1}

\subsection{Change of ring}
\label{0-prelim-6.2}

\subsection{Local nature of flatness}
\label{0-prelim-6.3}

\subsection{Faithfully flat modules}
\label{0-prelim-6.4}

\subsection{Restriction of scalars}
\label{0-prelim-6.5}

\subsection{Faithfully flat rings}
\label{0-prelim-6.6}

\subsection{Flat morphisms of ringed spaces}
\label{0-prelim-6.7}

\section{Adic rings}
\label{0-prelim-7}

\subsection{Admissible rings}
\label{0-prelim-7.1}

\subsection{Adic rings and projective limits}
\label{0-prelim-7.2}

\subsection{Pre-adic Noetherian rings}
\label{0-prelim-7.3}

\subsection{Quasi-finite modules over local rings}
\label{0-prelim-7.4}

\subsection{Rings of restricted formal series}
\label{0-prelim-7.5}

\subsection{Completed rings of fractions}
\label{0-prelim-7.6}

\subsection{Completed tensor products}
\label{0-prelim-7.7}

\subsection{Topologies on modules of homomorphisms}
\label{0-prelim-7.8}


\ProvidesPackage{preamble}

\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}
\usepackage{microtype}
\usepackage[left=0.75in,right=0.75in,top=0.75in,bottom=0.75in]{geometry}
\usepackage[all]{xy}
\usepackage{enumitem}
\usepackage{color}
\usepackage{soul}
\usepackage{fancyhdr}
\usepackage{mathtools}
\usepackage{amssymb}
\usepackage{amsthm}
\usepackage[charter,
            greekfamily=didot,
            uppercase=upright,
            greeklowercase=upright]{mathdesign}
\usepackage[compact]{titlesec}
\usepackage[colorlinks=true,hyperindex,citecolor=blue,linkcolor=magenta]{hyperref}
\usepackage{bookmark}
\usepackage[asterism]{sectionbreak}


%%%%%%%%%%%%%%
% formatting %
%%%%%%%%%%%%%%

\allowdisplaybreaks[1]
\binoppenalty=9999
\relpenalty=9999
\setitemize{nosep}

% for Chapter 0, Chapter I, etc.
% credit for ZeroRoman https://tex.stackexchange.com/questions/211414/
\newcommand{\ZeroRoman}[1]{\ifcase\value{#1}\relax 0\else\Roman{#1}\fi}
\renewcommand{\thechapter}{\ZeroRoman{chapter}}

%%%%%%%%%%%%%%%%%
% math commands %
%%%%%%%%%%%%%%%%%

% for easy changes to style
\newcommand{\sh}{\mathscr}         % sheaf font
\newcommand{\bb}{\mathbf}          % bold font
\newcommand{\cat}{\mathsf}         % category font
%
\newcommand{\rad}{\mathfrak{r}}    % radical
\newcommand{\nilrad}{\mathfrak{R}} % nilradical
\newcommand{\emp}{\varnothing}     % empty set
\newcommand{\vphi}{\phi}           % font switches \phi and \varphi, change if needed
\newcommand{\HH}{\mathrm{H}}       % cohomology
\newcommand{\dual}[1]{{#1}^\vee}   % dual
\renewcommand{\k}{\bb{k}}          % residue field
\newcommand{\K}{\cat{K}}           % category
\newcommand{\OO}{\sh{O}}           % structure sheaf
\newcommand{\F}{\sh{F}}            % sheaf F
\newcommand{\G}{\sh{G}}            % sheaf G

% operators
%\newcommand*{\sheafHom}{\mathscr{H}\text{\normalfont\kern -3pt {\calligra\large om}}\,}
\def\shHom{\sh{H}\textit{om}} % sheaf Hom
\def\Hom{{\mathop{\mathrm{Hom}}\nolimits}}
\def\Supp{{\mathop{\mathrm{Supp}}\nolimits}}
\def\img{{\mathop{\mathrm{im}}\nolimits}}
\def\Spec{{\mathop{\mathrm{Spec}}\nolimits}}

% if unsure of a translation
\newcommand{\unsure}[2][]{\hl{#2}\marginpar{#1}}
\newcommand{\completelyunsure}{\unsure{[\ldots]}}

% use to mark where original page starts
\newcommand{\oldpage}[1]{\marginpar{\textbf{#1}}\ignorespaces}

% special ref
\newcommand{\sref}[2]{\hyperref[#1-\arabic{chapter}.#2]{\normalfont{(#2)}}}

% ref prelim
\newcommand{\pref}[2]{\hyperref[#1-0.#2]{\normalfont{(\textbf{0}, #2)}}}

%% ref out of chapter
%\newcommand{\cref}[4]{\hyperref[#1-#2.#3]{\normalfont{(\textbf{#3}, #4)}}}

% currently this works as \begin{env}[optional rmk]{x.y.z}
\makeatletter
\newenvironment{env}[2][\@nil]{%
    \def\tmp{#1}%
    \ifx\tmp\@nnil
        \par\medskip\noindent\indent\textbf{(#2)}\rmfamily
    \else
        \par\medskip\noindent\indent\textit{\textbf{#1}}~\textbf{(#2)}.\,---\rmfamily
    \fi}
\makeatother

% use this for definitions, propositions, corollaries, etc.
\makeatletter
\newenvironment{envs}[2][\@nil]{
  \par\medskip\noindent\indent\textit{\textbf{#1}}~\textbf{(#2)}.\,---\itshape
}
\makeatother


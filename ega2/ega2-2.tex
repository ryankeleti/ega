\section{Homogeneous prime spectra}
\label{section:II.2}

\subsection{Generalities on graded rings and modules}
\label{subsection:II.2.1}

\begin{notation}[2.1.1]
\label{II.2.1.1}
Given a \emph{positively-graded} ring $S$, we denote by $S_n$ the subset of $S$ consisting of homogeneous elements of degree $n$ ($n\geq 0$), by $S_+$ the (direct) sum of the $S_n$ for $n>0$;
we have $1\in S_0$, $S_0$ is a subring of $S$, $S_+$ is a graded ideal of $S$, and $S$ is the direct sum of $S_0$ and $S_+$.
If $M$ is a \emph{graded} module over $S$ (with positive or negative degrees), we similarly denote by $M_n$ the $S_0$-module consisting of homogeneous elements of $M$ of degree $n$ (with $n\in\bb{Z}$).

For every integer $d>0$, we denote by $S^{(d)}$ the direct sum of the $S_{nd}$;
by considering the elements of $S_{nd}$ as homogeneous of degree $n$, the $S_{nd}$ define on $S^{(d)}$ a graded ring structure.

For every integer $k$ such that $0\leq k\leq d-1$, we denote by $M^{(d,k)}$ the direct sum
\oldpage[II]{20}
of the $M_{nd+k}$ ($n\in\bb{Z}$);
this is a graded $S^{(d)}$-module when we consider the elements of $M_{nd+k}$ as homogeneous of degree $n$.
We write $M^{(d)}$ in place of $M^{(d,0)}$.

With the above notation, for every integer $n$ (positive or negative), we denote by $M(n)$ the graded $S$-module defined by $(M(n))_k=M_{n+k}$ for every $k\in\bb{Z}$.
In particular, $S(n)$ will be a graded $S$-module such that $(S(n))_k=S_{n+k}$, by agreeing to set $S_n=0$ for $n<0$.
We say that a graded $S$-module $M$ is \emph{free} if it is isomorphic, considered as a \emph{graded} module, to a direct sum of modules of the form $S(n)$;
as $S(n)$ is a monogeneous $S$-module, generated by the element $1$ of $S$ considered as an element of degree $-n$, it is equivalent to say that $M$ admits a \emph{basis} over $S$ consisting of \emph{homogeneous} elements.

We say that a graded $S$-module $M$ \emph{admits a finite presentation} if there exists an exact sequence $P\to Q\to M\to 0$, where $P$ and $Q$ are finite direct sums of modules of the form $S(n)$ and the homomorphisms are of degree $0$ (cf.~\sref{II.2.1.2}).
\end{notation}

\begin{env}[2.1.2]
\label{II.2.1.2}
Let $M$ and $N$ be two graded $S$-modules;
we define on $M\otimes_S N$ a \emph{graded} $S$-module structure in the following way.
On the tensor product $M\otimes_\bb{Z}N$, we can define a graded $\bb{Z}$-module structure (where $\bb{Z}$ is graded by $\bb{Z}_0=\bb{Z}$, $\bb{Z}_n=0$ for $n\neq 0$) by setting $(M\otimes_\bb{Z}N)_q=\bigoplus_{m+n=q}M_m\otimes_\bb{Z}N_n$ (as $M$ and $N$ are respectively direct sums of the $M_m$ and the $N_n$, we know that we can canonically identify $M\otimes_\bb{Z}N$ with the direct sum of all the $M_m\otimes_\bb{Z}N_n$).
This being so, we have $M\otimes_S N=(M\otimes_\bb{Z}N)/P$, where $P$ is the $\bb{Z}$-submodule of $M\otimes_\bb{Z}N$ generated by the elements $(xs)\otimes y-x\otimes(sy)$ for $x\in M$, $y\in N$, $s\in S$;
it is clear that $P$ is a \emph{graded} $\bb{Z}$-submodule of $M\otimes_\bb{Z}N$, and we see immediately that we obtain a graded $S$-module structure on $M\otimes_S N$ by passing to the quotient.

For two graded $S$-modules $M$ and $N$, recall that a homomorphism $u:M\to N$ of $S$-modules is said to be \emph{of degree $k$} if $u(M_j)\subset N_{j+k}$ for all $j\in\bb{Z}$.
If $H_n$ denotes the set of all the homomorphisms of degree $n$ from $M$ to $N$, then we denote by $\Hom_S(M,N)$ the (direct) \emph{sum} of the $H_n$ ($n\in\bb{Z}$) in the $S$-module $H$ of all the homomorphisms (of $S$-modules) from $M$ to $N$;
in general, $\Hom_S(M,N)$ is not equal to the later.
However, we have $H=\Hom_S(M,N)$ when $M$ is \emph{of finite type};
indeed, we can then suppose that $M$ is generated by a finite number of homogeneous elements $x_i$ ($1\leq i\leq n$), and every homomorphism $u\in H$ can be written in a unique way as $\sum_{k\in\bb{Z}}u_k$, where for each $k$, $u_k(x_i)$ is equal to the homogeneous component of degree $k+\deg(x_i)$ of $u(x_i)$ ($1\leq i\leq n$), which implies that $u_k=0$ except for a finite number of indices;
we have by definition that $u_k\in H_k$, hence the conclusion.

We say that the elements of degree $0$ of $\Hom_S(M,N)$ are the \emph{homomorphisms of graded $S$-modules}.
It is clear that $S_m H_n\subset H_{m+n}$, so the $H_n$ define on $\Hom_S(M,N)$ a graded $S$-module structure.

It follows immediately from these definitions that we have
\[
\label{II.2.1.2.1}
  M(m)\otimes_S N(n)=(M\otimes_S N)(m+n),
\tag{2.1.2.1}
\]
\[
\label{II.2.1.2.2}
  \Hom_S(M(m),N(n))=(\Hom_S(M,N))(n-m),
\tag{2.1.2.2}
\]
for two graded $S$-modules $M$ and $N$.

\oldpage[II]{21}
Let $S$ and $S'$ be two graded rings;
a homomorphism of \emph{graded rings $\vphi:S\to S'$} is a homomorphism of rings such that $\vphi(S_n)\subset S_n'$ for all $n\in\bb{Z}$ (in other words, $\vphi$ must be a homomorphism \emph{of degree $0$} of graded $\bb{Z}$-modules).
The data of such a homomorphism defines on $S'$ a \emph{graded} $S'$-module structure;
equipped with this structure and its graded ring structure, we say that $S'$ is a \emph{graded $S'$-algebra}.

If $M$ is also a graded $S$-module, then the tensor product $M\otimes_S S'$ of \emph{graded} $S$-modules is equipped in a natural way with a \emph{graded} $S'$-module structure, the grading being defined as above.
\end{env}

\begin{lemma}[2.1.3]
\label{II.2.1.3}
Let $S$ be a ring graded in positive degrees.
For a subset $E$ of $S_+$ consisting of homogeneous elements to generate $S_+$ as an $S$-module, it is necessary and sufficient for $E$ to generate $S$ an an $S_0$-algebra.
\end{lemma}

\begin{proof}
The condition is evidently sufficient; we show that it is necessary.
Let $E_n$ (resp. $E^n$) be the set of elements of $E$ equal to $n$ (resp. $\leq n$);
it suffices to show, by induction on $n>0$, that $S_n$ is the $S_0$-module generated by the elements of degree $n$ which are products of elements of $E^n$.
This is evident for $n=1$ by virtue of the hypothesis;
the latter also shows that $S_n=\sum_{p=0}^{n-1}S_p E_{n-p}$, and the induction argument is then immediate.
\end{proof}

\begin{corollary}[2.1.4]
\label{II.2.1.4}
For $S_+$ to be an ideal of finite type, it is necessary and sufficient for $S$ to be an $S_0$-algebra of finite type.
\end{corollary}

\begin{proof}
We can always assume that a finite system of generators of the $S_0$-algebra $S$ (resp. of the $S$-ideal $S_+$) consists of homogeneous elements, by replacing each of the generators considered by its homogeneous components.
\end{proof}

\begin{corollary}[2.1.5]
\label{II.2.1.5}
For $S$ to be Noetherian, it is necessary and sufficient for $S_0$ to be Noetherian and for $S$ to be an $S_0$-algebra of finite type.
\end{corollary}

\begin{proof}
The condition is evidently sufficient;
it is necessary, since $S_0$ is isomorphic to $S/S_+$ and $S_+$ must be an ideal of finite type \sref{II.2.1.4}.
\end{proof}

\begin{lemma}[2.1.6]
\label{II.2.1.6}
Let $S$ be a ring graded in positive degrees, which is an $S_0$-algebra of finite type.
Let $M$ be a graded $S$-module of finite type.
Then:
\begin{enumerate}
  \item[{\rm(i)}] The $M_n$ are $S_0$-modules of finite type, and there exists an integer $n_0$ such that $M_n=0$ for $n\leq n_0$.
  \item[{\rm(ii)}] There exists an integer $n_1$ and an integer $h>0$ such that, for every integer $n\geq n_1$, we have $M_{n+h}=S_h M_n$.
  \item[{\rm(iii)}] For every pair of integers $(d,k)$ such that $d>0$, $0\leq k\leq d-1$, $M^{(d,k)}$ is an $S^{(d)}$-module of finite type.
  \item[{\rm(iv)}] For every integer $d>0$, $S^{(d)}$ is an $S_0$-algebra of finite type.
  \item[{\rm(v)}] There exists an integer $h>0$ such that $S_{mh}=(S_h)^m$ for all $m>0$.
  \item[{\rm(vi)}] For every integer $n>0$, there exists an integer $m_0$ such that $S_m\subset S_+^n$ for all $m\geq m_0$.
\end{enumerate}
\end{lemma}

\begin{proof}
We can assume that $S$ is generated (as an $S_0$-algebra) by homogeneous elements $f_i$, of degrees $h_i$ ($1\leq i\leq r$), and $M$ is generated (as an $S$-module) by homogeneous elements $x_j$ of degrees $k_j$ ($1\leq j\leq s$).
It is clear that $M_n$ is formed by linear combinations,
\oldpage[II]{22}
with coefficients in $S_0$, of elements $f_1^{\alpha_1}\cdots f_r^{\alpha_r}x_j$ such that the $\alpha_i$ are integers $\geq 0$ satisfying $k_j+\sum_i\alpha_i h_i=n$;
for each $j$, there are only finitely many systems $(\alpha_i)$ satisfying this equation, since the $h_i$ are $>0$, hence the first assertion of (i);
the second is evident.
On the other hand, let $h$ be the l.c.m. of the $h_i$ and set $g_i=f_i^{h/h_i}$ ($1\leq i\leq r$) such that all the $g_i$ are of degree $h$;
let $z_\mu$ be the elements of $M$ of the form $f_1^{\alpha_1}\cdots f_r^{\alpha_r}x_j$ with $0\leq\alpha_i<h/h_i$ for $1\leq i\leq r$;
there are finitely many of these elements, so let $n_1$ be the largest of their degrees.
It is clear that for $n\geq n_1$, every element of $M_{n+h}$ is a linear combination of the $z_\mu$ whose coefficients are monomials of degree $>0$ with respect to the $g_i$, so we have $M_{n+h}=S_h M_n$, which establishes (ii).
In a similar way, we see (for all $d>0$) that an element of $M^{(d,k)}$ is a linear combinations, with coefficients in $S_0$, of elements of the form $g^d f_1^{\alpha_1}\cdots f_r^{\alpha_r}x_j$ with $0\leq\alpha_i<d$, $g$ being a homogeneous element of $S$;
hence (iii);
(iv) then follows from (iii) and from Lemma~\sref{II.2.1.3}, by taking $M=S_+$, since $(S_+)^{(d)}=(S^{(d)})_+$.
The assertion of (v) is deduced from (ii) by taking $M=S$.
Finally, for a given $n$, there are finitely many systems $(\alpha_i)$ such that $\alpha_i\geq 0$ and $\sum_i\alpha_i<n$, so if $m_0$ is the largest value of the sum $\sum_i\alpha_i h_i$ of these systems, then we have $S_m\subset S_+^n$ for $m>m_0$, which proves (vi).
\end{proof}

\begin{corollary}[2.1.7]
\label{II.2.1.7}
If $S$ is Noetherian, then so is $S^{(d)}$ for every integer $d>0$.
\end{corollary}

\begin{proof}
This follows from \sref{II.2.1.5} and \sref{II.2.1.6}[iv].
\end{proof}

\begin{env}[2.1.8]
\label{II.2.1.8}
Let $\mathfrak{p}$ be a \emph{graded} prime ideal of the graded ring $S$;
$\mathfrak{p}$ is thus a direct sum of the subgroups $\mathfrak{p}_n=\mathfrak{p}\cap S_n$.
Suppose that \emph{$\mathfrak{p}$ does not contain $S_+$}.
Then if $f\in S_+$ is not in $\mathfrak{p}$, the relation $f^n x\in\mathfrak{p}$ is equivalent to $x\in\mathfrak{p}$;
in particular, if $f\in S_d$ ($d>0$), for all $x\in S_{m-nd}$, then the relation $f^n x\in\mathfrak{p}_m$ is equivalent to $x\in\mathfrak{p}_{m-nd}$.
\end{env}

\begin{proposition}[2.1.9]
\label{II.2.1.9}
Let $n_0$ be an integer $>0$;
for all $n\geq n_0$, let $\mathfrak{p}_n$ be a subgroup of $S_n$.
For there to exist a graded prime ideal $\mathfrak{p}$ of $S$ not containing $S_+$ and such that $\mathfrak{p}\cap S_n=\mathfrak{p}_n$ for all $n\geq n_0$, it is necessary and sufficient for the following coniditions to be satisfied:
\begin{enumerate}
  \item[{\rm(1st)}] $S_m\mathfrak{p}_n\subset\mathfrak{p}_{m+n}$ for all $m\geq 0$ and all $n\geq n_0$.
  \item[{\rm(2nd)}] For $m\geq n_0$, $n\geq n_0$, $f\in S_m$, $g\in S_n$, the relation $fg\in\mathfrak{p}_{m+n}$ implies $f\in\mathfrak{p}_m$ or $g\in\mathfrak{p}_n$.
  \item[{\rm(3rd)}] $\mathfrak{p}_n\neq S_n$ for at least one $n\geq n_0$.
\end{enumerate}
In addition, the graded prime ideal $\mathfrak{p}$ is then unique.
\end{proposition}

\begin{proof}
It is evident that the conditions (1st) and (2nd) are necessary.
In addition, if $\mathfrak{p}\not\supset S_+$, then there exists at least one $k>0$ such that $\mathfrak{p}\cap S_k\neq S_k$;
if $f\in S_k$ is not in $\mathfrak{p}$, the relation $\mathfrak{p}\cap S_n=S_n$ implies $\mathfrak{p}\cap S_{n-mk}=S_{n-mk}$ according to \sref{2.2.1.8};
therefore, if $\mathfrak{p}\cap S_n=S_n$ for a certain value of $n$, we would have $\mathfrak{p}\supset S_+$ contrary to the hypothesis, which proves that (3rd) is necessary.
Conversely, suppose that the conditions (1st), (2nd), and (3rd) are satisfied.
Note that if for an integer $d\geq n_0$, $f\in S_d$ is not in $\mathfrak{p}_d$, then, if $\mathfrak{p}$ exists, $\mathfrak{p}_m$, for $m<n_0$, is necessarily equal to the set of the $x\in S_m$ such that $f^r x\in\mathfrak{p}_{m+rd}$, except for a finite number of values of $r$.
This already proves that if $\mathfrak{p}$ exists, then it is unique.
It remains to show that if we define the $\mathfrak{p}_m$ for $m<n_0$ by the previous condition, then $\mathfrak{p}=\sum_{n=0}^\infty\mathfrak{p}_n$ is a prime ideal.
First, note that by virtue of (2nd), for $m\geq n_0$, $\mathfrak{p}_m$ is also defined as the set of the $x\in S_m$ such that $f^r x\in\mathfrak{p}_{m+rd}$ except for a finite number of values of $r$.
This
\oldpage[II]{23}
being so, if $g\in S_m$, $x\in\mathfrak{p}_n$, then we have $f^r gx\in\mathfrak{p}_{m+n+rd}$ except for a finite number of values of $r$, so $gx\in\mathfrak{p}_{m+n}$, which proves that $\mathfrak{p}$ is an ideal of $S$.
To establish that this ideal is prime, in other words that the ring $S/\mathfrak{p}$, graded by the subgroups $S_n/\mathfrak{p}_n$, is an integral domain, it suffices (by considering the components of higher degree of two elements of $S/\mathfrak{p}$) to prove that if $x\in S_m$ and $y\in S_n$ are such that $x\not\in\mathfrak{p}_m$ and $y\not\in\mathfrak{p}_n$, then $xy\not\in\mathfrak{p}_{m+n}$.
If not, for $r$ large enough, we would have $f^{2r}xy\in\mathfrak{p}_{m+n+2rd}$;
but we have $f^r y\not\in\mathfrak{p}_{n+rd}$ for all $r>0$;
it then follows from (2nd) that, except for a finite number of values of $r$, we have $f^r x\in\mathfrak{p}_{m+rd}$, and we conclude that $x\in\mathfrak{p}_m$ contrary to the hypothesis.
\end{proof}

\begin{env}[2.1.10]
\label{II.2.1.10}
We say that a subset $\mathfrak{J}$ of $S_+$ is an \emph{ideal of $S_+$} if it is an ideal of $S$, and $\mathfrak{J}$ is a \emph{graded prime ideal of $S_+$} if it is the intersection of $S_+$ and a graded prime ideal of $S$ \emph{not containing $S_+$} (this prime ideal is also unique according to Proposition~\sref{II.2.1.9}).
If $\mathfrak{J}$ is an ideal of $S_+$, the \emph{radical of $\mathfrak{J}$ in $S_+$} is the set of elements of $S_+$ which have a power in $\mathfrak{J}$, in other words the set $\rad_+(\mathfrak{J})=\rad(\mathfrak{J})\cap S_+$;
in particular, the radical of $0$ in $S_+$ is then called the \emph{nilradical} of $S_+$ and denoted by $\nilrad_+$: this is the set of nilpotent elements of $S_+$.
If $\mathfrak{J}$ is an \emph{graded} ideal of $S_+$, then its radical $\rad_+(\mathfrak{J})$ is a \emph{graded} ideal: by passing to the quotient ring $S/\mathfrak{J}$, we can reduce to the case $\mathfrak{J}=0$, and it remains to see that if $x=x_h+x_{h+1}+\cdots+x_k$ is nilpotent, then so are the $x_i\in S_i$ ($1\leq h\leq i\leq k$);
we can assume $x_k\neq 0$ and the component of highest degree of $x^n$ is then $x_k^n$, hence $x_k$ is nilpotent, and we then argue by induction on $k$.
We say that the graded ring $S$ is \emph{essentially reduced} if $\nilrad_+=0$, in other words, if $S_+$ does not contain nilpotent elements $\neq 0$.
\end{env}

\begin{env}[2.1.11]
\label{II.2.1.11}
We note that if, in the graded ring $S$, an element $x$ is a zero-divisor, then so is its component of highest degree.
We say that a ring $S$ is \emph{essentially integral} if the ring $S_+$ (\emph{without the unit element}) does not contain a zero-divisor and is $\neq 0$;
it suffices that a homogeneous element $\neq 0$ in $S_+$ is not a zero-divisor in this ring.
It is clear that if $\mathfrak{p}$ is a graded prime ideal of $S_+$, then $S/\mathfrak{p}$ is essentially integral.

Let $S$ be an essentially integral graded ring, and let $x_0\in S_0$:
if there then exists \emph{a} homogeneous element $f\neq 0$ of $S_+$ such that $x_0 f=0$, then we have $x_0 S_+=0$, since we have $(x_0 g)f=(x_0 f)g=0$ for all $g\in S_+$, and the hypothesis thus implies $x_0 g=0$.
For $S$ to be integral, it is necessary and sufficient for $S_0$ to be integral and the annihilator of $S_+$ in $S_0$ to be $0$.
\end{env}

\subsection{Rings of fractions of a graded ring}
\label{subsection:II.2.2}

\begin{env}[2.2.1]
\label{II.2.2.1}
Let $S$ be a graded ring, in positive degrees, $f$ a \emph{homogeneous} element of $S$, of degree $d>0$;
then the ring of fractions $S'=S_f$ is graded, taking for $S_n'$ the set of the $x/f^k$, where $x\in S_{n+kd}$ with $k\geq 0$ (we observe here that $n$ can take arbitrary negative values);
we denote the subring $S_0'=(S_f)_0$ of $S'$ consisting of elements \emph{of degree $0$} by the notation $S_{(f)}$.

If $f\in S_d$, then the monomials $(f/1)^h$ in $S_f$ ($h$ a positive or negative integer) form a \emph{free system} over the ring $S_{(f)}$, and the set of their linear combinations is none other than
\oldpage[II]{24}
the ring $(S^{(d)})_f$, which is thus \emph{isomorphic to $S_{(f)}[T,T^{-1}]=S_{(f)}\otimes_\bb{Z}\bb{Z}[T,T^{-1}]$} (where $T$ is an indeterminate).
Indeed, if we have a relation $\sum_{h=-a}^b z_h(f/1)^h=0$ with $z_h=x_h/f^m$, where the $x_h$ are in $S_{md}$, then this relation is equivalent by definition to the existence of a $k>-a$ such that $\sum_{h=-a}^b f^{h+k}x_h=0$, and as the degrees of the terms of this sum are distinct, we have $f^{h+k}x_h=0$ for all $h$, hence $z_h=0$ for all $h$.

If $M$ is a graded $S$-module, then $M'=M_f$ is a graded $S_f$-module, $M_n'$ being the set of the $z/f^k$ with $z\in M_{n+kd}$ ($k\geq 0$);
we denote by $M_{(f)}$ the set of the homomogenous elements of degree $0$ of $M'$;
it is immediate that $M_{(f)}$ is an $S_{(f)}$-module and that we have $(M^{(d)})_f=M_{(f)}\otimes_{S_{(f)}}(S^{(d)})_f$.
\end{env}

\begin{lemma}[2.2.2]
\label{II.2.2.2}
Let $d$ and $e$ be integers $>0$, $f\in S_d$, $g\in S_e$.
There exists a canonical ring isomorphism
\[
  S_{(fg)}\isoto(S_{(f)})_{g^d/f^e};
\]
if we canonically identify these two rings, then there exists a canonical module isomorphism
\[
  M_{(fg)}\isoto(M_{(f)})_{g^d/f^e}.
\]
\end{lemma}

\begin{proof}
Indeed, $fg$ divides $f^e g^d$, and this latter element divides $(fg)^{de}$, so the graded rings $S_{fg}$ and $S_{f^e g^d}$ are canonically identified;
on the other hand, $S_{f^e g^d}$ also identifies with $(S_{f^e})_{g^d/1}$ \sref[0]{0.1.4.6}, and as $f^e/1$ is invertible in $S_{f^e}$, $S_{f^e g^d}$ also identifies with $(S_{f^e})_{g^d/f^e}$.
The element $g^d/f^e$ is of degree $0$ in $S_{f^e}$;
we immediately conclude that the subring of $(S_{f^e})_{g^d/f^e}$ consisting of elements of degree $0$ is $(S_{(f^e)})_{g^d/f^e}$, and as we evidently have $S_{(f^e)}=S_{(f)}$, this proves the first part of the proposition;
the second is established in a similar way.
\end{proof}

\begin{env}[2.2.3]
\label{II.2.2.3}
Under the hypotheses of \sref{II.2.2.2}, it is clear that the canonical homomorphism $S_f\to S_{fg}$ \sref[0]{0.1.4.1}, which sends $x/f^k$ to $g^k x/(fg)^k$, is of degree $0$, thus gives by restriction a \emph{canonical homomorphism $S_{(f)}\to S_{(fg)}$}, such that the diagram
\[
  \xymatrix{
    & S_{(f)}\ar[dl]\ar[dr]\\
    S_{(fg)}\ar[rr]^-{\sim} & &
    (S_{(f)})_{g^d/f^e}
  }
\]
is commutative.
We similarly define a canonical homomorphism $M_{(f)}\to M_{(fg)}$.
\end{env}

\begin{lemma}[2.2.4]
\label{II.2.2.4}
If $f$ and $g$ are two homogeneous elements of $S_+$, then the ring $S_{(fg)}$ is generated by the union of the canonical images of $S_{(f)}$ and $S_{(g)}$.
\end{lemma}

\begin{proof}
By virtue of Lemma~\sref{II.2.2.2}, it suffices to see that $1/(g^d/f^e)=f^{d+e}/(fg)^d$ belongs to the canonical image of $S_{(g)}$ in $S_{(fg)}$, which is evident by definition.
\end{proof}

\begin{proposition}[2.2.5]
\label{II.2.2.5}
Let $d$ be an integer $>0$ and let $f\in S_d$.
Then there exists a canonical ring isomorphisms $S_{(f)}\isoto S^{(d)}/(f-1)S^{(d)}$;
if we identify these two rings by this isomorphism, then there exists a canonical module isomorphism $M_{(f)}\isoto M^{(d)}/(f-1)M^{(d)}$.
\end{proposition}

\begin{proof}
The first of these isomorphisms is defined by sending $x/f^n$, where $x\in S_{nd}$, to the element $\overline{x}$, the class of $x\text{ mod. }(f-1)S^{(d)}$;
this map is well-defined, because we have the congruence $f^h x\equiv x\,(\text{mod.}\,(f-1)S^{(d)})$ for all $x\in S^{(d)}$, so if $f^h x=0$ for an $h>0$,
\oldpage[II]{25}
then we have $\overline{x}=0$.
On the other hand, if $x\in S_{nd}$ is such that $x=(f-1)y$ with $y=y_{hd}+y_{(h+1)d}+\cdots+y_{kd}$ with $y_{jd}\in S_{jd}$ and $y_{hd}\neq 0$, then we necessarily have $h=n$ and $x=-y_{hd}$, as well as the relations $y_{(j+1)d}=fy_{jd}$ for $h\leq j\leq k-1$, $fy_{kd}=0$, which ultimately gives $f^{k-n}x=0$;
we send every class $\overline{x}\text{ mod. }(f-1)S^{(d)}$ of an element $x\in S_{nd}$ to the element $x/f^n$ of $S_{(f)}$, since the preceding remark shows that this map is well-defined.
It is immediate that these two maps thus defined are ring homomorphisms, each the reciprocal of the other.
We proceed exactly the same way for $M$.
\end{proof}

\begin{corollary}[2.2.6]
\label{II.2.2.6}
If $S$ is Noetherian, then so is $S_{(f)}$ for $f$ homogeneous of degree $>0$.
\end{corollary}

\begin{proof}
This follows immediately from Corollary~\sref{II.2.1.7} and Proposition~\sref{II.2.2.5}.
\end{proof}

\begin{env}[2.2.7]
\label{II.2.2.7}
Let $T$ be a multiplicative subset of $S_+$ consisting of \emph{homogeneous} elements;
$T_0=T\cup\{1\}$ is then a multiplicative subset of $S$;
as the elements of $T_0$ are homogeneous, the ring $T_0^{-1}S$ is still graded in the evident way;
we denote by $S_{(T)}$ the subring of $T_0^{-1}S$ consisting of elements of order $0$, that is to say, the elements of the form $x/h$, where $h\in T$ and $x$ is homogeneous of degree equal to that of $h$.
We know \sref[0]{0.1.4.5} that $T_0^{-1}S$ is canonically identified with the inductive limit of the rings $S_f$, where $f$ varies over $T$ (with respect to the canonical homomorphisms $S_f\to S_{fg}$);
as this identification respects the degrees, it identifies $S_{(T)}$ with the \emph{inductive limit} of the $S_{(f)}$ for $f\in T$.
For every graded $S$-module $M$, we similarly define the module $M_{(T)}$ (over the ring $S_{(T)}$) consisting of elements of degree $0$ of $T_0^{-1}M$, and we see that this module is the inductive limit of the $M_{(f)}$ for $f\in T$.

If $\mathfrak{p}$ is a graded prime ideal of $S_+$, then we denote by $S_{(\mathfrak{p})}$ and $M_{(\mathfrak{p})}$ the ring $S_{(T)}$ and the module $M_{(T)}$ respectively, where $T$ is the set of \emph{homogeneous} elements of $S_+$ which do not belong to $\mathfrak{p}$.\end{env}

\subsection{Homogeneous prime spectrum of a graded ring}
\label{subsection:II.2.3}

\begin{env}[2.3.1]
\label{II.2.3.1}
Given a graded ring $S$, in positive degrees, we call the \emph{homogeneous prime spectrum} of $S$ and denote it by $\Proj(S)$ the set of graded prime ideals of $S_+$ \sref{II.2.1.10}, or equivalently the set of graded prime ideals of $S$ \emph{not containing $S_+$};
we will define a \emph{scheme} structure having $\Proj(S)$ as the underlying set.
\end{env}

\begin{env}[2.3.2]
\label{II.2.3.2}
For every subset $E$ of $S$, let $V_+(E)$ be the set of graded prime ideals of $S$ containing $S$ and not containing $S_+$;
this is thus the subset $V(E)\cap\Proj(S)$ of $\Spec(S)$.
From \sref[I]{I.1.1.2} we deduce:
\[
\label{II.2.3.2.1}
  V_+(0)=\Proj(S),\ V_+(S)=V_+(S_+)=\emp,
\tag{2.3.2.1}
\]
\[
\label{II.2.3.2.2}
  V_+\big(\textstyle\bigcup_\lambda E_\lambda\big)=\textstyle\bigcap_\lambda V_+(E_\lambda),
\tag{2.3.2.2}
\]
\[
\label{II.2.3.2.3}
  V_+(EE')=V_+(E)\cup V_+(E').
\tag{2.3.2.3}
\]

We do not change $V_+(E)$ by replacing $E$ with the graded ideal generated by $E$;
in addition, if $\mathfrak{J}$ is a graded ideal of $S$, then we have
\[
  V_+(\mathfrak{J})=V_+\big(\textstyle\bigcup_{q\geq n}(\mathfrak{J}\cap S_q)\big)
\tag{2.3.2.4}
\]
\oldpage[II]{26}
for all $n>0$: indeed, if $\mathfrak{p}\in\Proj(S)$ contains the homogeneous elements of $\mathfrak{J}$ of degree $\geq n$, then as by hypothesis there exists a homogeneous element $f\in S_d$ not contained in $\mathfrak{p}$, for every $m\geq 0$ and every $x\in S_m\cap\mathfrak{J}$, we have $f^r x\in\mathfrak{J}\cap S_{m+rd}$ for all but finitely many values of $r$, so $f^r x\in\mathfrak{p}\cap S_{m+rd}$, which implies that $x\in\mathfrak{p}\cap S_m$ \sref{II.2.1.9}.

Finally, we have, for every graded ideal $\mathfrak{J}$ of $S$,
\[
  V_+(\mathfrak{J})=V_+(\rad_+(\mathfrak{J})).
\tag{2.3.2.5}
\]
\end{env}

\begin{env}[2.3.3]
\label{II.2.3.3}
By definition, the $V_+(E)$ are the closed subsets of $X=\Proj(S)$ for the topology induced by the spectral topology of $\Spec(S)$, which we also call the \emph{spectral topology} on $X$.
For all $f\in S$, we set
\[
\label{II.2.3.3.1}
  D_+(f) = D(f)\cap\Proj(S) = \Proj(S)\setmin V_+(f)
\tag{2.3.3.1}
\]
and so, for any two elements $f$ and $g$ of $S$ \sref[I]{I.1.1.9.1},
\[
\label{II.2.3.3.2}
  D_+(fg) = D_+(f)\cap D_+(g).
\tag{2.3.3.2}
\]
\end{env}

\begin{proposition}[2.3.4]
\label{II.2.3.4}
The $D_+(f)$, as $f$ runs over the set of homogeneous elements of $S_+$, form a base for the topology of $X=\Proj(S)$.
\end{proposition}

\begin{proof}
It follows from \sref{II.2.3.2.2} and \sref{II.2.3.2.4} that every closed subset of $X$ is the intersection of sets of the form $V_+(f)$, where $f$ is homogeneous of degree $>0$.
\end{proof}

\begin{env}[2.3.5]
\label{II.2.3.5}
Let $f$ be a \emph{homogeneous} element of $S_+$, of degree $d>0$;
for every graded prime ideal $\mathfrak{p}$ of $S$ that does not contain $f$, we know that the set of the $x/f^n$, where $x\in\mathfrak{p}$ and $n\geq0$, is a prime ideal of the ring of fractions $S_f$ \sref[0]{0.1.2.6};
its intersection with $S_{(f)}$ is thus a prime ideal of $S_{(f)}$, which we denote by $\psi_f(\mathfrak{p})$:
it is the set of the $x/f^n$ for $n\geq0$ and $x\in\mathfrak{p}\cap S_{nd}$.
We have thus defined a map
\[
  \psi_f\colon D_+(f)\to\Spec(S_{(f)});
\]
furthermore, if $g\in S_e$ is another homogeneous element of $S_+$, then we have a commutative diagram
\[
\label{II.2.3.5.1}
  \xymatrix{
    D_+(f) \ar[r]^{\psi_f}
    & \Spec(S_{(f)})
  \\D_+(fg) \ar[u] \ar[r]_{\psi_{fg}}
    & \Spec(S_{(fg)}) \ar[u]
  }
\tag{2.3.5.1}
\]
where the vertical arrow on the left is the inclusion, and the vertical arrow on the right is the map ${}^a\!\omega_{fg,f}$ induced by the canonical homomorphism $\omega=\omega_{fg,f}\colon S_{(f)}\to S_{(fg)}$ \sref[I]{I.1.2.1}.
Indeed, if $x/f^n\in\omega^{-1}(\psi_{fg}(\mathfrak{p}))$, with $fg\not\in\mathfrak{p}$, then, by definition, $g^nx/(fg)^n\in\psi_{fg}(\mathfrak{p})$, so $g^nx\in\mathfrak{p}$, and so $x\in\mathfrak{p}$;
the converse is evident.
\end{env}

\begin{proposition}[2.3.6]
\label{II.2.3.6}
The map $\psi_f$ is a homeomorphism from $D_+(f)$ to $\Spec(S_{(f)})$.
\end{proposition}

\begin{proof}
Firstly, $\psi_f$ is continuous;
this is since, if $h\in S_{nd}$ is such that $h/f^n\in\psi_f(\mathfrak{p})$, then, by definition, $h\in\mathfrak{p}$, and conversely, and so $\psi_f^{-1}(D(h/f^n))=D_+(hf)$, and our claim then follows from \sref{II.2.3.3.2}.
Furthermore, the $D_+(hf)$, where $h$ runs over the sets $S_{nd}$, form a topology of $D_+(f)$, by \sref{II.2.3.4} and \sref{II.2.3.3.2};
the
\oldpage[II]{27}
above thus proves, taking into account the ($T_0$) axiom, which holds in $D_+(f)$ and in $\Spec(S_{(f)})$, that $\psi_f$ is injective and that the inverse map $\psi_f(D_+(f))\to D_+(f)$ is continuous.
Finally, to see that $\psi_f$ is surjective, we note that, if $\mathfrak{q}_0$ is a prime ideal of $S_{(f)}$, and if, for all $n>0$, we denote by $\mathfrak{p}_n$ the set of $x\in S_n$ such that $x^d/f^n\in\mathfrak{q}_0$, then the $\mathfrak{p}_n$ satisfy the conditions of \sref{II.2.1.9}:
if $x,y\in S_n$ are such that $x^d/f^n,y^d/f^n\in\mathfrak{q}_0$, then $(x+y)^{2d}/f^{2n}\in\mathfrak{q}_0$, whence $(x+y)^d/f^n\in\mathfrak{q}_0$, since $\mathfrak{q}_0$ is prime;
this proves that the $\mathfrak{p}_n$ are subgroups of the $S_n$, and the verification of the other conditions of \sref{II.2.1.9} is immediate, taking into account the fact that $\mathfrak{q}_0$ is prime.
If $\mathfrak{p}$ is the graded prime ideal of $S$ thus defined, then indeed $\psi_f(\mathfrak{p})=\mathfrak{q}_0$, since, if $x\in S_{nd}$, then having $x/f^n\in\mathfrak{q}_0$ and $x^d/f^{nd}\in\mathfrak{q}_0$ is equivalent to $\mathfrak{q}_0$ being prime.
\end{proof}

\begin{corollary}[2.3.7]
\label{II.2.3.7}
To have $D_+(f)=\emp$, it is necessary and sufficient for $f$ to be nilpotent.
\end{corollary}

\begin{proof}
To have $\Spec(S_{(f)})=\emp$, it is necessary and sufficient to have $S_{(f)}=0$, or indeed to have $1=0$ in $S_f$, which means, by definition, that $f$ is nilpotent.
\end{proof}

\begin{corollary}[2.3.8]
\label{II.2.3.8}
Let $E$ be a subset of $S_+$.
Then the following conditions are equivalent:
\begin{enumerate}
  \item[{\rm(a)}] $V_+(E) = X = \Proj(S)$.
  \item[{\rm(b)}] Every element of $E$ is nilpotent.
  \item[{\rm(c)}] The homogeneous components of every element of $E$ are nilpotent.
\end{enumerate}
\end{corollary}

\begin{proof}
It is clear that (c) implies (b), and that (b) implies (a).
If $\mathfrak{J}$ is the graded ideal of $S$ generated by $E$, then condition~(a) is equivalent to requiring that $V_+(\mathfrak{J})=X$;
\emph{a fortiori}, (a) implies that every homogeneous element $f\in\mathfrak{J}$ is such that $V_+(f)=X$, and so $f$ is nilpotent by \sref{II.2.3.7}.
\end{proof}

\begin{corollary}[2.3.9]
\label{II.2.3.9}
If $\mathfrak{J}$ is a graded ideal of $S_+$, then $\mathfrak{r}_+(\mathfrak{J})$ is the intersection of the graded prime ideals of $S_+$ that contain $\mathfrak{J}$.
\end{corollary}

\begin{proof}
By considering the graded ring $S/\mathfrak{J}$, we can reduce to the case where $\mathfrak{J}=0$.
We need to prove that, if $f\in S_+$ is not nilpotent, then there exists a graded prime ideal of $S$ that does not contain $f$;
but at least one of the homogeneous components of $f$ is not nilpotent, and we can thus suppose $f$ to be homogeneous;
the claim then follows from \sref{II.2.3.7}.
\end{proof}

\begin{env}[2.3.10]
\label{II.2.3.10}
For every subset $Y$ of $X=\Proj(S)$, let $\mathfrak{j}_+(Y)$ be the set of $f\in S_+$ such that $Y\subset V_+(f)$;
this is equivalent to saying that $\mathfrak{j}_+(Y)=\mathfrak{j}(Y)\cap S_+$;
then $\mathfrak{j}_+(Y)$ is an ideal of $S_+$ that is equal to its radical in $S_+$.
\end{env}

\begin{proposition}[2.3.11]
\label{II.2.3.11}
\begin{enumerate}
  \item[{\rm(i)}] For every subset $E$ of $S_+$, $\mathfrak{j}_+(V_+(E))$ is the radical in $S_+$ of the graded ideal of $S_+$ generated by $E$.
  \item[{\rm(ii)}] For every subset $Y$ of $X$, $V_+(\mathfrak{j}_+(Y))=\overline{Y}$, where $\overline{Y}$ is the closure of $Y$ in $X$.
\end{enumerate}
\end{proposition}

\begin{proof}
\begin{enumerate}
  \item[{\rm(i)}] If $\mathfrak{J}$ is the graded ideal of $S_+$ generated by $E$, then $V_+(E)=V_+(\mathfrak{J})$, and the claim then follows from \sref{II.2.3.9}.
  \item[{\rm(ii)}] Since $V_+(\mathfrak{J})=\bigcap_{f\in\mathfrak{J}}V_+(f)$, having $Y\subset V_+(\mathfrak{J})$ implies that $Y\subset V_+(f)$ for every $f\in\mathfrak{J}$, and thus $\mathfrak{j}_+(Y)\supset\mathfrak{J}$, whence $V_+(\mathfrak{j}_+(Y))\subset V_+(\mathfrak{J})$, which proves (ii) by the definition of the closed subsets.
\end{enumerate}
\end{proof}

\begin{corollary}[2.3.12]
\label{II.2.3.12}
The closed subsets $Y$ of $X=\Proj(S)$ are in bijective correspondence with the graded ideals of $S_+$ that are equal to their radical in $S_+$, via the inclusion-reversing maps $Y\mapsto\mathfrak{j}_+(Y)$ and $\mathfrak{J}\mapsto V_+(\mathfrak{J})$;
the union $Y_1\cup Y_2$ of two closed subsets of $X$ corresponds
\oldpage[II]{28}
to $\mathfrak{j}_+(Y_1)\cap\mathfrak{j}_+(Y_2)$, and the intersection of an arbitrary family $(Y_\lambda)$ of closed subsets corresponds to the radical in $S_+$ of the sum of the $\mathfrak{j}_+(Y_\lambda)$.
\end{corollary}

\begin{corollary}[2.3.13]
\label{II.2.3.13}
Let $\mathfrak{J}$ be a graded ideal of $S_+$;
to have $V_+(\mathfrak{J})=\emp$, it is necessary and sufficient for every element $f$ of $S_+$ to have a power $f^n$ in $\mathfrak{J}$.
\end{corollary}

This above corollary can also be expressed in one of the following equivalent forms:

\begin{corollary}[2.3.14]
Let $(f_\alpha)$ be a family of homogeneous elements of $S_+$.
For the $D_+(f_\alpha)$ to form a cover of $X=\Proj(S)$, it is necessary and sufficient for every element of $S_+$ to have a power in the ideal generated by the $f_\alpha$.
\label{II.2.3.14}
\end{corollary}

\begin{corollary}[2.3.15]
\label{II.2.3.15}
Let $(f_\alpha)$ be a family of homogeneous elements of $S_+$, and $f$ an element of $S_+$.
Then the following are equivalent:
\begin{enumerate}
  \item[{\rm(a)}] $D_+(f)\subset\bigcup_\alpha D_+(f_\alpha)$;
  \item[{\rm(b)}] $V_+(f)\supset\bigcap_\alpha V_+(f_\alpha)$;
  \item[{\rm(c)}] $f$ has a power in the ideal generated by the $f_\alpha$.
\end{enumerate}
\end{corollary}

\begin{corollary}[2.3.16]
\label{II.2.3.16}
For $X=\Proj(S)$ to be empty, it is necessary and sufficient for every element of $S_+$ to be nilpotent.
\end{corollary}

\begin{corollary}[2.3.17]
\label{II.2.3.17}
In the bijective correspondence described in \sref{II.2.3.12}, the \emph{irreducible} closed subsets of $X$ correspond to the graded \emph{prime} ideals of $S_+$.
\end{corollary}

\begin{proof}
If $Y=Y_1\cup Y_2$, where $Y_1$ and $Y_2$ are distinct closed subsets of $Y$, then
\[
  \mathfrak{j}_+(Y) = \mathfrak{j}_+(Y_1)\cap\mathfrak{j}_+(Y_2)
\]
with the ideals $\mathfrak{j}_+(Y_1)$ and $\mathfrak{j}_+(Y_2)$ being distinct from $\mathfrak{j}_+(Y)$, and so $\mathfrak{j}_+(Y)$ is not prime.
Conversely, if $\mathfrak{J}$ is a graded ideal of $S_+$ that is not prime, then there exists elements $f,g\in S_+$ such that $f\not\in\mathfrak{J}$ and $g\not\in\mathfrak{J}$, but $fg\in\mathfrak{J}$;
then $V_+(f)\supset V_+(\mathfrak{J})$ and $V_+(g)\supset V_+(\mathfrak{J})$, but $V_+(\mathfrak{J})\subset V_+(f)\cup V_+(g)$, by \sref{II.2.3.2.3};
we thus conclude that $V_+(\mathfrak{J})$ is the union of the closed subsets $V_+(f)\cap V_+(\mathfrak{J})$ and $V_+(g)\cap V_+(\mathfrak{J})$, which are distinct from $V_+(\mathfrak{J})$.
\end{proof}


\subsection{The scheme structure on $\mathrm{Proj}(S)$}
\label{subsection:II.2.4}

\begin{env}[2.4.1]
\label{II.2.4.1}
Let $f$ and $g$ be homogeneous elements of $S_+$;
consider the affine schemes $Y_f=\Spec(S_{(f)})$, $Y_g=\Spec(S_{(g)})$, and $Y_{fg}=\Spec(S_{(fg)})$.
By \sref{II.2.2.2}, the morphism $w_{fg,f} = ({}^a\!\omega_{fg,f},\widetilde{\omega}_{fg,f})$ from $Y_{fg}$ to $Y_f$, corresponding to the canonical homomorphism $\omega_{fg,f}\colon S_{(f)}\to S_{(fg)}$, is an \emph{open immersion} \sref[I]{I.1.3.6}.
Using the inverse homeomorphism of $\psi_f\colon D_+(f)\to Y_f$ \sref{II.2.3.6}, we can transport the affine scheme structure of $Y_f$ to $D_+(f)$;
by the commutativity of diagram~\sref{II.2.3.5.1}, the affine scheme $D_+(fg)$ can thus be identified with the induced scheme on the open subset $D_+(fg)$ of the underlying space of the affine scheme $D_+(f)$.
It is then clear (taking \sref{II.2.3.4} into account) that $X=\Proj(S)$ is endowed with a unique \emph{prescheme} structure, whose restriction to each $D_+(f)$ is the affine scheme that we have just defined.
Furthermore:
\end{env}

\begin{proposition}[2.4.2]
\label{II.2.4.2}
The prescheme $\Proj(S)$ is a scheme.
\end{proposition}

\begin{proof}
It suffices \sref[I]{I.5.5.6} to show, for any homogeneous $f$ and $g$ in $S_+$, that $D_+(f)\cap D_+(g)=D_+(fg)$ is affine, and that its ring is generated by the canonical images of the rings of $D_+(f)$ and $D_+(g)$;
the first point is evident by definition, and the second follows from \sref{II.2.2.4}.
\end{proof}

\oldpage[II]{29}
Whenever we speak of the homogeneous prime spectrum $\Proj(S)$ as a \emph{scheme}, it will always mean with respect to the structure that we have just defined.

\begin{example}[2.4.3]
\label{II.2.4.3}
Let $S=K[T_1,T_2]$, where $K$ is a field, $T_1$ and $T_2$ are indeterminates, and $S$ is graded by total degree.
It follows from \sref{II.2.3.14} that $\Proj(S)$ is the union of $D_+(T_1)$ and $D_+(T_2)$;
we immediately see that these affine schemes are isomorphic to $K[T]$, and that $\Proj(S)$ is obtained by the gluing of these two affine schemes as described in \sref[I]{I.2.3.2} (cf. \sref{II.7.4.14}).
\end{example}

\begin{proposition}[2.4.4]
\label{II.2.4.4}
Let $S$ be a positively-graded ring, and let $X$ be the scheme $\Proj(S)$.
\begin{enumerate}
  \item[{\rm(i)}] If $\mathfrak{N}_+$ is the nilradical of $S_+$ \sref{II.2.1.10}, then the scheme $X_\red$ is canonically isomorphic to $\Proj(S/\mathfrak{N}_+)$;
    in particular, if $S$ is essentially reduced, then $\Proj(S)$ is reduced.
  \item[{\rm(ii)}] If $S$ is essentially reduced, then, for $X$ to be integral, it is necessary and sufficient for $S$ to be essentially integral.
\end{enumerate}
\end{proposition}

\begin{proof}
\begin{enumerate}
  \item[{\rm(i)}] Let $\overline{S}$ be the graded ring $S/\mathfrak{N}_+$, and denote by $x\mapsto\overline{x}$ the canonical homomorphism $S\to\overline{S}$ of degree~$0$.
    For all $f\in S_d$ ($d>0$), the canonical homomorphism $S_f\to\overline{S}$ \sref[0]{0.1.5.1} is surjective and of degree~$0$, and thus gives, by restriction, a surjective homomorphism $S_{(f)}\to\overline{S}_{(\overline{f})}$;
    if we suppose that $f\not\in\mathfrak{N}_+$, then we immediately see that $\overline{S}_{(\overline{f})}$  is reduced, and that the kernel of the above homomorphism is the nilradical of $S_{(f)}$, or, in other words, that $\overline{S}_{(\overline{f})}=(S_{(f)})_\red$.
    So to this homomorphism corresponds a closed immersion $D_+(\overline{f})\to D_+(f)$ that identifies $D_+(\overline{f})$ with $(D_+(f))_\red$ \sref[I]{I.5.1.2}, and which is, in particular, a homeomorphism of the underlying spaces of these two affine schemes.
    Furthermore, if $g\not\in\mathfrak{N}_+$ is another homogeneous element of $S_+$, then the diagram
    \[
      \xymatrix{
        S_{(f)} \ar[r] \ar[d]
        & \overline{S}_{(\overline{f})} \ar[d]
      \\S_{(fg)} \ar[r]
        & \overline{S}_{(\overline{fg})}
      }
    \]
    is commutative;
    since, further, the $D_+(f)$, for $f$ homogeneous, of degree $>0$, and $f\not\in\mathfrak{N}_+$, form a cover of $X=\Proj(S)$ \sref{II.2.3.7}, we see that the morphisms $D_+(\overline{f})\to D_+(f)$ are the restrictions of a closed immersion $\Proj(\overline{S})\to\Proj(S)$ which is a homeomorphism of the underlying spaces;
    whence the conclusion \sref[I]{I.5.1.2}.
  \item[{\rm(ii)}] Suppose that $S$ is essentially integral, or, in other words, that $(0)$ is a graded prime ideal of $S_+$ that is distinct from $S_+$;
    then $X$ is reduced, by (i), and irreducible, by \sref{II.2.3.17}.
    Conversely, suppose that $S$ is essentially reduced and that $X$ is integral;
    then, for homogeneous $f\neq0$ in $S_+$, we have that $D_+(f)\neq\emp$ \sref{II.2.3.7};
    the hypothesis that $X$ is irreducible implies that $D_+(f)\cap D_+(g)\neq\emp$ for homogeneous $f,g\neq0$ in $S_+$;
    thus $fg\neq0$, by \sref{II.2.3.3.2}, and we thus conclude that $S_+$ has no zero divisors, whence the first claim.
\end{enumerate}
\end{proof}

\begin{env}[2.4.5]
\label{II.2.4.5}
Given a commutative ring $A$, recall that we say that a graded ring $S$ is a \emph{graded $A$-algebra} if it is endowed with the structure of an $A$-algebra such that each of its subgroups $S_n$ is an $A$-module;
for this, it suffices for $S_0$ to be
\oldpage[II]{30}
an $A$-algebra, or, in other words, we define the structure of a graded $A$-algebra on $S$ by defining the structure of an $A$-algebra on $S_0$ and setting $\alpha\cdot x=(\alpha\cdot1)x$ for $\alpha\in A$ and $x\in S_n$.
\end{env}

\begin{proposition}[2.4.6]
\label{II.2.4.6}
Suppose that $S$ is a graded $A$-algebra.
Then, on $X=\Proj(S)$, the structure sheaf $\sh{O}_X$ is an $A$-algebra (where $A$ is considered as a simple sheaf on $X$);
in other words, $X$ is a scheme over $\Spec(A)$.
\end{proposition}

\begin{proof}
It suffices to note that, for every homogeneous $f$ in $S_+$, $S_{(f)}$ is an algebra over $A$, and that the diagram
\[
  \xymatrix{
    S_{(f)} \ar[rr] && S_{(fg)}
  \\ & A \ar[ul] \ar[ur] &
  }
\]
is commutative, for homogeneous $f,g$ in $S_+$.
\end{proof}

\begin{proposition}[2.4.7]
\label{II.2.4.7}
Let $S$ be a positively-graded ring.
\begin{enumerate}
  \item[{\rm(i)}] For every integer $d>0$, there exists a canonical isomorphism from the scheme $\Proj(S)$ to the scheme $\Proj(S^{(d)})$.
  \item[{\rm(ii)}] Let $S'$ be the graded ring such that $S_0=\bb{Z}$ and $S'_n=S_n$ (considered as a $\bb{Z}$-module) for $n>0$.
    Then there exists a canonical isomorphism from the scheme $\Proj(S)$ to the scheme $\Proj(S')$.
\end{enumerate}
\end{proposition}

\begin{proof}
\begin{enumerate}
  \item[{\rm(i)}] We first show that the map $\mathfrak{p}\mapsto\mathfrak{p}\cap S^{(d)}$ is a bijection from the set $\Proj(S)$ to the set $\Proj(S^{(d)})$.
    Indeed, suppose that we have a graded prime ideal $\mathfrak{p}'\in\Proj(S^{(d)})$, and let $\mathfrak{p}_{nd}=\mathfrak{p}'\cap S_{nd}$ ($n\geq0$).
    For all $n>0$ that are not multiples of $d$, define $\mathfrak{p}_n$ as the set of $x\in S_n$ such that $x^d\in\mathfrak{p}_{nd}$;
    if $x,y\in\mathfrak{p}_n$, then $(x+y)^{2d}\in\mathfrak{p}_{2nd}$, and so $(x+y)^d\in\mathfrak{p}_{nd}$, since $\mathfrak{p}'$ is prime;
    it is immediate that the $\mathfrak{p}_n$ thus defined, for $n\geq0$, satisfy the conditions of \sref{II.2.1.9}, and so there exists a unique prime ideal $\mathfrak{p}\in\Proj(S)$ such that $\mathfrak{p}\cap S^{(d)}=\mathfrak{p}'$.
    Since, for every homogeneous $f$ in $S_+$, we have that $V_+(f)=V_+(f^d)$ \sref{II.2.3.2.3}, we see that the above bijection is a \emph{homeomorphism} of topological spaces.
    Finally, with the same notation, $S_{(f)}$ and $S_{(f^d)}$ are canonically identified \sref{II.2.2.2}, and so $\Proj(S)$ and $\Proj(S^{(d)})$ are canonically identified as \emph{schemes}.
  \item[{\rm(ii)}] If, to each $\mathfrak{p}\in\Proj(S)$, we associate the unique prime ideal $\mathfrak{p}'\in\Proj(S')$ such that $\mathfrak{p}'\cap S_n=\mathfrak{p}\cap S_n$ for every $n>0$ \sref{II.2.1.9}, then it is clear that we have defined a canonical homeomorphism $\Proj(S)\xrightarrow{\sim}\Proj(S')$ of the underlying spaces, since $V_+(f)$ is the same set for $S$ and $S'$ when $f$ is a homogeneous element of $S_+$.
  Since, further, $S_{(f)}=S'_{(f)}$, $\Proj(S)$ and $\Proj(S')$ can be identified as \emph{schemes}.
\end{enumerate}
\end{proof}

\begin{corollary}[2.4.8]
\label{II.2.4.8}
If $S$ is a graded $A$-algebra, and $S'_A$ the graded $A$-algebra such that $(S'_A)_0=A$ and $(S'_A)_n=S_n$ for $n>0$, then there exists a canonical isomorphism from $\Proj(S)$ to $\Proj(S'_A)$.
\end{corollary}

\begin{proof}
In fact, these two schemes are both canonically isomorphic to $\Proj(S')$, using the notation of \sref{II.2.4.7}[(ii)].
\end{proof}


\subsection{The sheaf associated to a graded module}
\label{subsection:II.2.5}

\begin{env}[2.5.1]
\label{II.2.5.1}
Let $M$ be a \emph{graded} $S$-module.
The, for every homogeneous $f$ in $S_+$, $M_{(f)}$ is an $S_{(f)}$-module, and thus has a corresponding quasi-coherent associated sheaf $(M_{(f)})^\supertilde$ on the affine scheme $\Spec(S_{(f)})$, identified with $D_+(f)$ \sref[I]{I.1.3.4}.
\end{env}

\oldpage[II]{31}
\begin{proposition}[2.5.2]
\label{II.2.5.2}
There exists on $X=\Proj(S)$ exactly one quasi-coherent $\sh{O}_X$-module $\widetilde{M}$ such that, for $f$ homogeneous in $S_+$, we have $\Gamma(D_+(f),\widetilde{M})=M_{(f)}$, with the restriction homomorphism $\Gamma(D_+(f),\widetilde{M})\to\Gamma(D_+(fg),\widetilde{M})$, for $f$ and $g$ homogeneous in $S_+$, being the canonical homomorphism $M_{(f)}\to M_{(fg)}$ \sref{II.2.2.3}.
\end{proposition}

\begin{proof}
Suppose that $f\in S_d$ and $g\in S_e$.
Since $D_+(fg)$ can be identified with the prime spectrum of $(S_{(f)})_{g^d/f^e}$ by \sref{II.2.2.2}, the restriction to $D_+(fg)$ of the sheaf $(M_{(f)})^\supertilde$ on $D_+(f)$ is canonically identified with the sheaf associated to the module $(M_{(f)})_{g^d/f^e}$ \sref[I]{I.1.3.6}, and thus also with $(M_{(fg)})^\supertilde$ \sref{II.2.2.2};
we thus conclude that there exists a canonical isomorphism
\[
  \theta_{g,f}\colon (M_{(f)})^\supertilde|D_+(fg) \xrightarrow{\sim} (M_{(g)})^\supertilde|D_+(fg)
\]
such that, if $h$ is a third homogeneous element of $S_+$, then $\theta_{f,h}=\theta_{f,g}\circ\theta_{g,h}$ in $D_+(fgh)$.
Consequently \sref[0]{0.3.3.1} there exists a quasi-coherent $\sh{O}_X$-module $\sh{F}$ on $X$, and, for every homogeneous $f$ in $S_+$, an isomorphism $\eta_f$ from $\sh{F}|D_+(f)$ to $(M_{f})^\supertilde$ such that $\theta_{g,f}=\eta_g\circ\eta_f^{-1}$.
If we then consider the sheaf $\sh{G}$ associated to the presheaf (on the base of the topology of $X$ given by the $D_+(f)$) defined by $D_+(f)\mapsto M_{(f)}$, with the canonical homomorphisms $M_{(f)}\to M_{(fg)}$ as restriction homomorphisms, then the above proves that $\sh{F}$ and $\sh{G}$ are isomorphic (taking \sref[I]{I.1.3.7} into account);
the sheaf $\sh{G}$ is denoted by $\widetilde{M}$, and indeed satisfies the conditions of the statement.
We have, in particular, $\widetilde{S}=\sh{O}_X$.
\end{proof}

\begin{definition}[2.5.3]
\label{II.2.5.3}
We say that the quasi-coherent $\sh{O}_X$-module $\widetilde{M}$ defined in \sref{II.2.5.2} is \emph{associated} to the graded $S$-module $M$.
\end{definition}

Recall that the graded $S$-modules form a category when we restrict from arbitrary homomorphisms of graded modules to homomorphisms \emph{of degree~$0$}.
With this convention:

\begin{proposition}[2.5.4]
\label{II.2.5.4}
The functor $M\mapsto\widetilde{M}$ is an exact additive covariant functor from the category of graded $S$-modules to the category of quasi-coherent $\sh{O}_X$-modules, and it commutes with inductive limits and direct sums.
\end{proposition}

\begin{proof}
Indeed, since these properties are local, it suffices to show that they are satisfied for the sheaves of the form $\widetilde{M}|D_+(f)=(M_{(f)})^\supertilde$;
but the functors $M\mapsto M_f$, $N\mapsto N_0$ (to the category of graded $S_f$-modules), and $P\mapsto\widetilde{P}$ (to the category of $S_{(f)}$-modules) all have the three properties of exactness and of commutativity with inductive limits and direct sums (\sref[I]{I.1.3.5} and \sref[I]{I.1.3.9});
whence the proposition.
\end{proof}

We denote by $\widetilde{u}$ the homomorphism $\widetilde{M}\to\widetilde{N}$ corresponding to a homomorphism $u\colon M\to N$ of degree~$0$.
We immediately deduce from \sref{I.2.5.4} that the results of \sref[I]{I.1.3.9} and \sref[I]{I.1.3.10} still hold for graded $S$-modules and homomorphisms of degree~$0$ (with the sense given here to $\widetilde{M}$), with the proofs being purely formal.

\begin{proposition}[2.5.5]
\label{II.2.5.5}
For all $\mathfrak{p}\in X=\Proj(S)$, we have $\widetilde{M}_\mathfrak{p}=M_{(\mathfrak{p})}$.
\end{proposition}

\begin{proof}
By definition, $\widetilde{M}_\mathfrak{p}=\varinjlim\Gamma(D_+(f),\widetilde{M})$, where $f$ runs over the set of homogeneous elements of $S_+$ such that $f\not\in\mathfrak{p}$;
since $\Gamma(D_+(f),\widetilde{M})=M_{(f)}$, the proposition follows from the definition of $M_{(\mathfrak{p})}$ \sref{II.2.2.7}
\end{proof}

\oldpage[II]{32}
In particular, the \emph{local ring $(\sh{O}_X)_\mathfrak{p}$} is exactly the ring $S_{(\mathfrak{p})}$, the set of fractions $x/f$ with $f$ homogeneous in $S_+$ and not belonging to $\mathfrak{p}$, and with $x$ homogeneous of the same degree as $f$.

Even more particularly, if $S$ is \emph{essential integral}, so that $\Proj(S)=X$ is \emph{integral} \sref{II.2.4.4}, and if $\xi=(0)$ is the generic point of $X$, then the \emph{field of rational functions $R(X)=\sh{O}_\xi$} is field consisting of elements $fg^{-1}$ with $f$ and $g$ homogeneous of the same degree in $S_+$, and with $g\neq 0$.

\begin{proposition}[2.5.6]
\label{II.2.5.6}
If, for all $z\in M$ and all homogeneous $f$ in $S_+$, there exists a power of $f$ that annihilates $z$, then $\widetilde{M}=0$.
This sufficient condition is also necessary if the $S_0$-algebra $S$ is generated by the set $S_1$ of homogeneous elements of degree~$1$.
\end{proposition}

\begin{proof}
The condition $\widetilde{M}=0$ is equivalent to $M_{(f)}=0$ for all homogeneous $f$ in $S_+$.
On the other hand, if $f\in S_d$, to say that $M_{(f)}=0$ implies that, for all homogeneous $z\in M$ whose degree is some multiple of $d$, there exists a power $f^n$ such that $f^nz=0$.
If $M_{(f)}=0$ for all $f\in S_1$, then the condition of the statement is thus satisfied for all $f\in S_1$;
the condition is \emph{a fortiori} satisfied for all homogeneous $f$ in $S_+$ if $S_1$ generates $S$, since every homogeneous element of $S_+$ is then a linear combination of products of elements of $S_1$.
\end{proof}

\begin{proposition}[2.5.7]
\label{II.2.5.7}
Let $d>0$ be an integer, and let $f\in S_d$.
Then, for all $n\in\bb{Z}$, the $(\sh{O}_X|D_+(f))$-module $(S(nd))^\supertilde|D_+(f)$ is canonically isomorphic to $\sh{O}_X|D_+(f)$.
\end{proposition}

\begin{proof}
Indeed, multiplication by the invertible element $(f/1)^n$ of $S_f$ gives a bijection from $S_{(f)}=(S_f)_0$ to $(S_f)_{nd}=(S_f(nd))_0=(S(nd)_f)_0=S(nd)_{(f)}$;
in other words, the $S_{(f)}$-modules $S_{(f)}$ and $S(nd)_{(f)}$ are canonically isomorphic, whence the proposition.
\end{proof}

\begin{corollary}[2.5.8]
\label{II.2.5.8}
On the open subset $U=\bigcup_{f\in S_d}D_+(f)$, the restriction of the $\sh{O}_X$-module $(S(nd))^\supertilde$ is an invertible $(\sh{O}_X|U)$-module \sref[0]{0.5.4.1}.
\end{corollary}

\begin{corollary}[2.5.9]
\label{II.2.5.9}
If the ideal $S_+$ of $S$ is generated by the set $S_1$ of homogeneous elements of degree~$1$, then the $\sh{O}_X$-module $(S(n))^\supertilde$ is invertible for all $n\in\bb{Z}$.
\end{corollary}

\begin{proof}
It suffices to remark that $X=\bigcup_{f\in S_1}D_+(f)$, by the hypothesis \sref{II.2.3.14} and to apply \sref{II.2.5.8} with $U=X$.
\end{proof}

\begin{env}[2.5.10]
\label{II.2.5.10}
We set, for the rest of this section,
\[
\label{II.2.5.10.1}
  \sh{O}_X(n) = (S(n))^\supertilde
\tag{2.5.10.1}
\]
for all $n\in\bb{Z}$, and, for every open subset $U$ of $X$, and every $(\sh{O}_X|U)$-module $\sh{F}$,
\[
\label{II.2.5.10.2}
  \sh{F}(n) = \sh{F}\otimes_{\sh{O}_X|U}(\sh{O}_X(n)|U)
\tag{2.5.10.2}
\]
for all $n\in\bb{Z}$.
If the ideal $S_+$ is generated by $S_1$, then the functor $\sh{F}(n)$ is \emph{exact} in $\sh{F}$ for all $n\in\bb{Z}$, since $\sh{O}_X(n)$ is then an \emph{invertible} $\sh{O}_X$-module.
\end{env}

\begin{env}[2.5.11]
\label{II.2.5.11}
Let $M$ and $N$ be graded $S$-modules.
For all $f\in S_d$ ($d>0$), we define a canonical functorial homomorphism of $S_{(f)}$-modules by
\[
\label{II.2.5.11.1}
  \lambda_f\colon M_{(f)}\otimes_{S_{(f)}}N_{(f)} \to (M\otimes_S N)_{(f)}
\tag{2.5.11.1}
\]
\oldpage[II]{33}
by composing the homomorphism $M_{(f)}\otimes_{S_{(f)}}N_{(f)}\to M_f\otimes_{S_f}N_f$ (coming from the injections $M_{(f)}\to M_f$, $N_{(f)}\to N_f$, and $S_{(f)}\to S_f$) with the canonical isomorphism $M_f\otimes_{S_f}N_f\xrightarrow{\sim}(M\otimes_S N)_f$ \sref[0]{0.1.3.4}, and by noting that, by the definition of the tensor product of two graded modules, this latter isomorphism preserves degrees;
for $x\in M_{md}$ and $y\in N_{nd}$ ($m,n\geq0$), we thus have
\[
  \lambda_f((x/f^m)\otimes(y/f^n)) = (x\otimes y)/f^{m+n}.
\]

It immediately follows from this definition that, if $g\in S_e$ ($e>0$), then the diagram
\[
  \xymatrix{
    M_{(f)}\otimes_{S_{(f)}}N_{(f)} \ar[r]^{\lambda_f} \ar[d]
    & (M\otimes_S N)_{(f)} \ar[d]
  \\M_{(fg)}\otimes_{S_{(fg)}}N_{(fg)} \ar[r]_{\lambda_{fg}}
    & (M\otimes_S N)_{(fg)}
  }
\]
(where the vertical arrow on the right is the canonical homomorphism, and the one on the left comes from the canonical homomorphisms) commutes.
Thus $\lambda$ induces a canonical functorial homomorphism of $\sh{O}_X$-modules
\[
\label{II.2.5.11.2}
  \lambda\colon \widetilde{M}\otimes_{\sh{O}_X}\widetilde{N} \to (M\otimes_S N)^\supertilde.
\tag{2.5.11.2}
\]

Consider, in particular, graded ideals $\fk{J}$ and $\fk{K}$ of $S$;
since $\widetilde{\fk{J}}$ and $\widetilde{\fk{K}}$ are sheaves of ideals of $\sh{O}_X$, we have a canonical homomorphism $\widetilde{\fk{J}}\otimes_{\sh{O}_X}\widetilde{\fk{K}}\to\sh{O}_X$;
the diagram
\[
\label{II.2.5.11.3}
  \xymatrix{
    \widetilde{\fk{J}}\otimes_{\sh{O}_X}\widetilde{\fk{K}} \ar[rr]^\lambda \ar[dr]
    && (\widetilde{\fk{J}}\otimes_S\widetilde{\fk{K}})^\supertilde \ar[dl]
  \\&\sh{O}_X&
  }
\tag{2.5.11.3}
\]
then commutes.
Indeed, we can reduce to verifying this on each open subset $D_+(f)$ (for $f$ homogeneous in $S_+$), and this follows immediately from the definition \sref{2.5.11.1} of $\lambda_f$ and from \sref[I]{I.1.3.13}.

Finally, note that, if $M$, $N$, and $P$ are graded $S$-modules, then the diagram
\[
\label{II.2.5.11.4}
  \xymatrix{
    \widetilde{M}\otimes_{\sh{O}_X}\widetilde{N}\otimes_{\sh{O}_X}\widetilde{P} \ar[r]^{\lambda\otimes1} \ar[d]_{1\otimes\lambda}
    & (M\otimes_S N)^\supertilde\otimes_{\sh{O}_X}\widetilde{P} \ar[d]^\lambda
  \\\widetilde{M}\otimes_{\sh{O}_X}(N\otimes_S P)^\supertilde \ar[r]_\lambda
    & (M\otimes_S N\otimes_S P)^\supertilde
  }
\tag{2.5.11.4}
\]
\oldpage[II]{34}
commutes.
It again suffices to verify this on each open subset $D_+(f)$, and this follows immediately from the definitions and from \sref[I]{I.1.3.13}.
\end{env}

\section{Supplement on homological algebra}
\label{section:supplement-on-homological-algebra}

\subsection{Review of spectral sequences}
\label{subsection:review-spectral-sequences}

\begin{env}[11.1.1]
\label{0.11.1.1}
In the following, we use a more general notion of a spectral sequence than that defined in (T, 2.4); keeping the notation of (T, 2.4), we call a \emph{spectral sequence} in an abelian category $\C$ a system $E$ consisting of the following parts:
\begin{enumerate}[label=(\alph*)]
  \item A family $(E_r^{pq})$ of objects of $\C$ defined for $p,q\in\bb{Z}$ and $r\geq 2$.
  \item A family of morphisms $d_r^{pq}:E_r^{pq}\to E_r^{p+r,q-r+1}$ such that $d_r^{p+r,q-r+1}d_r^{pq}=0$.
    We set $Z_{r+1}(E_r^{pq})=\Ker(d_r^{pq})$ and $B_{r+1}(E_r^{pq})=\Im(d_r^{p+r,q-r+1})$, so that
    \[
      B_{r+1}(E_r^{pq})\subset Z_{r+1}(E_r^{pq})\subset E_r^{pq}.
    \]
  \item A family of isomorphisms $\alpha_r^{pq}:Z_{r+1}(E_r^{pq})/B_{r+1}(E_r^{pq})\isoto E_{r+1}^{pq}$.

  We then define for $k\geq r+1$, by induction on $k$, the subobjects $B_k(E_r^{pq})$ and $Z_k(E_r^{pq})$ as the inverse images, under the canonical morphism $E_r^{pq}\to E_r^{pq}/B_{r+1}(E_r^{pq})$ of the subobjects of this quotuent identified via $\alpha_r^{pq}$ with the subobjects $B_k(E_{r+1}^{pq})$ and $Z_k(E_{r+1}^{pq})$ respectively.
It is clear that we then have, up to isomorphism,
  \[
    Z_k(E_r^{pq})/B_k(E_r^{pq})=E_k^{pq}\text{ for }k\geq r+1,
    \tag{11.1.1.1}
  \]
  and, if we set $B_r(E_r^{pq})=0$ and $Z_r(E_r^{pq})=E_r^{pq}$, then we have the inclusion relations
  \[
    0=B_r(E_r^{pq})\subset B_{r+1}(E_r^{pq})\subset B_{r+2}(E_r^{pq})\subset\cdots\subset Z_{r+2}(E_r^{pq})\subset Z_{r+1}(E_r^{pq})\subset Z_r(E_r^{pq})=E_r^{pq}.
    \tag{11.1.1.2}
  \]
  The other parts of the data of $E$ are then:
  \item Two subobjects $B_\infty(E_2^{pq})$ and $Z_\infty(E_2^{pq})$ of $E_2^{pq}$ such that we have $B_\infty(E_2^{pq})\subset Z_\infty(E_2^{pq})$ and, for every $k\geq 2$,
    \[
      B_k(E_2^{pq})\subset B_\infty(E_2^{pq})\text{ and }Z_\infty(E_2^{pq})\subset Z_k(E_2^{pq}).
    \]
    We set
    \[
      E_\infty^{pq}=Z_\infty(E_2^{pq})/B_\infty(E_2^{pq}).
      \tag{11.1.1.3}
    \]
  \item
\oldpage[0\textsubscript{III}]{24}
    A family $(E^n)$ of objects of $\C$, each equipped with a \emph{decreasing filtration $(F^p(E^n))_{p\in\bb{Z}}$}.
    As usual, we denote by $\gr(E^n)$ the graded object associated to the filtered object $E^n$, the direct sum of the $\gr_p(E^n)=F^p(E^n)/F^{p+1}(E^n)$.
  \item For every pair $(p,q)\in\bb{Z}\times\bb{Z}$, an isomorphism $\beta^{pq}:E_\infty^{pq}\isoto\gr_p(E^{p+q})$.
\end{enumerate}

The family $(E^n)$, without the filtrations, is called the \emph{abutment} of the spectral sequence $E$.

Suppose that the category $\C$ admits infinite direct sums, or that for every $r\geq 2$ and every $n\in\bb{Z}$, there are finitely many pairs $(p,q)$ such that $p+q=n$ and $E_r^{pq}\neq 0$ (it suffices for it to hold for $r=2$).
Then the $E_r^{(n)}=\sum_{p+q=n}E_r^{pq}$ are defined, and we if denote by $d_r^{(n)}$ the morphism $E_r^{(n)}\to E_r^{(n+1)}$ whose restriction to $E_r^{pq}$ is $d_r^{pq}$ for every pair $(p,q)$ such that $p+q=n$, then $d_r^{(n+1)}\circ d_r^{(n)}=0$, in other words, $(E_r^{(n)})_{n\in\bb{Z}}$ is a \emph{complex $E_r^{(\bullet)}$} in $\C$, with derivation operations of degree $+1$, and it follows from (c) that $\HH^n(E_n^{(\bullet)})$ is \emph{isomorphic to $E_{r+1}^{(n)}$} for every $r\geq 2$.
\end{env}

\begin{env}[11.1.2]
\label{0.11.1.2}
A \emph{morphism $u:E\to E'$} from a spectral sequence $E$ to a spectral sequence $E'=(E_r^{\prime pq},E^{\prime n})$ consists of systems of morphisms $u_r^{pq}:E_r^{pq}\to E_r^{\prime pq}$ and $u^n:E^n\to E^{\prime n}$, the $u^n$ compatible with the filtrations on $E^n$ and $E^{\prime n}$, and the diagrams
\[
  \xymatrix{
    E_r^{pq}\ar[r]^{d_r^{pq}}\ar[d]_{u_r^{pq}} &
    E_r^{p+r,q-r+1}\ar[d]^{u_r^{p+r,q-r+1}}\\
    E_r^{\prime pq}\ar[r]^{d_r^{\prime pq}} &
    E_r'^{\prime p+r,q-r+1}
  }
\]
being commutative; in addition, by passing to quotients, $u_r^{pq}$ gives a morphism $\overline{u}_r^{pq}:Z_{r+1}(Z_r^{pq})/B_{r+1}(E_r^{pq})\to Z_{r+1}(E_r^{\prime pq})/B_{r+1}(E_r^{\prime pq})$ and we must have $\alpha_r^{\prime pq}\circ\overline{u}_r^{pq}=u_{r+1}^{pq}\circ\alpha_r^{pq}$; finally, we must have $u_2^{pq}(B_\infty(E_2^{pq}))\subset B_\infty(E_2^{\prime pq})$ and $u_2^{pq}(Z_\infty(E_2^{pq}))\subset Z_\infty(E_2^{\prime pq})$; by passing to quotients, $u_2^{pq}$ then gives a morphism $u_\infty^{\prime pq}:E_\infty^{pq}\to E_\infty^{\prime pq}$, and the diagram
\[
  \xymatrix{
    E_\infty^{pq}\ar[r]^{u_\infty^{\prime pq}}\ar[d]_{\beta^{pq}} &
    E_\infty^{\prime pq}\ar[d]^{\beta^{\prime pq}}\\
    \gr_p(E^{p+q})\ar[r]^{\gr_p(u^{p+q})} &
    \gr_p(E^{\prime p+q})
  }
\]
must be commutative.

The above definitions show, by induction on $r$, that if the $u_2^{pq}$ are \emph{isomorphisms}, then so are the $u_r^{pq}$ for $r\geq 2$; \emph{if in addition we know that $u_2^{pq}(B_\infty(E_2^{pq}))=B_\infty(E_2^{\prime pq})$ and $u_2^{pq}(Z_\infty(E_2^{pq}))=Z_\infty(E_2^{\prime pq})$ and the $u^n$ are isomorphisms}, then we can conclude that $u$ is an \emph{isomorphism}.
\end{env}

\begin{env}[11.1.3]
\label{0.11.1.3}
Recall that if $(F^p(X))_{p\in\bb{Z}}$ is a (decreasing) \emph{filtration} of an object $X\in\C$, then we say that this filtration is \emph{separated} if $\inf(F^p(X))=0$, \emph{discrete} if there exists a $p$ such that $F^p(X)=0$, \emph{exhaustive} (or \emph{coseparated}) if $\sup(F^p(X))=X$, \emph{codiscrete} if there exists a $p$ such that $F^p(X)=X$.

We say that a spectral sequence $E=(E_r^{pq},E^n)$ is \emph{weakly convergent} if we have $B_\infty(E_2^{pq})=\sup_k(B_k(E_2^{pq}))$ and $Z_\infty(E_2^{pq})=\inf_k(Z_k(E_2^{pq}))$ (in other words, the objects of $B_\infty(E_2^{pq})$ and $Z_\infty(E_2^{pq})$ are determined from the data of (a) and (c) of the spectral sequence $E$).
We say that the spectral sequence $E$ is \emph{regular} if it is weakly convergent and if in addition:
\begin{enumerate}
  \item[(1st)] For every pair $(p,q)$, the decreasing sequence $(Z_k(E_2^{pq}))_{k\geq 2}$ is \emph{stable}; the hypothesis that $E$ is weakly convergent then implies that $Z_\infty(E_2^{pq})=Z_k(E_2^{pq})$ for $k$ large enough (depending on $p$ and $q$).
  \item[(2nd)] For every $n$, the filtration $(F^p(E^n))_{p\in\bb{Z}}$ of $E^n$ is \emph{discrete} and \emph{exhaustive}.
\end{enumerate}

We say that the spectral sequence $E$ is \emph{coregular} if it is weakly convergent and if in addition:
\begin{enumerate}
  \item[(3rd)] For every pair $(p,q)$, the increasing sequence $(B_k(E_2^{pq}))_{k\geq 2}$ is \emph{stable}, which implies that $B_\infty(E_2^{pq})=B_k(E_2^{pq})$, and as a result, $E_\infty^{pq}=\inf E_k^{pq}$.
  \item[(4th)] For every $n$, the filtration of $E^n$ is \emph{codiscrete}.
\end{enumerate}

Finally, we say that $E$ is \emph{biregular} if it is both regular and coregular, in other words if we have the following conditions:
\begin{enumerate}[label=(\alph*)]
  \item For every pair $(p,q)$, the sequences $(B_k(E_2^{pq}))_{k\geq 2}$ and $(Z_k(E_2^{pq}))_{k\geq 2}$ are \emph{stable} and we have $B_\infty(E_2^{pq})=B_k(E_2^{pq})$ and $Z_\infty(E_2^{pq})=Z_k(E_2^{pq})$ for $k$ large enough (which implies that $E_\infty^{pq}=E_k^{pq}$).
  \item For every $n$, the filatration $(F^p(E^n))_{p\in\bb{Z}}$ is \emph{discrete} and \emph{codiscrete} (which we also call \emph{finite}).
\end{enumerate}

The spectral sequences defined in (T, 2.4) are thus biregular spectral sequences.
\end{env}

\begin{env}[11.1.4]
\label{0.11.1.4}
Suppose that in the category $\C$, filtered inductive limits exist and the functor $\varinjlim$ is \emph{exact} (which is equivalent to saying that the axiom (AB~5) of (T, 1.5) is satisfied (cf.~T, 1.8)).
The condition that the filtration $(F^p(X))_{p\in\bb{Z}}$ of an object $X\in\C$ is exhaustive is then expressed as $\varinjlim_{p\to-\infty}F^p(X)=X$.
If a spectral sequence $E$ is weakly convergent, then we have $B_\infty(E_2^{pq})=\varinjlim_{k\to\infty}B_k(E_2^{pq})$; if in addition $u:E\to E'$ is a morphism from $E$ to a weakly convergent spectral sequence $E'$ in $\C$, then we have $u_2^{pq}(B_\infty(E_2^{pq}))=B_\infty(E_2^{\prime pq})$, by the exactness of $\varinjlim$.
In addition:
\end{env}

\begin{prop}[11.1.5]
\label{0.11.1.5}
Let $\C$ be an abelian category in which filtered inductive limits are exact, $E$ and $E'$ two regular spectral sequences in $\C$, $u:E\to E'$ a morphism of spectral sequences.
If the $u_2^{pq}$ are isomorphisms, then so is $u$.
\end{prop}

\begin{proof}
\label{proof-0.11.1.5}
We already know \sref{0.11.1.2} that the $u_r^{pq}$ are isomorphisms and that
\[
  u_2^{pq}(B_\infty(E_2^{pq}))=B_\infty(E_2^{\prime pq});
\]
\oldpage[0\textsubscript{III}]{26}
the hypothesis that $E$ and $E'$ are regular also implies that $u_2^{pq}(Z_\infty(E_2^{pq}))=Z_\infty(E_2^{\prime pq})$, and as $u_2^{pq}$ is an isomorphism, so is $u_\infty^{\prime pq}$; we thus conclude that $\gr_p(u^{p+q})$ is also an isomorphism.
But as the filtrations of the $E^n$ and the $E^{\prime n}$ are discrete and exhaustive, this implies that the $u^n$ are also isomorphisms (Bourbaki, \emph{Alg. comm.}, chap.~III, \textsection2, n\textsuperscript{o}8, th.~1).
\end{proof}







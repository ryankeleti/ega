\section{Rings of fractions}
\label{section:rings-of-fractions}

\setcounter{subsection}{-1}
\subsection{Rings and Algebras}
\label{subsection:rings-and-algs}

\begin{env}[1.0.1]
\label{0.1.0.1}
\oldpage[0\textsubscript{I}]{11}
All the rings considered in this treatise will have a \emph{unit element};
all the modules over such a ring will be assumed to be \emph{unitary};
the ring homomorphisms will always be assumed to \emph{send the unit element to the unit element};
unless otherwise stated, a subring of a ring $A$ will be assumed to \emph{contain the unit element of $A$}.
We will focus in particular on \emph{commutative} rings, and when we speak of a ring without specifying any details, it will be implied that it is commutative.
If $A$ is a not-necessarily-commutative ring, by $A$-module we will we mean a \emph{left} module unless stated otherwise.
\end{env}

\begin{env}[1.0.2]
\label{0.1.0.2}
Let $A$ and $B$ be not-necessarily-commutative rings and $\vphi:A\to B$ a homomorphism.
Any left (resp. right) $B$-module $M$ can be provided with a left (resp. right) $A$-module structure by $a\cdot m=\vphi(a)\cdot m$ (resp. $m\cdot a=m\cdot\vphi(a)$);
when it will be necessary to distinguish $M$ as an $A$-module or a $B$-module, we will denote by $M_{[\vphi]}$ the left (resp. right) $A$-module defined as such.
If $L$ is an $A$-module, then a homomorphism $u:L\to M_{[\vphi]}$ is a homomorphism of abelian groups such that $u(a\cdot x)=\vphi(a)\cdot u(x)$ for $a\in A$, $x\in L$;
we will also say that it is a \emph{$\vphi$-homomorphism} $L\to M$, and that the pair $(\vphi,u)$ (or, by abuse of language, $u$) is a \emph{di-homomorphism} from $(A,L)$ to $(B,M)$.
The pairs $(A,L)$ consisting of a ring $A$ and an $A$-module $L$ thus form a \emph{category} whose morphisms are di-homomorphisms.
\end{env}

\begin{env}[1.0.3]
\label{0.1.0.3}
Under the hypotheses of \sref{0.1.0.2}, if $\fk{J}$ is a left (resp. right) ideal of $A$, we denote by $B\fk{J}$ (resp. $\fk{J}B$) the left (resp. right) ideal $B\vphi(\fk{J})$ (resp. $\vphi(\fk{J})B$) of $B$ generated by $\vphi(\fk{J})$;
it is also the image of the canonical homomorphism $B\otimes_A\fk{J}\to B$ (resp. $\fk{J}\otimes_A B\to B$) of left (resp. right) $B$-modules.
\end{env}

\begin{env}[1.0.4]
\label{0.1.0.4}
If $A$ is a (commutative) ring, and $B$ a not-necessarily-commutative ring, then the data of a structure of an \emph{$A$-algebra} on $B$ is equivalent to the data of a ring homomorphism $\vphi:A\to B$ such that $\vphi(A)$ is contained in the center of $B$.
For all ideals $\fk{J}$ of $A$, $\fk{J}B=B\fk{J}$ is then a two-sided ideal of $B$, and for every $B$-module $M$, $\fk{J}M$ is then a $B$-module equal to $(B\fk{J})M$.
\end{env}

\begin{env}[1.0.5]
\label{0.1.0.5}
We will not dwell much on the notions of \emph{modules of finite type} and
(commutative) \emph{algebras of finite type};
to say that an $A$-module $M$ is of finite type means that there exists
\oldpage[0\textsubscript{I}]{12}
an exact sequence $A^p\to M\to 0$.
We say that an $A$-module $M$ admits a \emph{finite presentation} if it is isomorphic to the cokernel of a homomorphism $A^p\to A^q$, or, in other words, if there exists an exact sequence $A^p\to A^q\to M\to 0$.
We note that for a \emph{Noetherian} ring $A$, every $A$-module of finite type admits a finite presentation.

Let us recall that an $A$-algebra $B$ is said to be \emph{integral} over $A$ if every element in $B$ is a root in $B$ of a monic polynomial with coefficients in $A$;
equivalently, if every element of $B$ is contained in a subalgebra of $B$ which is an \emph{$A$-module of finite type}.
When this is so, and if $B$ is commutative, the subalgebra of $B$ generated by a finite subset of $B$ is an $A$-module of finite type;
for a commutative algebra $B$ to be integral and of finite type over $A$, it is necessary and sufficient that $B$ be an $A$-module of finite type;
we also say that $B$ is an \emph{integral $A$-algebra of finite type} (or simply \emph{finite}, if there is no chance of confusion).
It should be noted that in these definitions, it is not assumed that the homomorphism $A\to B$ defining the $A$-algebra structure is injective.
\end{env}

\begin{env}[1.0.6]
\label{0.1.0.6}
An \emph{integral} ring (or an \emph{integral domain}) is a ring in which the product of a finite family of elements $\neq 0$ is $\neq 0$;
equivalently, in such a ring, we have $0\neq 1$, and the product of two elements $\neq 0$ is $\neq0$.
A \emph{prime} ideal of a ring $A$ is an ideal $\fk{p}$ such that $A/\fk{p}$ is integral;
this implies that $\fk{p}\neq A$.
For a ring $A$ to have at least one prime ideal, it is necessary and sufficient that $A\neq\{0\}$.
\end{env}

\begin{env}[1.0.7]
\label{0.1.0.7}
A \emph{local} ring is a ring $A$ in which there exists a unique maximal ideal, which is thus the complement of the invertible elements, and contains all the ideals $\neq A$.
If $A$ and $B$ are local rings, and $\fk{m}$ and $\fk{n}$ their respective maximal ideals, then we say that a homomorphism $\vphi:A\to B$ is \emph{local} if $\vphi(\fk{m})\subset\fk{n}$ (or, equivalently, if $\vphi^{-1}(\fk{n})=\fk{m}$).
By passing to quotients, such a homomorphism then defines a monomorphism from the residue field $A/\fk{m}$ to the residue field $B/\fk{n}$.
The composition of any two local homomorphisms is a local homomorphism.
\end{env}

\subsection{Radical of an ideal. Nilradical and radical of a ring}
\label{subsection:radical-and-nilradical}

\begin{env}[1.1.1]
\label{0.1.1.1}
Let $\fk{a}$ be an ideal of a ring $A$;
the \emph{radical} of $\fk{a}$, denoted by $\rad(\fk{a})$, is the set of $x\in A$ such that $x^n\in\fk{a}$ for an integer $n>0$;
it is an ideal containing $\fk{a}$.
We have $\rad(\fk{r}(\fk{a}))=\rad(\fk{a})$;
the relation $\fk{a}\subset\fk{b}$ implies $\rad(\fk{a})\subset\rad(\fk{b})$;
the radical of a finite intersection of ideals is the intersection of their radicals.
If $\vphi$ is a homomorphism from another ring $A'$ to $A$, then we have $\rad(\vphi^{-1}(\fk{a}))=\vphi^{-1}(\rad(\fk{a}))$ for any ideal $\fk{a}\subset A$.
For an ideal to be the radical of an ideal, it is necessary and sufficient that it be an intersection of prime ideals.
The radical of an ideal $\fk{a}$ is the intersection of the \emph{minimal} prime ideals which contain $\fk{a}$;
if $A$ is Noetherian, there are finitely many of these minimal prime ideals.

The radical of the ideal $(0)$ is also called the \emph{nilradical} of $A$;
it is the set $\nilrad$ of the nilpotent elements of $A$.
We say that the ring $A$ is \emph{reduced} if $\nilrad=(0)$;
for every ring $A$, the quotient $A/\nilrad$ of $A$ by its nilradical is a reduced ring.
\end{env}

\begin{env}[1.1.2]
\label{0.1.1.2}
Recall that the \emph{nilradical} $\nilrad(A)$ of a (not-necessarily-commutative) ring $A$ is the intersection of the maximal left ideals of $A$ (and also the intersection of maximal right ideals).
The nilradical of $A/\nilrad(A)$ is $(0)$.
\end{env}

\subsection{Modules and rings of fractions}
\label{subsection:modules-and-rings-of-fractions}

\begin{env}[1.2.1]
\label{0.1.2.1}
We
\oldpage[0\textsubscript{I}]{13}
say that a subset $S$ of a ring $A$ is \emph{multiplicative} if $1\in S$ and the product of two elements of $S$ is in $S$.
The examples which will be the
most important in what follows are: 1st, the set $S_f$ of
powers $f^n$ ($n\geq 0$) of an element $f\in A$; and 2nd, the
complement $A\setmin\fk{p}$ of a \emph{prime} ideal $\fk{p}$ of $A$.
\end{env}

\begin{env}[1.2.2]
\label{0.1.2.2}
Let $S$ be a multiplicative subset of a ring $A$, and $M$ an $A$-module; on the set
$M\times S$, the relation between pairs $(m_1,s_1)$ and $(m_2,s_2)$:
\begin{center}
  ``there exists an $s\in S$ such that $s(s_1 m_2-s_2 m_1)=0$''
\end{center}
is an equivalence relation. We denote by $S^{-1}M$ the quotient set of
$M\times S$ by this relation, and by $m/s$ the canonical image of the pair $(m,s)$ in $S^{-1}M$; we call $i_M^S:m\mapsto m/1$ (also denoted $i^S$) the
\emph{canonical} map from $M$ to $S^{-1}M$. This map is, in general, neither
injective nor surjective; its kernel is the set of $m\in M$ such that there
exists an $s\in S$ for which $sm=0$.

On $S^{-1}M$ we define an additive group law by setting
\[
  (m_1/s_1)+(m_2/s_2)=(s_2 m_1+s_1 m_2)/(s_1 s_2)
\]
(one can check that it is independent of the choice of representative of the elements of $S^{-1}M$, which are equivalence classes).
On $S^{-1}A$ we further define a multiplicative law by setting
$(a_1/s_1)(a_2/s_2)=(a_1 a_2)/(s_1 s_2)$, and finally an exterior law on
$S^{-1}M$, acted on by the set of elements of $S^{-1}A$, by setting
$(a/s)(m/s')=(am)/(ss')$.
It can then be shown that $S^{-1}A$ is endowed with a
ring structure (called \emph{the ring of fractions of $A$ with denominators in
$S$}) and $S^{-1}M$ with the structure of an $S^{-1}A$-module (called \emph{the
module of fractions of $M$ with denominators in $S$}); for all $s\in S$, $s/1$
is invertible in $S^{-1}A$, its inverse being $1/s$.
The canonical map $i_A^S$ (resp. $i_M^S$) is a ring homomorphism (resp. a homomorphism of $A$-modules,
$S^{-1}M$ being considered as an $A$-module by means of the homomorphism
$i_A^S:A\to S^{-1}A$).
\end{env}

\begin{env}[1.2.3]
\label{0.1.2.3}
If $S_f=\{f^n\}_{n\geq 0}$ for a $f\in A$, we write $A_f$ and $M_f$ instead
of $S_f^{-1}A$ and $S_f^{-1}M$; when $A_f$ is considered as algebra over $A$, we
can write $A_f=A[1/f]$. $A_f$ is isomorphic to the quotient algebra
$A[T]/(fT-1)A[T]$. When $f=1$, $A_f$ and $M_f$ are canonically identified with $A$ and
$M$; if $f$ is nilpotent, then $A_f$ and $M_f$ are $0$.

When $S=A\setmin\fk{p}$, with $\fk{p}$ a prime ideal of $A$, we write
$A_\fk{p}$ and $M_\fk{p}$ instead of $S^{-1}A$ and $S^{-1}M$;
$A_\fk{p}$ is a \emph{local ring} whose maximal ideal $\fk{q}$ is
generated by $i_A^S(\fk{p})$, and we have
$(i_A^S)^{-1}(\fk{q})=\fk{p}$; by passing to quotients, $i_A^S$
gives a monomorphism from the integral ring $A/\fk{p}$ to the field
$A_\fk{p}/\fk{q}$, which can be identified with the field of fractions of
$A/\fk{p}$.
\end{env}

\begin{env}[1.2.4]
\label{0.1.2.4}
The ring of fractions $S^{-1}A$ and the canonical homomorphism $i_A^S$ are a
solution to a \emph{universal mapping problem}: any homomorphism $u$ from $A$ to
a ring $B$ such that $u(S)$ is composed of \emph{invertible} elements in $B$
factors uniquely as
\[
  u:A\xrightarrow{i_A^S}S^{-1}A\xrightarrow{u^*}B
\]
where
\oldpage[0\textsubscript{I}]{14}
$u^*$ is a ring homomorphism.
Under the same hypotheses, let $M$ be an $A$-module, $N$ a $B$-module, and $v:M\to N$ a homomorphism of $A$-modules (for the $B$-module structure on $N$ defined by $u:A\to B$); then $v$ factors uniquely as
\[
  v:M\xrightarrow{i_M^S}S^{-1}M\xrightarrow{v^*}N
\]
where $v^*$ is a homomorphism of $S^{-1}A$-modules (for the $S^{-1}A$-module structure on $N$ defined by $u^*$).
\end{env}

\begin{env}[1.2.5]
\label{0.1.2.5}
We define a canonical isomorphism $S^{-1}A\otimes_A M\isoto S^{-1}M$ of $S^{-1}A$-modules, sending the element $(a/s)\otimes m$ to the element $(am)/s$, with the inverse isomorphism sending $m/s$ to $(1/s)\otimes m$.
\end{env}

\begin{env}[1.2.6]
\label{0.1.2.6}
For every ideal $\fk{a}'$ of $S^{-1}A$, $\fk{a}=(i_A^S)^{-1}(\fk{a}')$ is an ideal of $A$, and
$\fk{a}'$ is the ideal of $S^{-1}A$ generated by $i_A^S(\fk{a})$,
which can be identified with $S^{-1}\fk{a}$ \sref{0.1.3.2}. The map
$\fk{p}'\mapsto(i_A^S)^{-1}(\fk{p}')$ is an isomorphism, for the structure given by ordering, from the set of \emph{prime} ideals of $S^{-1}A$ to the set of
prime ideals $\fk{p}$ of $A$ such that $\fk{p}\cap S=\emp$. In
addition, the local rings $A_\fk{p}$ and $(S^{-1}A)_{S^{-1}\fk{p}}$
are canonically isomorphic \sref{0.1.5.1}.
\end{env}

\begin{env}[1.2.7]
\label{0.1.2.7}
When $A$ is an \emph{integral} ring, for which $K$ denotes its field of
fractions, the canonical map $i_A^S:A\to S^{-1}A$ is injective for any
multiplicative subset $S$ not containing $0$, and $S^{-1}A$ is then canonically identified
with a subring of $K$ containing $A$. In particular, for every prime
ideal $\fk{p}$ of $A$, $A_\fk{p}$ is a local ring containing $A$,
with maximal ideal $\fk{p}A_\fk{p}$, and we have
$\fk{p}A_\fk{p}\cap A=\fk{p}$.
\end{env}

\begin{env}[1.2.8]
\label{0.1.2.8}
If $A$ is a \emph{reduced} ring \sref{0.1.1.1}, so is $S^{-1}A$: indeed, if
$(x/s)^n=0$ for $x\in A$, $s\in S$, then this means that there exists an
$s'\in S$ such that $s' x^n=0$, hence $(s' x)^n=0$, which, by hypothesis, implies
$s' x=0$, so $x/s=0$.
\end{env}

\subsection{Functorial properties}
\label{subsection:func-ring-of-fractions}

\begin{env}[1.3.1]
\label{0.1.3.1}
Let $M$ and $N$ be $A$-modules, and $u$ an $A$-homomorphism $M\to N$. If $S$ is a
multiplicative subset of $A$, we define a $S^{-1}A$-homomorphism
$S^{-1}M\to S^{-1}N$, denoted by $S^{-1}u$, by setting $S^{-1}u(m/s)=u(m)/s$; if
$S^{-1}M$ and $S^{-1}N$ are canonically identified with $S^{-1}A\otimes_A M$ and
$S^{-1}A\otimes_A N$ \sref{0.1.2.5}, then $S^{-1}u$ is considered as $1\otimes u$.
If $P$ is a third $A$-module, and $v$ an $A$-homomorphism $N\to P$, we have
$S^{-1}(v\circ u)=(S^{-1}v)\circ(S^{-1}u)$; in other words, $S^{-1}M$ is a
\emph{covariant functor in $M$}, from the category of $A$-modules to that of
$S^{-1}A$-modules ($A$ and $S$ being fixed).
\end{env}

\begin{env}[1.3.2]
\label{0.1.3.2}
The functor $S^{-1}M$ is \emph{exact}; in other words, if the sequence
\[
  M\xrightarrow{u}N\xrightarrow{v}P
\]
is exact, then so is the sequence
\[
  S^{-1}M\xrightarrow{S^{-1}u}S^{-1}N\xrightarrow{S^{-1}v}S^{-1}P.
\]
In particular, if $u:M\to N$ is injective (resp. surjective), the same is true
for $S^{-1}u$;
\oldpage[0\textsubscript{I}]{15}
if $N$ and $P$ are submodules of $M$, $S^{-1}N$ and $S^{-1}P$ are canonically identified with submodules of $S^{-1}M$, and we have
\[
  S^{-1}(N+P)=S^{-1}N+S^{-1}P\text{ and }S^{-1}(N\cap P)=(S^{-1}N)\cap(S^{-1}P).
\]
\end{env}

\begin{env}[1.3.3]
\label{0.1.3.3}
Let $(M_\alpha,\vphi_{\beta\alpha})$ be an inductive system of $A$-modules; then
$(S^{-1}M_\alpha,S^{-1}\vphi_{\beta\alpha})$ is an inductive system of
$S^{-1}A$-modules. Expressing the $S^{-1}M_\alpha$ and
$S^{-1}\vphi_{\beta\alpha}$ as tensor products (\sref{0.1.2.5} and
\sref{0.1.3.1}), it follows from the permutability of the tensor product and
inductive limit operations that we have a canonical isomorphism
\[
  S^{-1}\varinjlim M_\alpha\isoto\varinjlim S^{-1}M_\alpha
\]
which is we can further express by saying that the functor $S^{-1}M$ (in $M$)
\emph{commutes with inductive limits}.
\end{env}

\begin{env}[1.3.4]
\label{0.1.3.4}
Let $M$ and $N$ be $A$-modules; there is a canonical \emph{functorial} (in $M$ and $N$) isomorphism
\[
  (S^{-1}M)\otimes_{S^{-1}A}(S^{-1}N)\isoto S^{-1}(M\otimes_A N)
\]
which sends $(m/s)\otimes(n/t)$ to $(m\otimes n)/st$.
\end{env}

\begin{env}[1.3.5]
\label{0.1.3.5}
We also have a \emph{functorial} (in $M$ and $N$) homomorphism
\[
  S^{-1}\Hom_A(M,N)\to\Hom_{S^{-1}A}(S^{-1}M,S^{-1}N)
\]
which sends $u/s$ to the homomorphism $m/t\mapsto u(m)/st$. When $M$ has a
finite presentation, the above homomorphism is an \emph{isomorphism}: it is
immediate when $M$ is of the form $A^r$, and we pass to the general case by
starting with the exact sequence $A^p\to A^q\to M\to 0$ and using the
exactness of the functor $S^{-1}M$ and the left-exactness of the functor
$\Hom_A(M,N)$ in $M$. Note that this is always the case when $A$ is
\emph{Noetherian} and the $A$-module $M$ is \emph{of finite type}.
\end{env}

\subsection{Change of multiplicative subset}
\label{subsection:change-of-mult-subset}

\begin{env}[1.4.1]
\label{0.1.4.1}
Let $S$ and $T$ be multiplicative subsets of a ring $A$ such that $S\subset T$;
there exists a canonical homomorphism $\rho_A^{T,S}$ (or simply $\rho^{T,S}$)
from $S^{-1}A$ to $T^{-1}A$, sending the element denoted $a/s$ of $S^{-1}A$ to
the element denoted $a/s$ in $T^{-1}A$; we have $i_A^T=\rho_A^{T,S}\circ i_A^S$.
For every $A$-module $M$, there exists, in the same way, an $S^{-1}A$-linear map
from $S^{-1}M$ to $T^{-1}M$ (the latter considered as an $S^{-1}A$-module by
the homomorphism $\rho_A^{T,S}$), which sends the element $m/s$ of $S^{-1}M$
to the element $m/s$ of $T^{-1}M$; we denote this map by $\rho_M^{T,S}$, or
simply $\rho^{T,S}$, and we still have $i_M^T=\rho_M^{T,S}\circ i_M^S$; by the
canonical identification \sref{0.1.2.5}, $\rho_M^{T,S}$ is identified with
$\rho_A^{T,S}\otimes 1$. The homomorphism $\rho_M^{T,S}$ is a \emph{functorial
morphism} (or natural transformation) from the functor $S^{-1}M$ to the functor
$T^{-1}M$, in other words, the diagram
\[
  \xymatrix{
    S^{-1}M\ar[r]^{S^{-1}u}\ar[d]_{\rho_M^{T,S}} &
    S^{-1}N\ar[d]^{\rho_N^{T,S}}\\
    T^{-1}M\ar[r]^{T^{-1}u} &
    T^{-1}N
  }
\]
is
\oldpage[0\textsubscript{I}]{16}
commutative, for every homomorphism $u:M\to N$; $T^{-1}u$ is entirely
determined by $S^{-1}u$, since, for $m\in M$ and $t\in T$, we have
\[
  (T^{-1}u)(m/t)=(t/1)^{-1}\rho^{T,S}((S^{-1}u)(m/1)).
\]
\end{env}

\begin{env}[1.4.2]
\label{0.1.4.2}
With the same notation, for $A$-modules $M$ and $N$, the diagrams (cf. \sref{0.1.3.4} and \sref{0.1.3.5})
\[
  \xymatrix{
    (S^{-1}M)\otimes_{S^{-1}A}(S^{-1}N)\ar[r]^\sim \ar[d] &
    S^{-1}(M\otimes_A N)\ar[d] & &
    S^{-1}\Hom_A(M,N)\ar[r]\ar[d] &
    \Hom_{S^{-1}A}(S^{-1}M,S^{-1}N)\ar[d]\\
    (T^{-1}M)\otimes_{T^{-1}A}(T^{-1}N)\ar[r]^\sim &
    T^{-1}(M\otimes_A N) & &
    T^{-1}\Hom_A(M,N)\ar[r] &
    \Hom_{T^{-1}A}(T^{-1}M,T^{-1}N)
  }
\]
are commutative.
\end{env}

\begin{env}[1.4.3]
\label{0.1.4.3}
There is an important case, in which the homomorphism $\rho^{T,S}$ is
\emph{bijective}, when we then know that every element of $T$ is a divisor of an
element of $S$; we then identify the modules $S^{-1}M$ and $T^{-1}M$ via
$\rho^{T,S}$. We say that $S$ is \emph{saturated} if every divisor in $A$ of an
element of $S$ is in $S$; by replacing $S$ with the set $T$ of all the divisors
of the elements of $S$ (a set which is multiplicative and saturated), we see
that we can always, if we wish, consider only modules of
fractions $S^{-1}M$, where $S$ is saturated.
\end{env}

\begin{env}[1.4.4]
\label{0.1.4.4}
If $S$, $T$, and $U$ are three multiplicative subsets of $A$ such that $S\subset T\subset U$, then we have
\[
  \rho^{U,S}=\rho^{U,T}\circ\rho^{T,S}.
\]
\end{env}

\begin{env}[1.4.5]
\label{0.1.4.5}
Consider an \emph{increasing filtered family} $(S_\alpha)$ of multiplicative
subsets of $A$ (we write $\alpha\leq\beta$ for $S_\alpha\subset S_\beta$),
and let $S$ be the multiplicative subset $\bigcup_\alpha S_\alpha$; let us put
$\rho_{\beta\alpha}=\rho_A^{S_\beta,S_\alpha}$ for $\alpha\leq\beta$;
according to \sref{0.1.4.4}, the homomorphisms $\rho_{\beta\alpha}$ define a
ring $A'$ as the \emph{inductive limit} of the inductive system of rings
$(S_\alpha^{-1}A,\rho_{\beta\alpha})$.
Let $\rho_\alpha$ be the canonical map $S_\alpha^{-1}A\to A'$, and let $\vphi_\alpha=\rho_A^{S,S_\alpha}$; as
$\vphi_\alpha=\vphi_\beta\circ\rho_{\beta\alpha}$ for $\alpha\leq\beta$
according to \sref{0.1.4.4}, we can uniquely define a homomorphism $\vphi:A'\to S^{-1}A$ such that the diagram
\[
  \xymatrix{
    & S_\alpha^{-1}A\ar[ddl]_{\rho_\alpha}\ar[d]^{\rho_{\beta\alpha}}\ar[rdd]^{\vphi_\alpha}\\
    & S_\beta^{-1}A\ar[ld]^{\rho_\beta}\ar[rd]_{\vphi_\beta}
    & & (\alpha\leq\beta)\\
    A'\ar[rr]^\vphi & &
    S^{-1}A
  }
\]
is commutative.
In fact, $\vphi$ is an \emph{isomorphism}; it is indeed immediate by construction that $\vphi$ is surjective.
On the other hand, if $\rho_\alpha(a/s_\alpha)\in A'$ is such that $\vphi(\rho_\alpha(a/s_\alpha))=0$, then this means that $a/s_\alpha=0$ in $S^{-1}A$, that is to say that there exists an $s\in S$ such that $sa=0$; but there is a $\beta\geq\alpha$ such that $s\in S_\beta$, and consequently, as $\rho_\alpha(a/s_\alpha)=\rho_\beta(sa/ss_\alpha)=0$, we find that $\vphi$ is injective.
The case for an $A$-module $M$ is treated likewise, and we have thus defined canonical isomorphisms
\[
  \varinjlim S_\alpha^{-1}A\isoto(\varinjlim S_\alpha)^{-1}A,\
  \varinjlim S_\alpha^{-1}M\isoto(\varinjlim S_\alpha)^{-1}M,
\]
the second being \emph{functorial} in $M$.
\end{env}

\begin{env}[1.4.6]
\label{0.1.4.6}
\oldpage[0\textsubscript{I}]{17}
Let $S_1$ and $S_2$ be multiplicative subsets of $A$; then $S_1 S_2$ is also a
multiplicative subset of $A$. Let us denote by $S_2'$ the canonical image of
$S_2$ in the ring $S_1^{-1}A$, which is a multiplicative subset of this ring.
For every $A$-module $M$ there is then a functorial isomorphism
\[
  {S_2'}^{-1}(S_1^{-1}M)\isoto(S_1 S_2)^{-1}M
\]
which sends $(m/s_1)/(s_2/1)$ to the element $m/(s_1 s_2)$.
\end{env}

\subsection{Change of ring}
\label{subsection:change-of-ring}

\begin{env}[1.5.1]
\label{0.1.5.1}
Let $A$ and $A'$ be rings, $\vphi$ a homomorphism $A'\to A$, and $S$ (resp. $S'$)
a multiplicative subset of $A$ (resp. $A'$), such that $\vphi(S')\subset S$; the
composition homomorphism $\smash{A'\xrightarrow{\vphi}A\to S^{-1}A}$ factors as
\[
  A'\to{S'}^{-1}\xrightarrow{\vphi^{S'}}S^{-1}A,
\]
by \sref{0.1.2.4}; where $\vphi^{S'}(a'/s')=\vphi(a')/\vphi(s')$. If
$A=\vphi(A')$ and $S=\vphi(S')$, then $\vphi^{S'}$ is \emph{surjective}. If
$A'=A$ and $\vphi$ is the identity, then $\vphi^{S'}$ is exactly the
homomorphism $\rho_A^{S,S'}$ defined in \sref{0.1.4.1}.
\end{env}

\begin{env}[1.5.2]
\label{0.1.5.2}
Under the hypotheses of \sref{0.1.5.1}, let $M$ be an $A$-module.
There exists a canonical functorial morphism
\[
  \sigma:{S'}^{-1}(M_{[\vphi]})\to(S^{-1}M)_{[\vphi^{S'}]}
\]
of ${S'}^{-1}A'$-modules, sending each element $m/s'$ of
${S'}^{-1}(M_{[\vphi]})$ to the element $m/\vphi(s')$ of
$(S^{-1}M)_{[\vphi^{S'}]}$; indeed, we immediately see that this definition
does not depend on the representative $m/s'$ of the element in question. When
$S=\vphi(S')$, the homomorphism $\sigma$ is \emph{bijective}.
When $A'=A$ and $\vphi$ is the identity, $\sigma$ is none other than the homomorphism $\rho_M^{S,S'}$ defined in \sref{0.1.4.1}.

When, in particular, we take $M=A$ the homomorphism $\vphi$ defines an
$A'$-algebra structure on $A$; ${S'}^{-1}(A_{[\vphi]})$ is then endowed with a ring
structure, with which it can be identified with $(\vphi(S'))^{-1}A$, and the
homomorphism $\sigma:{S'}^{-1}(A_{[\vphi]})\to S^{-1}A$ is a homomorphism of
${S'}^{-1}A'$-algebras.
\end{env}

\begin{env}[1.5.3]
\label{0.1.5.3}
Let $M$ and $N$ be $A$-modules; by composing the homomorphisms defined in
\sref{0.1.3.4} and \sref{0.1.5.2}, we obtain a homomorphism
\[
  (S^{-1}M\otimes_{S^{-1}A}S^{-1}N)_{[\vphi^{S'}]}\longleftarrow{S'}^{-1}((M\otimes A)_{[\vphi]})
\]
which is an isomorphism when $\vphi(S')=S$. Similarly, by composing the
homomorphisms in \sref{0.1.3.5} and \sref{0.1.5.2}, we obtain a
homomorphism
\[
  {S'}^{-1}((\Hom_A(M,N))_{[\vphi]})\to(\Hom_{S^{-1}A}(S^{-1}M,S^{-1}N))_{[\vphi^{S'}]}
\]
which is an isomorphism when $\vphi(S')=S$ and $M$ admits a finite presentation.
\end{env}

\begin{env}[1.5.4]
\label{0.1.5.4}
Let us now consider an $A'$-module $N'$, and form the tensor product
$N'\otimes_{A'}A_{[\vphi]}$, which can be considered as an $A$-module by setting
$a\cdot(n'\otimes b)=n'\otimes(ab)$.
There is a functorial isomorphism of $S^{-1}A$-modules
\[
  \tau:({S'}^{-1}N')\otimes_{{S'}^{-1}A'}(S^{-1}A)_{[\vphi^{S'}]}\isoto S^{-1}(N'\otimes_{A'}A_{[\vphi]})
\]
which
\oldpage[0\textsubscript{I}]{18}
sends the element $(n'/s')\otimes(a/s)$ to the element
$(n'\otimes a)/(\vphi(s')s)$; indeed, we can show that when we replace
$n'/s'$ (resp. $a/s$) by another expression of the same element,
$(n'\otimes a)/(\vphi(s')s)$ does not change; on the other hand, we can define
a homomorphism inverse to $\tau$ by sending $(n'\otimes a)/s$ to the element
$(n'/1)\otimes(a/s)$: we use the fact that $S^{-1}(N'\otimes_{A'}A_{[\vphi]})$
is canonically isomorphic to $(N'\otimes_{A'}A_{[\vphi]})\otimes_A S^{-1}A$
\sref{0.1.2.5}, so also to $N'\otimes_{A'}(S^{-1}A)_{[\psi]}$, where we
denote by $\psi$ the composite homomorphism $a'\mapsto\vphi(a')/1$ from $A'$ to $S^{-1}A$.
\end{env}

\begin{env}[1.5.5]
\label{0.1.5.5}
If $M'$ and $N'$ are $A'$-modules, then by composing the isomorphisms \sref{0.1.3.4} and \sref{0.1.5.4}, we obtain an isomorphism
\[
  {S'}^{-1}M\otimes_{{S'}^{-1}A'}{S'}^{-1}N'\otimes_{{S'}^{-1}A'}S^{-1}A\isoto S^{-1}(M'\otimes_{A'}N'\otimes_{A'}A).
\]
Likewise, if $M'$ admits a finite presentation, we have by \sref{0.1.3.5} and \sref{0.1.5.4} an isomorphism
\[
  \Hom_{{S'}^{-1}A'}({S'}^{-1}M',{S'}^{-1}N')\otimes_{{S'}^{-1}A'}S^{-1}A\isoto S^{-1}(\Hom_{A'}(M',N')\otimes_{A'}A).
\]
\end{env}

\begin{env}[1.5.6]
\label{0.1.5.6}
Under the hypotheses of \sref{0.1.5.1}, let $T$ (resp. $T'$) be another multiplicative subset of $A$ (resp. $A'$) such that $S\subset T$ (resp. $S'\subset T'$) and $\vphi(T')\subset T$.
Then the diagram
\[
  \xymatrix{
    {S'}^{-1}A'\ar[r]^{\vphi^{S'}}\ar[d]_{\rho^{T',S'}} &
    S^{-1}A\ar[d]^{\rho^{T,S}}\\
    {T'}^{-1}A'\ar[r]^{\vphi^{T'}} &
    T^{-1}A
  }
\]
is commutative.
If $M$ is an $A$-module, then the diagram
\[
  \xymatrix{
    {S'}^{-1}(M_{[\vphi]})\ar[r]^\sigma\ar[d]_{\rho^{T',S'}} &
    (S^{-1}M)_{[\vphi^{S'}]}\ar[d]^{\rho^{T,S}}\\
    {T'}^{-1}(M_{[\vphi]})\ar[r]^\sigma &
    (T^{-1}M)_{[\vphi^{T'}]}
  }
\]
is commutative.
Finally, if $N'$ is an $A'$-module, then the diagram
\[
  \xymatrix{
    ({S'}^{-1}N')\otimes_{{S'}^{-1}A'}(S^{-1}A)_{[\vphi^{S'}]}\ar[r]^\sim_\tau\ar[d] &
    S^{-1}(N'\otimes_{A'}A_{[\vphi]})\ar[d]^{\rho^{T,S}}\\
    ({T'}^{-1}N')\otimes_{{T'}^{-1}A'}(T^{-1}A)_{[\vphi^{T'}]}\ar[r]^\sim_\tau &
    T^{-1}(N'\otimes_{A'}A_{[\vphi]})
  }
\]
is commutative, the left vertical arrow obtained by applying $\rho_{N'}^{T',S'}$ to ${S'}^{-1}N'$ and $\rho_A^{T,S}$ to $S^{-1}A$.
\end{env}

\begin{env}[1.5.7]
\label{0.1.5.7}
\oldpage[0\textsubscript{I}]{19}
Let $A''$ be a third ring, $\vphi':A''\to A'$ a ring homomorphism, and $S''$ a multiplicative subset of $A''$ such that $\vphi'(S'')\subset S'$.
Let $\vphi''=\vphi\circ\vphi'$; then we have
\[
  {\vphi''}^{S''}=\vphi^{S'}\circ{\vphi'}^{S''}.
\]
Let $M$ be an $A$-module; evidently we have $M_{[\vphi'']}=(M_{[\vphi]})_{[\vphi']}$; if $\sigma'$ and $\sigma''$ are the homomorphisms defined by $\vphi'$ and $\vphi''$ in the same way as how $\sigma$ is defined in \sref{0.1.5.2} by $\vphi$, then we have the transitivity formula
\[
  \sigma''=\sigma\circ\sigma'.
\]

Finally, let $N''$ be an $A''$-module; the $A$-module $N''\otimes_{A''}A_{[\vphi'']}$ is canonically identified with $(N''\otimes_{A''}{A'}_{[\vphi']})\otimes_{A'}A_{[\vphi]}$, and likewise the $S^{-1}A$-module $({S''}^{-1}N'')\otimes_{{S''}^{-1}A''}(S^{-1}A)_{[{\vphi''}^{S''}]}$ is canonically identified with $(({S''}^{-1}N'')\otimes_{{S''}^{-1}A''}({S'}^{-1}A')_{[{\vphi'}^{S''}]})
  \otimes_{{S'}^{-1}A'}(S^{-1}A)_{[\vphi^{S'}]}$.
With these identifications, if $\tau'$ and $\tau''$ are the isomorphisms defined by $\vphi'$ and $\vphi''$ in the same way as how $\tau$ is defined in \sref{0.1.5.4} by $\vphi$, then we have the transitivity formula
\[
  \tau''=\tau\circ(\tau'\otimes 1).
\]
\end{env}

\begin{env}[1.5.8]
\label{0.1.5.8}
Let $A$ be a subring of a ring $B$; for every \emph{minimal} prime ideal $\fk{p}$ of $A$, there exists a minimal prime ideal $\fk{q}$ of $B$ such that $\fk{p}=A\cap\fk{q}$.
Indeed, $A_\fk{p}$ is a subring of $B_\fk{p}$ \sref{0.1.3.2} and has \emph{a single prime ideal $\fk{p}'$} \sref{0.1.2.6}; since $B_\fk{p}$ is not $0$, it has at least one prime ideal $\fk{q}'$ and we necessarily have $\fk{q}'\cap A_\fk{p}=\fk{p}'$; the prime ideal $\fk{q}_1$ of $B$, the inverse image of $\fk{q}'$, is thus such that $\fk{q}_1\cap A=\fk{p}$, and \emph{a fortiori} we have $\fk{q}\cap A=\fk{p}$ for every minimal prime ideal $\fk{q}$ of $B$ contained in $\fk{q}_1$.
\end{env}

\subsection{Identification of the module $M_f$ as an inductive limit}
\label{subsection:localization-as-inductive-limit}

\begin{env}[1.6.1]
\label{0.1.6.1}
Let $M$ be an $A$-module and $f$ an element of $A$.
Consider a sequence $(M_n)$ of $A$-modules, all identical to $M$, and for each pair of integers $m\leq n$, let $\vphi_{nm}$ be the homomorphism $z\mapsto f^{n-m}z$ from $M_m$ to $M_n$; it is immediate that $((M_n),(\vphi_{nm}))$ is an \emph{inductive system} of $A$-modules; let $N=\varinjlim M_n$ be the inductive limit of this system.
We define a canonical \emph{functorial} $A$-isomorphism from $N$ to $M_f$.
For this, let us note that, for all $n$, $\theta_n:z\mapsto z/f^n$ is an $A$-homomorphism from $M=M_n$ to $M_f$, and it follows from the definitions that we have $\theta_n\circ\vphi_{nm}=\theta_m$ for $m\leq n$.
As a result, there exists an $A$-homomorphism $\theta:N\to M_f$ such that, if $\vphi_n$ denotes the canonical homomorphism $M_n\to N$, then we have $\theta_n=\theta\circ\vphi_n$ for all $n$.
Since, by hypothesis, every element of $M_f$ is of the form $z/f^n$ for at least one $n$, it is clear that $\theta$ is surjective.
On the other hand, if $\theta(\vphi_n(z))=0$, or, in other words, if $z/f^n=0$, then there exists an integer $k>0$ such that $f^k z=0$, so $\vphi_{n+k,n}(z)=0$, which gives $\vphi_n(z)=0$.
We can therefore identify $M_f$ with $\varinjlim M_n$ via $\theta$.
\end{env}

\begin{env}[1.6.2]
\label{0.1.6.2}
Now write $M_{f,n}$, $\vphi_{nm}^f$, and $\vphi_n^f$ instead of $M_n$, $\vphi_{nm}$, and $\vphi_n$.
Let $g$ be another element of $A$.
Since $f^n$ divides $f^n g^n$, we have a functorial homomorphism
\[
  \rho_{fg,f}:M_f\to M_{fg}\quad(\sref{0.1.4.1}\text{ and }\sref{0.1.4.3});
\]
if
\oldpage[0\textsubscript{I}]{20}
we identify $M_f$ and $M_{fg}$ with $\varinjlim M_{f,n}$ and $\varinjlim M_{fg,n}$ respectively, then $\rho_{fg,f}$ identifies with the \emph{inductive limit} of the maps $\rho_{fg,f}^n:M_{f,n}\to M_{fg,n}$, defined by $\rho_{fg,f}^n(z)=g^n z$.
Indeed, this follows immediately from the commutativity of the diagram
\[
  \xymatrix{
    M_{f,n}\ar[r]^{\rho_{fg,f}^n}\ar[d]_{\vphi_n^f} &
    M_{fg,n}\ar[d]^{\vphi_n^{fg}}\\
    M_f\ar[r]^{\rho_{fg,f}} &
    M_{fg}.
  }
\]
\end{env}

\subsection{Support of a module}
\label{subsection:support-of-module}

\begin{env}[1.7.1]
\label{0.1.7.1}
Given an $A$-module $M$, we define the \emph{support} of $M$, denoted by $\Supp(M)$, to be the set of prime ideals $\fk{p}$ of $A$ such that $M_\fk{p}\neq 0$.
For it to be the case that $M=0$, it is necessary and sufficient that $\Supp(M)=\emp$, because if $M_\fk{p}=0$ for all $\fk{p}$, then the annihilator of an element $x\in M$ cannot be contained in any prime ideal of $A$, and so is the whole of $A$.
\end{env}

\begin{env}[1.7.2]
\label{0.1.7.2}
If $0\to N\to M\to P\to 0$ is an exact sequence of $A$-modules, then we have
\[
  \Supp(M)=\Supp(N)\cup\Supp(P)
\]
because, for every prime ideal $\fk{p}$ of $A$, the sequence $0\to N_\fk{p}\to M_\fk{p}\to P_\fk{p}\to 0$ is exact \sref{0.1.3.2} and in order that $M_\fk{p}=0$, it is necessary and sufficient that $N_\fk{p}=P_\fk{p}=0$.
\end{env}

\begin{env}[1.7.3]
\label{0.1.7.3}
If $M$ is the sum of a family $(M_\lambda)$ of submodules, then $M_\fk{p}$ is the sum of the $(M_\lambda)_\fk{p}$ for every prime ideal $\fk{p}$ of $A$ (\sref{0.1.3.3} and \sref{0.1.3.2}), so $\Supp(M)=\bigcup_\lambda\Supp(M_\lambda)$.
\end{env}

\begin{env}[1.7.4]
\label{0.1.7.4}
If $M$ is an $A$-module \emph{of finite type}, then $\Supp(M)$ is the set of prime ideals \emph{containing the annihilator of} $M$.
Indeed, if $M$ is cyclic and generated by $x$, then to say that $M_\fk{p}=0$ is to say that that there exists an $s\not\in\fk{p}$ such that $s\cdot x=0$, and thus that $\fk{p}$ does not contain the annihilator of $x$.
Now if $M$ admits a finite system $(x_i)_{1\leq i\leq n}$ of generators, and if $\fk{a}_i$ is the annihilator of $x_i$, then it follows from \sref{0.1.7.3} that $\Supp(M)$ is
the set of the $\fk{p}$ containing one of the $\fk{a}_i$, or equivalently, the set of the $\fk{p}$ containing $\fk{a}=\bigcap_i\fk{a}_i$, which is the annihilator of $M$.
\end{env}

\begin{env}[1.7.5]
\label{0.1.7.5}
If $M$ and $N$ are two $A$-modules \emph{of finite type}, then we have
\[
  \Supp(M\otimes_A N)=\Supp(M)\cap\Supp(N).
\]
It is a question of seeing that, if $\fk{p}$ is a prime ideal of $A$, then the condition $M_\fk{p}\otimes_{A_\fk{p}}N_\fk{p}\neq 0$ is equivalent to ``$M_\fk{p}\neq 0$ and $N_\fk{p}\neq 0$'' (taking \sref{0.1.3.4} into account).
In other words, it is a question of seeing that, if $P$ and $Q$ are modules of finite type over a \emph{local} ring $B\neq 0$, then $P\otimes_B Q\neq 0$. Let $\fk{m}$ be the maximal ideal of $B$.
By Nakayama's Lemma, the vector spaces $P/\fk{m}P$ and $Q/\fk{m}Q$ are not $0$, and so it is the same for the tensor product $(P/\fk{m}P)\otimes_{B/\fk{m}}(Q/\fk{m}Q)=(P\otimes_B Q)\otimes_B(B/\fk{m})$, whence the conclusion.

In particular, if $M$ is an $A$-module of finite type, and $\fk{a}$ an ideal of $A$, then $\Supp(M/\fk{a}M)$ is the set of prime ideals containing both $\fk{a}$ and the annihilator $\fk{n}$ of $M$ \sref{0.1.7.4}, that is, the set of prime ideals containing $\fk{a}+\fk{n}$.
\end{env}

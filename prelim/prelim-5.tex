\section{Quasi-coherent and coherent sheaves}
\label{section-qcoh-and-coh-sheaves}

\subsection{Quasi-coherent sheaves}
\label{subsection-qcoh-sheaves}

\begin{env}[5.1.1]
\label{env-0.5.1.1}
Let $(X,\OO_X)$ be a ringed space, $\sh{F}$ an $\OO_X$-module. The data of a homomorphism
$u:\OO_X\to\sh{F}$ of $\OO_X$-modules is equivalent to that of the section
$s=u(1)\in\Gamma(X,\sh{F})$. Indeed, when $s$ is given, for each section
$t\in\Gamma(U,\OO_X)$, we necessarily have $u(t)=t\cdot(s|U)$; we say that $u$ is
{\em defined by the section $s$}. If now $I$ is any set of indices, consider the direct
sum sheaf $\OO_X^{(I)}$, and for each $i\in I$, let $h_i$ be the canonical injection of
the $i$-th factor into $\OO_X^{(I)}$; we know that $u\mapsto(u\circ h_i)$ is an isomorphism
from $\Hom_{\OO_X}(\OO_X^{(I)},\sh{F})$ to the product $(\Hom_{\OO_X}(\OO_X,\sh{F}))^I$. So
there is a canonical one-to-one correspondence between the homomorphisms
$u:\OO_X^{(I)}\to\sh{F}$ and the {\em families of sections $(s_i)_{i\in I}$ of $\sh{F}$ over
$X$}. The homomorphism $u$ corresponding to $(s_i)$ sends an element
$(a_i)\in(\Gamma(U,\OO_X))^{(I)}$ to $\sum_{i\in I}a_i\cdot(s_i|U)$.

We say that $\sh{F}$ is {\em generated by the family $(s_i)$} if the homomorphism
$\OO_X^{(I)}\to\sh{F}$ defined
\oldpage{45}
for each family is {\em surjective} (in other words, if, for each $x\in X$, $\sh{F}_x$ is an
$\OO_x$-module generated by the $(s_i)_x$). We say that $\sh{F}$ is {\em generated by its
sections over $X$} if it is generated by the family of all these sections (or by a
subfamily), in other words, if there exists a surjective homomorphism $\OO_X^{(I)}\to\sh{F}$
for a suitable $I$.

We note that a $\OO_X$-module $\sh{F}$ can be such that there exists a point $x_0\in X$ for
which $\sh{F}|U$ is not generated by its sections over $U$, {\em regardless of the choice
of neighborhood $U$ of $x_0$}: it suffices to take $X=\bb{R}$, for $\OO_X$ the simple sheaf
$\bb{Z}$, for $\sh{F}$ the algebraic subsheaf of $\OO_X$ such that $\sh{F}_0=\{0\}$,
$\sh{F}_x=\bb{Z}$ for $x\neq 0$, and finally $x_0=0$: the only section of $\sh{F}|U$ over $U$
is $0$ for a neighborhood $U$ of $0$.
\end{env}

\begin{env}[5.1.2]
\label{env-0.5.1.2}
Let $f:X\to Y$ be a morphism of ringed spaces. If $\sh{F}$ is a $\OO_X$-module generated by
its sections over $X$, then the canonical homomorphism $f^*(f_*(\sh{F}))\to\sh{F}$ (4.4.3.3)
is {\em surjective}; indeed, with the notations of \hyperref[env-0.5.1.1]{(5.1.1)}, $s_i\otimes 1$ is a
section of $f^*(f_*(\sh{F}))$ over $X$, and its image in $\sh{F}$ is $s_i$. The example of
\hyperref[env-0.5.1.1]{(5.1.1)} where $f$ is the identity shows that the inverse of this proposition is
false in general.

If $\sh{G}$ is an $\OO_Y$-module generated by its sections over $Y$, then $f^*(\sh{G})$ is
generated by its sections over $X$, since $f^*$ is a right exact functor.
\end{env}

\begin{env}[5.1.3]
\label{env-0.5.1.3}
We say that an $\OO_X$-module $\sh{F}$ is {\em quasi-coherent} if, for each $x\in X$, there
is an open neighborhood $U$ of $x$ wuch that $\sh{F}|U$ is isomorphic to the {\em cokernel}
of a homomorphism of the form $\OO_X^{(I)}|U\to\OO_X^{(J)}|U$, where $I$ and $J$ are sets of
arbitrary indices. It is clear that $\OO_X$ is itself a quasi-coherent $\OO_X$-module, and
that any direct sum of quasi-coherent $\OO_X$-modules is again a quasi-coherent
$\OO_X$-module. We say that an {\em $\OO_X$-algebra $\sh{A}$} is {\em quasi-coherent} if
it is quasi-coherent as an $\OO_X$-module.
\end{env}

\begin{env}[5.1.4]
\label{env-0.5.1.4}
Let $f:X\to Y$ be a morphism of ringed spaces. If $\sh{G}$ is a quasi-coherent
$\OO_Y$-module, then $f^*(\sh{G})$ is a quasi-coherent $\OO_X$-module. Indeed, for each
$x\in X$, there is an open neighborhood $V$ of $f(x)$ in $Y$ such that $\sh{G}|V$ is the
cokernel of a homomorphism $\OO_Y^{(I)}|V\to\OO_Y^{(J)}|V$. If $U=f^{-1}(V)$, and if $f_U$ is
the restriction of $f$ to $U$, we have $f^*(\sh{G})|U=f_U^*(\sh{G}|V)$; as $f_U^*$ is right
exact and commutes with direct sums, $f_U^*(\sh{G}|V)$ is the cokernel of a homomorphism
$\OO_X^{(I)}|U\to\OO_X^{(J)}|U$.
\end{env}

\subsection{Sheaves of finite type}
\label{subsection-sheaves-of-finite-type}

\begin{env}[5.2.1]
\label{env-0.5.2.1}
We say that an $\OO_X$-module $\sh{F}$ is {\em of finite type} if, for each $x\in X$, there
exists an open neighborhood $U$ of $x$ such that $\sh{F}|U$ is generated by a {\em finite}
family of sections over $U$, or if it is isomorphic to a sheaf quotient of a sheaf of the
form $(\OO_X|U)^p$ where $p$ is finite. Each sheaf quotient of a sheaf of finite type is
again a sheaf of finite type, as well as each finite direct sum and each finite tensor
product of sheaves of finite type. An $\OO_X$-module of finite type is not necessarily
quasi-coherent, as we can see for the $\OO_X$-module $\OO_X/\sh{F}$, where $\sh{F}$ is the
example in \hyperref[env-0.5.1.1]{(5.1.1)}. If $\sh{F}$ is of finite type, $\sh{F}_x$ is a $\OO_x$-module
of finite type for each $x\in X$, but the example in \hyperref[env-0.5.1.1]{(5.1.1)} shows that this
condition is necessary but not sufficient in general.
\end{env}

\begin{env}[5.2.2]
\label{env-0.5.2.2}
Let $\sh{F}$ be an $\OO_X$-module {\em of finite type}. If $s_i$ ($1\leqslant i\leqslant n$)
are the sections of $\sh{F}$ over an open neighborhood $U$ of a point $x\in X$ and the
$(s_i)_x$ generate $\sh{F}_x$, there exists an open neighborhood $V\subset U$ of $x$ such
that the $(s_i)_y$ generate $\sh{F}_y$ for all $y\in Y$ (FAC, I, 2, 12, prop.~1). In
particular, we conclude that the support of $\sh{F}$ is {\em closed}.

\oldpage{46}
Similarly, if $u:\sh{F}\to\sh{G}$ is a homomorphism such that $u_x=0$, then there exists a
neighborhood $U$ of $x$ such that $u_y=0$ for all $y\in U$.
\end{env}

\begin{env}[5.2.3]
\label{env-0.5.2.3}
Suppose that $X$ is {\em quasi-compact}, and let $\sh{F}$, $\sh{G}$ be two $\OO_X$-modules
such that $\sh{G}$ is {\em of finite type}, $u:\sh{F}\to\sh{G}$ a {\em surjective}
homomorphism. In addition, suppose that $\sh{F}$ is the inductive limit of an inductive
system $(\sh{F}_\lambda)$ of $\OO_X$-modules. Then there exists an index $\mu$ such that the
homomorphism $\sh{F}_\mu\to\sh{G}$ is {\em surjective}. Indeed, for each $x\in X$, there
exists a finite system of sections $s_i$ of $\sh{G}$ over an open neighborhood $U(x)$ of $x$
such that the $(s_i)_y$ generate $\sh{G}_y$ for all $y\in U(x)$; there is then an open
neighborhood $V(x)\subset U(x)$ of $x$ and $n$ sections $t_i$ of $\sh{F}$ over $V(x)$ such
that $s_i|V(s)=u(t_i)$ for all $i$; we can also suppose that the $t_i$ are the canonical
images of sections of a similar sheaf $\sh{F}_{\lambda(x)}$ over $V(x)$. We then cover $X$
with a finite number of neighborhoods $V(x_k)$, and let $\mu$ be the maximal index of the
$\lambda(x_k)$; it is clear that this index gives the answer.

Suppose still that $X$ is quasi-compact, and let $\sh{F}$ be an $\OO_X$-module of finite type
generated by its sections over $X$ \hyperref[env-0.5.1.1]{(5.1.1)}; then $\sh{F}$ is generated by a
{\em finite} subfamily of these sections: indeed, it suffices to cover $X$ by a finite
number of open neighborhoods $U_k$ such that, for each $k$, there is a finite number of
sections $s_{ik}$ of $\sh{F}$ over $X$ whose restrictions to $U_k$ generate $\sh{F}|U_k$; it
is clear that the $s_{ik}$ then generate $\sh{F}$.
\end{env}

\begin{env}[5.2.4]
\label{env-0.5.2.4}
Let $f:X\to Y$ be a morphism of ringed spaces. If $\sh{G}$ is an $\OO_Y$-module of finite
type, then $f^*(\sh{G})$ is an $\OO_X$-module of finite type. Indeed, for each $x\in X$,
there is an open neighborhood $V$ of $f(x)$ in $Y$ and a surjective homomorphism
$v:\OO_Y^p|V\to\sh{G}|V$. If $U=f^{-1}(V)$ and if $f_U$ is the restriction of $f$ to $U$, we
have $f^*(\sh{G})|U=f_U^*(\sh{G}|V)$; as $f_U^*$ is right exact \hyperref[env-0.4.3.1]{(4.3.1)} and
commutes with direct sums \hyperref[env-0.4.3.2]{(4.3.2)}, $f_U^*(v)$ is a surjective homomorphism
$\OO_X^p|U\to f^*(\sh{G})|U$.
\end{env}

\begin{env}[5.2.5]
\label{env-0.5.2.5}
We say that an $\OO_X$-module $\sh{F}$ {\em admits a finite presentation} if, for each
$x\in X$, there exists an open neighborhood $U$ of $x$ such that $\sh{F}|U$ is isomorphic
to a {\em cokernel of a $(\OO_X|U)$-homomorphism $\OO_X^p|U\to\OO_X^q|U$}, $p$ and $q$ being
two integers $>0$. Such an $\OO_X$-module is therefore of finite type and quasi-coherent. If
$f:X\to Y$ is a morphism of ringed spaces, and if $\sh{G}$ is an $\OO_Y$-module admitting a
finite presentation, $f^*(\sh{G})$ admits a finite presentation, as shown in the argument of
\hyperref[env-0.5.1.4]{(5.1.4)}.
\end{env}

\begin{env}[5.2.6]
\label{env-0.5.2.6}
Let $\sh{F}$ be an $\OO_X$-module admitting a finite presentation \hyperref[env-0.5.2.5]{(5.2.5)}; then,
for each $\OO_X$-module $\sh{H}$, the canonical functorial homomorphism
\[
  (\shHom_{\OO_X}(\sh{F},\sh{H}))_x\longrightarrow\Hom_{\OO_x}(\sh{F}_x,\sh{H}_x)
\]
is {\em bijective} (T, 4.1.1).
\end{env}

\begin{env}[5.2.7]
\label{env-0.5.2.7}
Let $\sh{F}$, $\sh{G}$ be two $\OO_X$-modules admitting a finite presentation. If, for an
$x\in X$, $\sh{F}_x$ ad $\sh{G}_x$ are {\em isomorphic} as $\OO_x$-modules, then there
exists an open neighborhood $U$ of $x$ such that $\sh{F}|U$ and $\sh{G}|U$ are
{\em isomorphic}. Indeed, if $\vphi:\sh{F}_x\to\sh{G}_x$ and $\psi:\sh{G}_x\to\sh{F}_x$ are
an isomorphism and its inverse isomorphism, then there exists, according to
\hyperref[env-0.5.2.6]{(5.2.6)}, an open neighborhood $V$ of $x$ and a section $u$ (resp. $v$) of
$\shHom_{\OO_X}(\sh{F},\sh{G})$ (resp. $\shHom_{\OO_X}(\sh{G},\sh{F})$) over $V$ such
\oldpage{47}
that $u_x=\vphi$ (resp. $v_x=\psi$). As $(u\circ v)_x$ and $(v\circ u)_x$ are the identity
automorphisms, there exists an open neighborhood $U\subset V$ of $x$ such that $(u\circ v)|U$
and $(v\circ u)|U$ are the identity automorphisms, hence the proposition.
\end{env}

\subsection{Coherent sheaves}
\label{subsection-coh-sheaves}

\begin{env}[5.3.1]
\label{env-0.5.3.1}
We say that an $\OO_X$-module $\sh{F}$ is {\em coherent} if it satisfies the two following
conditions:
\begin{itemize}
  \item[(a)] $\sh{F}$ is of finite type.
  \item[(b)] for each open $U\subset X$, integer $n>0$, and homomorphism $u:\OO_X^n|U\to\sh{F}|U$,
    the kernel of $u$ is of finite type.
\end{itemize}
We note that these two conditions are of a {\em local} nature.

For most of the proofs of the properties of coherent sheaves in what follows,
cf. (FAC, I, 2).
\end{env}

\begin{env}[5.3.2]
\label{env-0.5.3.2}
Each coherent $\OO_X$-module admits a finite presentation \hyperref[env-0.5.2.5]{(5.2.5)}; the inverse is
not necessarily true, since $\OO_X$ itself is not necessarily a coherent $\OO_X$-module.

Each $\OO_X$-submodule {\em of finite type} of a coherent $\OO_X$-module is coherent; each
{\em finite} direct sum of coherent $\OO_X$-modules is a coherent $\OO_X$-module.
\end{env}

\begin{env}[5.3.3]
\label{env-0.5.3.3}
If $0\to\sh{F}\to\sh{G}\to\sh{H}\to 0$ is an exact sequence  of $\OO_X$-modules and if two of
these $\OO_X$-modules are coherent, so is the third.
\end{env}

\begin{env}[5.3.4]
\label{env-0.5.3.4}
If $\sh{F}$ and $\sh{G}$ are two coherent $\OO_X$-modules, $u:\sh{F}\to\sh{G}$ a
homomorphism, then $\Im(u)$, $\Ker(u)$, and $\Coker(u)$ are coherent $\OO_X$-modules. In
particular, if $\sh{F}$ and $\sh{G}$ are $\OO_X$-submodules of a coherent $\OO_X$-module,
then $\sh{F}+\sh{G}$ and $\sh{F}\cap\sh{G}$ are coherent.

If $\sh{A}\to\sh{B}\to\sh{C}\to\sh{D}\to\sh{E}$ is an exact sequence of $\OO_X$-modules, and
if $\sh{A}$, $\sh{B}$, $\sh{D}$, $\sh{E}$ are coherent, then $\sh{C}$ is coherent.
\end{env}

\begin{env}[5.3.5]
\label{env-0.5.3.5}
If $\sh{F}$ and $\sh{G}$ are two coherent $\OO_X$-modules, then so are
$\sh{F}\otimes_{\OO_X}\sh{G}$ are $\shHom_{\OO_X}(\sh{F},\sh{G})$.
\end{env}

\begin{env}[5.3.6]
\label{env-0.5.3.6}
Let $\sh{F}$ be a coherent $\OO_X$-module, $\sh{J}$ a coherent sheaf of ideals of $\OO_X$.
Then the $\OO_X$-module $\sh{J}\sh{F}$ is coherent, as the image of
$\sh{J}\otimes_{\OO_X}\sh{F}$ under the canonical homomorphism
$\sh{J}\otimes_{\OO_X}\sh{F}\to\sh{F}$ (\hyperref[env-0.5.3.4]{(5.3.4)} and \hyperref[env-0.5.3.5]{(5.3.5)}).
\end{env}

\begin{env}[5.3.7]
\label{env-0.5.3.7}
We say that an $\OO_X$-algebra $\sh{A}$ is {\em coherent} if it is coherent as an
$\OO_X$-module. In particular, $\OO_X$ is a {\em coherent sheaf of rings} if, and only if,
for each open $U\subset X$ and each homomorphism of the form $u:\OO_X^p|U\to\OO_X|U$, the
kernel of $u$ is an $(\OO_X|U)$-module of finite type.

If $\OO_X$ is a coherent sheaf of rings, each $\OO_X$-module $\sh{F}$ admitting a finite
presentation \hyperref[env-0.5.2.5]{(5.2.5)} is coherent, according to \hyperref[env-0.5.3.4]{(5.3.4)}.

The {\em annihilator} of an $\OO_X$-module $\sh{F}$ is the kernel $\sh{J}$ of the canonical
homomorphism $\OO_X\to\shHom_{\OO_X}(\sh{F},\sh{F})$ which sends each section
$s\in\Gamma(U,\OO_X)$ to the multiplication by $s$ map in $\Hom(\sh{F}|U,\sh{F}|U)$; if
$\OO_X$ is coherent and if $\sh{F}$ is a coherent $\OO_X$-module, then $\sh{J}$ is coherent
(\hyperref[env-0.5.3.4]{(5.3.4)} and \hyperref[env-0.5.3.5]{(5.3.5)}) and for each $x\in X$, $\sh{J}_x$ is the
annihilator of $\sh{F}_x$ \hyperref[env-0.5.2.6]{(5.2.6)}.
\end{env}

\begin{env}[5.3.8]
\label{env-0.5.3.8}
\oldpage{48}
Suppose that $\OO_X$ is coherent; let $\sh{F}$ be a coherent $\OO_X$-module, $x$ a point of
$X$, $M$ a submodule of finite type of $\sh{F}_x$; then there exists an open neighborhood $U$
of $x$ and a coherent $(\OO_X|U)$-submodule $\sh{G}$ of $\sh{F}|U$ such that $\sh{G}_x=M$
(T, 4.1, Lemma~1).

This result, along with the properties of the $\OO_X$-submodules of a coherent
$\OO_X$-module, impose the necessary conditions on the rings $\OO_x$ such that
$\OO_X$ is coherent. For example \hyperref[env-0.5.3.4]{(5.3.4)}, the intersection of two
ideals of finite type of $\OO_x$ must still be an ideal of finite type.
\end{env}

\begin{env}[5.3.9]
\label{env-0.5.3.9}
Suppose that $\OO_X$ is coherent, and let $M$ be an $\OO_x$-module admitting a
finite presentation, therefore isomorphic to a cokernel of a homomorphism
$\vphi:\OO_x^p\to\OO_x^q$; then there exists an open neighborhood $U$ of $X$ and
a coherent $(\OO_X|U)$-module $\sh{F}$ such that $\sh{F}_x$ is isomorphic to
$M$. Indeed, according to \hyperref[env-0.5.2.6]{(5.2.6)}, there exists a section $u$ of
$\shHom_{\OO_X}(\OO_X^p,\OO_X^q)$ such that $u_x=\vphi$; the cokernel $\sh{F}$
of the homomorphism $u:\OO_X^p|U\to\OO_X^q|U$ gives the answer
\hyperref[env-0.5.3.4]{(5.3.4)}.
\end{env}

\begin{env}[5.3.10]
\label{env-0.5.3.10}
Suppose that $\OO_X$ is coherent, and let $\sh{J}$ be a coherent sheaf of ideals
of $\OO_X$. For a $(\OO_X/\sh{J})$-module $\sh{F}$ to be coherent, it is
necessary and sufficient that it is coherent as a $\OO_X$-module. In particular,
$\OO_X/\sh{J}$ is a coherent sheaf of rings.
\end{env}

\begin{env}[5.3.11]
\label{env-0.5.3.11}
Let $f:X\to Y$ be a morphism of ringed spaces, and suppose that $\OO_X$ is
coherent; then, for each coherent $\OO_Y$-module $\sh{G}$, $f^*(\sh{G})$ is a
coherent $\OO_X$-module. Indeed, with the notations of \hyperref[env-0.5.2.4]{(5.2.4)}, we can
assume that $\sh{G}|V$ is the cokernel of a homomorphism
$v:\OO_Y^q|V\to\OO_Y^p|V$; as $f_U^*$ is right exact,
$f^*(\sh{G})|U=f_U^*(\sh{G}|V)$ is the cokernel of the homomorphism
$f_U^*(v):\OO_X^q|U\to\OO_X^p|U$, hence our assertion.
\end{env}

\begin{env}[5.3.12]
\label{env-0.5.3.12}
Let $Y$ be a closed subset of $X$, $j:Y\to X$ the canonical injection, $\OO_Y$ a
sheaf of rings on $Y$, and put $\OO_X=j_*(\OO_Y)$. For a $\OO_Y$-module $\sh{G}$
to be of finite type (resp. quasi-coherent, coherent), it is necessary and
sufficient that $j_*(\sh{G})$ is an $\OO_X$-module of finite type
(resp. quasi-coherent, coherent).
\end{env}

\subsection{Locally free sheaves}
\label{subsection-locally-free-sheaves}

\begin{env}[5.4.1]
\label{env-0.5.4.1}
Let $X$ be a ringed space. We say that an $\OO_X$-module $\sh{F}$ is
{\em locally free}, if, for each $x\in X$, there exists an open neighborhood
$U$ of $x$ such that $\sh{F}|U$ is isomorphic to a $(\OO_X|U)$-module of the
form $\OO_X^{(I)}|U$, where $I$ can depend on $U$. If for each $U$, $I$ is
finite, we say that $\sh{F}$ is {\em of finite rank}; if for each $U$, $I$ has
the same finite number of elements $n$, we say that $\sh{F}$ is {\em of rank
$n$}. A locally free $\OO_X$-module of rank $1$ is called {\em invertible}
(cf. \hyperref[env-0.5.4.3]{(5.4.3)}). If $\sh{F}$ is a locally free $\OO_X$-module of finite
rank, for each $x\in X$, $\sh{F}_x$ is a free $\OO_x$-module of finite rank
$n(x)$, and there exists a neighborhood $U$ of $x$ such that $\sh{F}|U$, is of
rank $n(x)$; if $X$ is connected, then $n(x)$ is {\em constant}.

It is clear that each locally free sheaf is quasi-coherent, and if $\OO_X$ is a
coherent sheaf of rings, each locally free $\OO_X$-module of finite rank is
coherent.

If $\sh{L}$ is locally free, $\sh{L}\otimes_{\OO_X}\sh{F}$ is an {\em exact}
functor in $\sh{F}$ to the category of $\OO_X$-modules.

We will mostly consider locally free $\OO_X$-modules of finite rank,
\oldpage{49}
and when we speak of locally free sheaves without specifying, it will be
understood that they are of {\em finite rank}.

Suppose that $\OO_X$ is {\em coherent}, and let $\sh{F}$ be a {\em coherent}
$\OO_X$-module. Then, if at a point $x\in X$, $\sh{F}_x$ is an $\OO_x$-module
{\em free of rank $n$}, there exists a neighborhood $U$ of $x$ such that
$\sh{F}|U$ is {\em locally free of rank $n$}; in fact, $\sh{F}_x$ is then
isomorphic to $\OO_x^n$, and the proposition follows from \hyperref[env-0.5.2.7]{(5.2.7)}.
\end{env}

\begin{env}[5.4.2]
\label{env-0.5.4.2}
If $\sh{L}$, $\sh{F}$ are two $\OO_X$-modules, we have a canonical functorial
homomorphism
\[
  \dual{\sh{L}}\otimes_{\OO_X}\sh{F}
  =\shHom_{\OO_X}(\sh{L},\OO_X)\otimes_{\OO_X}\sh{F}
  \longrightarrow\shHom_{\OO_X}(\sh{L},\sh{F})
  \tag{5.4.2.1}
\]
defined in the following way: for each open set $U$, send any pair $(u,t)$,
where $u\in\Gamma(U,\shHom_{\OO_X}(\sh{L},\OO_X))=\Hom(\sh{L}|U,\OO_X|U)$ and
$t\in\Gamma(U,\sh{F})$, to the element of $\Hom(\sh{L}|U,\sh{F}|U)$ which, for
each $x\in U$, sends $s_x\in\sh{L}_x$ to the element $u_x(s_x)t_x$ of
$\sh{F}_x$. If $\sh{L}$ is {\em locally free of finite rank}, this homomorphism
is {\em bijective}; the property being local, we can in fact reduce to the case
where $\sh{L}=\OO_X^n$; as for each $\OO_X$-module $\sh{G}$,
$\shHom_{\OO_X}(\OO_X^n,\sh{G})$ is canonically isomorphic to $\sh{G}^n$, we
have reduced to the case $\sh{L}=\sh{O}_X$, which is immediate.
\end{env}

\begin{env}[5.4.3]
\label{env-0.5.4.3}
If $\sh{L}$ is invertible, so is its dual
$\dual{\sh{L}}=\shHom_{\OO_X}(\sh{L},\OO_X)$, since we can immediately reduce
(as the question is local) to the case $\sh{L}=\OO_X$. In addition, we have a
canonical isomorphism
\[
  \shHom_{\OO_X}(\sh{L},\OO_X)\otimes_{\OO_X}\sh{L}\isoto\OO_X
  \tag{5.4.3.1}
\]
as, according to \hyperref[env-0.5.3.2]{(5.3.2)}, it suffices to define a canonical
isomorphism $\shHom_{\OO_X}(\sh{L},\sh{L})\isoto\OO_X$. For {\em each}
$\OO_X$-module $\sh{F}$, we have a canonical homomorphism
$\OO_X\isoto\shHom_{\OO_X}(\sh{F},\sh{F})$ \hyperref[env-0.5.3.7]{(5.3.7)}. It remains to
prove that if $\sh{F}=\sh{L}$ is invertible, this homomorphism is bijective, and
as the question is local, it reduces to the case $\sh{L}=\OO_X$, which is
immediate.

Due to the above, we put $\sh{L}^{-1}=\shHom_{\OO_X}(\sh{L},\OO_X)$, and we say
that $\sh{L}^{-1}$ is the {\em inverse} of $\sh{L}$. The terminology
``invertible sheaf'' can be justified in the following way when $X$ is a point
and $\OO_X$ is a {\em local} ring $A$ with maximal ideal
$\mathfrak{m}$; if $M$ and $M'$ are two $A$-modules ($M$ being of finite type)
such that $M\otimes_A M'$ is isomorphic to $A$, as
$(A/\mathfrak{m})\otimes_A(M\otimes_A M')$ identifies with
$(M/\mathfrak{m}M)\otimes_{A/\mathfrak{m}}(M'/\mathfrak{m}M')$, this latter
tensor product of vector spaces over the field $A/\mathfrak{m}$ is isomorphic to
$A/\mathfrak{m}$, which requires $M/\mathfrak{m}M$ and $M'/\mathfrak{m}M'$ to be
of dimension $1$. For each element $z\in M$ not in $\mathfrak{m}M$, we have
$M=Az+\mathfrak{m}M$, which implies that $M=Az$ according to Nakayama's Lemma,
$M$ being of finite type. Moreover, as the annihilator of $z$ kills
$M\otimes_A M'$, which is isomorphic to $A$, this annihilator is $\{0\}$, and
as a result $M$ is {\em isomorphic to $A$}. In the general case, this shows
that $\sh{L}$ is an $\OO_X$-module of finite type, such that there exists an
$\OO_X$-module $\sh{F}$ for which $\sh{L}\otimes_{\OO_X}\sh{F}$ is isomorphic to
$\OO_X$, and if in addition the rings $\OO_x$ are local rings, then the
$\sh{L}_x$ is an $\OO_x$-module isomorphic to $\OO_x$ for each $x\in X$. If
$\OO_X$ and $\sh{L}$ are assumed to be {\em coherent}, we then conclude that
$\sh{L}$ is invertible according to \hyperref[env-0.5.2.7]{(5.2.7)}.
\end{env}

\begin{env}[5.4.4]
\label{env-0.5.4.4}
If $\sh{L}$ and $\sh{L}'$ are two invertible $\OO_X$-modules, then so is
$\sh{L}\otimes_{\OO_X}\sh{L}'$, since the question is local, we can assume that
$\sh{L}=\OO_X$, and the result is then trivial. For each integer $n\geqslant 1$,
we denote by $\sh{L}^{\otimes n}$ the tensor product of $n$ copies of the sheaf
\oldpage{50}
$\sh{L}$; we put by convention $\sh{L}^{\otimes 0}=\OO_X$, and for
$n\geqslant 1$, $\sh{L}^{\otimes(-n)}=(\sh{L}^{-1})^{\otimes n}$. With these
notations, there is then a {\em canonical functorial isomorphism}
\[
  \sh{L}^{\otimes m}\otimes_{\OO_X}\sh{L}^{\otimes n}\isoto\sh{L}^{\otimes(n+m)}
  \tag{5.4.4.1}
\]
for any rational integers $m$, $n$: indeed, by definition, we immediately reduce
to the case where $m=-1$, $n=1$, and the isomorphism in question is then that
defined in \hyperref[env-0.5.4.3]{(5.4.3)}.
\end{env}

\begin{env}[5.4.5]
\label{env-0.5.4.5}
Let $f:Y\to X$ be a morphism of ringed spaces. If $\sh{L}$ is a locally free
(resp. invertible) $\OO_X$-module, $f^*(\sh{L})$ is a locally free
(resp. invertible) $\OO_Y$-module: this follows immediately from that the
inverse images of two locally isomorphic $\OO_X$-modules are locally isomorphic,
that $f^*$ commutes with finite direct sums, and that $f^*(\OO_X)=\OO_Y$
\hyperref[env-0.4.3.4]{(4.3.4)}. In addition, we know that we have a canonical functorial
homomorphism $f^*(\dual{\sh{L}})\to\dual{(f^*(\sh{L}))}$ \hyperref[env-0.4.4.6]{(4.4.6)}, and
when $\sh{L}$ is locally free, this homomorphism is {\em bijective}: indeed, we
again reduce to the case where $\sh{L}=\OO_X$ which is trivial. We conclude that
if $\sh{L}$ is invertible, $f^*(\sh{L}^{\otimes n})$ canonically identifies with
$(f^*(\sh{L}))^{\otimes n}$ for each rational integer $n$.
\end{env}

\begin{env}[5.4.6]
\label{env-0.5.4.6}
Let $\sh{L}$ be an invertible $\OO_X$-module; we denote by $\Gamma_*(X,\sh{L})$
or simply $\Gamma_*(\sh{L})$ the abelian group direct sum
$\bigoplus_{n\in\bb{Z}}\Gamma(X,\sh{L}^{\otimes n})$; we equip it with the
structure of a {\em graded ring}, by corresponding to a pair $(s_n,s_m)$, where
$s_n\in\Gamma(X,\sh{L}^{\otimes n})$, $s_m\in\Gamma(X,\sh{L}^{\otimes m})$, the
section of $\sh{L}^{\otimes(n+m)}$ over $X$ which corresponds canonically
(5.4.4.1) to the section $s_n\otimes s_m$ of
$\sh{L}^{\otimes n}\otimes_{\OO_X}\sh{L}^{\otimes m}$; the associativity of this
multiplication is verified in an immediate way. It is clear that
$\Gamma_*(X,\sh{L})$ is a covariant functor in $\sh{L}$, with values in the
category of graded rings.

If now $\sh{F}$ is any $\OO_X$-module, we put
\[
  \Gamma_*(\sh{L},\sh{F})
  =\bigoplus_{n\in\bb{Z}}\Gamma(X,\sh{F}\otimes_{\OO_X}\sh{L}^{\otimes n}).
\]
We equip this abelian group with the structure of a {\em graded module} over
the graded ring $\Gamma_*(\sh{L})$ in the following way: to a pair $(s_n,u_m)$,
where $s_n\in\Gamma(X,\sh{L}^{\otimes n})$ and
$u_m\in\Gamma(X,\sh{F}\otimes_{\OO_X}\sh{L}^{\otimes m})$, we associate the
section of $\sh{F}\otimes_{\OO_X}\sh{L}^{\otimes(m+n)}$ which canonically
corresponds (5.4.4.1) to $s_n\otimes u_m$; the verification of the module axioms
are immediate. For $X$ and $\sh{L}$ fixed, $\Gamma_*(\sh{L},\sh{F})$ is a
covariant functor in $\sh{F}$ with values in the category of graded
$\Gamma_*(\sh{L})$-modules; for $X$ and $\sh{F}$ fixed, it is a covariant
functor in $\sh{L}$ with values in the category of abelian groups.

If $f:Y\to X$ is a morphism of ringed spaces, the canonical homomorphism
(4.4.3.2) $\rho:\sh{L}^{\otimes n}\to f_*(f^*(\sh{L}^{\otimes n}))$ defines a
homomorphism of abelian groups
$\Gamma(X,\sh{L}^{\otimes n})\to\Gamma(Y,f^*(\sh{L}^{\otimes n}))$, and as
$f^*(\sh{L}^{\otimes n})=(f^*(\sh{L}))^{\otimes n})$, it follows from the
definitions of the canonical homomorphisms (4.4.3.2) and (5.4.4.1) that the
above homomorphisms define a {\em functorial homomorphism of graded rings
$\Gamma_*(\sh{L})\to\Gamma_*(f^*(\sh{L}))$}. The same canonical homomorphism
\hyperref[env-0.4.4.3]{(4.4.3)} similarly defines a homomorphism of abelian groups
$\Gamma(X,\sh{F}\otimes_{\OO_X}\sh{L}^{\otimes n})
  \to\Gamma(Y,f^*(\sh{F}\otimes_{\OO_X}\sh{L}^{\otimes n}))$, and as
\[
  f^*(\sh{F}\otimes_{\OO_X}\sh{L}^{\otimes n})
  =f^*(\sh{F})\otimes_{\OO_Y}(f^*(\sh{L}))^{\otimes n}
  \quad(4.3.3.1),
\]
\oldpage{51}
these homomorphism (for $n$ variable) define a {\em di-homomorphism of graded
modules $\Gamma_*(\sh{L},\sh{F})\to\Gamma_*(f^*(\sh{L}),f^*(\sh{F}))$}.
\end{env}

\begin{env}[5.4.7]
\label{env-0.5.4.7}
One can show that there exists a {\em set} $\mathfrak{M}$ (also denoted
$\mathfrak{M}(X)$) of invertible $\OO_X$-modules such that each invertible
$\OO_X$-module is isomorphic to an element of $\mathfrak{M}$ only
one;\footnote{See the book in preparation cited in the introduction.} we define
on $\mathfrak{M}$ a composition law by sending two elements $\sh{L}$, $\sh{L}'$
of $\mathfrak{M}$ to the unique element of $\mathfrak{M}$ isomorphic to
$\sh{L}\otimes_{\OO_X}\sh{L}'$. With this composition law, {\em $\mathfrak{M}$
is a group isomorphic to the cohomology group $\HH^1(X,\OO_X^*)$}, where
$\OO_X^*$ is the subsheaf of $\OO_X$ such that $\Gamma(U,\OO_X^*)$ is the group
of invertible elements of the ring $\Gamma(U,\OO_X)$ for each open $U\subset X$
($\OO_X^*$ is therefore a sheaf of {\em multiplicative} abelian groups).

We will note that for all open $U\subset X$, the group of sections
$\Gamma(U,\OO_X^*)$ canonically identifies with the {\em automorphism group} of
the $(\OO_X|U)$-module $\OO_X|U$, the identification sending a section
$\varepsilon$ of $\OO_X^*$ over $U$ to the automorphism $u$ of $\OO_X|U$ such
that $u_x(s_x)=\varepsilon_x s_x$ for all $x\in X$ and all $s_x\in\OO_x$. Then
let $\mathfrak{U}=(U_\lambda)$ be an open cover of $X$; the data, for each pair
of indices $(\lambda,\mu)$, of an automorphism $\theta_{\lambda\mu}$ of
$\OO_X|(U_\lambda\cap U_\mu)$ is the same as giving a {\em $1$-cochain} of the
cover $\mathfrak{U}$, with values in $\OO_X^*$, and say that the
$\theta_{\lambda\mu}$ satisfy the gluing condition \hyperref[env-0.3.3.1]{(3.3.1)}, meaning
that the corresponding cochain is a {\em cocycle}. Similarly, the data, for
each $\lambda$, of an automorphism $\omega_\lambda$ of $\OO_X|U_\lambda$ is the
same as the data of a $0$-cochain of the cover $\mathfrak{U}$, with values in
$\OO_X^*$, and its {\em coboundary} corresponds to the family of automorphisms
$(\omega_\lambda|U_\lambda\cap U_\mu)
  \circ(\omega_\mu|U_\lambda\cap U_\mu)^{-1}$. We can send each $1$-cocycle of
$\mathfrak{U}$ with values in $\OO_X^*$ to the element of $\mathfrak{M}$
isomorphic to an invertible $\OO_X$-module obtained by gluing with respect to
the family of automorphisms $(\theta_{\lambda\mu})$ corresponding to this
cocycle, and to two cohomologous coycles correspond two equal elements of
$\mathfrak{M}$ \hyperref[env-0.3.3.2]{(3.3.2)}; in other words, we so define a map
$\vphi_\mathfrak{U}:\HH^1(\mathfrak{U},\OO_X^*)\to\mathfrak{M}$. In addition, if
$\mathfrak{B}$ is a second open cover of $X$, finer than $\mathfrak{U}$, the
diagram
\[
  \xymatrix{
    \HH^1(\mathfrak{U},\OO_X^*)\ar[rd]^{\vphi_\mathfrak{U}}\ar[dd]\\
    & \mathfrak{M}\\
    \HH^1(\mathfrak{B},\OO_X^*)\ar[ur]_{\vphi_\mathfrak{B}}
  }
\]
where the vertical arrow is the canonical homomorphism (G, II, 5.7), is
commutative, as a result of \hyperref[env-0.3.3.3]{(3.3.3)}. By passing to the inductive
limit, we therefore obtain a map $\HH^1(X,\OO_X^*)\to\mathfrak{M}$, the \v Cech
cohomology group $\check{\HH}^1(X,\OO_X^*)$ identifying as we know with the
first cohomology group $\HH^1(X,\OO_X^*)$ (G, II, 5.9, Cor. of Thm.~5.9.1). This
map is {\em surjective}: indeed, by definition, for each invertible
$\OO_X$-module $\sh{L}$, there is an open cover $(U_\lambda)$ of $X$ such that
$\sh{L}$ is obtained by gluing the sheaves $\OO_X|U_\lambda$ \hyperref[env-0.3.3.1]{(3.3.1)}.
It is also {\em injective}, since it suffices to prove for the maps
$\HH^1(\mathfrak{U},\OO_X)\to\mathfrak{M}$, and this follows from
\hyperref[env-0.3.3.2]{(3.3.2)}. It remains to show that
\oldpage{52}
the bijection thus defined is a group homomorphism. Given two invertible
$\OO_X$-modules $\sh{L}$, $\sh{L}'$, there is an open cover $(U_\lambda)$ such
that $\sh{L}|U_\lambda$ and $\sh{L}'|U_\lambda$ are isomorphic to
$\OO_X|U_\lambda$ for each $\lambda$; so there is for each index $\lambda$ an
element $a_\lambda$ (resp. $a_\lambda'$) of $\Gamma(U_\lambda,\sh{L})$
(resp. $\Gamma(U_\lambda,\sh{L}')$) such that the elements of
$\Gamma(U_\lambda,\sh{L})$ (resp. $\Gamma(U_\lambda,\sh{L}')$) are the
$s_\lambda\cdot a_\lambda$ (resp. $s_\lambda\cdot a_\lambda'$), where
$s_\lambda$ varies over $\Gamma(U_\lambda,\OO_X)$. The corresponding cocycles
$(\varepsilon_{\lambda\mu})$, $(\varepsilon_{\lambda\mu}')$ are such that
$s_\lambda\cdot a_\lambda=s_\mu\cdot a_\mu$
(resp. $s_\lambda\cdot a_\lambda'=s_\mu\cdot a_\mu'$) over $U_\lambda\cap U_\mu$
is equivalent to $s_\lambda=\varepsilon_{\lambda\mu}s_\mu$
(resp. $s_\lambda=\varepsilon_{\lambda\mu}' s_\mu$) over $U_\lambda\cap U_\mu$.
As the sections of $\sh{L}\otimes_{\OO_X}\sh{L}'$ over $U_\lambda$ are the
finite sums of the $s_\lambda s_\lambda'\cdot(a_\lambda\otimes a_\lambda')$
where $s_\lambda$ and $s_\lambda'$ vary over $\Gamma(U_\lambda,\OO_X)$, it is
clear that the cocycle $(\varepsilon_{\lambda\mu},\varepsilon_{\lambda\mu}')$
corresponds to $\sh{L}\otimes_{\OO_X}\sh{L}'$, which finishes the
proof.\footnote{For a general form of this result, see the book cited in the
note on p.~51.}
\end{env}

\begin{env}[5.4.8]
\label{env-0.5.4.8}
Let $f=(\psi,\omega)$ be a morphism $Y\to X$ of ringed spaces. The functor
$f^*(\sh{L})$ to the category of free $\OO_X$-modules defines a map (which we
still denote $f^*$ by abuse of language) from the set $\mathfrak{M}(X)$ to the
set $\mathfrak{M}(Y)$. Second, we have a canonical homomorphism (T, 3.2.2)
\[
  \HH^1(X,\OO_X^*)\longrightarrow\HH^1(Y,\OO_Y^*).
  \tag{5.4.8.1}
\]
When we canonically identify \hyperref[env-0.5.4.7]{(5.4.7)} $\mathfrak{M}(X)$ and
$\HH^1(X,\OO_X^*)$ (resp. $\mathfrak{M}(Y)$ and $\HH^1(Y,\OO_Y^*)$), the
homomorphism (5.4.8.1) {\em identifies with the map $f^*$}. Indeed, if $\sh{L}$
comes from a cocycle $(\varepsilon_{\lambda\mu})$ corresponding to an open cover
$(U_\lambda)$ of $X$, it suffices to show that $f^*(\sh{L})$ comes from a
cocycle whose cohomology class is the image under (5.4.8.1) of
$(\varepsilon_{\lambda\mu})$. If $\theta_{\lambda\mu}$ is the automorphism of
$\OO_X|(U_\lambda\cap U_\mu)$ which corresponds to $\varepsilon_{\lambda\mu}$,
it is clear that $f^*(\sh{L})$ is obtained by gluing the
$\OO_Y|\psi^{-1}(U_\lambda)$ by means of the automorphisms
$f^*(\theta_{\lambda\mu})$, and it then suffices to check that these latter
automorphisms corresponds to the cocycle
$(\omega^\sharp(\varepsilon_{\lambda\mu}))$, which follows immediately from the
definitions (we can identify $\varepsilon_{\lambda\mu}$ with its canonical image
under $\rho$ \hyperref[env-0.3.7.2]{(3.7.2)}, a section of $\psi^*(\OO_X^*)$ over
$\psi^{-1}(U_\lambda\cap U_\mu)$).
\end{env}

\begin{env}[5.4.9]
\label{env-0.5.4.9}
Let $\sh{E}$, $\sh{F}$ be two $\OO_X$-modules, $\sh{F}$ assumed to be
{\em locally free}, and let $\sh{G}$ be an {\em $\OO_X$-module extension of
$\sh{F}$ by $\sh{E}$}, in other words there exists an exact sequence
$0\to\sh{E}\xrightarrow{i}\sh{G}\xrightarrow{p}\sh{F}\to 0$. Then, for each
$x\in X$, there exists an open neighborhood $U$ of $x$ such that $\sh{G}|U$ is
isomorphic to the {\em direct sum $\sh{E}|U\oplus\sh{F}|U$}. In fact, we can
reduce to the case where $\sh{F}=\OO_X^n$; let $e_i$ ($1\leqslant i\leqslant n$)
be the canonical sections \hyperref[env-0.5.5.5]{(5.5.5)} of $\OO_X^n$; there then exists an
open neighborhood $U$ of $x$ and $n$ sections $s_i$ of $\sh{G}$ over $U$ such
that $p(s_i|U)=e_i|U$ for $1\leqslant i\leqslant n$. That being so, let $f$ be
the homomorphism $\sh{F}|U\to\sh{G}|U$ defined by the sections $s_i|U$
\hyperref[env-0.5.1.1]{(5.1.1)}. It is immediate that for each open $V\subset U$, and each
section $s\in\Gamma(V,\sh{G})$ we have $s-f(p(s))\in\Gamma(V,\sh{E})$, hence our
assertion.
\end{env}

\begin{env}[5.4.10]
\label{env-0.5.4.10}
Let $f:X\to Y$ be a morphism of ringed spaces, $\sh{F}$ an $\OO_X$-module,
$\sh{L}$ a locally free $\OO_Y$-module of finite rank. Then there exists a
canonical isomorphism
\[
  f_*(\sh{F})\otimes_{\OO_Y}\sh{L}\isoto f_*(\sh{F}\otimes_{\OO_X}f^*(\sh{L}))
  \tag{5.4.10.1}
\]

\oldpage{53}
Indeed, for each $\OO_Y$-module $\sh{L}$, we have a canonical homomorphism
\[
  f_*(\sh{F})\otimes_{\OO_Y}\sh{L}
  \xrightarrow{1\otimes\rho}f_*(\sh{F})\otimes_{\OO_Y}f_*(f^*(\sh{L}))
  \xrightarrow{\alpha}f_*(\sh{F}\otimes_{\OO_X}f^*(\sh{L})),
\]
$\rho$ the homomorphism (4.4.3.2) and $\alpha$ the homomorphism (4.2.2.1). To
show that when $\sh{L}$ is locally free, this homomorphism is bijective, it
suffices, the question being local, to consider the case where $\sh{L}=\OO_X^n$;
in addition, $f_*$ and $f^*$ commute with finite direct sums, so we can assume
$n=1$, and in this case the proposition follows immediately from the definitions
and from the relation $f^*(\OO_Y)=\OO_X$.
\end{env}

\subsection{Sheaves on a locally ringed space}
\label{subsection-sheaves-on-lrs}

\begin{env}[5.5.1]
\label{env-0.5.5.1}
We say that a ringed space $(X,\OO_X)$ is a {\em locally ringed space} if, for
each $x\in X$, $\OO_x$ is a local ring; these ringed spaces will be by far the
most frequent ringed spaces that we will consider in this work. We then denote
by $\mathfrak{m}_x$ the {\em maximal ideal} of $\OO_x$, by $\kres(x)$ the
{\em residue field $\OO_x/\mathfrak{m}_x$}; for each $\OO_X$-module $\sh{F}$,
each open set $U$ of $X$, each point $x\in U$, and each section
$f\in\Gamma(U,\sh{F})$, we denote by $f(x)$ the {\em class} of the germ
$f_x\in\sh{F}_x$ mod $\mathfrak{m}_x\sh{F}_x$, and we say that this is the
{\em value} of $f$ at the point $x$. The relation $f(x)=0$ then means that
$f_x\in\mathfrak{m}_x\sh{F}_x$; when this is so, we say (by abuse of language)
that {\em $f$ is zero at $x$}. We will take care not to confuse this relation
with $f_x=0$.
\end{env}

\begin{env}[5.5.2]
\label{env-0.5.5.2}
Let $X$ be a locally ringed space, $\sh{L}$ an invertible $\OO_X$-module, $f$ a
section of $\sh{L}$ over $X$. There is then an {\em equivalence} between the
three following properties for a point $x\in X$:
\begin{itemize}
  \item[(a)] {\em $f_x$ is a generator of $\sh{L}_x$};
  \item[(b)] {\em $f_x\not\in\mathfrak{m}_x\sh{L}_x$} (in other words, $f(x)\neq 0$);
  \item[(c)] {\em there exists a section $g$ of $\sh{L}^{-1}$ over an open
    neighborhood $V$ of $x$ such that the canonical image of $f\otimes g$
    in $\Gamma(V,\OO_X)$ \hyperref[env-0.5.4.3]{(5.4.3)} is the unit section}.
\end{itemize}

Indeed, the question being local, we can reduce to the case where
$\sh{L}=\OO_X$; the equivalence of (a) and (b) are then evident, and it is clear
that (c) implies (b). Conversely, if $f_x\not\in\mathfrak{m}_x$, $f_x$ is
invertible in $\OO_x$, say $f_x g_x=1_x$. By definition of germs of sections,
this means that there exists a neighborhood $V$ of $x$ and a section $g$ of
$\OO_X$ over $V$ such that $fg=1$ in $V$, hence (c).

It follows immediately from the condition (c) that the set $X_f$ of $x$ satisfying the
equivalent conditions (a), (b), (c) is {\em open} in $X$; following the terminology
introduced in \hyperref[env-0.5.5.1]{(5.5.1)}, this is the set of the $x$ for which {\em $f$ does not
vanish}.
\end{env}

\begin{env}[5.5.3]
\label{env-0.5.5.3}
Under the hypotheses of \hyperref[env-0.5.5.2]{(5.5.2)}, let $\sh{L}'$ be a second invertible
$\OO_X$-module; then, if $f\in\Gamma(X,\sh{L})$, $g\in\Gamma(X,\sh{L}')$, we have
\[
  X_f\cap X_g=X_{f\otimes g}.
\]

We can in fact reduce immediately to the case where $\sh{L}=\sh{L}'=\OO_X$ (the question
being local); as $f\otimes g$ then canonically identifies with the product $fg$, the
proposition is evident.
\end{env}

\begin{env}[5.5.4]
\label{env-0.5.5.4}
\oldpage{54}
Let $\sh{F}$ be a locally free $\OO_X$ of rank $n$; it is immediate that $\wedge^p\sh{F}$ is
a locally free $\OO_X$-module of rank $\binom{n}{p}$ if $p\leqslant n$ and $0$ if
$p>n$, since the question is local and we can reduce to the case where $\sh{F}=\OO_X^n$;
in addition, for each $x\in X$, $(\wedge^p\sh{F})_x/\mathfrak{m}_x(\wedge^p\sh{F})_x$ is a
vector space of dimension $\binom{n}{p}$ over $\kres(x)$, which canonically identifies with
$\wedge^p(\sh{F}_x/\mathfrak{m}_x\sh{F}_x)$. Let $s_1,\dots,s_p$ be the sections of $\sh{F}$
over an open set $U$ of $X$, and let $s=s_1\wedge\cdots\wedge s_p$, which is a section of
$\wedge^p\sh{F}$ over $U$ \hyperref[env-0.4.1.5]{(4.1.5)}; we have $s(x)=s_1(x)\wedge\cdots\wedge s_p(x)$,
and as a result, we say that the $s_1(x),\dots,s_p(x)$ are {\em linearly dependent} means
that $s(x)=0$. We conclude that the {\em set of the $x\in X$ such that $s_1(x),\dots,s_p(x)$
are linearly independent is open in $X$}: it suffices in fact, by reducing to the case where
$\sh{F}=\OO_X^n$, to apply \hyperref[env-0.5.5.2]{(5.5.2)} to the section image of $s$ under one of the
projections of $\wedge^p\sh{F}=\OO_X^{\binom{n}{p}}$ to the $\binom{n}{p}$ factors.

In particular, if $s_1,\dots,s_n$ are $n$ sections of $\sh{F}$ over $U$ such that
$s_1(x),\dots,s_n(x)$ are linearly independent for each point $x\in U$, the homomorphism
$u:\OO_X^n|U\to\sh{F}|U$ defined by the $s_i$ \hyperref[env-0.5.1.1]{(5.1.1)} is an {\em isomorphism}:
indeed, we can restrict to the case where $\sh{F}=\OO_X^n$ and where we canonically identify
$\wedge^n\sh{F}$ and $\OO_X$; $s=s_1\wedge\cdots\wedge s_n$ is then an {\em invertible}
section of $\OO_X$ over $U$, and we define an inverse homomorphism for $u$ by means of the
Cramer formulas.
\end{env}

\begin{env}[5.5.5]
\label{env-0.5.5.5}
Let $\sh{E}$, $\sh{F}$ be two locally free $\OO_X$-modules (of finite rank), and let
$u:\sh{E}\to\sh{F}$ be a homomorphism. For there to exist a neighborhood $U$ of $x\in X$ such
that $u|U$ is {\em injective} and that $\sh{F}|U$ is {\em the direct sum of the
$u(\sh{E})|U$ and of a locally free $(\OO_X|U)$-submodule $\sh{G}$}, it is necessary and
sufficient that $u_x:\sh{E}_x\to\sh{F}_x$ gives, by passing to quotients, an {\em injective}
homomorphism of vector spaces
$\sh{E}_x/\mathfrak{m}_x\sh{E}_x\to\sh{F}_x/\mathfrak{m}_x\sh{F}_x$. The condition is indeed
{\em necessary}, since $\sh{F}_x$ is then the direct sum of the free $\OO_x$-modules
$u_x(\sh{E}_x)$ and $\sh{G}_x$, so $\sh{F}_x/\mathfrak{m}_x\sh{F}_x$ is the direct sum of
$u_x(\sh{E}_x)/\mathfrak{m}_x u_x(\sh{E}_x)$ and of $\sh{G}_x/\mathfrak{m}_x\sh{G}_x$. The
condition is {\em sufficient}, since we can reduce to the case where $\sh{E}=\OO_X^m$; let
$s_1,\dots,s_m$ be the images under $u$ of the sections $e_i$ of $\OO_X^m$ such that
$(e_i)_y$ is equal to the $i$-th element of the canonical basis of $\OO_y^m$ for each
$y\in Y$ ({\em canonical sections} of $\OO_X^m$); by hypothesis $s_1(x),\dots,s_m(x)$ are
linearly independent, so, if $\sh{F}$ is of rank $n$, there exists $n-m$ sections
$s_{m+1},\dots,s_n$ of $\sh{F}$ over a neighborhood $V$ of $x$ such that the $s_i(x)$
($1\leqslant i\leqslant n$) form a basis for $\sh{F}_x/\mathfrak{m}_x\sh{F}_x$. There then
exists \hyperref[env-0.5.5.4]{(5.5.4)} a neighborhood $U\subset V$ of $x$ such that the $s_i(y)$
($1\leqslant i\leqslant n$) form a basis for $\sh{F}_y/\mathfrak{m}_y\sh{F}_y$ for each
$y\in V$, and we conclude \hyperref[env-0.5.5.4]{(5.5.4)} that there is an isomorphism from $\sh{F}|U$ to
$\OO_X^n|U$, sending the $s_i|U$ ($1\leqslant i\leqslant m$) to the $e_i|U$, which finishes
the proof.
\end{env}

\section{Flatness}
\label{section-flatness}

\begin{env}[6.0]
\label{env-0.6.0.0}
The notion of flatness is due to J.-P.~Serre \cite{I-16}; in the following, we omit the
proofs of the results which are presented in the {\em Alg\`ebre commutative} of N.~Bourbaki,
to which we refer the reader. We assume that all rings are commutative.\footnote{See the
expos\'e cited of N.~Bourbaki for the generalization from most of the results to the
noncommutative case.}

\oldpage{55}
If $M$, $N$ are two $A$-modules, $M'$ (resp. $N'$) a submodule of $M$ (resp. $N$), we denote
by $\Im(M'\otimes_A N')$ the submodule of $M\otimes_A N$, the image under the canonical map
$M'\otimes_A N'\to M\otimes_A N$.
\end{env}


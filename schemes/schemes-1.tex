\setcounter{section}{0}
\section{Affine schemes}
\label{section-affine-schemes}

\setcounter{subsection}{0}
\subsection{The prime spectrum of a ring}
\label{subsection-prime-spec}

\begin{env}[1.1.1]
\label{1.1.1.1}
\oldpage[I]{80}
\emph{Notation}. Let $A$ be a (commutative) ring, $M$ an $A$-module. In
this chapter and the following, we will constantly use the following notations:
\begin{enumerate}[label=--]
  \item $\Spec(A)=$ \emph{set of prime ideals} of $A$, also called the \emph{prime spectrum} of $A$; for $x\in X=\Spec(A)$, it will often be convenient to write $\fk{j}_x$ instead of $x$.
    When $\Spec(A)$ is \emph{empty}, it is necessary and sufficient that the ring $A$ is $0$.
  \item $A_x=A_{\fk{j}_x}=$ \emph{(local) ring of fractions $S^{-1}A$}, where $S=A-\fk{j}_x$.
  \item $\fk{m}_x=\fk{j}_x A_{\fk{j}_x}=$ \emph{maximal ideal of $A$}.
  \item $\kres(x)=A_x/\fk{m}_x=$ \emph{residue field of $A_x$}, canonically isomorphic to the field of fractions of the integral ring $A/\fk{j}_x$, to which it is identified.
  \item $f(x)=$ \emph{class of $f$} mod.~$\fk{j}_x$ in $A/\fk{j}_x\subset\kres(x)$, for $f\in A$ and $x\in X$.
    We still say that $f(x)$ is the \emph{value} of $f$ at a point $x\in\Spec(A)$; the relations $f(x)=0$ and $f\in\fk{j}_x$ are \emph{equivalent}.
  \item $M_x=M\otimes_A A_x=$ \emph{module of denominators of fractions in $A-\fk{j}_x$}.
  \item $\rad(E)=$ \emph{radical of the ideal of $A$ generated by a subset $E$ of $A$}.
  \item $V(E)=$ \emph{set of $x\in X$ such that $E\subset\fk{j}_x$} (or the set of $x\in X$ such that $f(x)=0$ for all $f\in E$), for $E\subset A$.
    So we have
    \[
      \rad(E)=\bigcap_{x\in V(E)}\fk{j}_x.
      \tag{1.1.1.1}
    \]
  \item $V(f)=V(\{f\})$ for $f\in A$.
  \item $D(f)=X-V(f)=$ \emph{set of $x\in X$ where $f(x)\neq 0$}.
\end{enumerate}
\end{env}

\begin{prop}[1.1.2]
\label{1.1.1.2}
We have the following properties:
\begin{enumerate}[label=\emph{(\roman*)}]
  \item $V(0)=X$, $V(1)=\emp$.
  \item The relation $E\subset E'$ implies $V(E)\supset V(E')$.
  \item For each family $(E_\lambda)$ of subsets of $A$, $V(\bigcup_\lambda E_\lambda)=V(\sum_\lambda E_\lambda)=\bigcap_\lambda V(E_\lambda)$.
  \item $V(EE')=V(E)\cup V(E')$.
  \item $V(E)=V(\fk{r}(E))$.
\end{enumerate}
\end{prop}

\begin{proof}
\label{proof-1.1.1.2}
The properties (i), (ii), (iii) are trivial, and (v) follows from (ii) and from the formula (1.1.1.1).
It is evident that $V(EE')\supset V(E)\cap V(E')$; conversely, if $x\not\in V(E)$ and $x\not\in V(E')$, then there exists $f\in E$ and $f'\in E'$ such that $f(x)\neq 0$ and $f'(x)\neq 0$ in $\kres(x)$, hence $f(x)f'(x)\neq 0$, i.e., $x\not\in V(EE')$, which proves (iv).
\end{proof}

Proposition \sref{1.1.1.2} shows, among other things, that sets of the form $V(E)$ (where $E$ varies over the subsets of $A$) are the \emph{closed sets} of a topology on $X$, which we will call the \emph{spectral topology}
\footnote{The introduction of this topology in algebraic geometry is due to Zariski.
So this topology is usually called the ``Zariski topology'' on $X$.};
unless expressly stated otherwise, always assume $X=\Spec(A)$ is equipped with the spectral topology.

\begin{env}[1.1.3]
\label{1.1.1.3}
\oldpage[I]{81}
For each subset $Y$ of $X$, we denote by $\fk{j}(Y)$ the set of $f\in A$ such that
$f(y)=0$ for all $y\in Y$; equivalently, $\fk{j}(Y)$ is the intersection of the prime
ideals $\fk{j}_y$ for $y\in Y$. It is clear that the relation $Y\subset Y'$ implies
that $\fk{j}(Y)\supset\fk{j}(Y')$ and that we have
\[
  \fk{j}\bigg(\bigcup_\lambda Y_\lambda\bigg)=\bigcap_\lambda\fk{j}(Y_\lambda)
  \tag{1.1.3.1}
\]
for each family $(Y_\lambda)$ of subsets of $X$. Finally we have
\[
  \fk{j}(\{x\})=\fk{j}_x.
  \tag{1.1.3.2}
\]
\end{env}

\begin{prop}[1.1.4]
\label{1.1.1.4}
\medskip\noindent
\begin{enumerate}[label=\emph{(\roman*)}]
  \item For each subset $E$ of $A$, we have $\fk{j}(V(E))=\rad(E)$.
  \item For each subset $Y$ of $X$, $V(\fk{j}(Y))=\overline{Y}$, the closure of $Y$ in $X$.
\end{enumerate}
\end{prop}

\begin{proof}
\label{proof-1.1.1.4}
(i) is an immediate consequence of the definitions and (1.1.1.1); on the other hand,
$V(\fk{j}(Y))$ is closed and contains $Y$; conversely, if $Y\subset V(E)$, we have
$f(y)=0$ for $f\in E$ and all $y\in Y$, so $E\subset\fk{j}(Y)$,
$V(E)\supset V(\fk{j}(Y))$, which proves (ii).
\end{proof}

\begin{cor}[1.1.5]
\label{1.1.1.5}
The closed subsets of $X=\Spec(A)$ and the ideals of $A$ equal to their radicals (otherwise
the intersection of prime ideals) correspond bijectively by the \unsure{descent} maps
$Y\mapsto\fk{j}(Y)$, $\fk{a}\mapsto V(\fk{a})$; the union $Y_1\cup Y_2$ of
two closed subsets corresponds to $\fk{j}(Y_1)\cap\fk{j}(Y_2)$, and the
intersection of any family $(Y_\lambda)$ of closed subsets corresponds to the radical of the
sum of the $\fk{j}(Y_\lambda)$.
\end{cor}

\begin{cor}[1.1.6]
\label{1.1.1.6}
If $A$ is a Noetherian ring, $X=\Spec(A)$ is a Noetherian space.
\end{cor}

Note that the converse of this corollary is false, as shown
in the example of a non-Noetherian integral ring with a single prime ideal $\neq\{0\}$, for
example a nondiscrete valuation ring of rank $1$.

As an example of ring $A$ whose spectrum is not a Noetherian space, one can consider the ring
$\sh{C}(Y)$ of continuous real functions on an infinite compact space $Y$; we know that as a
whole, $Y$ corresponds with the set of maximal ideals of $A$, and it is easy to see that the
topology induced on $Y$ by that of $X=\Spec(A)$ is the initial topology of $Y$. Since $Y$ is
not a Noetherian space, the same is true for $X$.

\begin{cor}[1.1.7]
\label{1.1.1.7}
For each $x\in X$, the closure of $\{x\}$ is the set of $y\in X$ such that
$\fk{j}_x\subset\fk{j}_y$. For $\{x\}$ to be closed, it is necessary and
sufficient that $\fk{j}_x$ is maximal.
\end{cor}

\begin{cor}[1.1.8]
\label{1.1.1.8}
The space $X=\Spec(A)$ is a Kolmogoroff space.
\end{cor}

\begin{proof}
\label{proof-1.1.1.8}
If $x$, $y$ are two distinct points of $X$, we have either
$\fk{j}_x\not\subset\fk{j}_y$ or $\fk{j}_y\not\subset\fk{j}_x$, so
one of the points $x$, $y$ does not belong to the closure of the other.
\end{proof}

\begin{env}[1.1.9]
\label{1.1.1.9}
According to Proposition \sref{1.1.1.2}, (iv), for two elements $f$, $g$ of $A$, we have
\[
  D(fg)=D(f)\cap D(g).
  \tag{1.1.9.1}
\]
Note also that the relation $D(f)=D(g)$ means, according to Proposition
\sref{1.1.1.4}, (i) and Proposition \sref{1.1.1.2}, (v) that $\rad(f)=\rad(g)$, or
that the minimal prime ideals containing $(f)$ and $(g)$ are the same; in particular, when
$f=ug$, where $u$ is invertible.
\end{env}

\begin{prop}[1.1.10]
\label{1.1.1.10}
\medskip\noindent
\oldpage[I]{82}
\begin{enumerate}[label=\emph{(\roman*)}]
  \item When $f$ ranges over $A$, the sets $D(f)$ forms a basis for the topology of $X$.
  \item For every $f\in A$, $D(f)$ is quasi-compact. In particular $X=D(1)$ is quasi-compact.
\end{enumerate}
\end{prop}

\begin{proof}
\label{proof-1.1.1.10}
\medskip\noindent
\begin{enumerate}[label=(\roman*)]
  \item Let $U$ be an open set in $X$; by definition, we have $U=X-V(E)$ where $E$ is a subset of $A$, and $V(E)=\bigcap_{f\in E}V(f)$, hence $U=\bigcup_{f\in E}D(f)$.
  \item According to (i), it is sufficient to prove that if $(f_\lambda)_{\lambda\in L}$ is a family of elements of $A$ such that $D(f)\subset\bigcup_{\lambda\in L}D(f_\lambda)$, there exists a finite subset $J$ of $L$ such that $D(f)\subset\bigcup_{\lambda\in J}D(f_\lambda)$.
    Let $\fk{a}$ be the ideal of $A$ generated by the $f_\lambda$; we have by hypothesis
    that $V(f)\supset V(\fk{a})$, so $\rad(f)\subset\rad(\fk{a})$; as $f\in\rad(f)$,
    there exists an integer $n\geqslant 0$ such that $f^n\in\fk{a}$. But then $f^n$ belongs
    to the ideal $\fk{b}$ generated by the finite subfamily $(f_\lambda)_{\lambda\in J}$,
    and we have $V(f)=V(f^n)\supset V(\fk{b})=\bigcap_{\lambda\in J}V(f_\lambda)$, that is
    to say, $D(f)\supset\bigcup_{\lambda\in J}D(f_\lambda)$.
\end{enumerate}
\end{proof}

\begin{prop}[1.1.11]
\label{1.1.1.11}
For each ideal $\fk{a}$ of $A$, $\Spec(A/\fk{a})$ canonically identifies with the
closed subspace $V(\fk{a})$ of $\Spec(A)$.
\end{prop}

\begin{proof}
\label{proof-1.1.1.11}
We know there is a canonical bijective correspondence (respecting the inclusion order
structure) between ideals (resp. prime ideals) of $A/\fk{a}$ and ideals (resp. prime
ideals) of $A$ containing $\fk{a}$.
\end{proof}

Recall that the set $\nilrad$ of nilpotent elements of $A$ (the \emph{nilradical} of $A$) is
an ideal equal to $\rad(0)$, the intersection of all the prime ideals of $A$
\sref[0]{0.1.1.1}

\begin{cor}[1.1.12]
\label{1.1.1.12}
The topological spaces $\Spec(A)$ and $\Spec(A/\nilrad)$ are canonically homeomorphic.
\end{cor}

\begin{prop}[1.1.13]
\label{1.1.1.13}
For $X=\Spec(A)$ to be irreducible \sref[0]{0.2.1.1}, it is necessary and
sufficient that the ring $A/\nilrad$ is integral (or, equivalently, that the ideal $\nilrad$ is prime).
\end{prop}

\begin{proof}
\label{proof-1.1.1.13}
By virtue of Corollary \sref{1.1.1.12}, we can restrict to the case where
$\nilrad=0$. If $X$ is reducible, then there exist two distinct closed subsets $Y_1$, $Y_2$
of $X$ such that $X=Y_1\cup Y_2$, so $\fk{j}(X)=\fk{j}(Y_1)\cap\fk{j}(Y_2)=0$,
the ideals $\fk{j}(Y_1)$ and $\fk{j}(Y_2)$ being distinct from $(0)$
\sref{1.1.1.5}; so $A$ is not integral. Conversely, if in $A$ there are
elements $f\neq 0$, $g\neq 0$ such that $fg=0$, we have $V(f)\neq X$, $V(g)\neq X$ (since the
intersection of the prime ideals of $A$ is $(0)$), and $X=V(fg)=V(f)\cup V(g)$.
\end{proof}

\begin{cor}[1.1.14]
\label{1.1.1.14}
\medskip\noindent
\begin{enumerate}[label=\emph{(\roman*)}]
  \item In the bijective correspondence between closed subsets of $X=\Spec(A)$ and ideals of $A$ equal to their roots, the irreducible closed subsets of $X$ correspond to the prime ideals of $A$.
    In particular, the irreducible components of $X$ correspond to the minimal prime ideals of $A$.
  \item The map $x\mapsto\overline{\{x\}}$ establishes a bijective correspondence between $X$ and the set of closed irreducible subsets of $X$ (\emph{said otherwise,} all closed irreducible subsets of $X$ containing only one generic point).
\end{enumerate}
\end{cor}

\begin{proof}
\label{proof-1.1.1.14}
(i) follows immediately from \sref{1.1.1.13} and
\sref{1.1.1.11}; and for
proving (ii), we can, by virtue of \sref{1.1.1.11}, we restrict to the
case where $X$ is irreducible; then, according to
Proposition \sref{1.1.1.13}, there exists
in $A$ a smaller prime ideal $\nilrad$, which corresponds to the generic point
\oldpage[I]{83}
of $X$; in addition, $X$ does not admit only one generic point since it is a Kolmogoroff
space (\sref{1.1.1.8} and \sref[0]{0.2.1.3}).
\end{proof}

\begin{prop}[1.1.15]
\label{1.1.1.15}
If $\fk{J}$ is an ideal in $A$ containing the radical $\nilrad(A)$, the only
neighborhood of $V(\fk{J})$ in $X=\Spec(A)$ is the whole space $X$.
\end{prop}

\begin{proof}
\label{proof-1.1.1.15}
Each maximal ideal of $A$ belongs by definition of $V(\fk{J})$.
As each ideal $\fk{a}$ of $A$ is contained in a maximal ideal, we have
$V(\fk{a})\cap V(\fk{J})\neq 0$, hence the proposition.
\end{proof}

\subsection{Functorial properties of prime spectra of rings}
\label{subsection-func-prop}

\begin{env}[1.2.1]
\label{1.1.2.1}
Let $A$, $A'$ be two rings,
\[
  \vphi:A'\longrightarrow A
\]
a homomorphism of rings. For each prime ideal $x=\fk{j}_x\in\Spec(A)=X$, the
ring $A'/\vphi^{-1}(\fk{j}_x)$ is canonically isomorphic to a subring of
$A/\fk{j}_x$, so it is integral, otherwise we say
$\vphi^{-1}(\fk{j}_x)$ is a prime ideal of $A'$; we denote it by
${}^a\vphi(x)$, and we have also defined a map
\[
  {}^a\vphi:X=\Spec(A)\longrightarrow X'=\Spec(A')
\]
(also denoted $\Spec(\vphi)$) we call this the map \emph{associated} to the
homomorphism $\vphi$. We denote by $\vphi^x$ the injective homomorphism of
$A'/\vphi^{-1}(\fk{j}_x)$ to $A/\fk{j}_x$ induced by $\vphi$ by
passing to quotients, so the canonical extension is a monomorphism of fields
\[
  \vphi^x:\kres({}^a\vphi(x))\longrightarrow\kres(x);
\]
for each $f'\in A'$, we therefore have by definition
\[
  \vphi^x(f'({}^a\vphi(x)))=(\vphi(f'))(x)\quad(x\in X).
  \tag{1.2.1.1}
\]
\end{env}

\begin{prop}[1.2.2]
\label{1.1.2.2}
\medskip\noindent
\begin{enumerate}[label=\emph{(\roman*)}]
  \item For each subset $E'$ of $A'$, we have
    \[
      {}^a\vphi^{-1}(V(E'))=V(\vphi(E')),
      \tag{1.2.2.1}
    \]
    and in particular, for each $f'\in A'$,
    \[
      {}^a\vphi^{-1}(D(f'))=D(\vphi(f')).
      \tag{1.2.2.2}
    \]
  \item For each ideal $\fk{a}$ of $A$, we have
    \[
      \overline{{}^a\vphi(V(\fk{a}))}=V(\vphi^{-1}(\fk{a})).
      \tag{1.2.2.3}
    \]
\end{enumerate}
\end{prop}

\begin{proof}
\label{proof-1.1.2.2}
The relation ${}^a\vphi(x)\in V(E')$ is by definition equivalent to
$E'\subset\vphi^{-1}(\fk{j}_x)$, so $\vphi(E')\subset\fk{j}_x$, and
finally $x\in V(\vphi(E'))$, hence (i). To prove (ii), we can suppose that
$\fk{a}$ is equal to its radical, since $V(\rad(\fk{a}))=V(\fk{a})$
(\sref{1.1.1.2}, (v)) and
$\vphi^{-1}(\rad(\fk{a}))=\rad(\vphi^{-1}(\fk{a}))$; the relation
$f'\in\fk{a}'$ is by definition equivalent to $f'(x')=0$ for each
$x\in{{}^a\vphi(Y)}$, so, by virtue of the formula (1.2.1.1), it is equivalent as well
to $\vphi(f')(x)=0$ for each $x\in Y$, or $\vphi(f')\in\fk{j}(Y)=\fk{a}$,
since $\fk{a}$ is equal to its radical; hence (ii).
\end{proof}

\begin{cor}[1.2.3]
\label{1.1.2.3}
The map ${}^a\vphi$ is continuous.
\end{cor}

We remark that if $A''$ is a third ring, $\vphi'$ a homomorphism $A''\to A'$, we have
${}^a(\vphi'\circ\vphi)={}^a\vphi\circ{}^a\vphi'$; this result and Corollary
\sref{1.1.2.3} gives that $\Spec(A)$ is a \emph{contravariant functor} in $A$, from the
category of rings to that of topological spaces.

\begin{cor}[1.2.4]
\label{1.1.2.4}
\oldpage[I]{84}
Suppose that $\vphi$ is such that for each $f\in A$ written as $f=h\vphi(f')$, where $h$ is
invertible in $A$ (\emph{which is in particular the case when $\vphi$ is} surjective). Then
${}^a\vphi$ is a homeomorphism from $X$ to ${}^a\vphi(X)$.
\end{cor}

\begin{proof}
\label{proof-1.1.2.4}
We show that for each subset $E\subset A$, there exists a subset $E'$ of $A'$ such that
$V(E)=V(\vphi(E'))$; according to the axiom ($T_0$) \sref{1.1.1.8} and the formula
(1.2.2.1), this implies first that ${}^a\vphi$ is injective, then, according to (1.2.2.1),
that ${}^a\vphi$ is a homeomorphism. Or, it suffices for each $f\in E$ to have a $f'\in A'$
such that $h\vphi(f')=f$ with $h$ invertible in $A$; the set $E'$ of these elements $f'$
provides the answer.
\end{proof}

\begin{env}[1.2.5]
\label{1.1.2.5}
In particular, when $\vphi$ is the canonical homomorphism of $A$ to a ring quotient
$A/\fk{a}$, we get \sref{1.1.1.12}, and ${}^a\vphi$ is the
\emph{canonical injection} of $V(\fk{a})$, identified with $\Spec(A/\fk{a})$,
in $X=\Spec(A)$.
\end{env}

Another particular case of \sref{1.1.2.4}:
\begin{cor}[1.2.6]
\label{1.1.2.6}
If $S$ is a multiplicative subset of $A$, the spectrum $\Spec(S^{-1}A)$ identifies
canonically (with its topology) with the subspace of $X=\Spec(A)$ consisting of the $x$
such that $\fk{j}_x\cap S=\emp$.
\end{cor}

\begin{proof}
\label{proof-1.1.2.6}
We know by \sref[0]{0.1.2.6} that the prime ideals of $S^{-1}A$ are the ideals
$S^{-1}\fk{j}_x$ such that $\fk{j}_x\cap S=\emp$, and that we have
$\fk{j}_x=(i_A^S)^{-1}(S^{-1}\fk{j}_x)$. It suffices to apply the $i_A^S$
with Corollary \sref{1.1.2.4}.
\end{proof}

\begin{cor}[1.2.7]
\label{1.1.2.7}
For ${}^a\vphi(X)$ to be dense in $X'$, it is necessary and sufficient that each element
of the kernel $\Ker\vphi$ is nilpotent.
\end{cor}

\begin{proof}
\label{proof-1.1.2.7}
Applying the formula (1.2.2.3) to the ideal $\fk{a}=(0)$, we have
$\wt{{}^a\vphi(X)}=V(\Ker\vphi)$, and for $V(\Ker\vphi)=X$ to hold, it is necessary
and sufficient that $\Ker\vphi$ is contained in all the prime ideals of $A'$, that is to say
in the nilradical $\rad'$ of $A'$.
\end{proof}

\subsection{Sheaf associated to a module}
\label{subsection-assoc-sheaf}

\begin{env}[1.3.1]
\label{1.1.3.1}
Let $A$ be a commutative ring, $M$ an $A$-module, $f$ an element of $A$, $S_f$ the
multiplicative set of the $f^n$, where $n\geqslant 0$. Recall that we put $A_f=S_f^{-1}A$,
$M_f=S_f^{-1}M$. If $S_f'$ is the saturated multiplicative subset of $A$ consisting of the
$g\in A$ which divide an element of $S_f$, we know that $A_f$ and $M_f$ canonically identify
with ${S_f'}^{-1}A$ and ${S_f'}^{-1}M$ \sref[0]{0.1.4.3}.
\end{env}

\begin{lem}[1.3.2]
\label{1.1.3.2}
The following conditions are equivalent:
\begin{center}
\emph{(a)} $g\in S_f'$;
\emph{(b)} $S_g'\subset S_f'$;
\emph{(c)} $f\in\rad(g)$;
\emph{(d)} $\rad(f)\subset\rad(g)$;
\emph{(e)} $V(g)\subset V(f)$;
\emph{(f)} $D(f)\subset D(g)$.
\end{center}
\end{lem}
This follows immediately from the definitions and from
Corollary \sref{1.1.1.5}.

\begin{env}[1.3.3]
\label{1.1.3.3}
If $D(f)=D(g)$, then Lemma \sref{1.1.3.2}, (b), shows that $M_f=M_g$. More generally, if
$D(f)\supset D(g)$, then $S_f'\subset S_g'$, and we know \sref[0]{0.1.4.1} that there exists
a canonical functorial homomorphism
\[
  \rho_{g,f}:M_f\longrightarrow M_g,
\]
and if $D(f)\supset D(g)\supset D(h)$, we have \sref[0]{0.1.4.4}
\[
  \rho_{h,g}\circ\rho_{g,f}=\rho_{h,f}.
  \tag{1.3.3.1}
\]
\end{env}

\oldpage[I]{85}
When $f$ runs over the elements of $A-\fk{j}_x$ (for a given $x$ in $X=\Spec(A)$), the
sets $S_f'$ constitute an increasing filtered set of subsets of $A-\fk{j}_x$, since for
two elements $f$, $g$ of $A-\fk{j}_x$, $S_f'$ and $S_g'$ are contained in $S_{fg}'$; as
the union of the $S_f'$ for $f\in A-\fk{j}_x$ is $A-\fk{j}_x$, we conclude
\sref[0]{0.1.4.5} that the $A_x$-module $M_x$ canonically identifies with the \emph{inductive
limit} $\varinjlim M_f$, relative to the family of homomorphisms $(\rho_{g,f})$. We denote by
\[
  \rho_x^f:M_f\longrightarrow M_x
\]
the canonical homomorphism for $f\in A-\fk{j}_x$ (or, equivalently, $x\in D(f)$).

\begin{defn}[1.3.4]
\label{1.1.3.4}
We define the structure sheaf of the prime spectrum $X=\Spec(A)$ (resp. sheaf associated to
an $A$-module $M$) and denote it by $\wt{A}$ or $\OO_X$ (resp. $\wt{M}$) as the
sheaf of rings (resp. the $\wt{A}$-module) associated to the presheaf
$D(f)\mapsto A_f$ (resp. $D(f)\mapsto M_f$) over the basis $\fk{B}$ of $X$ consisting
of the $D(f)$ for $f\in A$ (\sref{1.1.1.10}, \sref[0]{0.3.2.1}, and
\sref[0]{0.3.5.6}).
\end{defn}

We saw \sref[0]{0.3.2.4} that the stalk $\wt{A}_x$ (resp. $\wt{M}_x$)
\emph{identifies with the ring $A_x$} (resp. \emph{the $A_x$-module $M_x$}); we denote by
\[
  \theta_f:A_f\longrightarrow\Gamma(D(f),\wt{A})
\]
\[
  (\text{resp. }\theta_f:M_f\longrightarrow\Gamma(D(f),\wt{M})),
\]
the canonical map, so that for each $x\in D(f)$ and each $\xi\in M_f$, we have
\[
  (\theta_f(\xi))_x=\rho_x^f(\xi).
  \tag{1.3.4.1}
\]

\begin{prop}[1.3.5]
\label{1.1.3.5}
$\wt{M}$ is an exact covariant functor in $M$, from the category of $A$-modules to the
category of $\wt{A}$-modules.
\end{prop}

\begin{proof}
\label{proof-1.1.3.5}
Indeed, let $M$, $N$ be two $A$-modules, $u$ a homomorphism $M\to N$; for each $f\in A$,
it canonically assigns to $u$ a homomorphism $u_f$ of the $A_f$-module $M_f$ to the
$A_f$-module $N_f$, and the diagram (for $D(g)\subset D(f)$)
\[
  \xymatrix{
    M_f\ar[r]^{u_f}\ar[d]_{\rho_{g,f}} & N_f\ar[d]^{\rho_{g,f}}\\
    M_g\ar[r]^{u_g} & N_g
  }
\]
is commutative \sref{1.1.4.1}; these homomorphisms then define a homomorphism of
$\wt{A}$-modules $\wt{u}:\wt{M}\to\wt{N}$ \sref[0]{0.3.2.3}. In
addition, for each $x\in X$, $\wt{u}_x$ is the inductive limit of the $u_f$ for
$x\in D(f)$ ($f\in A$), and as a result \sref[0]{0.1.4.5}, if we canonically identify
$\wt{M}_x$ and $\wt{N}_x$ with $M_x$ and $N_x$ respectively, then $\wt{u}_x$
identifies with the homomorphism $u_x$ canonically induced by $u$. If $P$ is a third
$A$-module, $v$ a homomorphism $N\to P$ and $w=v\circ u$, it is immediate that
$w_x=v_x\circ u_x$, so $\wt{w}=\wt{v}\circ\wt{u}$. We have therefore
clearly defined a \emph{covariant functor} $\wt{M}$ in $M$, from the category of
$A$-modules to that of $\wt{A}$-modules. \emph{This functor is exact}, since for each
$x\in X$, $M_x$ is an exact functor in $M$ \sref[0]{0.1.3.2}; in addition, we have
$\Supp(M)=\Supp(\wt{M})$ by the definitions \sref[0]{0.1.7.1} and
\sref[0]{0.3.1.6}.
\end{proof}

\oldpage[I]{86}
\begin{prop}[1.3.6]
\label{1.1.3.6}
For each $f\in A$, the open subset $D(f)\subset X$ canonically identifies with the prime
spectrum $\Spec(A_f)$, and the sheaf $\wt{M_f}$ associated to the $A_f$-module
$M_f$ canonically identifies with the restriction $\wt{M}|D(f)$.
\end{prop}

The first assertion is a particular case of \sref{1.1.2.6}. In addition, for $g\in A$ is
such that $D(g)\subset D(f)$, $M_g$ canonically identifies with the module of fractions of
$M_f$ whose denominators are the powers of the canonical image of $g$ in $A_f$
\sref[0]{0.1.4.6}. The canonical identification of $\wt{M_f}$ with
$\wt{M}|D(f)$ then follows from the definitions.

\begin{thm}[1.3.7]
\label{1.1.3.7}
For each $A$-module $M$ and each $f\in A$, the homomorphism
\[
  \theta_f:M_f\longrightarrow\Gamma(D(f),\wt{M})
\]
is bijective \emph{(in other words, the presheaf $D(f)\mapsto M_f$ is a \emph{sheaf})}. In
particular, $M$ identifies with $\Gamma(X,\wt{M})$ via $\theta_1$.
\end{thm}

\begin{proof}
\label{proof-1.1.3.7}
We note that, if $M=A$, $\theta_f$ is a homomorphism of structure rings; Theorem
\sref{1.1.3.7} implies then that, if we identify the rings $A_f$ and
$\Gamma(D(f),\wt{A})$ by means of the $\theta_f$, the homomorphism
$\theta_f:M_f\to\Gamma(D(f),\wt{M})$ is an isomorphism of \emph{modules}.

We show first that $\theta_f$ is \emph{injective}. Indeed, if $\xi\in M_f$ is such that
$\theta_f(\xi)=0$, then this means that for each prime ideal $\fk{p}$ of $A_f$, there
exists $h\not\in\fk{p}$ such that $h\xi=0$; as the annihilator of $\xi$ is not
contained in any prime ideal of $A_f$, each $A_f$ integral, so $\xi=0$.

It remains to show that $\theta_f$ is \emph{surjective}; we can reduce to the case where
$f=1$, the general case deduced by ``localizing'' using \sref{1.1.3.6}. Now let $s$ be a
section of $\wt{M}$ over $X$; according to \sref{1.1.3.4} and
\sref{1.1.1.10}, (ii), there exists a \emph{finite} cover $(D(f_i))_{i\in I}$ of $X$
($f_i\in A$) such that, for each $i\in I$, the restriction $s_i=s|D(f_i)$ is of the form
$\theta_{f_i}(\xi_i)$, where $\xi_i\in M_{f_i}$. If $i$, $j$ are two indices of $I$, and if
the restrictions of $s_i$ and $s_j$ to $D(f_i)\cap D(f_j)=D(f_i f_j)$ are equal, then
it follows by definition of $M$ that
\[
  \rho_{f_i f_j,f_i}(\xi_i)=\rho_{f_i f_j,f_j}(\xi_j).
  \tag{1.3.7.1}
\]
By definition, we can write, for each $i\in I$, $\xi_i=z_i/f_i^{n_i}$, where $z_i\in M$, and
as $I$ is finite, by multiplying each $z_i$ by a power of $f_i$, we can suppose that all the
$n_i$ are equal to the same $n$. Then, by definition, (1.3.7.1) implies that there exists an
integer $m_{ij}\geqslant 0$ such that $(f_i f_j)^{m_{ij}}(f_j^n z_i-f_i^n z_j)=0$, and we can
moreover suppose that the $m_{ij}$ are equal to the same integer $m$; replacing then the
$z_i$ by $f_i^m z_i$, it remains to prove for the case where $m=0$, in other words, the case
where we have
\[
  f_j^n z_i=f_i^n z_j
  \tag{1.3.7.2}
\]
for any $i$, $j$. We have $D(f_i^n)=D(f_i)$, and as the $D(f_i)$ form a cover of $X$,
the ideal generated by the $f_i^n$ is $A$; in other words, there exist elements $g_i\in A$
such that $\sum_i g_i f_i^n=1$. Then consider the element $z=\sum_i g_i z_i$ of $M$; in
(1.3.7.2), we have $f_i^n z=\sum_j g_j f_i^n z_j=(\sum_j g_j f_j^n)z_i=z_i$, where by
definition $\xi_i=z/1$ in $M_{f_i}$. We conclude
\oldpage[I]{87}
that the $s_i$ are the restrictions to $D(f_i)$ of $\theta_1(z)$, which proves that
$s=\theta_1(z)$ and finishes the proof.
\end{proof}

\begin{cor}[1.3.8]
\label{1.1.3.8}
Let $M$, $N$ be two $A$-modules; the canonical homomorphism $u\mapsto\wt{u}$ from
$\Hom_A(M,N)$ to $\Hom_{\wt{A}}(\wt{M},\wt{N})$ is bijective. In
particular, the relations $M=0$ and $\wt{M}=0$ are equivalent.
\end{cor}

\begin{proof}
\label{proof-1.1.3.8}
Consider the canonical homomorphism $v\mapsto\Gamma(v)$ from
$\Hom_{\wt{A}}(\wt{M},\wt{N})$ to
$\Hom_{\Gamma(\wt{A})}(\Gamma(\wt{M}),\Gamma(\wt{N}))$; the latter
module canonically identifies with $\Hom_A(M,N)$ according to Theorem \sref{1.1.3.7}.
It remains to show that $u\mapsto\wt{u}$ and $v\mapsto\Gamma(v)$ are inverses of each
other; it is evident that $\Gamma(\wt{u})=u$ by definition of $\wt{u}$; on the
other hand, if we put $u=\Gamma(v)$ for
$v\in\Hom_{\wt{A}}(\wt{M},\wt{N})$, the map
$w:\Gamma(D(f),\wt{M})\to\Gamma(D(f),\wt{N})$ canonically induced from $v$
is such that the diagram
\[
  \xymatrix{
    M\ar[r]^u\ar[d]_{\rho_{f,1}} & N\ar[d]^{\rho_{f,1}}\\
    M_f\ar[r]^w & N_f
  }
\]
is commutative; so we have necessarily that $w=u_f$ for all $f\in A$
\sref[0]{0.1.2.4}, which shows that $\wt{\Gamma(v)}=v$.
\end{proof}

\begin{cor}[1.3.9]
\label{1.1.3.9}
\medskip\noindent
\begin{enumerate}[label=\emph{(\roman*)}]
  \item Let $u$ be a homomorphism from an $A$-module $M$ to an $A$-module $N$; then the sheaves associated to $\Ker u$, $\Im u$, $\Coker u$, are respectively $\Ker\wt{u}$, $\Im\wt{u}$, $\Coker\wt{u}$.
    In particular, for $\wt{u}$ to be injective (resp. surjective, bijective), it is necessary and sufficient that $u$ is.
  \item If $M$ is an inductive limit (resp. direct sum) of a family of $A$-modules
    $(M_\lambda)$, then $\wt{M}$ is the inductive limit (resp. direct sum) of the
    family $(\wt{M_\lambda})$, via a canonical isomorphism.
\end{enumerate}
\end{cor}

\begin{proof}
\label{proof-1.1.3.9}
\medskip\noindent
\begin{enumerate}[label=(\roman*)]
  \item It suffices to apply the fact that $\wt{M}$ is an exact functor in $M$ \sref{1.1.3.5} to the two exact sequences of $A$-modules
    \[
      0\longrightarrow\Ker u\longrightarrow M\longrightarrow\Im u\longrightarrow 0,
    \]
    \[
      0\longrightarrow\Im u\longrightarrow N\longrightarrow\Coker u\longrightarrow 0.
    \]
    The second assertion then follows from Theorem \sref{1.1.3.7}.
  \item Let $(M_\lambda,g_{\mu\lambda})$ be an inductive system of $A$-modules, with inductive limit $M$, and let $g_\lambda$ be the canonical homomorphism $M_\lambda\to M$.
    As we have $\wt{g_{\nu\mu}}\circ\wt{g_{\mu\lambda}}=\wt{g_{\nu\lambda}}$ and $\wt{g_\lambda}=\wt{g_\mu}\circ\wt{g_{\mu\lambda}}$ for $\lambda\leqslant\mu\leqslant\nu$, $(\wt{M_\lambda},\wt{g_{\mu\lambda}})$ is an inductive system of sheaves on $X$, and if we denote by $h_\lambda$ the canonical homomorphism $\wt{M_\lambda}\to\varinjlim\wt{M_\lambda}$, then there is a unique homomorphism $v:\varinjlim\wt{M_\lambda}\to\wt{M}$ such that $v\circ h_\lambda=\wt{g_\lambda}$.
    To see that $v$ is bijective, it suffices to check, for each $x\in X$, that $v_x$ is a bijection from $(\varinjlim\wt{M_\lambda})_x$ to $\wt{M}_x$; but $\wt{M}_x=M_x$, and
    \[
      (\varinjlim\wt{M_\lambda})_x=\varinjlim(\wt{M_\lambda})_x
      =\varinjlim(M_\lambda)_x=M_x\quad\sref[0]{0.1.3.3}.
    \]
    Conversely, it follows from the definitions that $(\wt{g_\lambda})_x$ and
    $(h_\lambda)$ are all equal to the canonical map from $(M_\lambda)_x$ to $M_x$; as
    $(\wt{g_\lambda})_x=v_x\circ(h_\lambda)_x$, $v_x$ is the identity.

\oldpage[I]{88}
    Finally, if $M$ is the direct sum of two $A$-modules $N$, $P$, it is immediate that $\wt{M}=\wt{N}\oplus\wt{P}$; each direct sum being the inductive limit of finite direct sums, the assertions of (ii) are proved.
\end{enumerate}
\end{proof}

We note that Corollary \sref{1.1.3.8} proves that the sheaves isomorphic to the associated sheaves
of $A$-modules forms an \emph{abelian category} (T, I, 1.4).

We also note that it follows from Corollary \sref{1.1.3.9} that if $M$ is an $A$-module \emph{of
finite type}, that is to say there exists a surjective homomorphism $A^n\to M$, then there
exists a surjective homomorphism $\wt{A^n}\to\wt{M}$, in other words, the
$\wt{A}$-module $\wt{M}$ is \emph{generated by a finite family of sections over
$X$} \sref[0]{0.5.1.1}, and conversely.

\begin{env}[1.3.10]
\label{1.1.3.10}
If $N$ is a submodule of an $A$-module $M$, the canonical injection $j:N\to M$ gives by
\sref{1.1.3.9} an injective homomorphism $\wt{N}\to\wt{M}$, which allows us
to canonically identify $\wt{N}$ with a \emph{$\wt{A}$-submodule} of
$\wt{M}$; we will always assume we have made this identification. If $N$ and $P$ are
two submodules of $M$, we then have
\[
  (N+P)^\sim=\wt{N}+\wt{P},
  \tag{1.3.10.1}
\]
\[
  (N\cap P)^\sim=\wt{N}\cap\wt{P},
  \tag{1.3.10.2}
\]
since $N+P$ and $N\cap P$ are respectively the images of the canonical homomorphism
$N\oplus P\to M$, and the kernel of the canonical homomorphism $M\to(M/N)\oplus(M/P)$, and
it suffices to apply \sref{1.1.3.9}.

We conclude from (1.3.10.1) and (1.3.10.2) that if $\wt{N}=\wt{P}$, we have
$N=P$.
\end{env}

\begin{cor}[1.3.11]
\label{1.1.3.11}
On the category of sheaves isomorphic to the associated sheaves of $A$-modules, the functor
$\Gamma$ is exact.
\end{cor}

\begin{proof}
\label{proof-1.1.3.11}
Let $\wt{M}\xrightarrow{\wt{u}}\wt{N}
\xrightarrow{\wt{v}}\wt{P}$ be an exact sequence corresponding to two
homomorphisms $u:M\to N$, $v:N\to P$ of $A$-modules. If $Q=\Im u$ and $R=\Ker v$, we have
$\wt{Q}=\Im\wt{u}=\Ker\wt{v}=\wt{R}$ (Corollary \sref{1.1.3.9}),
hence $Q=R$.
\end{proof}

\begin{cor}[1.3.12]
\label{1.1.3.12}
Let $M$, $N$ be two $A$-modules.
\begin{enumerate}[label=\emph{(\roman*)}]
  \item The sheaf associated to $M\otimes_A N$ canonically identifies with $\wt{M}\otimes_{\wt{A}}\wt{N}$.
  \item If in addition $M$ admits a finite presentation, then the sheaf associated to $\Hom_A(M,N)$ canonically identifies with $\shHom_{\wt{A}}(\wt{M},\wt{N})$.
\end{enumerate}
\end{cor}

\begin{proof}
\label{proof-1.1.3.12}
\medskip\noindent
\begin{enumerate}[label=(\roman*)]
  \item The sheaf $\sh{F}=\wt{M}\otimes_{\wt{A}}\wt{N}$ is associated to the presheaf
    \[
      U\longmapsto\sh{F}(U)=\Gamma(U,\wt{M})\otimes_{\Gamma(U,\wt{A})}\Gamma(U,\wt{N}),
    \]
    $U$ varying over the basis \sref{1.1.1.10}, (i) of $X$ consisting of the
    $D(f)$, where $f\in A$. We have that $\sh{F}(D(f))$ canonically identifies with
    $M_f\otimes_{A_f}N_f$ according to \sref{1.1.3.7} and \sref{1.1.3.6}.
    Moreover, we have that the $A_f$-module $M_f\otimes_{A_f}N_f$ is canonically
    isomorphic to $(M\otimes_A N)_f$ \sref[0]{0.1.3.4}, which itself is canonically
    isomorphic to $\Gamma(D(f),(M\otimes_A N)^\sim)$ (\sref{1.1.3.7} and
    \sref{1.1.3.6}). In addition, we check immediately that the canonical
    isomorphisms
    \[
      \sh{F}(D(f))\isoto\Gamma(D(f),(M\otimes_A N)^\sim)
    \]
\oldpage[I]{89}
    thus obtained satisfy the compatibility conditions with respect to the restriction
    operations \sref[0]{0.1.4.2}, so they define a canonical functorial isomorphism
    \[
      \wt{M}\otimes_{\wt{A}}\wt{N}\isoto(M\otimes_A N)^\sim.
    \]
  \item The sheaf $\sh{G}=\shHom_{\wt{A}}(\wt{M},\wt{N})$ is associated to the presheaf
    \[
      U\longmapsto\sh{G}(U)=\Hom_{\wt{A}|U}(\wt{M}|U,\wt{N}|U),
    \]
    $U$ varying over the basis of $X$ consisting of the $D(f)$. We have that $\sh{G}(D(f))$ canonically
    identifies with $\Hom_{A_f}(M_f,N_f)$ (Proposition \sref{1.1.3.6} and
    Corollary \sref{1.1.3.8}), which, according to the hypotheses on $M$, canonically
    identifies with $(\Hom_A(M,N))_f$ \sref[0]{0.1.3.5}. Finally, $(\Hom_A(M,N))_f$
    canonically identifies with $\Gamma(D(f),(\Hom_A(M,N))^\sim)$ (Proposition \sref{1.1.3.6}
    and Theorem \sref{1.1.3.7}), and the canonical isomorphisms
    $\sh{G}(D(f))\isoto\Gamma(D(f),(\Hom_A(M,N))^\sim)$ thus obtained are compatible with the restriction
    operations \sref[0]{0.1.4.2}; they thus define a canonical isomorphism
    $\shHom_{\wt{A}}(\wt{M},\wt{N})\isoto(\Hom_A(M,N))^\sim$.
\end{enumerate}
\end{proof}

\begin{env}[1.3.13]
\label{1.1.3.13}
Now let $B$ be a (commutative) $A$-algebra; this can be interpreted by saying that $B$ is an
$A$-module such that we are given an element $e\in B$ and an $A$-homomorphism
$\vphi:B\otimes_A B\to B$, so that: 1st the diagrams
\[
  \xymatrix{
    B\otimes_A B\otimes_A B\ar[r]^{\vphi\otimes 1}\ar[d]_{1\otimes\vphi} &
    B\otimes_A B\ar[d]^\vphi & &
    B\otimes_A B\ar[rr]^\sigma\ar[rd]_\vphi & &
    B\otimes_A B\ar[dl]^\vphi\\
    B\otimes_A B\ar[r]^\vphi &
    B & & &
    B
  }
\]
($\sigma$ the canonical symmetry map) are commutative; 2nd
$\vphi(e\otimes x)=\vphi(x\otimes e)=x$. According to
Corollary \sref{1.1.3.12}, the homomorphism
$\wt{\vphi}:\wt{B}\otimes_{\wt{A}}\wt{B}\to\wt{B}$ of
$\wt{A}$-modules satisfies the analogous conditions, thus defines an
\emph{$\wt{A}$-algebra} structure on $\wt{B}$. In a similar way, the data of
a $B$-module $N$ is the same as the data of an $A$-module $N$ and an $A$-homomorphism
$\psi:B\otimes_A N\to N$ such that the diagram
\[
  \xymatrix{
    B\otimes_A B\otimes_A B\ar[r]^{\vphi\otimes 1}\ar[d]_{1\otimes\psi} &
    B\otimes_A N\ar[d]^\psi\\
    B\otimes_A N\ar[r]^\psi &
    N
  }
\]
is commutative and $\psi(e\otimes n)=n$; the homomorphism
$\wt{\psi}:\wt{B}\otimes_{\wt{A}}\wt{N}\to\wt{N}$
satisfies the analogous condition, and so defines a \emph{$\wt{B}$-module} structure
on $\wt{N}$.

In a similar way, we see that if $u:B\to B'$ (resp. $v:N\to N'$) is a homomorphism of
$A$-algebras (resp. of $B$-modules), $\wt{u}$ (resp. $\wt{v}$) is a
homomorphism of $\wt{A}$-algebras (resp. of $\wt{B}$-modules),
$\Ker\wt{u}$ is a $\wt{B}$-ideal (resp. $\Ker\wt{v}$,
$\Coker\wt{v}$, and $\Im\wt{v}$ are $\wt{B}$-modules). If $N$ is a
$B$-module, $\wt{N}$ is a $\wt{B}$-module of finite type if and only if $N$
is a $B$-module of finite type \sref[0]{0.5.2.3}.

\oldpage[I]{90}
If $M$, $N$ are two $B$-modules, the $\wt{B}$-module
$\wt{M}\otimes_{\wt{B}}\wt{N}$ canonically identifies with
$(M\otimes_B N)^\sim$; similarly $\shHom_{\wt{B}}(\wt{M},\wt{N})$
canonically identifies with $(\Hom_B(M,N))^\sim$ when $M$ admits a finite presentation; the
proofs are similar to those in Corollary \sref{1.1.3.12}.

If $\fk{J}$ is an ideal of $B$, $N$ a $B$-module, then we have
$(\fk{J}N)^\sim=\wt{\fk{J}}\cdot\wt{N}$.

Finally, if $B$ is an $A$-algebra \emph{graded} by the $A$-submodules $B_n$ ($n\in\bb{Z}$),
the $\wt{A}$-algebra $\wt{B}$, the direct sum of the $\wt{A}$-modules
$\wt{B_n}$ \sref{1.1.3.9}, is graded by these $\wt{A}$-submodules, the axiom
of graded algebras giving that the image of the homomorphism $B_m\otimes B_n\to B$ is
contained in $B_{m+n}$. Similarly, if $M$ is a $B$-module graded by the submodules $M_n$,
then $\wt{M}$ is a $\wt{B}$-module graded by the $\wt{M_n}$.
\end{env}

\begin{env}[1.3.14]
\label{1.1.3.14}
If $B$ is an $A$-algebra, $M$ a submodule of $B$, then the $\wt{A}$-subalgebra of
$\wt{B}$ generated by $\wt{M}$ \sref[0]{0.4.1.3} is the
$\wt{A}$-subalgebra $\wt{C}$, where we denote by $C$ the subalgebra of $B$
generated by $M$. Indeed, $C$ is the direct sum of the submodules of $B$ which are the images
of the homomorphisms $\bigotimes^n M\to B$ ($n\geqslant 0$), and it suffices to apply
\sref{1.1.3.9} and \sref{1.1.3.12}.
\end{env}

\subsection{Quasi-coherent sheaves over a prime spectrum}
\label{subsection-qcoh-sheaves-over-spec}

\begin{thm}[1.4.1]
\label{1.1.4.1}
Let $X$ be the prime spectrum of a ring $A$, $V$ a quasi-compact open subset of $X$, and
$\sh{F}$ an $(\OO_X|V)$-module. The four following conditions are equivalent:
\begin{enumerate}[label=\emph{(\alph*)}]
  \item There exists an $A$-module $M$ such that $\sh{F}$ is isomorphic to $\wt{M}|V$.
  \item There exists a finite open cover $(V_i)$ of $V$ by sets of the form $D(f_i)$
    ($f_i\in A$) contained in $V$, such that, for each $i$, $\sh{F}|V_i$ is isomorphic to
    a sheaf of the form $\wt{M_i}$, where $M_i$ is an $A_{f_i}$-module.
  \item The sheaf $\sh{F}$ is quasi-coherent \sref[0]{0.5.1.3}.
  \item The two following properties are satisfied:
    \begin{enumerate}[label=\emph{(d\arabic*)}]
      \item For each $f\in A$ such that $D(f)\subset V$ and for each section
        $s\in\Gamma(D(f),\sh{F})$, there exists an integer $n\geqslant 0$ such that
        $f^n s$ extends to a section of $\sh{F}$ over $V$.
      \item For each $f\in A$ such that $D(f)\subset V$ and for each section
        $t\in\Gamma(V,\sh{F})$ such that the restriction of $t$ to $D(f)$ is $0$,
        there exists an integer $n\geqslant 0$ such that $f^n t=0$.
    \end{enumerate}
\end{enumerate}
\end{thm}
(In the statement of the conditions (d1) and (d2), we have tacitly identified $A$ and
$\Gamma(\wt{A})$ according to Theorem \sref{1.1.3.7}).

\begin{proof}
\label{proof-1.1.4.1}
The fact that (a) implies (b) is an immediate consequence of Proposition \sref{1.1.3.6} and the fact
that the $D(f_i)$ form a basis for the topology of $X$ \sref{1.1.1.10}. As each
$A$-module is isomorphic to the cokernel of a homomorphism of the form $A^{(I)}\to A^{(J)}$,
\sref{1.1.3.6} proves that each sheaf associated to an $A$-module is quasi-coherent; so
(b) implies (c). Conversely, if $\sh{F}$ is quasi-coherent, each $x\in V$ has a neighborhood
of the form $D(f)\subset V$ such that $\sh{F}|D(f)$ is isomorphic to the cokernel of a
homomorphism $\wt{A_f}^{(I)}\to\wt{A_f}^{(J)}$, so a sheaf $\wt{N}$
associated to the module $N$, the cokernel of the corresponding homomorphism
$A_f^{(I)}\to A_f^{(J)}$ (Corollaries \sref{1.1.3.8} and \sref{1.1.3.9}); as $V$ is quasi-compact,
it is clear that (c) implies (b).

\oldpage[I]{91}
To prove that (b) implies (d1) and (d2), we first assume that $V=D(g)$ for a $g\in A$, and
that $\sh{F}$ is isomorphic to the sheaf $\wt{N}$ associated to an $A_g$-module $N$;
by replacing $X$ with $V$ and $A$ with $A_g$ \sref{1.1.3.6}, we can reduce to the case
where $g=1$. Then $\Gamma(D(f),\wt{N})$ and $N_f$ are canonically identified
(Proposition \sref{1.1.3.6} and Theorem \sref{1.1.3.7}), so a section $s\in\Gamma(D(f),\wt{N})$
identifies with an element of the form $z/f^n$, where $z\in N$; the section $f^n s$ identifies
with the element $z/1$ of $N_f$ and as a result the restriction to $D(f)$ of a section of
$\wt{N}$ over $X$ identifies with the element $z\in N$; hence (d1) in this case.
Similarly, $t\in\Gamma(X,\wt{N})$ is identified with an element $z'\in N$, the
restriction of $t$ to $D(f)$ is identified with the image $z'/1$ of $z'$ in $N_f$, and we say
that this image is zero means that there exists an $n\geqslant 0$ such that $f^n z'=0$ in
$N$, or, equivalently, $f^n t=0$.

To finish the proof that (b) implies (d1) and (d2), it suffices to establish the following
lemma:
\begin{lem}[1.4.1.1]
\label{1.1.4.1.1}
Suppose that $V$ is the finite union of sets of the form $D(g_i)$, and that each of the
sheaves $\sh{F}|D(g_i)$, $\sh{F}|(D(g_i)\cap D(g_j))=\sh{F}|D(g_i g_j)$ satisfy \emph{(d1)}
and \emph{(d2)}; then $\sh{F}$ has the following two properties:
\begin{enumerate}[label=\emph{(d$'$\arabic*)}]
  \item For each $f\in A$ and for each section $s\in\Gamma(D(f)\cap V,\sh{F})$, there exists
    an integer $n\geqslant 0$ such that $f^n s$ extends to a section of $\sh{F}$ over $V$.
  \item For each $f\in A$ and for each section $t\in\Gamma(V,\sh{F})$ such that the
    restriction of $t$ to $D(f)\cap V$ is $0$, there exists an integer $n\geqslant 0$ such that $f^n t=0$.
\end{enumerate}
\end{lem}

We first prove (d$'$2): as $D(f)\cap D(g_i)=D(fg_i)$, there exists for each $i$ an integer
$n_i$ such that the restriction of $(fg_i)^{n_i}t$ to $D(g_i)$ is zero: as the image of $g_i$
in $A_{g_i}$ is invertible, the restriction of $f^{n_i}t$ to $D(g_i)$ is also zero; taking
for $n$ the largest of the $n_i$, we have proved (d$'$2).

To show (d$'$1), we apply (d1) to the sheaf $\sh{F}|D(g_i)$: there exists an integer
$n_i\geqslant 0$ and a section $s_i'$ of $\sh{F}$ over $D(g_i)$ extending the restriction of
$(fg_i)^{n_i}s$ to $D(fg_i)$; as the image of $g_i$ in $A_{g_i}$ is invertible, there is a
section $s_i$ of $\sh{F}$ over $D(g_i)$ such that $s_i'=g_i^{n_i}s_i$, and $s_i$ extends the
restriction of $f^{n_i}s$ to $D(fg_i)$; in addition we can suppose that all the $n_i$ are
equal to the same integer $n$. By construction, the restriction of $s_i-s_j$ to
$D(f)\cap D(g_i)\cap D(g_j)=D(fg_i g_j)$ is zero; according to (d2) applied to the sheaf
$\sh{F}|D(g_i g_j)$, there exists an integer $m_{ij}\geqslant 0$ such that the restriction to
$D(g_i g_j)$ of $(fg_i g_j)^{m_{ij}}(s_i-s_j)$ is zero; as the image of $g_i g_j$ in
$A_{g_i g_j}$ is invertible, the restriction of $f^{m_{ij}}(s_i-s_j)$ to $D(g_i g_j)$ is
zero. We can then assume that all the $m_{ij}$ are equal to the same integer $m$, and so
there exists a section $s'\in\Gamma(V,\sh{F})$ extending the $f^m s_i$; as a result, this
section extends $f^{n+m}s$, hence we have proved (d$'$1).

It remains to prove that (d1) and (d2) imply (a). We show first that (d1) and (d2) imply that
these conditions are satisfied for each sheaf $\sh{F}|D(g)$, where $g\in A$ is such that
$D(g)\subset V$. It is evident for (d1); on the other hand, if $t\in\Gamma(D(g),\sh{F})$ is
such that its restriction to $D(f)\subset D(g)$ is zero, there exists by (d1) an integer
$m\geqslant 0$ such that $g^m t$
\oldpage[I]{92}
extends to a section $s$ of $\sh{F}$ over $V$; applying (d2), we see that there exists an
integer $n\geqslant 0$ such that $f^n g^m t=0$, and as the image of $g$ in $A_g$ is
invertible, $f^n t=0$.

That being so, as $V$ is quasi-compact, Lemma \sref{1.1.4.1.1} proves that
the conditions (d$'$1) and (d$'$2) are satisfied. Consider then the $A$-module
$M=\Gamma(V,\sh{F})$, and define a homomorphism of $\wt{A}$-modules
$u:\wt{M}\to j_*(\sh{F})$, where $j$ is the canonical injection $V\to X$. As the
$D(f)$ form a basis for the topology of $X$, it suffices, for each $f\in A$, to define a
homomorphism $u_f:M_f\to\Gamma(D(f),j_*(\sh{F}))=\Gamma(D(f)\cap V,\sh{F})$, with the usual
compatibility conditions \sref[0]{0.3.2.5}. As the canonical image of $f$ in $A_f$ is
invertible, the restriction homomorphism $M=\Gamma(V,\sh{F})\to\Gamma(D(f)\cap V,\sh{F})$
factorizes as $M\to M_f\xrightarrow{u_f}\Gamma(D(f)\cap V,\sh{F})$ \sref[0]{0.1.2.4}, and the
verification of these compatibility conditions for $D(g)\subset D(f)$ is immediate. This being
so, we show that the condition (d$'$1) (resp. (d$'$2)) implies that each of the $u_f$ are
surjective (resp. injective), which proves that $u$ is \emph{bijective}, and as a result that
$\sh{F}$ is the restriction to $V$ of an $\wt{A}$-module isomorphic to
$\wt{M}$. If $s\in\Gamma(D(f)\cap V,\sh{F})$, there exists according to (d$'$1) an
integer $n\geqslant 0$ such that $f^n s$ extends to a section $z\in M$; we then have
$u_f(z/f^n)=s$, so $u_f$ is surjective. Similarly, if $z\in M$ is such that $u_f(z/1)=0$,
this means that the restriction to $D(f)\cap V$ of the section $z$ is zero; according to
(d$'$2), there exists an integer $n\geqslant 0$ such that $f^n z=0$, hence $z/1=0$ in $M_f$,
and therefore $u_f$ is injective.
\begin{flushright}
Q.E.D.
\end{flushright}
\end{proof}

\begin{cor}[1.4.2]
\label{1.1.4.2}
Each quasi-coherent sheaf over a quasi-compact open subset of $X$ is induced by a
quasi-coherent sheaf on $X$.
\end{cor}

\begin{cor}[1.4.3]
\label{1.1.4.3}
Each quasi-coherent $\OO_X$-algebra over $X=\Spec(A)$ is isomorphic to an $\OO_X$-algebra of
the form $\wt{B}$, where $B$ is an algebra over $A$; each quasi-coherent
$\wt{B}$-module is isomorphic to a $\wt{B}$-module of the form $\wt{N}$,
where $N$ is a $B$-module.
\end{cor}

\begin{proof}
\label{proof-1.1.4.3}
Indeed, a quasi-coherent $\OO_X$-algebra is a quasi-coherent $\OO_X$-module, therefore of the
form $\wt{B}$, where $B$ is an $A$-module; the fact that $B$ is an $A$-algebra
follows from the characterization of the structure of an $\OO_X$-algebra using the
homomorphism $\wt{B}\otimes_{\wt{A}}\wt{B}\to\wt{B}$ of
$\wt{A}$-modules, as well as Corollary \sref{1.1.3.12}. If $\sh{G}$ is a quasi-coherent
$\wt{B}$-module, it suffices to show, in a similar way,
that it is also a quasi-coherent $\wt{A}$-module to conclude the proof; as the
question is local, we can, by restricting to an open subset of $X$ of the form $D(f)$, assume
that $\sh{G}$ is the cokernel of a homomorphism $\wt{B}^{(I)}\to\wt{B}^{(J)}$
of $\wt{B}$-modules (and \emph{a fortiori} of $\wt{A}$-modules); the
proposition then follows from Corollaries \sref{1.1.3.8} and \sref{1.1.3.9}.
\end{proof}

\subsection{Coherent sheaves over a prime spectrum}
\label{subsection-coh-over-spec}

\begin{thm}[1.5.1]
\label{1.1.5.1}
Let $A$ be a \emph{Noetherian} ring, $X=\Spec(A)$ its prime spectrum, $V$ an open subset of
$X$, and $\sh{F}$ an $(\OO_X|V)$-module. The following conditions are equivalent:
\begin{enumerate}[label=\emph{(\alph*)}]
  \item $\sh{F}$ is coherent.
  \item $\sh{F}$ is of finite type and quasi-coherent.
  \item There exists an $A$-module $M$ of finite type such that $\sh{F}$ is isomorphic to the sheaf $\wt{M}|V$.
\end{enumerate}
\end{thm}

\begin{proof}
\label{proof-1.1.5.1}
\oldpage[I]{93}
(a) trivially implies (b). To see that (b) implies (c), since $V$ is quasi-compact
\sref[0]{0.2.2.3}, we have previously seen that $\sh{F}$ is isomorphic to a
sheaf $\wt{N}|V$, where $N$ is an $A$-module \sref{1.1.4.1}. We have
$N=\varinjlim M_\lambda$, where $M_\lambda$ vary over the set of $A$-submodules of $N$ of finite type, hence
\sref{1.1.3.9} $\sh{F}=\wt{N}|V=\varinjlim\wt{M_\lambda}|V$; but as $\sh{F}$
is of finite type, and $V$ is quasi-compact, there exists an index $\lambda$ such that
$\sh{F}=\wt{M_\lambda}|V$ \sref[0]{0.5.2.3}.

Finally, we show that (c) implies (a). It is clear that $\sh{F}$ is then of finite type
(\sref{1.1.3.6} and \sref{1.1.3.9}); in addition, the question being local, we can
reduce to the case where $V=D(f)$, $f\in A$. As $A_f$ is Noetherian, we see finally that it
reduces to proving that the kernel of a homomorphism $\wt{A^n}\to\wt{M}$, where
$M$ is an $A$-module, is of finite type. Such a homomorphism is of the form $\wt{u}$,
where $u$ is a homomorphism $A^n\to M$ \sref{1.1.3.8}, and if $P=\Ker u$, we have
$\wt{P}=\Ker\wt{u}$ \sref{1.1.3.9}. As $A$ is Noetherian, $P$ is of finite
type, which finishes the proof.
\end{proof}

\begin{cor}[1.5.2]
\label{1.1.5.2}
Under the hypotheses of \sref{1.1.5.1}, the sheaf $\OO_X$ is a quasi-coherent sheaf of
rings.
\end{cor}

\begin{cor}[1.5.3]
\label{1.1.5.3}
Under the hypotheses of \sref{1.1.5.1}, each coherent sheaf over an open subset of $X$ is
induced by a coherent sheaf on $X$.
\end{cor}

\begin{cor}[1.5.4]
\label{1.1.5.4}
Under the hypotheses of \sref{1.1.5.1}, each quasi-coherent $\OO_X$-module $\sh{F}$ is
the inductive limit of the coherent $\OO_X$-submodules of $\sh{F}$.
\end{cor}

\begin{proof}
\label{proof-1.1.5.4}
Indeed, $\sh{F}=\wt{M}$ where $M$ is an $A$-module, and $M$ is the inductive limit of
its submodules of finite type; we conclude the proof by \sref{1.1.3.9} and
\sref{1.1.5.1}.
\end{proof}

\subsection{Functorial properties of quasi-coherent sheaves over a prime spectrum}
\label{subsection-func-qcoh-over-spec}

\begin{env}[1.6.1]
\label{1.1.6.1}
Let $A$, $A'$ be two rings,
\[
  \vphi:A'\to A
\]
a homomorphism,
\[
  {}^a\vphi:X=\Spec(A)\longrightarrow X'=\Spec(A')
\]
the continuous map associated to $\vphi$ \sref{1.1.2.1}. We will define a \emph{canonical
homomorphism}
\[
  \wt{\vphi}:\OO_{X'}\longrightarrow{}^a\vphi_*(\OO_X)
\]
of sheaves of rings. For each $f'\in A'$, we put $f=\vphi(f')$; we have
${}^a\vphi^{-1}(D(f'))=D(f)$ (1.2.2.2). The rings $\Gamma(D(f'),\wt{A'})$ and
$\Gamma(D(f),\wt{A})$ identify respectively with $A_{f'}'$ and $A_f$
(\sref{1.1.3.6} and \sref{1.1.3.7}). The homomorphism $\vphi$ canonically defines a
homomorphism $\vphi_{f'}:A_{f'}'\to A_f$ \sref[0]{0.1.5.1}, in other words, we have a
homomorphism of rings
\[
  \Gamma(D(f),\wt{A'})\longrightarrow\Gamma({}^a\vphi^{-1}(D(f')),\wt{A})
  =\Gamma(D(f'),{}^a\vphi_*(\wt{A}))
\]
\oldpage[I]{94}
In addition, these homomorphism satisfy the usual compatibility conditions: for
$D(f')\supset D(g')$, the diagram
\[
  \xymatrix{
    \Gamma(D(f'),\wt{A'})\ar[r]\ar[d] &
    \Gamma(D(f'),{}^a\vphi_*(\wt{A}))\ar[d]\\
    \Gamma(D(g'),\wt{A'})\ar[r] &
    \Gamma(D(g'),{}^a\vphi_*(\wt{A})
  }
\]
is commutative \sref[0]{0.1.5.1}; we have thus defined a homomorphism of $\OO_{X'}$-algebras,
as the $D(f')$ form a basis for the topology og $X'$ \sref[0]{0.3.2.3}. The pair
$\Phi=({}^a\vphi,\wt{\vphi})$ is thus a \emph{morphism} of ringed spaces
\[
  \Phi:(X,\OO_X)\longrightarrow(X',\OO_{X'}),
\]
\sref[0]{0.4.1.1}.

We note further that, if we put $x'={}^a\vphi(x)$, then the homomorphism
$\wt{\vphi}_x^\sharp$ \sref[0]{0.3.7.1} is none other than the homomorphism
\[
  \vphi_x:A_{x'}'\longrightarrow A_x
\]
canonically induced by $\vphi:A'\to A$ \sref[0]{0.1.5.1}. Indeed, each $z'\in A_{x'}'$
can be written as $g'/f'$, where $f'$, $g'$ are in $A'$ and $f'\not\in\fk{j}_{x'}$;
$D(f')$ is then a neighborhood of $x'$ in $X'$, and the homomorphism
$\Gamma(D(f'),\wt{A'})\to\Gamma({}^a\vphi^{-1}(D(f')),\wt{A})$ induced by
$\wt{\vphi}$ is none other than $\vphi_{f'}$; by considering the section
$s'\in\Gamma(D(f'),\wt{A'})$ corresponding to $g'/f'\in A_{f'}'$, we obtain
$\wt{\vphi}_x^\sharp(z')=\vphi(g')/\vphi(f')$ in $A_x$.
\end{env}

\begin{exm}[1.6.2]
\label{1.1.6.2}
Let $S$ be a multiplicative subset of $A$, $\vphi$ the canonical homomorphism $A\to S^{-1}A$;
we have already seen \sref{1.1.2.6} that ${}^a\vphi$ is a \emph{homeomorphism} from
$Y=\Spec(S^{-1}A)$ to the subspace of $X=\Spec(A)$ consisting of the $x$ such that
$\fk{j}_x\cap S=\emp$. In addition, for each $x$ in this subspace, thus of the form
${}^a\vphi(y)$ with $y\in Y$, the homomorphism $\wt{\vphi}_y^\sharp:\OO_x\to\OO_y$ is
\emph{bijective} \sref[0]{0.1.2.6}; in other words, $\OO_Y$ identifies with the sheaf on $Y$
induced by $\OO_X$.
\end{exm}

\begin{prop}[1.6.3]
\label{1.1.6.3}
For each $A$-module $M$, there exists a canonical functorial isomorphism from the
$\OO_{X'}$-module $(M_{[\vphi]})^\sim$ to the direct image $\Phi_*(\wt{M})$.
\end{prop}

\begin{proof}
\label{proof-1.1.6.3}
For purposes of abbreviation, we set $M'=M_{[\vphi]}$, and for each $f'\in A'$, we put
$f=\vphi(f')$. The modules of sections $\Gamma(D(f'),\wt{M'})$ and
$\Gamma(D(f),\wt{M})$ identify respectively with the modules $M_{f'}'$ and $M_f$
(over $A_{f'}'$ and $A_f$, respectively); in addition, the $A_{f'}'$-module
$(M_f)_{[\vphi_{f'}]}$ is canonically isomorphic to $M_{f'}'$ \sref[0]{0.1.5.2}. We thus have
a functorial isomorphism of $\Gamma(D(f'),\wt{A'})$-modules:
$\Gamma(D(f'),\wt{M'})
\isoto\Gamma({}^a\vphi^{-1}(D(f')),\wt{M})_{[\vphi_{f'}]}$
and these isomorphisms satisfy the usual compatibility conditions with the restrictions
\sref[0]{0.1.5.6}, thus defining the desired functorial isomorphism. We note that, in a
precise way, if $u:M_1\to M_2$ is a homomorphism of $A$-modules, it can be considered as a
homomorphism $(M_1)_{[\vphi]}\to(M_2)_{[\vphi]}$ of $A'$-modules; if we denote by
$u_{[\vphi]}$ this homomorphism, $\Phi_*(\wt{u})$ identifies with
$(u_{[\vphi]})^\sim$.
\end{proof}

This proof also shows that for each \emph{$A$-algebra $B$}, the canonical functorial
isomorphism
\oldpage[I]{95}
$(B_{[\vphi]})^\sim\isoto\Phi_*(\wt{B})$ is an isomorphism of
\emph{$\OO_{X'}$-algebras}; if $M$ is a $B$-module, the canonical functorial isomorphism
$(M_{[\vphi]})^\sim\isoto\Phi_*(\wt{M})$ is an isomorphism of
$\Phi_*(\wt{B})$-modules.

\begin{cor}[1.6.4]
\label{1.1.6.4}
The direct image functor $\Phi_*$ is exact on the category of quasi-coherent $\OO_X$-modules.
\end{cor}

\begin{proof}
\label{proof-1.1.6.4}
Indeed, it is clear that $M_{[\vphi]}$ is an exact functor in $M$ and $\wt{M'}$ is an
exact functor in $M'$ \sref{1.1.3.5}.
\end{proof}

\begin{prop}[1.6.5]
\label{1.1.6.5}
Let $N'$ be an $A'$-module, $N$ the $A$-module $N'\otimes_{A'}A_{[\vphi]}$; there exists a
canonical functorial isomorphism from the $\OO_X$-module $\Phi^*(\wt{N'})$ to
$\wt{N}$.
\end{prop}

\begin{proof}
\label{proof-1.1.6.5}
We first remark that $j:z'\mapsto z'\otimes 1$ is an $A'$-homomorphism from $N'$ to
$N_{[\vphi]}$: indeed, by definition, for $f'\in A'$, we have
$(f' z')\otimes 1=z'\otimes\vphi(f')=\vphi(f')(z'\otimes 1)$. We have \sref{1.1.3.8} a
homomorphism $\wt{j}:\wt{N'}\to(N_{[\vphi]})^\sim$ of $\OO_{X'}$-modules, and
according to \sref{1.1.6.3}, we can consider that $\wt{j}$ maps $\wt{N'}$
to $\Phi_*(\wt{N})$. There canonically corresponds to this homomorphism
$\wt{j}$ a homomorphism $h=\wt{j}^\sharp$ from $\Phi^*(\wt{N'})$ to
$\wt{N}$ \sref[0]{0.4.4.3}; we will see that for each stalk, $h_x$ is \emph{bijective}.
Put $x'={}^a\vphi(x)$ and let $f'\in A'$ be such that $x'\in D(f')$; let $f=\vphi(f')$. The
ring $\Gamma(D(f),\wt{A})$ identifies with $A_f$, the modules
$\Gamma(D(f),\wt{N})$ and $\Gamma(D(f'),\wt{N'})$ with $N_f$ and $N_{f'}'$
respectively; let $s\in\Gamma(D(f'),\wt{N'})$, identified with $n'/{f'}^p$
($n'\in N'$), $s$ its image under $\wt{j}$ in $\Gamma(D(f),\wt{N})$; $s$
identifies with $(n'\otimes 1)/f^p$. On the other hand, let $t\in\Gamma(D(f),\wt{A})$,
identified with $g/f^q$ ($g\in A$); then, by definition, we have
$h_x(s_x'\otimes t_x)=t_x\cdot s_x$ \sref[0]{0.4.4.3}. But we can canonically identify $N_f$
with $N_{f'}'\otimes_{A_{f'}'}(A_f)_{[\vphi_{f'}]}$ \sref[0]{0.1.5.4}; $s$ then corresponds
to the element $(n'/{f'}^p)\otimes 1$, and the section $y\mapsto t_y\cdot s_y$ with
$(n'/{f'}^p)\otimes(g/f^q)$. The compatibility diagram of \sref[0]{0.1.5.6} show that $h_x$
is none other than the canonical isomorphism
\[
  N_{x'}'\otimes_{A_{x'}'}(A_x)_{[\vphi_{x'}]}\isoto N_x=(N'\otimes_{A'}A_{[\vphi]})_x.
  \tag{1.6.5.1}
\]

In addition, let $v:N_1'\to N_2'$ be a homomorphism of $A'$-modules; as
$\wt{v}_{x'}=v_{x'}$ for each $x'\in X'$, it follows immediately from the above that
$\Phi^*(\wt{v})$ canonically identifies with $(v\otimes 1)^\sim$, which finishes the
proof of \sref{1.1.6.5}.
\end{proof}

If $B'$ is an $A'$-algebra, the canonical isomorphism from $\Phi^*(\wt{B'})$ to
$(B'\otimes_{A'}A_{[\vphi]})^\sim$ is an isomorphism of $\OO_X$-algebras; if in addition $N'$
is a $B'$-module, the canonical isomorphism from $\Phi^*(\wt{N'})$ to
$(N'\otimes_{A'}A_{[\vphi]})^\sim$ is an isomorphism of $\Phi^*(\wt{B'})$-modules.

\begin{cor}[1.6.6]
\label{1.1.6.6}
The sections of $\Phi^*(\wt{N'})$, the canonical images of the sections $s'$, where
$s'$ varies over the $A'$-module $\Gamma(\wt{N'})$, generate the $A$-module
$\Gamma(\Phi^*(N'))$.
\end{cor}

\begin{proof}
\label{proof-1.1.6.6}
Indeed. these images identify with the elements $z'\otimes 1$ of $N$, when we identify $N'$
and $N$ with $\Gamma(\wt{N'})$ and $\Gamma(\wt{N})$ respectively
\sref{1.1.3.7} and $z'$ varies over $N'$.
\end{proof}

\begin{env}[1.6.7]
\label{1.1.6.7}
In the proof of \sref{1.1.6.5}, we had proved in passing that the canonical map
(\textbf{0},~4.4.3.2) $\rho:\wt{N'}\to\Phi_*(\Phi^*(\wt{N'}))$ is none other
than the homomorphism $\wt{j}$,
\oldpage[I]{96}
where $j:N'\to N'\otimes_{A'}A_{[\vphi]}$ is the homomorphism $z'\mapsto z'\otimes 1$.
Similarly, the canonical map (\textbf{0},~4.4.3.3)
$\sigma:\Phi^*(\Phi_*(\wt{M}))\to\wt{M}$ is none other than $\wt{p}$,
where $p:M_{[\vphi]}\otimes_{A'}A_{[\vphi]}\to M$ is the canonical homomorphism which, sends
each tensor product $z\otimes a$ ($z\in M$, $a\in A$) to $a\cdot z$; this follows immediately
from the definitions (\sref[0]{0.3.7.1}, \sref[0]{0.4.4.3},
and \sref{1.1.3.7}).

We conclude (\sref[0]{0.4.4.3} and (\textbf{0},~3.5.4.4)) that if $v:N'\to M_{[\vphi]}$ is an
$A'$-homomorphism, we have $\wt{v}^\sharp=(v\otimes 1)^\sim$.
\end{env}

\begin{env}[1.6.8]
\label{1.1.6.8}
Let $N_1'$, $N_2'$ be two $A'$-modules, and assume $N_1'$ admits a \emph{finite
presentation}; it then follows from \sref{1.1.6.7} and \sref{1.1.3.12}, (ii) that the
canonical homomorphism \sref[0]{0.4.4.6}
\[
  \Phi^*(\shHom_{\wt{A'}}(\wt{N_1'},\wt{N_2'}))
  \longrightarrow\shHom_{\wt{A}}(\Phi^*(\wt{N_1'}),\Phi^*(\wt{N_2'}))
\]
is none other than $\wt{\gamma}$, where $\gamma$ denotes the canonical homomorphism
of $A$-modules
$\Hom_{A'}(N_1',N_2')\otimes_{A'}A\to\Hom_A(N_1'\otimes_{A'}A,N_2'\otimes_{A'}A)$.
\end{env}

\begin{env}[1.6.9]
\label{1.1.6.9}
Let $\fk{J}'$ be an ideal of $A'$, $M$ an $A$-module; as by definition
$\wt{\fk{J}'}\wt{M}$ is the image of the canonical homomorphism
$\Phi^*(\wt{\fk{J}'})\otimes_{\wt{A}}\wt{M}\to\wt{M}$, it
follows from Proposition \sref{1.1.6.5} and
Corollary \sref{1.1.3.12}, (i) that
$\wt{\fk{J}'}\wt{M}$ canonically identifies with $(\fk{J}' M)^\sim$;
in particular, $\Phi^*(\wt{\fk{J}'})\wt{A}$ identifies with
$(\fk{J}' A)^\sim$, and taking into account the right exactness of the functor $\Phi^*$,
the $\wt{A}$-algebra $\Phi^*((A'/\fk{J}')^\sim)$ identifies with
$(A/\fk{J}' A)^\sim$.
\end{env}

\begin{env}[1.6.10]
\label{1.1.6.10}
Let $A''$ be a third ring, $\vphi'$ a homomorphism $A''\to A'$, and put
$\vphi''=\vphi\circ\vphi'$. It follows immediately from the definitions that
${}^a\vphi''=({}^a\vphi')\circ({}^a\vphi)$, and
$\wt{\vphi''}=\wt{\vphi}\circ\wt{\vphi'}$ \sref[0]{0.1.5.7}. We conclude
that we have $\Phi''=\Phi'\circ\Phi$; in other words, $(\Spec(A),\wt{A})$ is a
\emph{functor} from the category of rings to that of ringed spaces.
\end{env}

\subsection{Characterization of morphisms of affine schemes}
\label{subsection-morphisms-affine-schemes}

\begin{defn}[1.7.1]
\label{1.1.7.1}
We say that a ringed space $(X,\OO_X)$ is an affine scheme if it is isomorphic to a ringed
space of the form $(\Spec(A),\wt{A})$, where $A$ is a ring; we then say that
$\Gamma(X,\OO_X)$, which canonically identifies with the ring $A$ \sref{1.1.3.7} is the
ring of the affine scheme $(X,\OO_X)$, and we denote it by $A(X)$ when there is no chance of
confusion.
\end{defn}

By abuse of language, when we speak of an \emph{affine scheme $\Spec(A)$}, it will always be
the ringed space $(\Spec(A),\wt{A})$.

\begin{env}[1.7.2]
\label{1.1.7.2}
Let $A$, $B$ be two rings, $(X,\OO_X)$, $(Y,\OO_Y)$ the affine schemes corresponding to
the prime spectra $X=\Spec(A)$, $Y=\Spec(B)$. We have seen \sref{1.1.6.1} that each ring
homomorphism $\vphi:B\to A$ corresponds to a morphism
$\Phi=({}^a\vphi,\wt{\vphi})=\Spec(\vphi):(X,\OO_X)\to(Y,\OO_Y)$. We note that $\vphi$
is entirely determined by $\Phi$, since we have by definition
$\vphi=\Gamma(\wt{\vphi}):\Gamma(\wt{B})
\to\Gamma({}^a\vphi_*(\wt{A})=\Gamma(\wt{A})$.
\end{env}

\begin{thm}[1.7.3]
\label{1.1.7.3}
Let $(X,\OO_X)$, $(Y,\OO_Y)$ be two affine schemes. For a morphism of ringed spaces
$(\psi,\theta):(X,\OO_X)\to(Y,\OO_Y)$ to be of the form $({}^a\vphi,\wt{\vphi})$,
where $\vphi$ is a homomorphism of rings: $A(Y)\to A(X)$, it is necessary and sufficient
that, for each $x\in X$, $\theta_x^\sharp$ is a local homomorphism: $\OO_{\psi(x)}\to\OO_x$.
\end{thm}

\begin{proof}
\label{proof-1.1.7.3}
\oldpage[I]{97}
Set $A=A(X)$, $B=A(Y)$. The condition is necessary, since we saw \sref{1.1.6.1} that
$\wt{\vphi}_x^\sharp$ is the homomorphism from $B_{{}^a\vphi(x)}$ to $A_x$ canonically
induced by $\vphi$, and by definition of ${}^a\vphi(x)=\vphi^{-1}(\fk{j}_x)$, this
homomorphism is local.

We prove that the condition is sufficient. By definition, $\theta$ is a homomorphism
$\OO_Y\to\psi_*(\OO_X)$, and we canonically obtain a ring homomorphism
\[
  \vphi=\Gamma(\theta):B=\Gamma(Y,\OO_Y)
  \longrightarrow\Gamma(Y,\psi_*(\OO_X))=\Gamma(X,\OO_X)=A.
\]

The hypotheses on $\theta_x^\sharp$ allow us to deduce from this homomorphism, by passing to
quotients, a momomorphism $\theta^x$ from the residue field $\kres(\psi(x))$ to the residue
field $\kres(x)$, such that, for each section $f\in\Gamma(Y,\OO_Y)=B$, we have
$\theta^x(f(\psi(x)))=\vphi(f)(x)$. The relation $f(\psi(x))=0$ is therefore equivalent to
$\vphi(f)(x)=0$, which means that $\fk{j}_{\psi(x)}=\fk{j}_{{}^a\vphi(x)}$, and
we now write $\psi(x)={}^a\vphi(x)$ for each $x\in X$, or $\psi={}^a\vphi$. We also know that
the diagram
\[
  \xymatrix{
    B=\Gamma(Y,\OO_Y)\ar[r]^\vphi\ar[d] &
    \Gamma(X,\OO_X)=A\ar[d]\\
    B_{\psi(x)}\ar[r]^{\theta_x^\sharp} &
    A_x
  }
\]
is commutative \sref[0]{0.3.7.2}, which means that $\theta_x^\sharp$ is equal to the
homomorphism $\vphi_x:B_{\psi(x)}\to A_x$ canonically induced by $\vphi$ \sref[0]{0.1.5.1}.
As the data of the $\theta_x^\sharp$ completely characterize $\theta^\sharp$, and as a result
$\theta$ \sref[0]{0.3.7.1}, we conclude that we have $\theta=\wt{\vphi}$, by
definition of $\wt{\vphi}$ \sref{1.1.6.1}.
\end{proof}

We say that a mormphism $(\psi,\theta)$ of ringed spaces satisfying the condition of
\sref{1.1.7.3} is a \emph{morphism of affine schemes}.

\begin{cor}[1.7.4]
\label{1.1.7.4}
If $(X,\OO_X)$, $(Y,\OO_Y)$ are affine schemes, there exists a canonical isomorphism from
the set of morphisms of affine schemes $\Hom((X,\OO_X),(Y,\OO_Y))$ to the set of
ring homomorphisms from $B$ to $A$, where $A=\Gamma(\OO_X)$ and $B=\Gamma(\OO_Y)$.
\end{cor}

Furthermore, we can say that the functors $(\Spec(A),\wt{A})$ in $A$ and
$\Gamma(X,\OO_X)$ in $(X,\OO_X)$ define an \emph{equivalence} between the category of
commutative rings and the opposite category of affine schemes (T, I, 1.2).

\begin{cor}[1.7.5]
\label{1.1.7.5}
If $\vphi:B\to A$ is surjective, then the corresponding morphism
$({}^a\vphi,\wt{\vphi})$ is a momomorphism of ringed spaces
\emph{(cf. \sref{1.4.1.7})}.
\end{cor}

\begin{proof}
\label{proof-1.1.7.5}
Indeed, we know that ${}^a\vphi$ is injective \sref{1.1.2.5}, and as $\vphi$ is
surjective, for each $x\in X$, $\vphi_x^\sharp:B_{{}^a\vphi(x)}\to A_x$, which is induced
by $\vphi$ by passing to rings of fractions, is also surjective \sref[0]{0.1.5.1}; hence
the conclusion \sref[0]{0.4.1.1}.
\end{proof}

\subsection{Morphisms from locally ringed spaces to affine schemes}
\label{subsection-morphisms-lrs-to-affine-schemes}

\oldpage[II]{217}
Due to a remark by J.~Tate, the statements given in Theorem \sref{1.1.7.3}
and Proposition \sref{1.2.2.4}
can be generalized as follows:\footnote{[Trans] The following section (I.1.8) was added in
the errata of EGA~II, hence the temporary change in page numbers, which refer to EGA~II.}

\begin{prop}[1.8.1]
\label{1.1.8.1}
Let $(S,\OO_S)$ be an affine scheme, $(X,\OO_X)$ a locally ringed space. Then there is a
canonical bijection from the set of ring homomorphisms
\oldpage[II]{218}
$\Gamma(S,\OO_S)\to\Gamma(X,\OO_X)$ to the set of morphisms of ringed spaces
$(\psi,\theta):(X,\OO_X)\to(S,\OO_S)$ such that, for each $x\in X$, $\theta_x^\sharp$ is a
local homomorphism: $\OO_{\psi(x)}\to\OO_x$.
\end{prop}

\begin{proof}
\label{proof-1.1.8.1}
We note first that if $(X,\OO_X)$, $(S,\OO_S)$ are any two ringed spaces, a morphism
$(\psi,\theta)$ from $(X,\OO_X)$ to $(S,\OO_S)$ canonically defines a ring homomorphism
$\Gamma(\theta):\Gamma(S,\OO_S)\to\Gamma(X,\OO_X)$, hence a first map
\[
  \rho:\Hom((X,\OO_X),(S,\OO_S))\longrightarrow\Hom(\Gamma(S,\OO_S),\Gamma(X,\OO_X)).
  \tag{1.8.1.1}
\]
Conversely, under the stated hypotheses, we set $A=\Gamma(S,\OO_S)$, and consider a ring
homomorphism $\vphi:A\to\Gamma(X,\OO_X)$. For each $x\in X$, it is clear that the set of the
$f\in A$ such that $\vphi(f)(x)=0$ is a \emph{prime ideal} of $A$, since
$\OO_x/\fk{m}_x=\kres(x)$ is a field; it is therefore an element of $S=\Spec(A)$, which
we denote ${}^a\vphi(x)$. In addition, for each $f\in A$, we have by definition
\sref[0]{0.5.5.2} that ${}^a\vphi(D(f))=X_f$, which proves that ${}^a\vphi$ is a
\emph{continuous map} $X\to S$. We define then a homomorphism
\[
  \wt{\vphi}:\OO_S\longrightarrow{}^a\vphi_*(\OO_X)
\]
of $\OO_S$-modules; for each $f\in A$, we have $\Gamma(D(f),\OO_S)=A_f$ \sref{1.1.3.6};
for each $s\in A$, we correspond to $s/f\in A_f$ the element
$(\vphi(s)|X_f)(\vphi(f)|X_f)^{-1}$ of $\Gamma(X_f,\OO_X)=\Gamma(D(f),{}^a\vphi(\OO_X))$, and
we check immediately (by passing from $D(f)$ to $D(fg)$) that this is a well-defined
homomorphism of $\OO_S$-modules, hence a morphism $({}^a\vphi,\wt{\vphi})$ of ringed
spaces. In addition, with the same notations, and setting $y={}^a\vphi(x)$ for purposes of
simplification, we see immediately \sref[0]{0.3.7.1} that we have
$\wt{\vphi}_x^\sharp(s_y/f_y)=(\vphi(s)_x)(\vphi(f)_x)^{-1}$; as the relation
$s_y\in\fk{m}_y$ is by definition equivalent to $\vphi(s)_x\in\fk{m}_x$, we see
that $\wt{\vphi}_x^\sharp$ is a \emph{local} homomorphism $\OO_y\to\OO_x$, and we have
so defined a second map $\sigma:\Hom(\Gamma(S,\OO_S),\Gamma(X,\OO_X))\to\fk{L}$, where
$\fk{L}$ is the set of the morphisms $(\psi,\theta):(X,\OO_X)\to(S,\OO_S)$ such that
$\theta_x^\sharp$ is local for each $x\in X$. It remains to prove that $\sigma$ and $\rho$
(restricted to $\fk{L}$) are inverses of each other; the definition of
$\wt{\vphi}$ immediately shows that $\Gamma(\wt{\vphi})=\vphi$, and as a result
$\rho\circ\sigma$ is the identity. To see that $\sigma\circ\rho$ is the identity, start with a
morphism $(\psi,\theta)\in\fk{L}$ and let $\vphi=\Gamma(\theta)$; the hypotheses on
$\theta_x^\sharp$ allows us to induce from this morphism, by passing to quotients, a
monomorphism $\theta^x:\kres(\psi(x))\to\kres(x)$ such that for each section
$f\in A=\Gamma(S,\OO_S)$, we have $\theta^x(f(\psi(x)))=\vphi(f)(x)$; the relation
$f(\vphi(x))=0$ is therefore equivalent to $\vphi(f)(x)=0$, which proves that
${}^a\vphi=\psi$. On the other hand, the definitions imply that the diagram
\[
  \xymatrix{
    A\ar[r]^\vphi\ar[d] &
    \Gamma(X,\OO_X)\ar[d]\\
    A_{\psi(x)}\ar[r]^{\theta_x^\sharp} &
    \OO_x
  }
\]
is commutative, and it is the same for the analogous diagram where $\theta_x^\sharp$ is
replaced by $\wt{\vphi}_x^\sharp$, hence $\wt{\vphi}_x^\sharp=\theta_x^\sharp$
\sref[0]{0.1.2.4}, and as a result $\wt{\vphi}=\theta$.
\end{proof}

\begin{env}[1.8.2]
\label{1.1.8.2}
When $(X,\OO_X)$ and $(Y,\OO_Y)$ are \emph{locally} ringed spaces, we will consider the
morphisms $(\psi,\theta):(X,\OO_X)\to(Y,\OO_Y)$ such that, for each $x\in X$,
$\theta_x^\sharp$ is a \emph{local} homomorphism: $\OO_{\psi(x)}\to\OO_x$. Henceforth when
we speak
\oldpage[II]{219}
of a \emph{morphism of locally ringed spaces}, it will always be a morphism such as the
above; with this definition of morphisms, it is clear that the locally ringed spaces form a
\emph{category}; for two objects $X$, $Y$ of this category, $\Hom(X,Y)$ thus denotes the set
of morphisms of locally ringed spaces from $X$ to $Y$ (the set denoted $\fk{L}$ in
\sref{1.1.8.1}); when we consider the set of \emph{morphisms of ringed spaces} from $X$
to $Y$, we will denote it by $\Hom_\text{rs}(X,Y)$ to avoid any confusion. The map (1.8.1.1)
is then written as
\[
  \rho:\Hom_\text{rs}(X,Y)\longrightarrow\Hom(\Gamma(Y,\OO_Y),\Gamma(X,\OO_X))
  \tag{1.8.2.1}
\]
and its restriction
\[
  \rho':\Hom(X,Y)\longrightarrow\Hom(\Gamma(Y,\OO_Y),\Gamma(X,\OO_X))
  \tag{1.8.2.2}
\]
is a \emph{functorial} map in $X$ and $Y$ on the category of locally ringed spaces.
\end{env}

\begin{cor}[1.8.3]
\label{1.1.8.3}
Let $(Y,\OO_Y)$ be a locally ringed space. For $Y$ to be an affine scheme, it is necessary
and sufficient that for each locally ringed space $(X,\OO_X)$, the map \emph{(1.8.2.2)} is
bijective.
\end{cor}

\begin{proof}
\label{proof-1.1.8.3}
Proposition \sref{1.1.8.1} shows that the condition is necessary. Conversely, if we
suppose that the condition is satisfied and if we put $A=\Gamma(Y,\OO_Y)$, it follows from
the hypotheses and from \sref{1.1.8.1} that the functors $X\mapsto\Hom(X,Y)$ and
$X\mapsto\Hom(X,\Spec(A))$, from the category of locally ringed spaces to that of sets, are
\emph{isomorphic}. We know that this implies the existence of a canonical isomorphism
$X\to\Spec(A)$ (cf. \textbf{0},~8).
\end{proof}

\begin{env}[1.8.4]
\label{1.1.8.4}
Let $S=\Spec(A)$ be an affine scheme; denote by $(S',A')$ the ringed space whose underlying
space is \emph{a point} and the structure sheaf $A'$ is the (necessarily simple)
sheaf on $S'$ defined by the ring $A$. Let $\pi:S\to S'$ be the unique map from $S$ to $S'$;
on the other hand, we note that for each open subset $U$ of $S$, we have a canonical map
$\Gamma(S',A')=\Gamma(S,\OO_S)\to\Gamma(U,\OO_S)$ which thus defines a \emph{$\pi$-morphism}
$\iota:A'\to\OO_S$ of sheaves of rings. We have thus canonically defined a \emph{morphism of
ringed spaces $i=(\pi,\iota):(S,\OO_S)\to(S',A')$}. For each $A$-module $M$, we denote by
$M'$ the simple sheaf on $S'$ defined by $M$, which is evidently an $A'$-module. It is clear
that we have $i_*(\wt{M})=M'$ \sref{1.1.3.7}.
\end{env}

\begin{lem}[1.8.5]
\label{1.1.8.5}
With the notation of \sref{1.1.8.4}, for each $A$-module $M$, the canonical functorial
$\OO_S$-homomorphism \emph{(\textbf{0}, 4.4.3.3)}
\[
  i^*(i_*(\wt{M}))\longrightarrow\wt{M}
  \tag{1.8.5.1}
\]
is an isomorphism.
\end{lem}

\begin{proof}
\label{proof-1.1.8.5}
Indeed, the two parts of (1.8.5.1) are right exact (the functor
$M\mapsto i_*(\wt{M})$ being evidently exact) and commute with direct sums; by
considering $M$ as the cokernel of a homomorphism $A^{(I)}\to A^{(J)}$, we reduce to proving
the lemma for the case where $M=A$, and it is evident in this case.
\end{proof}

\begin{cor}[1.8.6]
\label{1.1.8.6}
Let $(X,\OO_X)$ be a ringed space, $u:X\to S$ a morphism of ringed spaces.
\oldpage[II]{220}
For each $A$-module $M$, we have (with the notation of \sref{1.1.8.4}) a canonical
functorial isomorphism of $\OO_X$-modules
\[
  u^*(\wt{M})\isoto u^*(i^*(M')).
  \tag{1.8.6.1}
\]
\end{cor}

\begin{cor}[1.8.7]
\label{1.1.8.7}
Under the hypotheses of \sref{1.1.8.6}, we have, for each $A$-module $M$ and each
$\OO_X$-module $\sh{F}$, a canonical functorial isomorphism in $M$ and $\sh{F}$
\[
  \Hom_{\OO_S}(\wt{M},u_*(\sh{F}))\isoto\Hom_A(M,\Gamma(X,\sh{F})).
  \tag{1.8.7.1}
\]
\end{cor}

\begin{proof}
\label{proof-1.1.8.7}
We have, according to \sref[0]{0.4.4.3} and Lemma \sref{1.1.8.5}, a canonical
isomorphism of bifunctors
\[
  \Hom_{\OO_S}(\wt{M},u_*(\sh{F}))\isoto\Hom_{A'}(M',i_*(u_*(\sh{F})))
\]
and it is clear that the right hand side is none other than $\Hom_A(M,\Gamma(X,\sh{F}))$. We
note that the canonical homomorphism (1.8.7.1) sends each $\OO_S$-homomorphism
$h:\wt{M}\to u_*(\sh{F})$ (in other words, each $u$-morphism $\wt{M}\to\sh{F}$)
to the $A$-homomorphism $\Gamma(h):M\to\Gamma(S,u_*(\sh{F}))=\Gamma(X,\sh{F})$.
\end{proof}

\begin{env}[1.8.8]
\label{1.1.8.8}
With the notation of \sref{1.1.8.4}, it is clear \sref[0]{0.4.1.1} that each morphism
of ringed spaces $(\psi,\theta):X\to S'$ is equivalent to the data of a ring homomorphism
$A\to\Gamma(X,\OO_X)$. We can thus interpret Proposition \sref{1.1.8.1} as defining a canonical
bijection $\Hom(X,S)\isoto\Hom(X,S')$ (where we understand that the right hand side are
morphisms of ringed spaces, since in general $A$ is not a local ring). More generally, if
$X$, $Y$ are two locally ringed spaces and if $(Y',A')$ is the ringed space whose underlying
space is a point and whose sheaf of rings $A'$ is the simple sheaf defined by the
ring $\Gamma(Y,\OO_Y)$, we can interpret (1.8.2.1) as a map
\[
  \rho:\Hom_\text{rs}(X,Y)\longrightarrow\Hom(X,Y').
  \tag{1.8.8.1}
\]
The result of Corollary \sref{1.1.8.3} is interpreted by saying that affine schemes are
characterized among locally ringed spaces as those for which the restriction o $\rho$ to
$\Hom(X,Y)$:
\[
  \rho':\Hom(X,Y)\longrightarrow\Hom(X,Y')
  \tag{1.8.8.2}
\]
is \emph{bijective} for \emph{each} locally ringed space $X$. In the following chapter, we
generalize this definition, which allows us to associate to \emph{any} ringed space $Z$ (and
not only to a ringed space whose underlying space is a point) a locally ringed
space which we will call $\Spec(Z)$; this will be the starting point for a ``relative''
theory of preschemes over any ringed space, extending the results of Chapter~I.
\end{env}

\begin{env}[1.8.9]
\label{1.1.8.9}
We can consider the pairs $(X,\sh{F})$ consisting of a locally ringed space $X$ and an
$\OO_X$-module $\sh{F}$ as forming a category, a \emph{morphism} of this category being a
pair $(u,h)$ consisting of a morphism of locally ringed spaces
\oldpage[II]{221}
$u:X\to Y$ and a $u$-morphism $h:\sh{G}\to\sh{F}$ of modules; these morphisms (for
$(X,\sh{F})$ and $(Y,\sh{G})$ fixed) form a set which we denote by
$\Hom((X,\sh{F}),(Y,\sh{G}))$; the map $(u,h)\mapsto(\rho'(u),\Gamma(h))$ is a canonical
map
\[
  \Hom((X,\sh{F}),(Y,\sh{G}))
  \longrightarrow\Hom((\Gamma(Y,\OO_Y),\Gamma(Y,\sh{G})),(\Gamma(X,\OO_X),\Gamma(X,\sh{F})))
  \tag{1.8.9.1}
\]
\emph{functorial} in $(X,\sh{F})$ and $(Y,\sh{G})$, the right hand side being the set of
di-homomorphisms corresponding to the rings and modules considered \sref[0]{0.1.0.2}.
\end{env}

\begin{cor}[1.8.10]
\label{1.1.8.10}
Let $Y$ be a locally ringed space, $\sh{G}$ an $\OO_Y$-module. For $Y$ to be an affine scheme
and $\sh{G}$ to be a quasi-coherent $\OO_Y$-module, it is necessary and sufficient that for
each pair $(X,\sh{F})$ consisting of a locally ringed space $X$ and an $\OO_X$-module
$\sh{F}$, the canonical map \emph{(1.8.9.1)} is bijective.
\end{cor}

We leave the reader to give the proof, which is modeled on that of \sref{1.1.8.3}, and
using \sref{1.1.8.1} and \sref{1.1.8.7}.

\begin{rmk}[1.8.11]
\label{1.1.8.11}
The statements \sref{1.1.7.3}, \sref{1.1.7.4}, and \sref{1.2.2.4} are particular
cases of \sref{1.1.8.1}, as well as the definition in \sref{1.1.6.1}; similarly,
\sref{1.2.2.5} follows from \sref{1.1.8.7}. Corollary \sref{1.1.8.7} also implies
\sref{1.1.6.3} (and as a result \sref{1.1.6.4}) as a particular case, since if $X$ is
an affine scheme and $\Gamma(X,\sh{F})=N$, the functors
$M\mapsto\Hom_{\OO_S}(\wt{M},u_*(\wt{N}))$ and
$M\mapsto\Hom_{\OO_S}(\wt{M},(N_{[\vphi]})^\sim)$ (where $\vphi:A\to\Gamma(X,\OO_X)$
corresponds to $u$) are isomorphic by Corollaries \sref{1.1.8.7} and \sref{1.1.3.8}. Finally,
\sref{1.1.6.5} (and as a result \sref{1.1.6.6}) follow from \sref{1.1.8.6} and the
fact that for each $f\in A$, the $A_f$-modules $N'\otimes_{A'}A_f$ and $(N'\otimes_{A'}A)_f$
(notations of \sref{1.1.6.5}) are canonically isomorphic.
\end{rmk}


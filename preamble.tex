%\ifplastex
%
%\usepackage{verbatim}
%\usepackage{amsmath}
%%\usepackage{amsthm}
%%\usepackage{amssymb}
%\usepackage[all]{xy}
%\xyoption{2cell}
%\UseAllTwocells
%\usepackage[T1]{fontenc}
%\usepackage{hyperref}
%
%\else
\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}
\usepackage[left=1in,right=1in,top=1in,bottom=1in]{geometry}
\usepackage[all]{xy}
\usepackage{color}
\usepackage{soul}
\usepackage[colorlinks=true,hyperindex,citecolor=blue,linkcolor=magenta]{hyperref}
\usepackage{mathtools}
\usepackage[charter,
            greekfamily=didot,
            uppercase=upright,
            greeklowercase=upright]{mathdesign}
%\fi

% radical & nilradical
\def\rad{\mathfrak{r}}
\def\nilrad{\mathfrak{R}}

% empty set
\def\emp{\varnothing}

% font family switches \phi and \varphi, change if needed
\def\vphi{\phi}

% cohomology
\def\HH{\mathrm{H}}

% dual
\def\dual#1{{#1}^\vee}

% for easy changes to style
\def\sh{\mathscr}
\def\bb{\mathbf}
\def\cat{\mathsf}

% residue field
\def\k{\bb{k}}

% category
\def\K{\cat{K}}

% sheaves
\def\OO{\sh{O}}
\def\F{\sh{F}}
\def\G{\sh{G}}

% operators
%\newcommand*{\sheafHom}{\mathscr{H}\text{\normalfont\kern -3pt {\calligra\large om}}\,}
\def\shHom{\sh{H}\textit{om}}
\def\Hom{{\mathop{\mathrm{Hom}}\nolimits}}
\def\Supp{{\mathop{\mathrm{Supp}}\nolimits}}
\def\img{{\mathop{\mathrm{im}}\nolimits}}
\def\Spec{{\mathop{\mathrm{Spec}}\nolimits}}

% if unsure of a translation
%\ifplastex
%  \def\unsure#1{\underline{#1}}
%  \def\completelyunsure{\unsure{[...]}}
%\else
  \newcommand{\unsure}[2][]{\hl{#2}\marginpar{#1}}
  \newcommand{\completelyunsure}{\unsure{[\ldots]}}
%\fi

% use to mark where original page starts
%\ifplastex
%  \newcommand{\oldpage}[1]{\ignorespaces}
%\else
  \newcommand{\oldpage}[1]{\marginpar{\textbf{#1}}\ignorespaces}
%\fi

%\ifplastex
%\def\asttri{\begin{center}***\end{center}}
%\else
\allowdisplaybreaks[1]
\binoppenalty=9999
\relpenalty=9999

\newcommand{\asttri}{%
    \begin{center}
        \begin{equation*}
            \arraycolsep=1pt
            \def\arraystretch{0.7}
            \begin{array}{rcl}
                &*&\\
                *&&*
            \end{array}
        \end{equation*}
    \end{center}\vspace{1.3em}}
%\fi

% special ref
\newcommand{\sref}[2]{\hyperref[#1-\arabic{part}.#2]{\normalfont{(#2)}}}

% env ref
\newcommand{\eref}[1]{\sref{env}{#1}}

% ref prelim
\newcommand{\pref}[2]{\hyperref[#1-0.#2]{\normalfont{(\textbf{0}, #2)}}}

%% ref out of chapter
%\newcommand{\cref}[4]{\hyperref[#1-#2.#3]{\normalfont{(\textbf{#3}, #4)}}}

%
% should make this one environment instead of two?
%

% currently this works as \begin{env}[optional rmk/def]{x.y.z}
\makeatletter
\newenvironment{env}[2][\@nil]{%
    \def\tmp{#1}%
    \ifx\tmp\@nnil
        \par\medskip\noindent\indent\textbf{(#2)}\rmfamily
    \else
        \par\medskip\noindent\indent\textit{#1}~\textbf{(#2)}.\,---\rmfamily
    \fi}
\makeatother

% use this for definitions, propositions, corollaries, etc.
\makeatletter
\newenvironment{envs}[2][\@nil]{
  \par\medskip\noindent\indent\textit{#1}~\textbf{(#2)}.\,---\itshape
}
\makeatother


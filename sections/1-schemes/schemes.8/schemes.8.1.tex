
For every local ring $A$, we denote by $\mathfrak{m}(A)$ the maximal ideal of
$A$.

\begin{env}[Lemma]{8.1.1}
Let $A$ and $B$ be two local rings such that $A\subset B$;
then the following conditions are equivalent: (i)
$\mathfrak{m}(B)\cap A=\mathfrak{m}(A)$; (ii)
$\mathfrak{m}(A)\subset\mathfrak{m}(B)$; (iii) $1$ is not an element of
the ideal of $B$ generated by $\mathfrak{m}(A)$.
\end{env}

It's evident that (i) implies (ii), and (ii) implies (iii); lastly, if (iii) is
true, then $\mathfrak{m}(B)\cap A$ contains $\mathfrak{m}(A)$ and doesn't
contain $1$, and is thus equal to $\mathfrak{m}(A)$.

When the equivalent conditions of \eref{8.1.1} are satisfied, we say that $B$
\emph{dominates} $A$; this is equivalent to saying that the injection $A\to B$
is a \emph{local} homomorphism. It is clear that, in the set of local subrings
of a ring $R$, the relation given by domination is an \unsure{order}.

\begin{env}{8.1.2}
Now consider a \emph{field} $R$. For all subrings $A$ of
$R$, we denote by $L(A)$ the set of local rings $A_\mathfrak{p}$, where
$\mathfrak{p}$ runs over the prime spectrum of $A$; they are identified with the
subrings of $R$ containing $A$. Since
$\mathfrak{p}=(\mathfrak{p}A_\mathfrak{p})\cap A$, the map $\mathfrak{p}\to
A_\mathfrak{p}$ from $\Spec(A)$ into $L(A)$ is bijective.
\end{env}

\begin{env}[Lemma]{8.1.3}
Let $R$ be a field, and $A$ a subring of $R$. For a
local subring $M$ of $R$ to dominate a ring $A_\mathfrak{p}\in L(A)$ it is
necessary and sufficient that $A\subset M$; the local ring $A_\mathfrak{p}$
dominated by $M$ is then unique, and corresponds to
$\mathfrak{p}=\mathfrak{m}(M)\cap A$.
\end{env}

Indeed, if $M$ dominates $A_\mathfrak{p}$, then $\mathfrak{m}(M)\cap
A_\mathfrak{p}=\mathfrak{p}A_\mathfrak{p}$, by \eref{8.1.1}, whence the
uniqueness of $\mathfrak{p}$; on the other hand, if $A\subset M$, then
$\mathfrak{m}M\cap A=\mathfrak{p}$ is prime in $A$, and since
$A\setminus\mathfrak{p}\subset M$, we have that $A_\mathfrak{p}\subset M$ and
$\mathfrak{p}A_\mathfrak{p}\subset\mathfrak{m}(M)$, so $M$ dominates
$A_\mathfrak{p}$

\begin{env}[Lemma]{8.1.4}
\oldpage{165}Let $R$ be a field, $M$ and $N$ two local
subrings of $R$, and $P$ the subring of $R$ generated by $M\cup N$. Then the
following conditions are equivalent:
\begin{itemize}
  \item[(i)] There exists a prime ideal $\mathfrak{p}$ of $P$ such that
$\mathfrak{m}(M)=\mathfrak{p}\cap M$ and $\mathfrak{m}(N)=\mathfrak{p}\cap N$.
  \item[(ii)] The ideal $\mathfrak{a}$ generated in $P$ by
$\mathfrak{m}(M)\cup\mathfrak{m}(N)$ is distinct from $P$. \item There exists a
local subring $Q$ of $R$ simultaneously dominating both $M$ and $N$.
\end{itemize}
\end{env}

It is clear that (i) implies (ii); conversely, if $\mathfrak{a}\neq P$, then
$\mathfrak{a}$ is contained in a maximal ideal $\mathfrak{n}$ of $P$, and since
$1\not\in\mathfrak{n}$, $\mathfrak{n}\cap M$ contains $\mathfrak{m}(M)$ and is
distinct from $M$, so $\mathfrak{n}\cap M=\mathfrak{m}(M)$, and similarly
$\mathfrak{n}\cap N=\mathfrak{m}(N)$. It is clear that, if $Q$ dominates both
$M$ and $N$, then $P\subset Q$ and $\mathfrak{m}(M)=\mathfrak{m}(Q)\cap
M=(\mathfrak{m}(Q)\cap P)\cap M$, and $\mathfrak{m}(N)=(\mathfrak{m}(Q)\cap
P)\cap N$, so (iii) implies (i); the reciprocal is evident when we take
$Q=P_\mathfrak{p}$.

When the conditions of \eref{8.1.4} are satisfied, we say, with C.~Chevalley,
that the local rings $M$ and $N$ are \emph{allied}.

\begin{env}[Proposition]{8.1.5}
Let $A$ and $B$ be two subrings of a field $R$,
and $C$ the subring of $R$ generated by $A\cup B$. Then the following
conditions are equivalent:
\begin{itemize}
  \item[(i)] For every local ring $Q$ containing $A$ and $B$, we have that
  $A_\mathfrak{p}=B_\mathfrak{q}$, where $\mathfrak{p}=\mathfrak{m}(Q)\cap A$ and
$\mathfrak{q}=\mathfrak{m}(Q)\cap B$.
  \item[(ii)] For all prime ideals $\mathfrak{r}$
of $C$, we have that $A_\mathfrak{p}=B_\mathfrak{q}$, where
$\mathfrak{p}=\mathfrak{r}\cap A$ and $\mathfrak{q}=\mathfrak{r}\cap B$. \item
If $M\in L(A)$ and $N\in L(B)$ are allied, then they are identical. \item
$L(A)\cap L(B)=L(C)$.
\end{itemize}
\end{env}

Lemmas \eref{8.1.3} and \eref{8.1.4} prove that (i) and (iii) are equivalent; it
is clear that (i) implies (ii) by taking $Q=C_\mathfrak{r}$; conversely, (ii)
implies (i), because if $Q$ contains $A\cup B$ then it contains $C$, and if
$\mathfrak{r}=\mathfrak{m}(Q)\cap C$ then $\mathfrak{p}=\mathfrak{r}\cap A$ and
$\mathfrak{q}=\mathfrak{r}\cap B$, from \eref{8.1.3}. It is immediate that (iv)
implies (i), because if $Q$ contains $A\cup B$ then it dominates a local ring
$C_\mathfrak{r}\in L(C)$ by (8.1.3); by hypothesis we have that
$C_\mathfrak{r}\in L(A)\cap L(B)$, and \eref{8.1.1} and \eref{8.1.3} prove that
$C_\mathfrak{r}=A_\mathfrak{p}=B_\mathfrak{q}$. We prove finally that (iii)
implies (iv). Let $Q\in L(C)$; $Q$ dominates some $M\in L(A)$ and some $N\in
L(B)$ \eref{8.1.3}, so $M$ and $N$, being allied, are identical by hypothesis.
As we then have that $C\subset M$, we know that $M$ dominates some $Q'\in L(C)$
\eref{8.1.3}, so $Q$ dominates $Q'$, whence necessarily \eref{8.1.3} $Q=Q'=M$,
so $Q\in L(A)\cap L(B)$. Conversely, if $Q\in L(A)\cap L(B)$, then $C\subset
Q$, so \eref{8.1.3} $Q$ dominates some $Q''\in L(C)\subset L(A)\cap L(B)$; $Q$
and $Q''$, being allied, are identical, so $Q''=Q\in L(C)$, which completes the
proof.


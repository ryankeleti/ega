\input{preamble}

\begin{document}
\title{Preliminaries}
\maketitle

\phantomsection
\label{section-phantom}

\tableofcontents

\section{Rings of fractions}
\label{section-rings-of-fractions}

\setcounter{subsection}{-1}
\subsection{Rings and Algebras}
\label{subsection-rings-and-algs}

\begin{env}[1.0.1]
\label{env-0.1.0.1}
\oldpage{11}
All the rings considered in this treatise will have a {\it unit element}; all
the modules on such a ring will be assumed to be {\it unitary}; the ring
homomorphisms will always be assumed to {\it send the unit element to a unit
element}; unless otherwise stated, a subring of a ring $A$ will be assumed to
{\it contain the unit element of $A$}. We will consider especially
{\it commutative} rings, and when we speak of a ring without specification, it
will be implied that it is commutative. If $A$ is a ring not necessarily
commutative, by $A$-module we will we mean a left module, unless stated
otherwise.
\end{env}

\begin{env}[1.0.2]
\label{env-0.1.0.2}
Let $A$, $B$ be two rings, not necessarily commutative, $\vphi:A\to B$ a
homomorphism. Any left (resp. right) $B$-module $M$ can be provided with a left
(resp. right) $A$-module structure by $a\cdot m=\vphi(a)\cdot m$
(resp. $m\cdot a=m\cdot\vphi(a)$); when it will be necessary to distinguish $M$
as an $A$-module or a $B$-module, we will denote by $M_{[\vphi]}$ the left
(resp. right) $A$-module as defined. If $L$ is an $A$-module, then a
homomorphism $u:L\to M_{[\vphi]}$ is a homomorphism of commutative groups such
that $u(a\cdot x)=\vphi(a)\cdot u(x)$ for $a\in A$, $x\in L$; we will also say
that it is a $\vphi$-{\it homomorphism} $L\to M$, and that the pair $(\vphi,u)$
(or, by misuse of langauge, $u$) is a {\it di-homomorphism} of $(A,L)$ in
$(B,M)$. The pairs $(A,L)$ consisting of a ring $A$ and an $A$-module $L$ thus
form a {\it category} for which the morphisms are di-homomorphisms.
\end{env}

\begin{env}[1.0.3]
\label{env-0.1.0.3}
Under the hypotheses of \hyperref[env-0.1.0.2]{(1.0.2)}, if $\mathfrak{J}$ is a left
(resp. right) ideal of $A$, we denote by $B\mathfrak{J}$ (resp. $\mathfrak{J}B$)
the left (resp. right) ideal $B\vphi(\mathfrak{J})$
(resp. $\vphi(\mathfrak{J})B$) of $B$ generated by $\vphi(\mathfrak{J})$; it is
also the image of the canonical homomorphism $B\otimes_A\mathfrak{J}\to B$
(resp. $\mathfrak{J}\otimes_A B\to B$) of left (resp. right) $B$-modules.
\end{env}

\begin{env}[1.0.4]
\label{env-0.1.0.4}
If $A$ is a (commutative) ring, $B$ a non necessarily commutative ring, the data
of a structure of an {\it $A$-algebra} on $B$ is equivalent to the data of a
ring homomorphism $\vphi:A\to B$ such that $\vphi(A)$ is contained in the center
of $B$. For all ideals $\mathfrak{J}$ of $A$, $\mathfrak{J}B=B\mathfrak{J}$ is
then a two-sided ideal of $B$, and for every $B$-module $M$, $\mathfrak{J}M$ is
then a $B$-module equal to $(B\mathfrak{J})M$.
\end{env}

\begin{env}[1.0.5]
\label{env-0.1.0.5}
We will not revisit the notions of {\it module of finite type} and
(commutative) {\it algebra of finite type}; to say that an $A$-module $M$ is of
finite type means that there exists
\oldpage{12}
an exact sequence $A^p\to M\to 0$. We say that an $A$-module $M$ admits a
{\it finite presentation} if it is isomorphic to the cokernel of a homomorphism
$A^p\to A^q$, in other words, there exists an exact sequence
$A^p\to A^q\to M\to 0$. We note that for a {\it Noetherian} ring $A$, every
$A$-module of finite type admits a finite presentation.

Let us recall that an $A$-algebra $B$ is called {\it integral} over $A$ if
every element in $B$ is a root in $B$ of a monic polynomial with coefficients in
$A$; equivalently, every element of $B$ is contained in a subalgebra of $B$
which is an {\it $A$-module of finite type}. When this is so, and if $B$ is
commutative, the subalgebra of $B$ generated by a finite subset of $B$ is an
$A$-module of finite type; for a commutative algebra $B$ to be integral and of
finite type over $A$, it is necessary and sufficient that $B$ is an $A$-module
of finite type; we also say that $B$ is an {\it integral $A$-algebra of finite
type} (or simply {\it finite} if there is no chance of confusion). It should be
noted that in these definitions, it is not assumed that the homomorphism
$A\to B$ defining the $A$-algebra structure is injective.
\end{env}

\begin{env}[1.0.6]
\label{env-0.1.0.6}
An {\it integral} ring (or an {\it integral domain}) is a ring in which the
product of a finite family of elements $\neq 0$ is $\neq 0$; equivalently, in
such a ring we have $0\neq 1$ and the product of two elements $\neq 0$ is non
zero. A {\it prime} ideal of a ring $A$ is an ideal $\mathfrak{p}$ such that
$A/\mathfrak{p}$ is integral; this therefore implies that $\mathfrak{p}\neq A$.
For a ring $A$ to have at least one prime ideal, it is necessary and sufficient
that $A\neq\{0\}$.
\end{env}

\begin{env}[1.0.7]
\label{env-0.1.0.7}
A {\it local} ring is a ring $A$ in which there exists a unique maximal ideal,
which is then the complement of the invertible elements and contains all the
ideals $\neq A$. If $A$ and $B$ are two local rings, $\mathfrak{m}$ and
$\mathfrak{n}$ their respective maximal ideals, we say that a homomorphism
$\vphi:A\to B$ is {\it local} if $\vphi(\mathfrak{m})\subset\mathfrak{n}$ (or,
equivalently, if $\vphi^{-1}(\mathfrak{n})=\mathfrak{m}$). By passing to
quotients, such a homomorphism then defines a momomorphism from the residue
field $A/\mathfrak{m}$ to the residue field $B/\mathfrak{n}$. The composition of
two local homomorphisms is a local homomorphism.
\end{env}

\subsection{Radical of an ideal. Nilradical and radical of a ring}
\label{subsection-radical-and-nilradical}

\begin{env}[1.1.1]
\label{env-0.1.1.1}
Let $\mathfrak{a}$ be an ideal of a ring $A$; the {\it radical} of
$\mathfrak{a}$, denoted by $\rad(\mathfrak{a})$, is the set of $x\in A$ such
that $x^n\in\mathfrak{a}$ for an integer $n>0$; it is an ideal containing
$\mathfrak{a}$. We have $\rad(\mathfrak{r}(\mathfrak{a}))=\rad(\mathfrak{a})$;
the relation $\mathfrak{a}\subset\mathfrak{b}$ implies
$\rad(\mathfrak{a})\subset\rad(\mathfrak{b})$; the radical of a finite
intersection of ideals is the intersection of their radicals. If $\vphi$ is a
homomorphism of a ring $A'$ into $A$, then we have
$\rad(\vphi^{-1}(\mathfrak{a}))=\vphi^{-1}(\rad(\mathfrak{a}))$ for any ideal
$\mathfrak{a}\subset A$. For an ideal to be the radical of an ideal, it is
necessary and sufficient that it be an intersection of prime ideals. The radical
of an ideal $\mathfrak{a}$ is the intersection of the {\it minimal} prime
ideals which contain $\mathfrak{a}$; if $A$ is Noetherian, these minimal prime
ideals are finite in number.

The radical of the ideal $(0)$ is also called the {\it nilradical} of $A$; it
is the set $\nilrad$ of the nilpotent elements of $A$. It is said that the ring
$A$ is {\it reduced} if $\nilrad=(0)$; for every ring $A$, the quotient
$A/\nilrad$ of $A$ by its nilradical is a reduced ring.
\end{env}

\begin{env}[1.1.2]
\label{env-0.1.1.2}
Recall that the {\it nilradical} $\nilrad(A)$ of a (not necessarily
commutative) ring $A$ is the intersection of the maximal left ideals of $A$ (and
also the intersection of maximal right ideals). The nilradical of $A/\nilrad(A)$
is $(0)$.
\end{env}

\subsection{Modules and rings of fractions}
\label{subsection-modules-and-rings-of-fractions}

\begin{env}[1.2.1]
\label{env-0.1.2.1}
\oldpage{13}
We say that a subset $S$ of a ring $A$ is {\it multiplicative} if $1\in S$ and
if the product of two elements of $S$ is in $S$. The examples which will be the
most important in the following are: 1st the set $S_f$ of
powers $f^n$ ($n\geqslant 0$) of an element $f\in A$; 2nd the
complement $A-\mathfrak{p}$ of a {\it prime} ideal $\mathfrak{p}$ of $A$.
\end{env}

\begin{env}[1.2.2]
\label{env-0.1.2.2}
Let $S$ be a multiplicative subset of a ring $A$, $M$ an $A$-module; on the set
$M\times S$, the relation between pairs $(m_1,s_1)$, $(m_2,s_2)$:
\begin{center}
   ``there exists an $s\in S$ such that $s(s_1 m_2-s_2 m_1)=0$''
\end{center}
is an equivalence relation. We denote by $S^{-1}M$ the quotient set of
$M\times S$ by this relation and by $m/s$ the canonical image in $S^{-1}M$ of
the pair $(m,s)$; we call $i_M^S:m\mapsto m/1$ (also denoted $i^S$) the
{\it canonical} map from $M$ to $S^{-1}M$. This map is in general neither
injective nor surjective; its kernel is the set of $m\in M$ such that there
exists an $s\in S$ for which $sm=0$.

On $S^{-1}M$ we define an additive group law by taking
\[
  (m_1/s_1)+(m_2/s_2)=(s_2 m_1+s_1 m_2)/(s_1 s_2)
\]
(we check that it is independent of the expressions of the elements of $S^{-1}M$
considered). On $S^{-1}A$ we further define a multiplicative law by setting
$(a_1/s_1)(a_2/s_2)=(a_1 a_2)/(s_1 s_2)$, and finally an external law on
$S^{-1}M$, having $S^{-1}A$ as a set of operators, by setting
$(a/s)(m/s')=(am)/(ss')$. It is thus verified that $S^{-1}A$ is provided with a
ring structure (called {\it the ring of fractions of $A$ with denominators in
$S$}) and $S^{-1}M$ the structure of an $S^{-1}A$-module (called {\it the
module of fractions of $M$ with denominators in $S$}); for all $s\in S$, $s/1$
is invertible in $S^{-1}A$, its inverse being $1/s$. The canonical map $i_A^S$
(resp. $i_M^S$) is a ring homomorphism (resp. a homomorphism of $A$-modules,
$S^{-1}M$ being considered as an $A$-module by means of the homomorphism
$i_A^S:A\to S^{-1}A$).
\end{env}

\begin{env}[1.2.3]
\label{env-0.1.2.3}
If $S_f=\{f^n\}_{n\geqslant 0}$ for a $f\in A$, we write $A_f$ and $M_f$ instead
of $S_f^{-1}A$ and $S_f^{-1}M$; when $A_f$ is considered as algebra over $A$, we
can write $A_f=A[1/f]$. $A_f$ is isomorphic to the quotient algebra
$A[T]/(fT-1)A[T]$. When $f=1$, $A_f$ and $M_f$ canonically identify with $A$ and
$M$; if $f$ is nilpotent, $A_f$ and $M_f$ are reduced to $0$.

When $S=A-\mathfrak{p}$, where $\mathfrak{p}$ is a prime ideal of $A$, we write
$A_\mathfrak{p}$ and $M_\mathfrak{p}$ instead of $S^{-1}A$ and $S^{-1}M$;
$A_\mathfrak{p}$ is a {\it local ring} whose maximal ideal $\mathfrak{q}$ is
generated by $i_A^S(\mathfrak{p})$, and we have
$(i_A^S)^{-1}(\mathfrak{q})=\mathfrak{p}$; by passing to quotients, $i_A^S$
gives a monomorphism from the integral ring $A/\mathfrak{p}$ to the field
$A_\mathfrak{p}/\mathfrak{q}$, which identifies with the field of fractions of
$A/\mathfrak{p}$.
\end{env}

\begin{env}[1.2.4]
\label{env-0.1.2.4}
The ring of fractions $S^{-1}A$ and the canonical homomorphism $i_A^S$ are a
solution to a {\it universal mapping problem}: any homomorphism $u$ from $A$ to
a ring $B$ such that $u(S)$ is composed of {\it invertible} elements in $B$
factorizes uniquely as
\[
  u:A\xrightarrow{i_A^S}S^{-1}A\xrightarrow{u^*}B
\]
\oldpage{14}
where $u^*$ is a ring homomorphism. Under the same hypotheses, let $M$ be an
$A$-module, $N$ a $B$-module, and $v:M\to N$ a homomorphism of $A$-modules (for
the $B$-module structure on $N$ defined by $u:A\to B$); then $v$ factorizes
uniquely as
\[
  v:M\xrightarrow{i_M^S}S^{-1}M\xrightarrow{v^*}N
\]
where $v^*$ is a homomorphism of $S^{-1}A$-modules (for the $S^{-1}A$-module
structure on $N$ defined by $u^*$).
\end{env}

\begin{env}[1.2.5]
\label{env-0.1.2.5}
We define a canonical isomorphism $S^{-1}A\otimes_A M\isoto S^{-1}M$ of
$S^{-1}A$-modules, sending the element $(a/s)\otimes m$ to the element $(am)/s$,
the inverse isomorphism sending $m/s$ to $(1/s)\otimes m$.
\end{env}

\begin{env}[1.2.6]
\label{env-0.1.2.6}
For each ideal $\mathfrak{a}'$ of $S^{-1}A$,
$\mathfrak{a}=(i_A^S)^{-1}(\mathfrak{a}')$ is an ideal of $A$, and
$\mathfrak{a}'$ is the ideal of $S^{-1}A$ generated by $i_A^S(\mathfrak{a})$,
which identifies with $S^{-1}\mathfrak{a}$ \hyperref[env-0.1.3.2]{(1.3.2)}. The map
$\mathfrak{p}'\mapsto(i_A^S)^{-1}(\mathfrak{p}')$ is an isomorphism, for the
order structure, from the set of {\it prime} ideals of $S^{-1}A$ to the set of
prime ideals $\mathfrak{p}$ of $A$ such that $\mathfrak{p}\cap S=\emp$. In
addition, the local rings $A_\mathfrak{p}$ and $(S^{-1}A)_{S^{-1}\mathfrak{p}}$
are canonically isomorphic \hyperref[env-0.1.5.1]{(1.5.1)}.
\end{env}

\begin{env}[1.2.7]
\label{env-0.1.2.7}
When $A$ is an {\it integral} ring, for which $K$ denotes its field of
fractions, the canonical map $i_A^S:A\to S^{-1}A$ is injective for any
multiplicative subset $S$ not containing $0$, and $S^{-1}A$ then canonically
identifies with a subring of $K$ containing $A$. In particular, for each prime
ideal $\mathfrak{p}$ of $A$, $A_\mathfrak{p}$ is a local ring containing $A$,
with maximal ideal $\mathfrak{p}A_\mathfrak{p}$, and we have
$\mathfrak{p}A_\mathfrak{p}\cap A=\mathfrak{p}$.
\end{env}

\begin{env}[1.2.8]
\label{env-0.1.2.8}
If $A$ is a {\it reduced} ring \hyperref[env-0.1.1.1]{(1.1.1)}, so is $S^{-1}A$: indeed, if
$(x/s)^n=0$ for $x\in A$, $s\in S$, then this means that there exists an
$s'\in S$ such that $s' x^n=0$, hence $(s' x)^n=0$, which, by hypothesis, implies
$s' x=0$, so $x/s=0$.
\end{env}

\subsection{Functorial properties}
\label{subsection-func-prop-ring-of-fractions}

\begin{env}[1.3.1]
\label{env-0.1.3.1}
Let $M$, $N$ be two $A$-modules, $u$ an $A$-homomorphism $M\to N$. If $S$ is a
multiplicative subset of $A$, we define a $S^{-1}A$-homomorphism
$S^{-1}M\to S^{-1}N$, denoted by $S^{-1}u$, by setting $S^{-1}u(m/s)=u(m)/s$; if
$S^{-1}M$ and $S^{-1}N$ are canonically identified with $S^{-1}A\otimes_A M$ and
$S^{-1}A\otimes_A N$ \hyperref[env-0.1.2.5]{(1.2.5)}, $S^{-1}u$ is considered as $1\otimes u$.
If $P$ is a third $A$-module, $v$ an $A$-homomorphism $N\to P$, we have
$S^{-1}(v\circ u)=(S^{-1}v)\circ(S^{-1}u)$; in other words, $S^{-1}M$ is a
{\it covariant functor in $M$}, from the category of $A$-modules to that of
$S^{-1}A$-modules ($A$ and $S$ being fixed).
\end{env}

\begin{env}[1.3.2]
\label{env-0.1.3.2}
The functor $S^{-1}M$ is {\it exact}; in other words, if the following sequence
\[
  M\xrightarrow{u}N\xrightarrow{v}P
\]
is exact, so is the following sequence
\[
  S^{-1}M\xrightarrow{S^{-1}u}S^{-1}N\xrightarrow{S^{-1}v}S^{-1}P.
\]
In particular, if $u:M\to N$ is injective (resp. surjective), the same is true
for $S^{-1}u$;
\oldpage{15}
if $N$ and $P$ are two submodules of $M$, $S^{-1}N$ and $S^{-1}P$ canonically
identify with submodules of $S^{-1}M$, and we have
\[
  S^{-1}(N+P)=S^{-1}N+S^{-1}P
  \quad\text{and}\quad
  S^{-1}(N\cap P)=(S^{-1}N)\cap(S^{-1}P).
\]
\end{env}

\begin{env}[1.3.3]
\label{env-0.1.3.3}
Let $(M_\alpha,\vphi_{\beta\alpha})$ be an inductive system of $A$-modules; then
$(S^{-1}M_\alpha,S^{-1}\vphi_{\beta\alpha})$ is an inductive system of
$S^{-1}A$-modules. Expressing the $S^{-1}M_\alpha$ and
$S^{-1}\vphi_{\beta\alpha}$ as tensor products (\hyperref[env-0.1.2.5]{(1.2.5)} and
\hyperref[env-0.1.3.1]{(1.3.1)}), it follows from the permutability of the tensor product and
inductive limit operations that we have a canonical isomorphism
\[
  S^{-1}\varinjlim M_\alpha\isoto\varinjlim S^{-1}M_\alpha
\]
which is further expressed by saying that the functor $S^{-1}M$ (in $M$)
{\it commutes with inductive limits}.
\end{env}

\begin{env}[1.3.4]
\label{env-0.1.3.4}
Let $M$, $N$ be two $A$-modules; there is a canonical {\it functorial}
isomorphism (in $M$ and $N$)
\[
  (S^{-1}M)\otimes_{S^{-1}A}(S^{-1}N)\isoto S^{-1}(M\otimes_A N)
\]
which sends $(m/s)\otimes(n/t)$ to $(m\otimes n)/st$.
\end{env}

\begin{env}[1.3.5]
\label{env-0.1.3.5}
We also have a {\it functorial} homomorphism (in $M$ and $N$)
\[
  S^{-1}\Hom_A(M,N)\longrightarrow\Hom_{S^{-1}A}(S^{-1}M,S^{-1}N)
\]
which sends $u/s$ to the homomorphism $m/t\mapsto u(m)/st$. When $M$ has a
finite presentation, the above homomorphism is an {\it isomorphism}: it is
immediate when $M$ is of the form $A^r$, and we pass to the general case by
starting with the following exact sequence $A^p\to A^q\to M\to 0$, and using the
exactness of the functor $S^{-1}M$ and the left-exactness of the functor
$\Hom_A(M,N)$ in $M$. Note that this case always occurs when $A$ is
{\it Noetherian} and the $A$-module $M$ is {\it of finite type}.
\end{env}

\subsection{Change of multiplicative subset}
\label{subsection-change-of-mult-subset}

\begin{env}[1.4.1]
\label{env-0.1.4.1}
Let $S$, $T$ be two multiplicative subsets of a ring $A$ such that $S\subset T$;
there exists a canonical homomorphism $\rho_A^{T,S}$ (or simply $\rho^{T,S}$)
from $S^{-1}A$ to $T^{-1}A$, sending the element denoted $a/s$ of $S^{-1}A$ to
the element denoted $a/s$ in $T^{-1}A$; we have $i_A^T=\rho_A^{T,S}\circ i_A^S$.
For every $A$-module $M$, there exists in the same way an $S^{-1}A$-linear map
from $S^{-1}M$ to $T^{-1}M$ (the latter considered as an $S^{-1}A$-module thanks
to the homomorphism $\rho_A^{T,S}$), which sends the element $m/s$ of $S^{-1}M$
to the element $m/s$ of $T^{-1}M$; we denote this map by $\rho_M^{T,S}$, or
simply $\rho^{T,S}$, and we still have $i_M^T=\rho_M^{T,S}\circ i_M^S$; by the
canonical identification \hyperref[env-0.1.2.5]{(1.2.5)}, $\rho_M^{T,S}$ identifies with
$\rho_A^{T,S}\otimes 1$. The homomorphism $\rho_M^{T,S}$ is a {\it functorial
morphism} (or natural transformation) from the functor $S^{-1}M$ to the functor
$T^{-1}M$, in other words, the diagram
\[
  \xymatrix{
  S^{-1}M\ar[r]^{S^{-1}u}\ar[d]_{\rho_M^{T,S}} &
  S^{-1}N\ar[d]^{\rho_N^{T,S}}\\
  T^{-1}M\ar[r]^{T^{-1}u} &
  T^{-1}N
  }
\]
\oldpage{16}
is commutative, for every homomorphism $u:M\to N$; $T^{-1}u$ is entirely
determined by $S^{-1}u$, since for $m\in M$ and $t\in T$, we have
\[
  (T^{-1}u)(m/t)=(t/1)^{-1}\rho^{T,S}((S^{-1}u)(m/1)).
\]
\end{env}

\begin{env}[1.4.2]
\label{env-0.1.4.2}
With the same notations, for two $A$-modules $M$, $N$, the diagrams
(cf. \hyperref[env-0.1.3.4]{(1.3.4)} and \hyperref[env-0.1.3.5]{(1.3.5)})
\[
  \xymatrix{
    (S^{-1}M)\otimes_{S^{-1}A}(S^{-1}N)\ar[r]^\sim \ar[d] &
    S^{-1}(M\otimes_A N)\ar[d] & &
    S^{-1}\Hom_A(M,N)\ar[r]\ar[d] &
    \Hom_{S^{-1}A}(S^{-1}M,S^{-1}N)\ar[d]\\
    (T^{-1}M)\otimes_{T^{-1}A}(T^{-1}N)\ar[r]^\sim &
    T^{-1}(M\otimes_A N) & &
    T^{-1}\Hom_A(M,N)\ar[r] &
    \Hom_{T^{-1}A}(T^{-1}M,T^{-1}N)
  }
\]
are commutative.
\end{env}

\begin{env}[1.4.3]
\label{env-0.1.4.3}
There is an important case in which the homomorphism $\rho^{T,S}$ is
{\it bijective}, where then we know that every element of $T$ is divisor of an
element of $S$; we then identify the modules $S^{-1}M$ and $T^{-1}M$ via
$\rho^{T,S}$. We say that $S$ is {\it saturated} if every divisor in $A$ of an
element of $S$ is in $S$; by replacing $S$ with the set $T$ of all the divisors
of the elements of $S$ (a set which is multiplicative and saturated), we see
that we can always, if we wish, be limited to the consideration of modules of
fractions $S^{-1}M$, where $S$ is saturated.
\end{env}

\begin{env}[1.4.4]
\label{env-0.1.4.4}
If $S$, $T$, $U$ are three multiplicative subsets of $A$ such that
$S\subset T\subset U$, we have
\[
  \rho^{U,S}=\rho^{U,T}\circ\rho^{T,S}.
\]
\end{env}

\begin{env}[1.4.5]
\label{env-0.1.4.5}
Consider an {\it increasing filtered family} $(S_\alpha)$ of multiplicative
subsets of $A$ (we write $\alpha\leqslant\beta$ for $S_\alpha\subset S_\beta$),
and let $S$ be the multiplicative subset $\bigcup_\alpha S_\alpha$; let us put
$\rho_{\beta\alpha}=\rho_A^{S_\beta,S_\alpha}$ for $\alpha\leqslant\beta$;
according to \hyperref[env-0.1.4.4]{(1.4.4)}, the homomorphisms $\rho_{\beta\alpha}$ define a
ring $A'$ as the {\it inductive limit} of the inductive system of rings
$(S_\alpha^{-1}A,\rho_{\beta\alpha})$. Let $\rho_\alpha$ be the canonical map
$S_\alpha^{-1}A\to A'$, and let $\vphi_\alpha=\rho_A^{S,S_\alpha}$; as
$\vphi_\alpha=\vphi_\beta\circ\rho_{\beta\alpha}$ for $\alpha\leqslant\beta$
according to \hyperref[env-0.1.4.4]{(1.4.4)}, we can uniquely define a homomorphism
$\vphi:A'\to S^{-1}A$ such that the diagram
\[
  \xymatrix{
    & S_\alpha^{-1}A\ar[ddl]_{\rho_\alpha}
                    \ar[d]^{\rho_{\beta\alpha}}
                    \ar[rdd]^{\vphi_\alpha}\\
    & S_\beta^{-1}A\ar[ld]^{\rho_\beta}
                   \ar[rd]_{\vphi_\beta}
    & & (\alpha\leqslant\beta)\\
    A'\ar[rr]_\vphi
    & & S^{-1}A
  }
\]
is commutative. In fact, $\vphi$ is an {\it isomorphism}; it is indeed
immediate by construction that $\vphi$ is surjective. On the other hand, if
$\rho_\alpha(a/s_\alpha)\in A'$ is such that $\vphi(\rho_\alpha(a/s_\alpha))=0$,
this means that $a/s_\alpha=0$ in $S^{-1}A$, that is to say that there exists an
$s\in S$ such that $sa=0$; but there is a $\beta\geqslant\alpha$ such that
$s\in S_\beta$, and consequently, as
$\rho_\alpha(a/s_\alpha)=\rho_\beta(sa/ss_\alpha)=0$, we find that $\vphi$ is
injective. The case for an $A$-module $M$ is treated likewise, and thus we have
defined canonical isomorphisms
\[
  \varinjlim S_\alpha^{-1}A\isoto(\varinjlim S_\alpha)^{-1}A,\quad
  \varinjlim S_\alpha^{-1}M\isoto(\varinjlim S_\alpha)^{-1}M,
\]
the second being {\it functorial} in $M$.
\end{env}

\begin{env}[1.4.6]
\label{env-0.1.4.6}
\oldpage{17}
Let $S_1$, $S_2$ be two multiplicative subsets of $A$; then $S_1 S_2$ is also a
multiplicative subset of $A$. Let us denote by $S_2'$ the canonical image of
$S_2$ in the ring $S_1^{-1}A$, which is a multiplicative subset of this ring.
For each $A$-module $M$ there is then a functorial isomorphism
\[
  {S_2'}^{-1}(S_1^{-1}M)\isoto(S_1 S_2)^{-1}M
\]
which sends $(m/s_1)/(s_2/1)$ to the element $m/(s_1 s_2)$.
\end{env}

\subsection{Change of ring}
\label{subsection-change-of-ring}

\begin{env}[1.5.1]
\label{env-0.1.5.1}
Let $A$, $A'$ be two rings, $\vphi$ a homomorphism $A'\to A$, $S$ (resp. $S'$)
a multiplicative subset of $A$ (resp. $A'$), such that $\vphi(S')\subset S$; the
composition homomorphism $\smash{A'\xrightarrow{\vphi}A\to S^{-1}A}$ factors as
$\smash{A'\to{S'}^{-1}\xrightarrow{\vphi^{S'}} S^{-1}A}$ by virtue of
\hyperref[env-0.1.2.4]{(1.2.4)}; where $\vphi^{S'}(a'/s')=\vphi(a')/\vphi(s')$. If
$A=\vphi(A')$ and $S=\vphi(S')$, then $\vphi^{S'}$ is {\it surjective}. If
$A'=A$ and if $\vphi$ is the identity, then $\vphi^{S'}$ is none other than the
homomorphism $\rho_A^{S,S'}$ defined in \hyperref[env-0.1.4.1]{(1.4.1)}.
\end{env}

\begin{env}[1.5.2]
\label{env-0.1.5.2}
Under the hypotheses of \hyperref[env-0.1.5.1]{(1.5.1)}, let $M$ be an $A$-module. There
exists a canonical functorial morphism
\[
  \sigma:{S'}^{-1}(M_{[\vphi]})\longrightarrow(S^{-1}M)_{[\vphi^{S'}]}
\]
of ${S'}^{-1}A'$-modules, sending each element $m/s'$ of
${S'}^{-1}(M_{[\vphi]})$ to the element $m/\vphi(s')$ of
$(S^{-1}M)_{[\vphi^{S'}]}$; in fact, we verify immediately that this definition
does not depend on the expression $m/s'$ of the element considered. {\it When
$S=\vphi(S')$}, the homomorphism $\sigma$ is {\it bijective}. When $A'=A$ and
$\vphi$ is the identity, $\sigma$ is none other than the homomorphism
$\rho_M^{S,S'}$ defined in \hyperref[env-0.1.4.1]{(1.4.1)}.

When $M=A$ is taken in particular, the homomorphism $\vphi$ defines on $A$ an
$A'$-algebra structure; ${S'}^{-1}(A_{[\vphi]})$ is then provided with a ring
structure, for which it identifies with $(\vphi(S'))^{-1}A$, and the
homomorphism $\sigma:{S'}^{-1}(A_{[\vphi]})\to S^{-1}A$ is a homomorphism of
${S'}^{-1}A'$-algebras.
\end{env}

\begin{env}[1.5.3]
\label{env-0.1.5.3}
Let $M$ and $N$ be two $A$-modules; by composing the homomorphisms defined in
\hyperref[env-0.1.3.4]{(1.3.4)} and \hyperref[env-0.1.5.2]{(1.5.2)}, we obtain a homomorphism
\[
  (S^{-1}M\otimes_{S^{-1}A}S^{-1}N)_{[\vphi^{S'}]}
  \longleftarrow{S'}^{-1}((M\otimes A)_{[\vphi]})
\]
which is an isomorphism when $\vphi(S')=S$. Similarly, by composing the
homomorphisms in \hyperref[env-0.1.3.5]{(1.3.5)} and \hyperref[env-0.1.5.2]{(1.5.2)}, we obtain a
homomorphism
\[
  {S'}^{-1}((\Hom_A(M,N))_{[\vphi]})
  \longrightarrow(\Hom_{S^{-1}A}(S^{-1}M,S^{-1}N))_{[\vphi^{S'}]}
\]
which is an isomorphism when $\vphi(S')=S$ and $M$ admits a finite presentation.
\end{env}

\begin{env}[1.5.4]
\label{env-0.1.5.4}
Let us now consider an $A'$-module $N'$, and form the tensor product
$N'\otimes_{A'}A_{[\vphi]}$, which can be considered as an $A$-module by setting
$a\cdot(n'\otimes b)=n'\otimes(ab)$. There is a functorial isomorphism of
$S^{-1}A$-modules
\[
  \tau:({S'}^{-1}N')\otimes_{{S'}^{-1}A'}(S^{-1}A)_{[\vphi^{S'}]}
  \isoto S^{-1}(N'\otimes_{A'}A_{[\vphi]})
\]
\oldpage{18}
which sends the element $(n'/s')\otimes(a/s)$ to the element
$(n'\otimes a)/(\vphi(s')s)$; indeed, we verify separately that when we replace
$n'/s'$ (resp. $a/s$) by another expression of the same element,
$(n'\otimes a)/(\vphi(s')s)$ does not change; on the other hand, we can define
an inverse homomorphism of $\tau$ by sending $(n'\otimes a)/s$ to the element
$(n'/1)\otimes(a/s)$: we use the fact that $S^{-1}(N'\otimes_{A'}A_{[\vphi]})$
is canonically isomorphic to $(N'\otimes_{A'}A_{[\vphi]})\otimes_A S^{-1}A$
\hyperref[env-0.1.2.5]{(1.2.5)}, so also to $N'\otimes_{A'}(S^{-1}A)_{[\psi]}$, where we
denote by $\psi$ the composite homomorphism $a'\mapsto\vphi(a')/1$ from $A'$ to
$S^{-1}A$.
\end{env}

\begin{env}[1.5.5]
\label{env-0.1.5.5}
If $M'$ and $N'$ are two $A'$-modules, by composing the isomorphisms
\hyperref[env-0.1.3.4]{(1.3.4)} and \hyperref[env-0.1.5.4]{(1.5.4)}, we obtain an isomorphism
\[
  {S'}^{-1}M\otimes_{{S'}^{-1}A'}{S'}^{-1}N'\otimes_{{S'}^{-1}A'}S^{-1}A
  \isoto S^{-1}(M'\otimes_{A'}N'\otimes_{A'}A).
\]
Likewise, if $M'$ admits a finite presentation, we have by \hyperref[env-0.1.3.5]{(1.3.5)} and
\hyperref[env-0.1.5.4]{(1.5.4)} an isomorphism
\[
  \Hom_{{S'}^{-1}A'}({S'}^{-1}M',{S'}^{-1}N')\otimes_{{S'}^{-1}A'}S^{-1}A
  \isoto S^{-1}(\Hom_{A'}(M',N')\otimes_{A'}A).
\]
\end{env}

\begin{env}[1.5.6]
\label{env-0.1.5.6}
Under the hypotheses of \hyperref[env-0.1.5.1]{(1.5.1)}, let $T$ (resp. $T'$) be a second
multiplicative subset of $A$ (resp. $A'$) such that $S\subset T$
(resp. $S'\subset T'$) and $\vphi(T')\subset T$. Then the diagram
\[
  \xymatrix{
    {S'}^{-1}A'\ar[r]^{\vphi^{S'}}\ar[d]_{\rho^{T',S'}} &
    S^{-1}A\ar[d]^{\rho^{T,S}}\\
    {T'}^{-1}A'\ar[r]^{\vphi^{T'}} &
    T^{-1}A
  }
\]
is commutative. If $M$ is an $A$-module, the diagram
\[
  \xymatrix{
    {S'}^{-1}(M_{[\vphi]})\ar[r]^\sigma\ar[d]_{\rho^{T',S'}} &
    (S^{-1}M)_{[\vphi^{S'}]}\ar[d]^{\rho^{T,S}}\\
    {T'}^{-1}(M_{[\vphi]})\ar[r]^\sigma &
    (T^{-1}M)_{[\vphi^{T'}]}
  }
\]
is commutative. Finally, if $N'$ is an $A'$-module, the diagram
\[
  \xymatrix{
    ({S'}^{-1}N')\otimes_{{S'}^{-1}A'}(S^{-1}A)_{[\vphi^{S'}]}
      \ar[r]^\sim_\tau\ar[d] &
    S^{-1}(N'\otimes_{A'}A_{[\vphi]})\ar[d]^{\rho^{T,S}}\\
    ({T'}^{-1}N')\otimes_{{T'}^{-1}A'}(T^{-1}A)_{[\vphi^{T'}]}
      \ar[r]^\sim_\tau &
    T^{-1}(N'\otimes_{A'}A_{[\vphi]})
  }
\]
is commutative, the left vertical arrow obtained by applying
$\rho_{N'}^{T',S'}$ to ${S'}^{-1}N'$ and $\rho_A^{T,S}$ to $S^{-1}A$.
\end{env}

\begin{env}[1.5.7]
\label{env-0.1.5.7}
\oldpage{19}
Let $A''$ be a third ring, $\vphi':A''\to A'$ a ring homomorphism, $S''$ a
multiplicative subset of $A''$ such that $\vphi'(S'')\subset S'$. Set
$\vphi''=\vphi\circ\vphi'$; then we have
\[
  {\vphi''}^{S''}=\vphi^{S'}\circ{\vphi'}^{S''}.
\]
Let $M$ be an $A$-module; evidently we have
$M_{[\vphi'']}=(M_{[\vphi]})_{[\vphi']}$; if $\sigma'$ and $\sigma''$ are the
homomorphisms defined by $\vphi'$ and $\vphi''$ as $\sigma$ is defined in
\hyperref[env-0.1.5.2]{(1.5.2)} by $\vphi$, we have the transitivity formula
\[
  \sigma''=\sigma\circ\sigma'.
\]

Finally, let $N''$ be an $A''$-module; the $A$-module
$N''\otimes_{A''}A_{[\vphi'']}$ canonically identifies with
$(N''\otimes_{A''}{A'}_{[\vphi']})\otimes_{A'}A_{[\vphi]}$, and likewise the
$S^{-1}A$-module
$({S''}^{-1}N'')\otimes_{{S''}^{-1}A''}(S^{-1}A)_{[{\vphi''}^{S''}]}$ identifies
canonically with
$(({S''}^{-1}N'')\otimes_{{S''}^{-1}A''}({S'}^{-1}A')_{[{\vphi'}^{S''}]})
  \otimes_{{S'}^{-1}A'}(S^{-1}A)_{[\vphi^{S'}]}$. With these identifications, if
$\tau'$ and $\tau''$ are the isomorphisms defined by $\vphi'$ and $\vphi''$ as
$\tau$ is defined in \hyperref[env-0.1.5.4]{(1.5.4)} by $\vphi$, we have the transitivity
formula
\[
  \tau''=\tau\circ(\tau'\otimes 1).
\]
\end{env}

\begin{env}[1.5.8]
\label{env-0.1.5.8}
Let $A$ be a subring of a ring $B$; for every {\it minimal} prime ideal
$\mathfrak{p}$ of $A$, there exists a minimal prime ideal $\mathfrak{q}$ of $B$
such that $\mathfrak{p}=A\cap\mathfrak{q}$. Indeed, $A_\mathfrak{p}$ is a
subring of $B_\mathfrak{p}$ \hyperref[env-0.1.3.2]{(1.3.2)} and has {\it a single prime
ideal $\mathfrak{p}'$} \hyperref[env-0.1.2.6]{(1.2.6)}; since $B_\mathfrak{p}$ is not reduced
to $0$, it has at least one prime ideal $\mathfrak{q}'$ and we have necessarily
$\mathfrak{q}'\cap A_\mathfrak{p}=\mathfrak{p}'$; the prime ideal
$\mathfrak{q}_1$ of $B$, an inverse image of $\mathfrak{q}'$ is thus such that
$\mathfrak{q}_1\cap A=\mathfrak{p}$, and {\it a fortiori} we have
$\mathfrak{q}\cap A=\mathfrak{p}$ for every minimal prime ideal $\mathfrak{q}$
of $B$ contained in $\mathfrak{q}_1$.
\end{env}

\subsection{Indentification of the module $M_f$ as an inductive limit}
\label{subsection-localization-as-inductive-limit}

\begin{env}[1.6.1]
\label{env-0.1.6.1}
Let $M$ be an $A$-module, $f$ an element of $A$. Consider a sequence $(M_n)$ of
$A$-modules, all identical to $M$, and for each pair of integers $m\leqslant n$,
let $\vphi_{nm}$ be the homomorphism $z\mapsto f^{n-m}z$ from $M_m$ to $M_n$; it
is immediate that $((M_n),(\vphi_{nm}))$ is an {\it inductive system} of
$A$-modules; let $N=\varinjlim M_n$ be the inductive limit of this system. We
define a canonical {\it functorial} $A$-isomorphism from $N$ to $M_f$. For this
reason, let us note that, for all $n$, $\theta_n:z\mapsto z/f^n$ is an
$A$-homomorphism from $M=M_n$ to $M_f$, and it follows from the definitions that
we have $\theta_n\circ\vphi_{nm}=\theta_m$ for $m\leqslant n$. There therefore
exists an $A$-homomorphism $\theta:N\to M_f$ such that, if $\vphi_n$ denotes the
canonical homomorphism $M_n\to N$, we have $\theta_n=\theta\circ\vphi_n$ for all
$n$. Since, by hypothesis, every element of $M_f$ is of the form $z/f^n$ for at
least one $n$, it is clear that $\theta$ is surjective. On the other hand, if
$\theta(\vphi_n(z))=0$, in other words $z/f^n=0$, then there exists an integer
$k>0$ such that $f^k z=0$, so $\vphi_{n+k,n}(z)=0$, which gives $\vphi_n(z)=0$.
We can therefore identify $M_f$ and $\varinjlim M_n$ by means of $\theta$.
\end{env}

\begin{env}[1.6.2]
\label{env-0.1.6.2}
Now write $M_{f,n}$, $\vphi_{nm}^f$ and $\vphi_n^f$ instead of $M_n$,
$\vphi_{nm}$ and $\vphi_n$. Let $g$ be a second element of $A$. As $f^n$ divides
$f^n g^n$, we have a functorial homomorphism
\[
  \rho_{fg,f}:M_f\longrightarrow M_{fg}
  \quad(\hyperref[env-0.1.4.1]{(1.4.1)}\text{ and }\hyperref[env-0.1.4.3]{(1.4.2)});
\]
\oldpage{20}
if we identify $M_f$ and $M_{fg}$ with $\varinjlim M_{f,n}$ and
$\varinjlim M_{fg,n}$ respectively, $\rho_{fg,f}$ identifies with the
{\it inductive limit} of the maps $\rho_{fg,f}^n:M_{f,n}\to M_{fg,n}$, defined
by $\rho_{fg,f}^n(z)=g^n z$. Indeed, this follows immediately from the
commutativity of the diagram
\[
  \xymatrix{
    M_{f,n}\ar[r]^{\rho_{fg,f}^n}\ar[d]_{\vphi_n^f} &
    M_{fg,n}\ar[d]^{\vphi_n^{fg}}\\
    M_f\ar[r]^{\rho_{fg,f}} &
    M_{fg}.
  }
\]
\end{env}

\subsection{Support of a module}
\label{subsection-support-of-module}

\begin{env}[1.7.1]
\label{env-0.1.7.1}
Given an $A$-module $M$, we call the {\it support} of $M$ and denote by
$\Supp(M)$ the set of prime ideals $\mathfrak{p}$ of $A$ such that
$M_\mathfrak{p}\neq 0$. For $M=0$ to be true, it is necessary and sufficient
that $\Supp(M)=\emp$, because if $M_\mathfrak{p}=0$ for all $\mathfrak{p}$, the
annihilator of an element $x\in M$ cannot be contained in any prime ideal of
$A$, so $A$ is \unsure{total}.
\end{env}

\begin{env}[1.7.2]
\label{env-0.1.7.2}
If $0\to N\to M\to P\to 0$ is an exact sequence of $A$-modules, we have
\[
  \Supp(M)=\Supp(N)\cup\Supp(P)
\]
because for every prime ideal $\mathfrak{p}$ of $A$, the sequence
$0\to N_\mathfrak{p}\to M_\mathfrak{p}\to P_\mathfrak{p}\to 0$ is exact
\hyperref[env-0.1.3.2]{(1.3.2)} and for $M_\mathfrak{p}=0$, it is necessary and sufficient
that $N_\mathfrak{p}=P_\mathfrak{p}=0$.
\end{env}

\begin{env}[1.7.3]
\label{env-0.1.7.3}
If $M$ is the sum of a family $(M_\lambda)$ of submodules, then $M_\mathfrak{p}$
is the sum of the $(M_\lambda)_\mathfrak{p}$ for every prime ideal
$\mathfrak{p}$ of $A$ (\hyperref[env-0.1.3.3]{(1.3.3)} and \hyperref[env-0.1.3.2]{(1.3.2)}),
so $\Supp(M)=\bigcup_\lambda\Supp(M_\lambda)$.
\end{env}

\begin{env}[1.7.4]
\label{env-0.1.7.4}
If $M$ is an $A$-module {\it of finite type}, $\Supp(M)$ is the set of prime
ideals {\it containing the annihilator of} $M$. Indeed, if $M$ is cyclic and
generated by $x$, we say that $M_\mathfrak{p}=0$ means that there exists an
$s\not\in\mathfrak{p}$ such that $s\cdot x=0$, so that $\mathfrak{p}$ does not
contain the annihilator of $x$. If now $M$ admits a finite system
$(x_i)_{1\leqslant i\leqslant n}$ of generators and if $\mathfrak{a}_i$ is the
annihilator of $x_i$, then it follows from \hyperref[env-0.1.7.3]{(1.7.3)} that $\Supp(M)$ is
the set of $\mathfrak{p}$ containing one of the $\mathfrak{a}_i$, or,
equivalently, the set of $\mathfrak{p}$ containing
$\mathfrak{a}=\bigcap_i\mathfrak{a}_i$, which is the annihilator of $M$.
\end{env}

\begin{env}[1.7.5]
\label{env-0.1.7.5}
If $M$ and $N$ are two $A$-modules {\it of finite type}, we have
\[
  \Supp(M\otimes_A N)=\Supp(M)\cap\Supp(N).
\]
It can be seen that if $\mathfrak{p}$ is a prime ideal of $A$, the condition
$M_\mathfrak{p}\otimes_{A_\mathfrak{p}}N_\mathfrak{p}\neq 0$ is equivalent to
``$M_\mathfrak{p}\neq 0$ and $N_\mathfrak{p}\neq 0$'' (taking into account
\hyperref[env-0.1.3.4]{(1.3.4)}). In other words, it is about seeing that if $P$, $Q$ are two
modules of finite type over a {\it local} ring $B$, not reduced to $0$, then
$P\otimes_B Q\neq 0$. Let $\mathfrak{m}$ be the maximal ideal of $B$. By virtue
of Nakayama's Lemma, the vector spaces $P/\mathfrak{m}P$ and $Q/\mathfrak{m}Q$
are not reduced to $0$, so it is the same for the tensor product
$(P/\mathfrak{m}P)\otimes_{B/\mathfrak{m}}(Q/\mathfrak{m}Q)
  =(P\otimes_B Q)\otimes_B(B/\mathfrak{m})$, hence the conclusion.

In particular, if $M$ is an $A$-module of finite type, $\mathfrak{a}$ an ideal
of $A$, then $\Supp(M/\mathfrak{a}M)$ is the set of prime ideals containing both
$\mathfrak{a}$ and the annihilator $\mathfrak{n}$ of $M$ \hyperref[env-0.1.7.4]{(1.7.4)}, that
is, the set of prime ideals containing $\mathfrak{a}+\mathfrak{n}$.
\end{env}

\section{Irreducible spaces. Noetherian spaces}
\label{section-irreducible-and-noetherian-spaces}

\subsection{Irreducible spaces}
\label{subsection-irreducible-spaces}

\begin{env}[2.1.1]
\label{env-0.2.1.1}
\oldpage{21}
We say that a topological space $X$ is {\it irreducible} if it is nonempty and
if it is not a union of two distinct closed subspaces of $X$. It is the same to
say that $X\neq\emp$ and that the intersection of two nonempty open sets (and
consequently of a finite number of open sets) of $X$ is nonempty, or that every
nonempty open set is everywhere dense, or that any closed set is {\it rare}, or
finally that all open sets of $X$ are {\it connected}.
\end{env}

\begin{env}[2.1.2]
\label{env-0.2.1.2}
For a subspace $Y$ of a topological space $X$ to be irreducible, it is necessary
and sufficient that its closure $\overline{Y}$ be irreducible. In particular,
any subspace which is the closure $\overline{\{x\}}$ of a singleton is
irreducible; we will express the relation $y\in\overline{\{x\}}$ (equivalent to
$\overline{\{y\}}\subset\overline{\{x\}}$) by saying that there is a
{\it specialization of $x$} or that there is a {\it generalization of $y$}.
When there exists in an irreducible space $X$ a point $x$ such that
$X=\overline{\{x\}}$, we will say that $x$ is a {\it generic point of $X$}. Any
nonempty open subset of $X$ then contains $x$, and any subspace containing $x$
admits $x$ for a generic point.
\end{env}

\begin{env}[2.1.3]
\label{env-0.2.1.3}
Recall that a {\it Kolmogoroff space} is a topological space $X$ satisfying the
axiom of separation:

$(T_0)$ If $x\neq y$ are any two points of $X$, there is an open set containing
one of the points $x$, $y$ and not the other.

If an irreducible Kolmogoroff space admits a generic point, it admits
{\it only} one since a nonempty open set contains any generic point.

Recall that a topological space $X$ is said to be {\it quasi-compact} if, from
any collection of open sets of $X$, one can extract a finite cover of $X$ (or,
equivalently, if any decreasing filtered family of nonempty closed sets has a
nonempty intersection). If $X$ is a quasi-compact space, then any nonempty
closed subset $A$ of $X$ contains a {\it minimal} nonempty closed set $M$,
because the set of nonempty closed subsets of $A$ is inductive under the
relation $\supset$; if in addition $X$ is a Kolmogoroff space, $M$ is
necessarily reduced to a single point (or, as we say by abuse of language, is a
{\it closed point}).
\end{env}

\begin{env}[2.1.4]
\label{env-0.2.1.4}
In an irreducible space $X$, every nonempty open subspace $U$ is irreducible,
and if $X$ admits a generic point $x$, $x$ is also a generic point of $U$.

Let $(U_\alpha)$ be a cover (whose set of indices is nonempty) of a topological
space $X$, consisting of nonempty open sets; if $X$ is irreducible, it is
necessary and sufficient that $U_\alpha$ is irreducible for all $\alpha$, and
that $U_\alpha\cap U_\beta\neq\emp$ for any $\alpha$, $\beta$. The condition is
clearly necessary; to the that it is sufficient, it suffices to prove that if
$V$ is a nonempty open subset of $X$, then $V\cap U_\alpha$ is nonempty for all
$\alpha$, since then $V\cap U_\alpha$ is dense in $U_\alpha$ for all $\alpha$,
and consequently $V$ is dense in $X$. Now there is at least one index $\gamma$
such that $V\cap U_\gamma\neq\emp$, so $V\cap U_\gamma$ is dense in $U_\gamma$,
and as for all $\alpha$, $U_\alpha\cap V_\alpha\neq\emp$, we also have
$V\cap U_\alpha\cap U_\gamma\neq\emp$.
\end{env}

\begin{env}[2.1.5]
\label{env-0.2.1.5}
\oldpage{22}
Let $X$ be an irreducible space, $f$ a continuous map of $X$ into a topological
space $Y$. Then $f(X)$ is irreducible, and if $x$ is a generic point of $X$,
$f(x)$ is a generic point of $f(X)$ and hence also of $\overline{f(X)}$. In
particular, if in addition $Y$ is irreducible and with a single generic point
$y$, for $f(X)$ to be everywhere dense, it is necessary and sufficient that
$f(x)=y$.
\end{env}

\begin{env}[2.1.6]
\label{env-0.2.1.6}
Any irreducible subspace of a topological space $X$ is contained in a maximal
irreducible subspace, which is necessarily closed. Maximal irreducible subspaces
of $X$ are called the {\it irreducible components} of $X$. If $Z_1$, $Z_2$ are
two irreducible components distinct from the space $X$, $Z_1\cap Z_2$ is a
closed {\it rare} set in each of the subspaces $Z_1$, $Z_2$; in particular, if
an irreducible component of $X$ admits a generic point \hyperref[env-0.2.1.2]{(2.1.2)}, such a
point can not belong to any other irreducible component. If $X$ has only a
{\it finite} number of irreducible components $Z_i$
($1\leqslant i\leqslant n$), and if, for each $i$, we put
$U_i=\mathrm{C}(\bigcup_{j\neq i}Z_j)$, the $U_i$ are open, irreducible,
disjoint, and their union is dense in $X$. Let $U$ be an open subset of a
topological space $X$. If $Z$ is an irreducible subset of $X$ that intersects
with $U$, then $Z\cap U$ is open and dense in $Z$, thus irreducible; conversely,
for any irreducible closed subset $Y$ of $U$, the closure $\overline{Y}$ of $Y$
in $X$ is irreducible and $\overline{Y}\cap U=Y$. We conclude that there is a
{\it bijective correspondence} between the irreducible components of $U$ and
the irreducible components of $X$ which intersect $U$.
\end{env}

\begin{env}[2.1.7]
\label{env-0.2.1.7}
If a topological space $X$ is a union of a {\it finite} number of irreducible
closed subspaces $Y_i$, the irreducible components of $X$ are the maximal
elements of the set of $Y_i$, because if $Z$ is an irreducible closed subset of
$X$, then $Z$ is the union of the $Z\cap Y_i$, from which one sees that $Z$ must
be contained in one of the $Y_i$. Let $Y$ be a subspace of a topological space
$X$, and suppose that $Y$ has only a finite number of irreducible components
$Y_i$, ($1\leqslant i\leqslant n$); then the closures $\overline{Y_i}$ in $X$
are the irreducible components of $Y$.
\end{env}

\begin{env}[2.1.8]
\label{env-0.2.1.8}
Let $Y$ be an irreducible space admitting a single generic point $y$. Let $X$ be
a topological space, $f$ a continuous map from $X$ to $Y$. Then, for any
irreducible component $Z$ of $X$ intersecting $f^{-1}(y)$, $f(Z)$ is dense in
$Y$. The converse is not necessarily true; however, if $Z$ has a generic point
$z$, and if $f(Z)$ is dense in $Y$, we must have $f(z)=y$ \hyperref[env-0.2.1.5]{(2.1.5)}; in
addition, $Z\cap f^{-1}(y)$ is then the closure of $\{z\}$ in $f^{-1}(y)$ and is
therefore irreducible, and like as irreducible subset of $f^{-1}(y)$ containing
$z$ is necessarily contained in $Z$ \hyperref[env-0.2.1.6]{(2.1.6)}, $z$ is a generic point of
$Z\cap f^{-1}(y)$. As any irreducible component of $f^{-1}(y)$ is contained in
an irreducible component of $X$, we see that if any irreducible component $Z$ of
$X$ intersecting $f^{-1}(y)$ admits a generic point, then there is a
{\it bijective correspondence} between all these components and all the
irreducible components $Z\cap f^{-1}(y)$ of $f^{-1}(y)$, the generic points of
$Z$ being identical to those of $Z\cap f^{-1}(y)$.
\end{env}

\subsection{Noetherian spaces}
\label{subsection-noetherian-spaces}

\begin{env}[2.2.1]
\label{env-0.2.2.1}
\oldpage{23}
We say that a topological space $X$ is {\it Noetherian} if the set of open
subsets of $X$ satisfies the {\it maximal} condition, or, equivalently, if the
set of closed subsets of $X$ satisfies the {\it minimal} condition. We say that
$X$ is {\it locally Noetherian} if each $x\in X$ admits a neighborhood which is
a Noetherian subspace.
\end{env}

\begin{env}[2.2.2]
\label{env-0.2.2.2}
Let $E$ be an ordered set satisfying the {\it minimal} condition, and let
$\mathbf{P}$ be a property of the elements of $E$ subject to the following
condition: if $a\in E$ is such that for any $x<a$, $\mathbf{P}(x)$ is true, then
$\mathbf{P}(a)$ is true. Under these conditions, $\mathbf{P}(x)$ {\it is true
for all $x\in E$} (``principle of Noetherian recurrence''). Indeed, let $F$ be
the set of $x\in E$ for which $\mathbf{P}(x)$ is false; if $F$ were not empty,
it would have a minimal element $a$, and as then $\mathbf{P}(x)$ is true for all
$x<a$, $\mathbf{P}(a)$ would be true, which is a contradiction.

We will apply this principle in particular when $E$ is a {\it set of closed
subsets of a Noetherian space}.
\end{env}

\begin{env}[2.2.3]
\label{env-0.2.2.3}
Any subspace of a Noetherian space is Noetherian. Conversely, any topological
space that is a finite union of Noetherian subspaces is Noetherian.
\end{env}

\begin{env}[2.2.4]
\label{env-0.2.2.4}
Any Noetherian space is quasi-compact; conversely, any topological space in
which all open sets are quasi-compact is Noetherian.
\end{env}

\begin{env}[2.2.5]
\label{env-0.2.2.5}
A Noetherian space has only a {\it finite} number of irreducible components, as
we see by Noetherian recurrence.
\end{env}

\section{Supplement on sheaves}
\label{section-supplement-on-sheaves}

\subsection{Sheaves with values in a category}
\label{subsection-sheaves-with-values-in-cat}

\begin{env}[3.1.1]
\label{env-0.3.1.1}
Let $\C$ be a category, $(A_\alpha)_{\alpha\in I}$,
$(A_{\alpha\beta})_{(\alpha,\beta)\in I\times I}$ two families of objects of
$\C$ such that $A_{\beta\alpha}=A_{\alpha\beta}$, and
$(\rho_{\alpha\beta})_{(\alpha,\beta)\in I\times I}$ a family of morphisms
$\rho_{\alpha\beta}:A_\alpha\to A_{\alpha\beta}$. We say that a pair consisting
of an object $A$ of $\C$ and a family of morphisms $\rho_\alpha:A\to A_\alpha$
is a {\it solution to the universal problem} defined by the data of the
families $(A_\alpha)$, $(A_{\alpha\beta})$, and $(\rho_{\alpha\beta})$ if, for
every object $B$ of $\C$, the map which sends $f\in\Hom(B,A)$ to the family
$(\rho_\alpha\circ f)\in\Pi_\alpha\Hom(B,A_\alpha)$ is a {\it bijection} of
$\Hom(B,A)$ to the set of all $(f_\alpha)$ such that
$\rho_{\alpha\beta}\circ f_\alpha=\rho_{\beta\alpha}\circ f_\beta$ for any pair
of indices $(\alpha,\beta)$. If such a solution exists, it is unique up to an
isomorphism.
\end{env}

\begin{env}[3.1.2]
\label{env-0.3.1.2}
We will not recall the definition of a {\it presheaf} $U\mapsto\sh{F}(U)$ on a
topological space $X$ with values in a category $\C$ (G, I, 1.9); we say that
such a presheaf is a {\it sheaf with values in} $\C$ if it satifies the
following axiom:\\

(F) {\it For any covering $(U_\alpha)$ of an open set $U$ of $X$ by open sets
    $U_\alpha$ contained in $U$, if we denote by $\rho_\alpha$}
    (resp. $\rho_{\alpha\beta}$) {\it the restriction morphism}
    \[
      \sh{F}(U)\to\sh{F}(U_\alpha)
      \quad(\text{resp. }\sh{F}(U_\alpha)\to\sh{F}(U_\alpha\cap U_\beta)),
    \]
\oldpage{24}
    {\it the pair formed by $\sh{F}(U)$ and the family $(\rho_\alpha)$ are a
    solution to the universal problem for $(\sh{F}(U_\alpha))$,
    $(\sh{F}(U_\alpha\cap U_\beta))$, and $(\rho_{\alpha\beta})$ in
    \hyperref[env-0.3.1.1]{(3.1.1)}}\footnote{This is a special case of the more general
    notion of a (non-filtered) {\it projective limit} ({\it see} (T, I, 1.8)
    and the book in preparation announced in the introduction).}.\\

Equivalently, we can say that, for each object $T$ of $\C$, the family
$U\mapsto\Hom(T,\sh{F}(U))$ is a {\it sheaf of sets}.
\end{env}

\begin{env}[3.1.3]
\label{env-0.3.1.3}
Assume that $\C$ is the category defined by a
``type of structure with morphisms'' $\Sigma$, the objects of $\C$ being the
sets with structures of type $\Sigma$ and morphisms those of $\Sigma$. Suppose
that the category $\C$ also satisfies the following condition:\\

(E) If $(A,(\rho_\alpha))$ is a solution of a universal mapping problem {\it in
    the category $\C$} for families $(A_\alpha)$, $(A_{\alpha\beta})$,
    $(\rho_{\alpha\beta})$, then it is also a solution of the universal mapping
    problem for the same families {\it in the category of sets} (that is, when
    we consider $A$, $A_\alpha$, and $A_{\alpha\beta}$ as sets, $\rho_\alpha$
    and $\rho_{\alpha\beta}$ as functions)\footnote{It can be proved that it
    also means that the canonical functor $\C\to\cat{Set}$ {\it commutes with
    projective limits} (not necessarily filtered).}.\\

Under these conditions, the condition (F) gives that, when considered as a
presheaf {\it of sets}, $U\mapsto\sh{F}(U)$ is a {\it sheaf}. In addition, for
a map $u:T\to\sh{F}(U)$ to be a morphism of $\C$, it is necessary and
sufficient, according to (F), that each map $\rho_\alpha\circ u$ is a morphism
$T\to\sh{F}(U_\alpha)$, which means that the structure of type $\Sigma$ on
$\sh{F}(U)$ is the {\it initial structure} for the morphisms $\rho_\alpha$.
Conversely, suppose a presheaf $U\mapsto\sh{F}(U)$ on $X$, with values in $\C$,
is a {\it sheaf of sets} and satisfies the previous condition; it is then clear
that it satisfies (F), so it is a {\it sheaf with values in $\C$}.
\end{env}

\begin{env}[3.1.4]
\label{env-0.3.1.4}
When $\Sigma$ is a type of a group or ring structure, the fact that the presheaf
$U\mapsto\sh{F}(U)$ with values in $\C$ is a sheaf of {\it sets} implies
{\it ipso facto} that it is a sheaf with values in $\C$ (in other words, a
sheaf of groups or rings within the meaning of (G))\footnote{This is because in
the category $\C$, any morphism that is a {\it bijection} (as a map of sets) is
an {\it isomorphism}. This is no longer true when $\C$ is the category of
topological spaces, for example.}. But it is not the same when, for example,
$\C$ is the category of {\it topological rings} (with morphisms as continuous
homomorphisms): a sheaf with values in $\C$ is a sheaf of rings
$U\mapsto\sh{F}(U)$ such that for any open $U$ and any covering of $U$ by open
sets $U_\alpha\subset U$, the topology of the ring $\sh{F}(U)$ is to be
{\it the least fine} making the homomorpisms $\sh{F}(U)\to\sh{F}(U_\alpha)$
continuous. We will say in this case that $U\mapsto\sh{F}(U)$, considered as a
sheaf of rings (without a topology), is {\it underlying} the sheaf of
topological rings $U\mapsto\sh{F}(U)$. Morphisms $u_V:\sh{F}(V)\to\sh{G}(V)$
($V$ an arbitrary open subset of $X$) of sheaves of topological rings are
therefore homomorphisms of the underlying sheaves of rings, such that $u_V$ is
{\it continuous} for all open $V\subset X$; to distinguish them from any
homomorphisms of the sheaves of the underlying rings, we will call them
continuous homomorphisms of sheaves of topological rings. We have similar
definitions and conventions for sheaves of topological spaces or topological
groups.
\end{env}

\begin{env}[3.1.5]
\label{env-0.3.1.5}
\oldpage{25}
It is clear that for any category $\C$, if there is a presheaf (respectively a
sheaf) $\sh{F}$ on $X$ with values in $\C$ and $U$ is an open set of $X$, the
$\sh{F}(V)$ for open $V\subset U$ constitute a presheaf (or a sheaf) with values
in $\C$, which we call the presheaf (or sheaf) {\it induced} by $\sh{F}$ on $U$
and denote it by $\sh{F}|U$.

For any morphism $u:\sh{F}\to\sh{G}$ of presheaves on $X$ with values in $\C$,
we denote by $u|U$ the morphism $\sh{F}|U\to\sh{G}|U$ consisting of the $u_V$
for $V\subset U$.
\end{env}

\begin{env}[3.1.6]
\label{env-0.3.1.6}
Suppose now that the category $\C$ admits {\it inductive limits} (T, 1.8);
then, for any presheaf (and in particular any sheaf) $\sh{F}$ on $X$ with values
in $\C$ and each $x\in X$, we can define the {\it stalk} $\sh{F}_x$ as the
object of $\C$ defined by the inductive limit of the $\sh{F}(U)$ with respect to
the filtered set (for $\supset$) of the open neighborhoods $U$ of $x$ in $X$,
and the morphisms $\rho_U^V:\sh{F}(V)\to\sh{F}(U)$. If $u:\sh{F}\to\sh{G}$ is a
morphism of presheaves with values in $\C$, we define for each $x\in X$ the
morphism $u_x:\sh{F}_x\to\sh{G}_x$ as the inductive limit of
$u_U:\sh{F}(U)\to\sh{G}(U)$ with respect to all open neighborhoods of $x$; we
thus define $\sh{F}_x$ as a covariant functor in $\sh{F}$, with values in $\C$,
for all $x\in X$.

When $\C$ is further defined by a kind of structure with morphisms $\Sigma$, we
call {\it sections over $U$} of a {\it sheaf} $\sh{F}$ with values in $\C$ the
elements of $\sh{F}(U)$, and we write $\Gamma(U,\sh{F})$ instead of $\sh{F}(U)$;
for $s\in\Gamma(U,\sh{F})$, $V$ an open set contained in $U$, we write $s|V$
instead of $\rho_V^U(s)$; for all $x\in U$, the canonical image of $s$ in
$\sh{F}_x$ is the {\it germ} of $s$ at the point $x$, denoted by $s_x$
({\it we will never replace the notation $s(x)$ in this sense}, this notation
being reserved for another notion relating to sheaves which will be considered
in this treatise \hyperref[env-0.5.5.1]{(5.5.1)}).

If then $u:\sh{F}\to\sh{G}$ is a morphism of sheaves with values in $\C$, we
will write $u(s)$ instead of $u_V(s)$ for all $s\in\Gamma(V,\sh{F})$.

If $\sh{F}$ is a sheaf of commutative groups, or rings, or modules, we say that
the set of $x\in X$ such that $\sh{F}_x\neq\{0\}$ is the {\it support} of
$\sh{F}$, denoted $\Supp(\sh{F})$; this set is not necessarily closed in $X$.

When $\C$ is defined by a type of structure with morphisms, {\it we
systematically refrain from using the point of view of ``\'etal\'e spaces''} in
terms of relating to sheaves with values in $\C$; in other words, we will never
consider a sheaf as a topological space (nor even as the whole union of its
stalks), and we will not consider also a morphism $u:\sh{F}\to\sh{G}$ of such
sheaves on $X$ as a continuous map of topological spaces.
\end{env}

\subsection{Presheaves on an open basis}
\label{subsection-presheaves-on-open-basis}

\begin{env}[3.2.1]
\label{env-0.3.2.1}
We will restrict to the following categories $\C$ admitting {\it projective
limits} (generalized, that is, corresponding to not necessarily filtered
preordered sets, cf. (T, 1.8)). Let $X$ be a topological space, $\mathfrak{B}$
an open basis for the topology of $X$. We will call a {\it presheaf on
$\mathfrak{B}$, with values in $\C$}, a family of objects $\sh{F}(U)\in\C$,
corresponding to each $U\in\mathfrak{B}$, and a family of morphisms $\rho_U^V:\sh{F}(V)\to\sh{F}(U)$ defined for any pair $(U,V)$ of elements of
$\mathfrak{B}$ such that $U\subset V$,
\oldpage{26}
with the conditions $\rho_U^U=$ identity and $\rho_U^W=\rho_U^V\circ\rho_V^W$ if
$U$, $V$, $W$ in $\mathfrak{B}$ are such that $U\subset V\subset W$. We can
associate a {\it presheaf with values in $\C$}: $U\mapsto\sh{F}(U)$ in the
ordinary sense, taking for all open $U$, $\sh{F}'(U)=\varprojlim\sh{F}(V)$,
where $V$ runs through the ordered set (for $\subset$, {\it not filtered} in
general) of $V\in\mathfrak{B}$ sets such that $V\subset U$, since the $\sh(V)$
form a projective system for the $\rho_V^W$ ($V\subset W\subset U$,
$V\in\mathfrak{B}$, $W\in\mathfrak{B}$). Indeed, if $U$, $U'$ are two open sets
of $X$ such that $U\subset U'$, we define ${\rho'}_U^{U'}$ as the projective
limit (for $V\subset U$) of the canonical morphisms $\sh{F}'(U')\to\sh{F}(V)$,
in other words the unique morphism $\sh{F}'(U')\to\sh{F}'(U)$, which, when
composed with the canonical morphisms $\sh{F}'(U)\to\sh{F}(V)$, gives the
canonical morphisms $\sh{F}'(U')\to\sh{F}(V)$; the verification of the
transitivity of ${\rho'}_U^{U'}$ is then immediate. Moreover, if
$U\in\mathfrak{B}$, the canonical morphism $\sh{F}'(U)\to\sh{F}(U)$ is an
isomorphism, allowing us to identify these two objects\footnote{If $X$ is a
{\it Noetherian} space, we can still define $\sh{F}'(U)$ and show that it is a
presheaf (in the ordinary sense) when one supposes only that $\C$ admits
projective limits for {\it finite} projective systems. Indeed, if $U$ is any
open set of $X$, there is a {\it finite} covering $(V_i)$ of $U$ consisting of
sets of $\mathfrak{B}$; for every couple $(i,j)$ of indices, let $(V_{ijk})$ be
a finite covering of $V_i\cap V_j$ formed by sets of $\mathfrak{B}$. Let $I$ be
the set of $i$ and triples $(i,j,k)$, ordered only by the relations $i>(i,j,k)$,
$j>(i,j,k)$; we then take $\sh{F}'(U)$ to be the projective limit of the system
of $\sh{F}(V_i)$ and $\sh{F}(V_{ijk})$; it is easy to verify that this does not
depend on the coverings $(V_i)$ and $(V_{ijk})$ and that $U\mapsto\sh{F}'(U)$ is
a presheaf.}.
\end{env}

\begin{env}[3.2.2]
\label{env-0.3.2.2}
For the presheaf $\sh{F}'$ thus defined to be a {\it sheaf}, it is necessary
and sufficient that the presheaf $\sh{F}$ on $\mathfrak{B}$ satisfies the
condition:\\

(F$_0$) {\it For any covering $(U_\alpha)$ of $U\in\mathfrak{B}$ by sets
        $U_\alpha\in\mathfrak{B}$ contained in $U$, and for any object $T\in\C$,
        the map which sends $f\in\Hom(T,\sh{F}(U))$ to the family
        $(\rho_{U_\alpha}^U\circ f)\in\Pi_\alpha\Hom(T,\sh{F}(U_\alpha))$ is a
        bijection from $\Hom(T,\sh{F}(U))$ to the set of all $(f_\alpha)$ such
        that $\rho_V^{U_\alpha}\circ f_\alpha=\rho_V^{U_\beta}\circ f_\beta$ for
        any pair of indices $(\alpha,\beta)$ and any $V\in\mathfrak{B}$ such
        that $V\subset U_\alpha\cap U_\beta$\footnote{It also means that the
        pair formed by $\sh{F}(U)$ and the $\rho_\alpha=\rho_{U_\alpha}^U$ is a
        {\it solution to the universal problem} defined in \hyperref[env-0.3.1.1]{(3.1.1)} by
        the data of $A_\alpha=\sh{F}(U_\alpha)$, $A_{\alpha\beta}=\Pi\sh{F}(V)$
        (for $V\in\mathfrak{B}$ such that $V\subset U_\alpha\cap U_\beta$) and
        $\rho_{\alpha\beta}=(\rho_V''):\sh{F}(U_\alpha)\to\Pi\sh{F}(V)$ defined
        by the condition that for $V\in\mathfrak{B}$, $V'\in\mathfrak{B}$,
        $W\in\mathfrak{B}$, $V\cup V'\subset U_\alpha\cap U_\beta$,
        $W\subset V\cap V'$,
        $\rho_W^V\circ\rho_V''=\rho_W^{V'}\circ\rho_{V'}''$.}.}\\

The condition is obviously necessary. To show that it is sufficient, consider
first a second basis $\mathfrak{B}'$ of the topology of $X$, {\it contained in}
$\mathfrak{B}$, and show that if $\sh{F}''$ denotes the presheaf induced by the
subfamily $(\sh{F}(V))_{V\in\mathfrak{B}'}$, $\sh{F}''$ is {\it canonically
isomorphic} to $\sh{F}'$. Indeed, first the projective limit (for
$V\in\mathfrak{B}'$, $V\subset U$) of the canonical morphisms
$\sh{F}'(U)\to\sh{F}(V)$ is a morphism $\sh{F}'(U)\to\sh{F}''(U)$ for all open
$U$. If $U\in\mathfrak{B}$, this morphism is an isomorphism, because by
hypothesis the canonical morphisms $\sh{F}''(U)\to\sh{F}(V)$ for
$V\in\mathfrak{B}'$, $V\subset U$, factorize as
$\sh{F}''(U)\to\sh{F}(U)\to\sh{F}(V)$, and it is immediate to see that the
composition of morphisms $\sh{F}(U)\to\sh{F}''(U)$ and $\sh{F}''(U)\to\sh{F}(U)$
thus defined are the identities. This being so, for all open $U$, the morphisms
$\sh{F}''(U)\to\sh{F}''(W)=\sh{F}(W)$ for $W\in\mathfrak{B}$ and $W\subset U$
satisfy the conditions characterizing the projective limit of $\sh{F}(W)$
($W\in\mathfrak{B}$, $W\subset U$), which proves our assertion given the
uniqueness of a projective limit up to isomorphism.

This posed, let $U$ be any open set of $X$, $(U_\alpha)$ a covering of $U$ by
the open sets contained in $U$, and $\mathfrak{B}'$ the subfamily of
$\mathfrak{B}$ formed by the sets
\oldpage{27}
of $\mathfrak{B}$ contained in at least one $U_\alpha$; it is clear that
$\mathfrak{B}'$ is still a basis of the topology of $X$, so $\sh{F}'(U)$
(resp. $\sh{F}''(U_\alpha)$) is the projective limit of $\sh{F}(V)$ for
$V\in\mathfrak{B}'$ and $V\subset U$ (resp., $V\subset U_\alpha$), the axiom (F)
is then immediately verified by virtue of the definition of the projective
limit.

When (F$_0$) is satisfied, we will say by abuse of language that the presheaf
$\sh{F}$ on the basis $\mathfrak{B}$ is a sheaf.
\end{env}

\begin{env}[3.2.3]
\label{env-0.3.2.3}
Let $\sh{F}$, $\sh{G}$ be two presheaves on a basis $\mathfrak{B}$, with values
in $\C$; we define a {\it morphism} $u:\sh{F}\to\sh{G}$ as a family
$(u_V)_{V\in\mathfrak{B}}$ of morphisms $u_V:\sh{F}(V)\to\sh{G}(V)$ satisfying
the usual compatibility conditions with the restriction morphisms $\rho_V^W$.
With the notation of \hyperref[env-0.3.2.1]{(3.2.1)}, we have a morphism
$u':\sh{F}'\to\sh{G}'$ of (ordinary) presheaves by taking for $u_U'$ the
projective limit of the $u_V$ for $V\in\mathfrak{B}$ and $V\subset U$; the
verification of the compatibility conditions with the ${\rho'}_U^{U'}$ follows
from the functorial properties of the projective limit.
\end{env}

\begin{env}[3.2.4]
\label{env-0.3.2.4}
If the category $\C$ admits inductive limits, and if $\sh{F}$ is a presheaf on
the basis $\mathfrak{B}$, with values in $\C$, for each $x\in X$ the
neighborhoods of $x$ belonging to $\mathfrak{B}$ form a cofinal set
(for $\supset$) in the set of neighborhoods of $x$, therefore, if $\sh{F}'$ is
the (ordinary) presheaf corresponding to $\sh{F}$, the stalk $\sh{F}_x'$ is
equal to $\varinjlim_{\mathfrak{B}}\sh{F}(V)$ over the set of $V\in\mathfrak{B}$
containing $x$. If $u:\sh{F}\to\sh{G}$ is morphism of presheaves on
$\mathfrak{B}$ with values in $\C$, $u':\sh{F}'\to\sh{G}'$ the corresponding
morphism of ordinary presheaves, $u_x'$ is likewise the inductive limit of the
morphisms $u_V:\sh{F}(V)\to\sh{G}(V)$ for $V\in\mathfrak{B}$, $x\in V$.
\end{env}

\begin{env}[3.2.5]
\label{env-0.3.2.5}
We return to the general conditions of \hyperref[env-0.3.2.1]{(3.2.1)}. If $\sh{F}$ is an
ordinary {\it sheaf} with values in $\C$, $\sh{F}_1$ the sheaf {\it on
$\mathfrak{B}$} obtained by the restriction of $\sh{F}$ to $\mathfrak{B}$, then
the ordinary sheaf $\sh{F}_1'$ obtained from $\sh{F}_1$ by the procedure of
\hyperref[env-0.3.2.1]{(3.2.1)} is canonically isomorphic to $\sh{F}$, by virtue of the
condition (F) and the uniqueness properties of the projective limit. We identify
the ordinary sheaf $\sh{F}$ with $\sh{F}_1'$.

If $\sh{G}$ is a second (ordinary) sheaf on $X$ with values in $\C$, and
$u:\sh{F}\to\sh{G}$ a morphism, the preceding remark shows that the data of the
$u_V:\sh{F}(V)\to\sh{G}(V)$ {\it for only the $V\in\mathfrak{B}$} completely
determines $u$; conversely, it is sufficient, the $u_V$ being given for
$V\in\mathfrak{B}$, to verify the commutative diagram with the restriction
morphisms $\rho_V^W$ for $V\in\mathfrak{B}$, $W\in\mathfrak{B}$, and
$V\subset W$, for there to exist a morphism $u'$ and a unique $\sh{F}$ in
$\sh{G}$ such that $u_V'=u_V$ for each $V\in\mathfrak{B}$ \hyperref[env-0.3.2.3]{(3.2.3)}.
\end{env}

\begin{env}[3.2.6]
\label{env-0.3.2.6}
Suppose that $\C$ admits projective limits. Then the category of {\it sheaves
on $X$ with values in $\C$} admits {\it projective limits}; if
$(\sh{F}_\lambda)$ is a projective system of sheaves on $X$ with values in $\C$,
the $\sh{F}(U)=\varprojlim_\lambda\sh{F}_\lambda(U)$ indeed define a presheaf
with values in $\C$, and the verification of the axiom (F) follows from the
transitivity of projective limits; the fact that $\sh{F}$ is then the projective
limit of the $\sh{F}_\lambda$ is immediate.

When $\C$ is the category of sets, for each projective system
$(\mathfrak{H}_\lambda)$ such
\oldpage{28}
that $\mathfrak{H}_\lambda$ is a {\it subsheaf} of $\sh{F}_\lambda$ for each
$\lambda$, $\varprojlim_\lambda\mathfrak{H}_\lambda$ canonically identifies with
a {\it subsheaf} of $\varprojlim_\lambda\sh{F}_\lambda$. If $\C$ is the
category of abelian groups, the covariant functor
$\varprojlim_\lambda\sh{F}_\lambda$ is {\it additive} and {\it left exact}.
\end{env}

\subsection{Gluing sheaves}
\label{subsection-gluing-sheaves}

\begin{env}[3.3.1]
\label{env-0.3.3.1}
Suppose still that the category $\C$ admits (generalized) projective limits. Let
$X$ be a topological space, $\mathfrak{U}=(U_\lambda)_{\lambda\in L}$ an open
cover of $X$, and for each $\lambda\in L$, let $\sh{F}_\lambda$ be a sheaf on
$U_\lambda$, with values in $\C$; for each pair of indices $(\lambda,\mu)$,
suppose that we are given an {\it isomorphism}
$\theta_{\lambda\mu}:\sh{F}_\mu|(U_\lambda\cap U_\mu)
  \isoto\sh{F}|(U_\lambda\cap U_\mu)$; in addition, suppose that for each triple
$(\lambda,\mu,\nu)$, if we denote by $\theta_{\lambda\mu}'$, $\theta_{\mu\nu}'$,
$\theta_{\lambda\nu}'$ the restrictions of $\theta_{\lambda\mu}$,
$\theta_{\mu\nu}$, $\theta_{\lambda\nu}$ to $U_\lambda\cap U_\mu\cap U_\nu$,
then we have $\theta_{\lambda\nu}'=\theta_{\lambda\mu}'\circ\theta_{\mu\nu}'$
({\it gluing condition} for the $\theta_{\lambda\mu}$). Then there exists a
sheaf $\sh{F}$ on $X$, with values in $\C$, and for each $\lambda$ an
isomorphism $\eta_\lambda:\sh{F}|U_\lambda\isoto\sh{F}_\lambda$ such that, for
each pair $(\lambda,\mu)$, if we denote by $\eta_\lambda'$ and $\eta_\mu'$ the
restrictions of $\eta_\lambda$ and $\eta_\mu$ to $U_\lambda\cap U_\mu$, then we
have $\theta_{\lambda\mu}=\eta_\lambda'\circ{\eta_\mu'}^{-1}$; in addition,
$\sh{F}$ and the $\eta_\lambda$ are determined up to unique isomorphism by these
conditions. The uniqueness indeed follows immediately from \hyperref[env-0.3.2.5]{(3.2.5)}. To
establish the existence of $\sh{F}$, denote by $\mathfrak{B}$ the open basis
consisting of the open sets contained in at least one $U_\lambda$, and for each
$U\in\mathfrak{B}$, choose (by the Hilbert function $\tau$) one of the
$\sh{F}_\lambda(U)$ for one of the $\lambda$ such that $U\subset U_\lambda$; if
we denote this object by $\sh{F}(U)$, the $\rho_U^V$ for $U\subset V$,
$U\in\mathfrak{B}$, $V\in\mathfrak{B}$ are defined in an evident way (by means
of the $\theta_{\lambda\mu}$), and the transitivity conditions is a consequence
of the gluing condition; in addition, the verification of (F$_0$) is immediate,
so the presheaf on $\mathfrak{B}$ thus clearly defines a sheaf, and we deduce by
the general procedure \hyperref[env-0.3.2.1]{(3.2.1)} an (ordinary) sheaf still denoted
$\sh{F}$ and which answers the question. We say that $\sh{F}$ is obtained by
{\it gluing the $\sh{F}_\lambda$ by means of the $\theta_{\lambda\mu}$} and we
usually identify the $\sh{F}_\lambda$ and $\sh{F}|U_\lambda$ by means of the
$\eta_\lambda$.

It is clear that each sheaf $\sh{F}$ on $X$ with values in $\C$ can be
considered as being obtained by the gluing of the sheaves
$\sh{F}_\lambda=\sh{F}|U_\lambda$ (where $(U_\lambda)$ is an arbitrary open
cover of $X$), by means of the isomorphisms $\theta_{\lambda\mu}$ reduced to the
identity.
\end{env}

\begin{env}[3.3.2]
\label{env-0.3.3.2}
With the same notations, let $\sh{G}_\lambda$ be a second sheaf on $U_\lambda$
(for each $\lambda\in L$) with values in $\C$, and for each pair $(\lambda,\mu)$
let us be given an isomorphism
$\omega_{\lambda\mu}:\sh{G}_\mu|(U_\lambda\cap U_\mu)
  \isoto\sh{G}_\lambda|(U_\lambda\cap U_\mu)$, these isomorphisms satisfying the
gluing condition. Finally, suppose that we are given for each $\lambda$ a
morphism $u_\lambda:\sh{F}_\lambda\to\sh{G}_\lambda$, and that the diagrams
\[
  \xymatrix{
    \sh{F}_\mu|(U_\lambda\cap U_\mu)\ar[r]^{u_\mu}\ar[d] &
    \sh{G}_\mu|(U_\lambda\cap U_\mu)\ar[d]\\
    \sh{F}_\lambda|(U_\lambda\cap U_\mu)\ar[r]^{u_\lambda} &
    \sh{G}_\lambda|(U_\lambda\cap U_\mu)
  }
  \tag{3.3.2.1}
\]
are commutative. Then, if $\sh{G}$ is obtained by gluing the $\sh{G}_\lambda$ by
means of the $\omega_{\lambda\mu}$, there exists a unique morphism
$u:\sh{F}\to\sh{G}$ such that the diagrams
\oldpage{29}
\[
  \xymatrix{
    \sh{F}|U_\lambda\ar[r]^{u|U_\lambda}\ar[d] &
    \sh{G}|U_\lambda\ar[d]\\
    \sh{F}_\lambda\ar[r]^{u_\lambda} &
    \sh{G}_\lambda
  }
\]
are commutative; this follows immediately from \hyperref[env-0.3.2.3]{(3.2.3)}. The
correspondence between the family $(u_\lambda)$ and $u$ is in a functorial
bijection with the subset of $\Pi_\lambda\Hom(\sh{F}_\lambda,\sh{G}_\lambda)$
satisfying the conditions (3.3.2.1) on $\Hom(\sh{F},\sh{G})$.
\end{env}

\begin{env}[3.3.3]
\label{env-0.3.3.3}
With the notations of \hyperref[env-0.3.3.1]{(3.3.1)}, let $V$ be an open set of $X$; it is
immediate that the restrictions to $V\cap U_\lambda\cap U_\mu$ of the
$\theta_{\lambda\mu}$ satisfy the gluing condition for the induced sheaves
$\sh{F}_\lambda|(V\cap U_\lambda)$ and that the sheaves on $V$ obtained by
gluing the latter identifies canonically with $\sh{F}|V$.
\end{env}

\subsection{Direct images of presheaves}
\label{subsection-direct-images-of-presheaves}

\begin{env}[3.4.1]
\label{env-0.3.4.1}
Let $X$, $Y$ be two topological spaces, $\psi:X\to Y$ a continuous map. Let
$\sh{F}$ be a presheaf on $X$ with values in a category $\C$; for each open
$U\subset Y$, let $\sh{G}(U)=\sh{F}(\psi^{-1}(U))$, and if $U$, $V$ are two open
subsets of $Y$ such that $U\subset V$, let $\rho_U^V$ be the morphism
$\sh{F}(\psi^{-1}(V))\to\sh{F}(\psi^{-1}(U))$; it is immediate that the
$\sh{G}(U)$ and the $\rho_U^V$ define a {\it presheaf} on $Y$ with values in
$\C$, that we call the {\it direct image of $\sh{F}$ by $\psi$} and we denote
it by $\psi_*(\sh{F})$. If $\sh{F}$ is a sheaf, we immediately verify the axiom
(F) for the presheaf $\sh{G}$, so $\psi_*(\sh{F})$ is a sheaf.
\end{env}

\begin{env}[3.4.2]
\label{env-0.3.4.2}
Let $\sh{F}_1$, $\sh{F}_2$ be two presheaves of $X$ with values in $\C$, and let
$u:\sh{F}_1\to\sh{F}_2$ be a morphism. When $U$ varies over the set of open
subsets of $Y$, the family of morphisms
$u_{\psi^{-1}(U)}:\sh{F}_1(\psi^{-1}(U))\to\sh{F}_2(\psi^{-1}(U))$ satisfies the
compatibility conditions with the restriction morphisms, and as a result defines
a morphism $\psi_*(u):\psi_*(\sh{F}_1)\to\psi_*(\sh{F}_2)$. If
$v:\sh{F}_2\to\sh{F}_3$ is a morphism from $\sh{F}_2$ to a third presheaf on $X$
with values in $\C$, we have $\psi_*(v\circ u)=\psi_*(v)\circ\psi_*(u)$; in
other words, $\psi_*(\sh{F})$ is a {\it covariant functor} in $\sh{F}$, from
the category of presheaves (resp. sheaves) on $X$ with values in $\C$, to that
of presheaves (resp. sheaves) on $Y$ with values in $\C$.
\end{env}

\begin{env}[3.4.3]
\label{env-0.3.4.3}
Let $Z$ be a third topological space, $\psi':Y\to Z$ a continuous map, and let
$\psi''=\psi'\circ\psi$. It is clear that we have
$\psi_*''(\sh{F})=\psi_*'(\psi_*(\sh{F}))$ for each presheaf $\sh{F}$ on $X$
with values in $\C$; in addition, for each morphism $u:\sh{F}\to\sh{G}$ of such
presheaves, we have $\psi_*''(u)=\psi_*'(\psi_*(u))$. In other words, $\psi_*''$
is the {\it composition} of the functors $\psi_*'$ and $\psi_*$, and this can
be written as
\[
  (\psi'\circ\psi)_*=\psi_*'\circ\psi_*.
\]

In addition, for each open set $U$ of $Y$, the image under the restriction
$\psi|\psi^{-1}(U)$ of the induced presheaf $\sh{F}|\psi^{-1}(U)$ is none other
than the induced presheaf $\psi_*(\sh{F})|U$.
\end{env}

\begin{env}[3.4.4]
\label{env-0.3.4.4}
Suppose that the category $\C$ admits inductive limits, and let $\sh{F}$ be a
presheaf on $X$ with values in $\C$; for all $x\in X$, the morphisms
$\Gamma(\psi^{-1}(U),\sh{F})\to\sh{F}_x$ ($U$ an open neighborhood of $\psi(x)$
in $Y$) form an inductive limit, which gives by passing
\oldpage{30}
to the limit a morphism $\psi_x:(\psi_*(\sh{F}))_{\psi(x)}\to\sh{F}_x$ of the
stalks; in general, these morphisms are {\it neither injective or surjective}.
It is functorial; indeed, if $u:\sh{F}_1\to\sh{F}_2$ is a morphism of presheaves
on $X$ with values in $\C$, the diagram
\[
  \xymatrix{
    (\psi_*(\sh{F}_1))_{\psi(x)}\ar[r]^{\psi_x}\ar[d]_{(\psi_*(u))_{\psi(x)}} &
    (\sh{F}_1)_x\ar[d]^{u_x}\\
    (\psi_*(\sh{F}_2))_{\psi(x)}\ar[r]^{\psi_x} &
    (\sh{F}_2)_x
  }
\]
is commutative. If $Z$ is a third topological space, $\psi':Y\to Z$ a continuous
map, and $\psi''=\psi'\circ\psi$, then we have
$\psi_x''=\psi_x\circ\psi_{\psi(x)}'$ for $x\in X$.
\end{env}

\begin{env}[3.4.5]
\label{env-0.3.4.5}
Under the hypotheses of \hyperref[env-0.3.4.4]{(3.4.4)}, suppose in addition that $\psi$ is a
{\it homeomorphism} from $X$ to the subspace $\psi(X)$ of $Y$. Then, for each
$x\in X$, $\psi_x$ is an {\it isomorphism}. This applies in particular to the
canonical injection $j$ of a subset $X$ of $Y$ into $Y$.
\end{env}

\begin{env}[3.4.6]
\label{env-0.3.4.6}
Suppose that $\C$ be the category of groups, or of rings, etc. If $\sh{F}$ is a
sheaf on $X$ with values in $\C$, of support $S$, and if
$y\not\in\overline{\psi(S)}$, then it follows from the definition of
$\psi_*(\sh{F})$ that $(\psi_*(\sh{F}))_y=\{0\}$, or in other words, that the
support of $\psi_*(\sh{F})$ is contained in $\overline{\psi(S)}$; but it is not
necessarily contined in $\psi(S)$. Under the same hypotheses, if $j$ is the
canonical injection of a subset $X$ of $Y$ into $Y$, the sheaf $j_*(\sh{F})$
induces $\sh{F}$ on $X$; if moreover $X$ is {\it closed} in $Y$, $j_*(\sh{F})$
is the sheaf on $Y$ which induces $\sh{F}$ on $X$ and $0$ on $Y-X$
(G, II, 2.9.2), but it is in general distinct from the latter when we suppose
that $X$ is locally closed but not closed.
\end{env}

\subsection{Inverse images of presheaves}
\label{subsection-inverse-images-of-presheaves}

\begin{env}[3.5.1]
\label{env-0.3.5.1}
Under the hypotheses of \hyperref[env-0.3.4.1]{(3.4.1)}, if $\sh{F}$ (resp. $\sh{G}$) is a
presheaf on $X$ (resp. $Y$) with values in $\C$, each morphism
$u:\sh{G}\to\psi_*(\sh{F})$ of presheaves on $Y$ is then called a
{\it $\phi$-morphism} from $\sh{G}$ to $\sh{F}$, and we denote it also by
$\sh{G}\to\sh{F}$. We denote also by $\Hom_\phi(\sh{G},\sh{F})$ the set of
$\Hom_Y(\sh{G},\psi_*(\sh{F}))$ the $\psi$-morphisms from $\sh{G}$ to $\sh{F}$.
For each pair $(U,V)$, where $U$ is an open set of $X$, $V$ an open set of $Y$
such that $\psi(U)\subset V$, we have a morphism $u_{U,V}:\sh{G}(U)\to\sh{F}(U)$
by composing the restriction morphism $\sh{F}(\psi^{-1}(V))\to\sh{F}(U)$ and the
morphism $u_V:\sh{G}(V)\to\psi_*(\sh{F})(V)=\sh{F}(\psi^{-1}(V))$; it is
immediate that these morphisms render commutative the diagrams
\[
  \xymatrix{
    \sh{G}(V)\ar[r]^{u_{U,V}}\ar[d] &
    \sh{F}(U)\ar[d]\\
    \sh{G}(V')\ar[r]^{u_{U',V'}} &
    \sh{F}(U')
  }
  \tag{3.5.1.1}
\]
for $U'\subset U$, $V'\subset V$, $\psi(U')\subset V'$. Conversely, the data of
a family $(u_{U,V})$ of morphisms rendering commutative the diagrams (3.5.1.1)
define a $\psi$-morphism $u$, since it suffices to take
$u_V=u_{\psi^{-1}(V),V}$.

\oldpage{31}
If the category $\C$ admits (generalized) projective limits, and if
$\mathfrak{B}$, $\mathfrak{B}'$ are bases for the topologies of $X$ and $Y$
respectively, to define a $\psi$-morphism $u$ of {\it sheaves}, we can restrict
to giving the $u_{U,V}$ for $U\in\mathfrak{B}$, $V\in\mathfrak{B}'$, and
$\psi(U)\subset V$, satisfying the compatibility conditions of (3.5.1.1) for
$U$, $U'$ in $\mathfrak{B}$ and $V$, $V'$ in $\mathfrak{B}'$; it indeed suffices
to define $u_W$, for each open $W\subset Y$, as the projective limit of the
$u_{U,V}$ for $V\in\mathfrak{B}'$ and $V\subset W$, $U\in\mathfrak{B}$ and
$\psi(U)\subset V$.

When the category $\C$ admits inductive limits, we have, for each $x\in X$, a
morphism $\sh{G}(V)\to\sh{F}(\psi^{-1}(V))\to\sh{F}_x$, for each open
neighborhood $V$ of $\psi(x)$ in $Y$, and these morphisms form an inductive
system which gives by passing to the limit a morphism
$\sh{G}_{\psi(x)}\to\sh{F}_x$.
\end{env}

\begin{env}[3.5.2]
\label{env-0.3.5.2}
Under the hypotheses of \hyperref[env-0.3.4.3]{(3.4.3)}, let $\sh{F}$, $\sh{G}$, $\sh{H}$ be
presheaves with values in $\C$ on $X$, $Y$, $Z$ respectively, and let
$u:\sh{G}\to\psi_*(\sh{F})$, $v:\sh{H}\to\psi_*'(\sh{G})$ be a $\psi$-morphism
and a $\psi'$-morphism respectively. We obtain a $\psi''$-morphism
$w:\sh{H}\xrightarrow{v}\psi_*'(\sh{G})\xrightarrow{\psi_*'(u)}
  \psi_*'(\psi_*(\sh{F}))=\psi_*''(\sh{F})$, that we call, by definition, the
{\it composition} of $u$ and $v$. We can therefore consider the pairs
$(X,\sh{F})$ consisting of a topological space $X$ and a presheaf $\sh{F}$ on
$X$ (with values in $\C$) as forming a {\it category}, the morphisms being the
pairs $(\psi,\theta):(X,\sh{F})\to(Y,\sh{G})$ consisting of a continuous map
$\psi:X\to Y$ and of a $\psi$-morphism $\theta:\sh{G}\to\sh{F}$.
\end{env}

\begin{env}[3.5.3]
\label{env-0.3.5.3}
Let $\psi:X\to Y$ be a continuous map, $\sh{G}$ a {\it presheaf} on $Y$ with
values in $\C$. We call the {\it inverse image of $\sh{G}$ under $\psi$} the
pair $(\sh{G}',\rho)$, where $\sh{G}'$ is a {\it sheaf} on $X$ with values in
$\C$, and $\rho:\sh{G}\to\sh{G}'$ a $\psi$-morphism (in other words a
homomorphism $\sh{G}\to\psi_*(\sh{G}')$) such that, for each {\it sheaf}
$\sh{F}$ on $X$ with values in $\C$, the map
\[
  \Hom_X(\sh{G}',\sh{F})\longrightarrow\Hom_\psi(\sh{G},\sh{F})
  \longrightarrow\Hom_Y(\sh{G},\psi_*(\sh{F}))
  \tag{3.5.3.1}
\]
sending $v$ to $\psi_*(v)\circ\rho$, is a {\it bijection}; this map, being
functorial in $\sh{F}$, then defines an isomorphism of functors in $\sh{F}$. The
pair $(\sh{G}',\rho)$ is the solution of a universal problem, and we say it is
{\it determined up to unique isomorphism} when it exists. We then write
$\sh{G}'=\psi^*(\sh{G})$, $\rho=\rho_\sh{G}$, and by abuse of language, we say
that $\psi^*(\sh{G})$ is {\it the inverse image sheaf} of $\sh{G}$ under
$\psi$, and we agree that $\psi^*(\sh{G})$ is considered as equipped with a
{\it canonical $\psi$-morphism $\rho_\sh{G}:\sh{G}\to\psi^*(\sh{G})$}, that is
to say the {\it canonical homomorphism} of presheaves on $Y$:
\[
  \rho_\sh{G}:\sh{G}\longrightarrow\psi_*(\psi^*(\sh{G})).
  \tag{3.5.3.2}
\]

For each homomorphism $v:\psi^*(\sh{G})\to\sh{F}$ (where $\sh{F}$ is a sheaf on
$X$ with values in $\C$), we put
$v^\flat=\psi_*(v)\circ\rho_\sh{G}:\sh{G}\to\psi_*(\sh{F})$. By definition,
{\it each} morphism of presheaves $u:\sh{G}\to\psi_*(\sh{F})$ is of the form
$v^\flat$ for a unique $v$, which we will denote $u^\sharp$. In other words,
each morphism $u:\sh{G}\to\psi_*(\sh{F})$ of presheaves factorizes in a unique
way as
\[
  u:\sh{G}\xrightarrow{\rho_\sh{G}}\psi_*(\psi^*(\sh{G}))
  \xrightarrow{\psi_*(u^\sharp)}\psi_*(\sh{F}).
  \tag{3.5.3.3}
\]
\end{env}

\begin{env}[3.5.4]
\label{env-0.3.5.4}
\oldpage{32}
Suppose now that the category $\C$ be such\footnote{In the book mentioned in the
introduction, we will give very general conditions on the category $\C$ ensuring
the existence of inverse images of presheaves with values in $\C$.} that
{\it each} presheaf $\sh{F}$ on $Y$ with values in $\C$ admits an inverse image
under $\psi$, and we denote it by $\psi^*(\sh{G})$.

We will see that we can define $\psi^*(\sh{G})$ as a {\it covariant functor} in
$\sh{G}$, from the category of presheaves on $Y$ with values in $\C$, to that of
sheaves on $X$ with values in $\C$, in such a way that the isomorphism
$v\mapsto v^\flat$ is an {\it isomorphism of bifunctors}
\[
  \Hom_X(\psi^*(\sh{G}),\sh{F})\isoto\Hom_Y(\sh{G},\psi_*(\sh{F}))
  \tag{3.5.4.1}
\]
in $\sh{G}$ and $\sh{F}$.

Indeed, for each morphism $w:\sh{G}_1\to\sh{G}_2$ of presheaves on $Y$ with
values in $\C$, consider the composite morphism
$\sh{G}_1\xrightarrow{w}\sh{G}_2
  \xrightarrow{\rho_{\sh{G}_2}}\psi_*(\psi^*(\sh{G}_2))$; to it corresponds a
morphism $(\rho_{\sh{G}_2}\circ w)^\sharp:\psi^*(\sh{G}_1)\to\psi^*(\sh{G}_2)$,
that we denote by $\psi^*(w)$. We therefore have, according to (3.5.3.3),
\[
  \psi_*(\psi^*(w))\circ\rho_{\sh{G}_1}=\rho_{\sh{G}_2}\circ w.
  \tag{3.5.4.2}
\]
For each morphism $u:\sh{G}_2\to\psi_*(\sh{F})$, where $\sh{F}$ is a sheaf on
$X$ with values in $\C$, we have, according to (3.5.3.3), (3.5.4.2), and the
definition of $u^\flat$, that
\[
  (u^\sharp\circ\psi^*(w))^\flat
  =\psi_*(u^\sharp)\circ\psi_*(\psi^*(w))\circ\rho_{\sh{G}_1}
  =\psi_*(u^\sharp)\circ\rho_{\sh{G}_2}\circ w=u\circ w
\]
where again
\[
  (u\circ w)^\sharp=u^\sharp\circ\psi^*(w).
  \tag{3.5.4.3}
\]

If we take in particular for $u$ a morphism
$\sh{G}_2\xrightarrow{w'}\sh{G}_3
  \xrightarrow{\rho_{\sh{G}_3}}\psi_*(\psi^*(\sh{G}_3))$, it becomes
$\psi^*(w'\circ w)=(\rho_{\sh{G}_3}\circ w'\circ w)^\sharp
  =(\rho_{\sh{G}_3}\circ w')^\sharp\circ\psi^*(w)=\psi^*(w')\circ\psi^*(w)$,
hence our assertion.

FInally, for each sheaf $\sh{F}$ on $X$ with values in $\C$, let $i_\sh{F}$ be
the identity morphism of $\psi_*(\sh{F})$ and denote by
\[
  \sigma_\sh{F}:\psi^*(\psi_*(\sh{F})\longrightarrow\sh{F}
\]
the morphism $(i_\sh{F})^\sharp$; the formula (3.5.4.3) gives in particular the
factorization
\[
  u^\sharp:\psi^*(\sh{G})\xrightarrow{\psi^*(u)}\psi^*(\psi_*(\sh{F}))
  \xrightarrow{\sigma_\sh{F}}\sh{F}
  \tag{3.5.4.4}
\]
for each morphism $u:\sh{G}\to\psi_*(\sh{F})$. We say that the morphism
$\sigma_\sh{F}$ is {\it canonical}.
\end{env}

\begin{env}[3.5.5]
\label{env-0.3.5.5}
Let $\psi':Y\to Z$ be a continuous map, and suppose that each presheaf $\sh{H}$
on $Z$ with values in $\C$ admits an inverse image ${\psi'}^*(\sh{H})$ under
$\psi'$. Then (with the hypotheses of \hyperref[env-0.3.5.4]{(3.5.4)}) each presheaf $\sh{H}$
on $Z$ with values in $\C$ admits an inverse image under $\psi''=\psi'\circ\psi$
and we have a canonical functorial isomorphism
\[
  {\psi''}^*(\sh{H})\isoto\psi^*({\psi'}^*(\sh{H})).
  \tag{3.5.5.1}
\]
\oldpage{33}
This indeed follows immediately from the definitions, taking into account that
$\psi_*''=\psi_*'\circ\psi_*$. In addition, if $u:\sh{G}\to\psi_*(\sh{F})$ is a
$\psi$-morphism, $v:\sh{H}\to\psi_*'(\sh{G})$ a $\psi'$-morphism, and
$w=\psi_*'(u)\circ v$ their composition \hyperref[env-0.3.5.2]{(3.5.2)}, then we have
immediately that $w^\sharp$ is the composite morphism
\[
  w^\sharp:\psi^*({\psi'}^*(\sh{H}))\xrightarrow{\psi^*(v^\sharp)}\psi^*(\sh{G})
  \xrightarrow{u^\sharp}\sh{F}.
\]
\end{env}

\begin{env}[3.5.6]
\label{env-0.3.5.6}
We take in particular for $\psi$ the identity map $1_X:X\to X$. Then if the
inverse image under $\psi$ of a presheaf $\sh{F}$ on $X$ with values in $\C$
exists, we say that this inverse image is the {\it sheaf associated to the
presheaf $\sh{F}$}. Each morphism $u:\sh{F}\to\sh{F}'$ from $\sh{F}$ to a
{\it sheaf} $\sh{F}'$ with values in $\C$ factorizes in a unique way as
$\sh{F}\xrightarrow{\rho_\sh{F}}1_X^*(\sh{F})\xrightarrow{u^\sharp}\sh{F}'$.
\end{env}

\subsection{Simple and locally simple sheaves}
\label{subsection-simple-and-locally-simple-sheaves}

\begin{env}[3.6.1]
\label{env-0.3.6.1}
We say that a {\it presheaf} $\sh{F}$ on $X$, with values in $\C$, is
{\it constant} if the canonical morphisms $\sh{F}(X)\to\sh{F}(U)$ are
{\it isomorphisms} for each nonempty open $U\subset X$; we note that $\sh{F}$
is not necessarily a sheaf. We say that a {\it sheaf} is {\it simple} if it is
the associated sheaf \hyperref[env-0.3.5.6]{(3.5.6)} of a constant presheaf. We say that a
sheaf $\sh{F}$ is {\it locally simple} if each $x\in X$ admits an open
neighborhood $U$ such that $\sh{F}|U$ is simple.
\end{env}

\begin{env}[3.6.2]
\label{env-0.3.6.2}
Suppose that $X$ is {\it irreducible} \hyperref[env-0.2.1.1]{(2.1.1)}; then the following
properties are equivalent:
\begin{itemize}
  \item[(a)] {\it $\sh{F}$ is a constant presheaf on $X$};
  \item[(b)] {\it $\sh{F}$ is a simple sheaf on $X$};
  \item[(c)] {\it $\sh{F}$ is a locally simple sheaf on $X$}.
\end{itemize}
\end{env}

Indeed, let $\sh{F}$ be a constant presheaf on $X$; if $U$, $V$ are two nonempty
open sets in $X$, then $U\cap V$ is nonempty, so
$\sh{F}(X)\to\sh{F}(U)\to\sh{F}(U\cap V)$ and $\sh{F}(X)\to\sh{F}(U)$ are
isomorphisms, and similarly both $\sh{F}(U)\to\sh{F}(U\cap V)$ and
$\sh{F}(V)\to\sh{F}(U\cap V)$ are isomorphisms. We therefore conclude
immediately that the axiom (F) of \hyperref[env-0.3.1.2]{(3.1.2)} is clearly satisfied,
$\sh{F}$ is isomorphic to its associated sheaf, and as a result (a) implies (b).

Now let $(U_\alpha)$ be an open cover of $X$ by nonempty open sets and let
$\sh{F}$ be a sheaf on $X$ such that $\sh{F}|U_\alpha$ is simple for each
$\alpha$; as $U_\alpha$ is irreducible, $\sh{F}|U_\alpha$ is a constant presheaf
according to the above. As $U_\alpha\cap U_\beta$ is not empty,
$\sh{F}(U_\alpha)\to\sh{F}(U_\alpha\cap U_\beta)$ and
$\sh{F}(U_\beta)\to\sh{F}(U_\alpha\cap U_\beta)$ are isomorphisms, hence we have
a canonical isomorphism
$\theta_{\alpha\beta}:\sh{F}(U_\alpha)\to\sh{F}(U_\beta)$ for each pair of
indices. But then if we apply the condition (F) for $U=X$, we see that for each
index $\alpha_0$, $\sh{F}(U_{\alpha_0})$ and the $\theta_{\alpha_0\alpha}$ are
solutions to the universal problem, which (according to the uniqueness) implies
that $\sh{F}(X)\to\sh{F}(U_{\alpha_0})$ is an isomorphism, and hence proves that
(c) implies (a).

\subsection{Inverse images of presheaves of groups or rings}
\label{subsection-inverse-images-of-psh-grps-or-rings}

\begin{env}[3.7.1]
\label{env-0.3.7.1}
\oldpage{34}
We will show that when we take $\C$ to be the category of sets, the inverse
image under $\psi$ for each presheaf $\sh{G}$ with values in $\C$ {\it always
exists} (the notations and hypotheses on $X$, $Y$, $\psi$ being that of
\hyperref[env-0.3.5.3]{(3.5.3)}). Indeed, for each open $U\subset X$, define $\sh{G}'(U)$
as follows: an element $s'$ of $\sh{G}'(U)$ is a family $(s_x')_{x\in U}$, where
$s_x'\in\sh{G}_{\psi(x)}$ for each $x\in U$, and where, for each $x\in U$, the
following condition is satisfied: there exists an open neighborhood $V$ of
$\psi(x)$ in $Y$, a neighborhood $W\subset\psi^{-1}(V)\cap U$ of $x$, and an
element $s\in\sh{G}(V)$ such that $s_z'=s_{\psi(x)}$ for all $z\in W$. We verify
immediately that $U\mapsto\sh{G}'(U)$ clearly satisfies the axioms of a
{\it sheaf}.

Now let $\sh{F}$ be a sheaf of sets on $X$, and let $u:\sh{G}\to\psi_*(\sh{F})$,
$v:\sh{G}'\to\sh{F}$ be morphisms. We define $u^\sharp$ and $v^\flat$ in the
following manner: if $s'$ is a section of $\sh{G}'$ over a neighborhood $U$ of
$x\in X$ and if $V$ is an open neighborhood of $\psi(x)$ and $s\in\sh{G}(V)$
such that we have $s_z'=s_{\psi(x)}$ for $z$ in a neighborhood of $x$ contained
in $\psi^{-1}(V)\cap U$, we take $u_x^\sharp(s_x')=u_{\psi(x)}(s_{\psi(x)})$.
Similarly, if $s\in\sh{G}(V)$ ($V$ open in $Y$), $v^\flat(s)$ is the section of
$\sh{F}$ over $\psi^{-1}(V)$, the image under $v$ of the section $s'$ of
$\sh{G}'$ such that $s_x'=s_{\psi(x)}$ for all $x\in\psi^{-1}(V)$. In addition,
the canonical homomorphism \hyperref[env-0.3.5.3]{(3.5.3)}
$\rho:\sh{G}\to\psi_*(\psi^*(\sh{G}))$ is defined in the following manner: for
each open $V\subset Y$ and each section $s\in\Gamma(V,\sh{G})$, $\rho(s)$ is the
section $(s_{\psi(x)})_{x\in\psi^{-1}(V)}$ of $\psi^*(\sh{G})$ over
$\psi^{-1}(V)$. The verification of the relations $(u^\sharp)^\flat=u$,
$(v^\flat)^\sharp=v$, and $v^\flat=\psi_*(v)\circ\rho$ is immediate, and proves
our assertion.

We check that, if $w:\sh{G}_1\to\sh{G}_2$ is a homomorphism of sheaves of sets
on $Y$, $\psi^*(w)$ is expressed in the following manner: if
$s'=(s_x')_{x\in U}$ is a section of $\psi^*(\sh{G}_1)$ over an open set $U$ of
$X$, then $(\psi^*(w))(s')$ is the family $(w_{\psi(x)}(s_x'))_{x\in U}$.
Finally, it is immediate that for each open set $V$ of $Y$, the inverse image of
$\sh{G}|V$ under the restriction of $\psi$ to $\psi^{-1}(V)$ is identical to the
induced sheaf $\psi^*(\sh{G})|\psi^{-1}(V)$.

When $\psi$ is the identity $1_X$, we recover the definition of a sheaf of sets
associated to a presheaf (G, II, 1.2). The above considerations apply without
change when $\C$ is the category of groups or of rings (not necessarily
commutative).

When $X$ is any subset of a topological space $Y$, and $j$ the canonical
injection $X\to Y$, for each sheaf $\sh{G}$ on $Y$ with values in a category
$\C$, we call the {\it induced} sheaf of $X$ by $\sh{G}$ the inverse image
$j^*(\sh{G})$ (whenever it exists); for the sheaves of sets (or of groups, or of
rings) we recover the usual definition (G, II, 1.5).
\end{env}

\begin{env}[3.7.2]
\label{env-0.3.7.2}
Keeping the notations and hypotheses of \hyperref[env-0.3.5.3]{(3.5.3)}, suppose that $\sh{G}$
is a {\it sheaf} of groups (resp. of rings) on $Y$. The definition of sections
of $\psi^*(\sh{G})$ \hyperref[env-0.3.7.1]{(3.7.1)} shows (considering \hyperref[env-0.3.4.4]{(3.4.4)}) that
the homomorphism of stalks
$\psi_x\circ\rho_{\psi(x)}:\sh{G}_{\psi(x)}\to(\psi^*(\sh{G}))_x$ is a
{\it functorial isomorphism in $\sh{G}$}, that identifies the two stalks; with
this identification, $u_x^\sharp$ is identical to the homomorphism defined in
\hyperref[env-0.3.5.1]{(3.5.1)}, and in particular, we have
$\Supp(\psi^*(\sh{G}))=\psi^{-1}(\Supp(\sh{G}))$.

An immediate consequence of this result is that {\it the functor
$\psi^*(\sh{G})$ is exact in $\sh{G}$} on the abelian category of sheaves of
abelian groups.
\end{env}

\subsection{Sheaves on pseudo-discrete spaces}
\label{subsection-sheaves-on-pseudo-discrete-spaces}

\begin{env}[3.8.1]
\label{env-0.3.8.1}
\oldpage{35}
Let $X$ be a topological space whose topology admits a basis $\mathfrak{B}$
consisting of open {\it quasi-compact} subsets. Let $\sh{F}$ be a {\it sheaf
of sets} on $X$; if we equip each of the $\sh{F}(U)$ with the {\it discrete}
topology, $U\mapsto\sh{F}(U)$ is a {\it presheaf of topological spaces}. We
will see that there exists a {\it sheaf of topological spaces $\sh{F}'$
associated to $\sh{F}$} \hyperref[env-0.3.5.6]{(3.5.6)} such that $\Gamma(U,\sh{F}')$ is the
discrete space $\sh{F}(U)$ for each open {\it quasi-compact} subsets $U$. It
will suffice to show that the presheaf $U\mapsto\sh{F}(U)$ of discrete
topological spaces {\it on} $\mathfrak{B}$ satisfy the condition (F$_0$) of
\hyperref[env-0.3.2.2]{(3.2.2)}, and more generally that if $U$ is an open quasi-compact
subset and if $(U_\alpha)$ is a cover of $U$ by sets of $\mathfrak{B}$, then the
least fine topology $\mathcal{T}$ on $\Gamma(U,\sh{F})$ renders continuous the
maps $\Gamma(U,\sh{F})\to\Gamma(U_\alpha,\sh{F})$ is the {\it discrete}
topology. There exists a finite number of indices $\alpha_i$ such that
$U=\bigcup_i U_{\alpha_i}$. Let $s\in\Gamma(U,\sh{F})$ and let $s_i$ be its
image in $\Gamma(U_{\alpha_i},\sh{F})$; the intersection of the inverse images
of the sets $\{s_i\}$ is by definition a neighborhood of $s$ for $\mathcal{T}$;
but since $\sh{F}$ is a sheaf of sets and the $U_{\alpha_i}$ cover $U$, this
intersection is reduced to $s$, hence our assertion.

We note that if $U$ is an open non quasi-compact subset of $X$, the topological
space $\Gamma(U,\sh{F}')$ still has $\Gamma(U,\sh{F})$ as the underlying set,
but the topology is not discrete in general: it is the least fine rendering
commutative the maps $\Gamma(U,\sh{F})\to\Gamma(V,\sh{F})$, for
$V\in\mathfrak{B}$ and $V\subset U$ (the $\Gamma(V,\sh{F})$ being discrete).

The above considerations apply without modification to sheaves of groups or of
rings (not necessarily commutative), and associate to them sheaves of
{\it topological groups} or {\it topological rings}, respectively. To
summarize, we say that the sheaf $\sh{F}'$ is the {\it pseudo-discrete} sheaf
of {\it spaces} (resp. {\it groups}, {\it rings}) associated to a sheaf of
sets (resp. groups, rings) $\sh{F}$.
\end{env}

\begin{env}[3.8.2]
\label{env-0.3.8.2}
Let $\sh{F}$, $\sh{G}$ be two sheaves of sets (resp. groups, rings) on $X$,
$u:\sh{F}\to\sh{G}$ a homomorphism. Then $u$ is thus a {\it continuous}
homomorphism $\sh{F}'\to\sh{G}'$, if we denote by $\sh{F}'$ and $\sh{G}'$ the
pseudo-discrete sheaves associated to $\sh{F}$ and $\sh{G}$; this follows in
effect from \hyperref[env-0.3.2.5]{(3.2.5)}.
\end{env}

\begin{env}[3.8.3]
\label{env-0.3.8.3}
Let $\sh{F}$ be a sheaf of sets, $\sh{H}$ a subsheaf of $\sh{F}$, $\sh{F}'$ and
$\sh{H}'$ the pseudo-discrete sheaves associated to $\sh{F}$ and $\sh{H}$
respectively. Then, for each open $U\subset X$, $\Gamma(U,\sh{H}')$ is
{\it closed} in $\Gamma(U,\sh{F}')$: indeed, it is the intersection of the
inverse images of the $\Gamma(V,\sh{H})$ (for $V\in\mathfrak{B}$, $V\subset U$)
under the continuous maps $\Gamma(U,\sh{F})\to\Gamma(V,\sh{F})$, and
$\Gamma(V,\sh{H})$ is closed in the discrete space $\Gamma(V,\sh{F})$.
\end{env}

\section{Ringed spaces}
\label{section-ringed-spaces}

\subsection{Ringed spaces, sheaves of $\mathcal{A}$-modules, $\mathcal{A}$-algebras}
\label{subsection-ringed-spaces-sheaves-of-modules-and-algebras}

\begin{env}[4.1.1]
\label{env-0.4.1.1}
A {\it ringed space} (resp. topologically ringed space) is a pair $(X,\sh{A})$
consisting of a topological space $X$ and a sheaf of (not necessarily
commutative) rings (resp. of a sheaf of topological rings) $\sh{A}$ on $X$; we
say that $X$ is the {\it underlying} topological space of the ringed space
$(X,\sh{A})$, and $\sh{A}$ the {\it structure sheaf}. The latter is denoted
$\OO_X$, and its stalk at a point $x\in X$ is denoted $\OO_{X,x}$ or simply
$\OO_x$ when there is no chance of confusion.

We denote by $1$ or $e$ the {\it unit section} of $\OO_X$ over $X$ (the unit
element of $\Gamma(X,\OO_X)$).

As in this treatise we will have to consider in particular sheaves of
{\it commutative} rings, it will be understood, when we speak of a ringed space
$(X,\sh{A})$ without specification, that $\sh{A}$ is a sheaf of commutative
rings.

The ringed spaces with with not necessarily commutative structure sheaves
(resp. the topologically ringed spaces) form a {\it category}, where we define
a {\it morphism} $(X,\sh{A})\to(Y,\sh{B})$ as a couple $(\psi,\theta)=\Psi$
consisting of a continuous map $\psi:X\to Y$ and a {\it $\psi$-morphism}
$\theta:\sh{B}\to\sh{A}$ \hyperref[env-0.3.5.1]{(3.5.1)} of sheaves of rings (resp. of sheaves
of topological rings); the {\it composition} of a second morphism
$\Psi'=(\psi',\theta'):(Y,\sh{B})\to(Z,\sh{C})$ and of $\Psi$, denoted
$\Psi''=\Psi'\circ\Psi$, is the morphism $(\psi'',\theta'')$ where
$\psi''=\psi'\circ\psi$, and $\theta''$ is the composition of $\theta$ and
$\theta'$ (equal to $\psi_*'(\theta)\circ\theta'$, cf. \hyperref[env-0.3.5.2]{(3.5.2)}). For
ringed spaces, remember that we then have
${\theta''}^\sharp=\theta^\sharp\circ\psi^*({\theta'}^\sharp)$
\hyperref[env-0.3.5.5]{(3.5.5)}; therefore if ${\theta'}^\sharp$ and $\theta^\sharp$ are
{\it injective} (resp. {\it surjective}), then the same is true of
${\theta''}^\sharp$, taking into account that $\psi_x\circ\rho_{\psi(x)}$ is an
isomorphism for all $x\in X$ \hyperref[env-0.3.7.2]{(3.7.2)}. We verify immediately, thanks to
the above, that when $\psi$ is an {\it injective} continuous map and when
$\theta^\sharp$ is a {\it surjective} homomophism of sheaves of rings, the
morphism $(\psi,\theta)$ is a {\it momomorphism} (T, 1.1) in the category of
ringed spaces.

By abuse of language, we will often replace $\psi$ by $\Psi$ in notation, for
example in writing $\Psi^{-1}(U)$ in place of $\psi^{-1}(U)$ for a subset $U$ of
$Y$, when the is no risk of confusion.
\end{env}

\begin{env}[4.1.2]
\label{env-0.4.1.2}
For each subset $M$ of $X$, the pair $(M,\sh{A}|M)$ is evidently a ringed space,
said to be {\it induced} on $M$ by the ringed space $(X,\sh{A})$ (and is still
called the {\it restriction} of $(X,\sh{A})$ to $M$). If $j$ is the canonical
injection $M\to X$ and $\omega$ is the identity map of $\sh{A}|M$,
$(j,\omega^\flat)$ is a monomorphism $(M,\sh{A}|M)\to(X,\sh{A})$ of ringed
spaces, called the {\it canonical injection}. The composition of a morphism
$\Psi:(X,\sh{A})\to(Y,\sh{B})$ and this injection is called the
{\it restriction} of $\Psi$ to $M$.
\end{env}

\begin{env}[4.1.3]
\label{env-0.4.1.3}
We will not revisit the definitions of {\it $\sh{A}$-modules} or
{\it algebraic sheaves} on a ringed space $(X,\sh{A})$ (G, II, 2.2); when
$\sh{A}$ is a sheaf of not necessarily commutative rings, by $\sh{A}$-module we
will always mean ``left $\sh{A}$-module'' unless expressly stated otherwise. The
$\sh{A}$-submodules of $\sh{A}$ will be called {\it sheaves of ideals} (left,
right, or two-sided) in $\sh{A}$ or {\it $\sh{A}$-ideals}.

When $\sh{A}$ is a sheaf of commutative rings, and in the definition of
$\sh{A}$-modules, we replace everywhere the {\it module} structure by that of
an {\it algebra}, we obtain the definition of an {\it $\sh{A}$-algebra} on
$X$. It is the same to say that an $\sh{A}$-algebra (not necessarily
commutative) is a $\sh{A}$-module $\sh{C}$, given with a homomorphism of
$\sh{A}$-modules $\vphi:\sh{C}\otimes_\sh{A}\sh{C}\to\sh{C}$ and a section $e$
over $X$, such that: 1st the diagram
\[
  \xymatrix{
    \sh{C}\otimes_\sh{A}\sh{C}\otimes_\sh{A}\sh{C}
    \ar[r]^{\vphi\otimes 1}\ar[d]_{1\otimes\vphi} &
    \sh{C}\otimes_\sh{A}\sh{C}\ar[d]^\vphi\\
    \sh{C}\otimes_\sh{A}\sh{C}\ar[r]^\vphi & \sh{C}
  }
\]
is commutative; 2nd for each open $U\subset X$ and each
section $s\in\Gamma(U,\sh{C})$, we have
$\vphi((e|U)\otimes s)=\vphi(s\otimes(e|U))=s$. We say that $\sh{C}$ is a
commutative $\sh{A}$-algebra if the diagram
\[
  \xymatrix{
    \sh{C}\otimes_\sh{A}\sh{C}\ar[rr]^\sigma\ar[rd]_\vphi
    & & \sh{C}\otimes_\sh{A}\sh{C}\ar[ld]^\vphi\\
    & \sh{C}
  }
\]
is commutative, $\sigma$ denoting the canonical symmetry (twist) map of the
tensor product $\sh{C}\otimes_\sh{A}\sh{C}$.

The homomorphisms of $\sh{A}$-algebras are also defined as the homomorphisms of
$\sh{A}$-modules in (G, II, 2.2), but naturally no longer form an abelian group.

If $\sh{M}$ is an $\sh{A}$-submodule of an $\sh{A}$-algebra $\sh{C}$, the
{\it $\sh{A}$-subalgebra of $\sh{C}$ generated by $\sh{M}$} is the sum of the
images of the homomorphisms $\bigotimes^n\sh{M}\to\sh{C}$ (for each
$n\geqslant 0$). This is also the sheaf associated to the presheaf
$U\mapsto\sh{B}(U)$ of algebras, $\sh{B}(U)$ being the subalgebra of
$\Gamma(U,\sh{C})$ generated by the submodule $\Gamma(U,\sh{M})$.
\end{env}

\begin{env}[4.1.4]
\label{env-0.4.1.4}
We say that a sheaf of rings $\sh{A}$ on a topological space $X$ is
{\it reduced at a point $x$ in $X$} if the stalk $\sh{A}_x$ is a {\it reduced}
ring \hyperref[env-0.1.1.1]{(1.1.1)}; we say that $\sh{A}$ is {\it reduced} if it is reduced
at all points of $X$. Recall that a ring $A$ is called {\it regular} if each of
the local rings $A_\mathfrak{p}$ (where $\mathfrak{p}$ runs through the set of
prime ideals of $A$) is a regular local ring; we will say that a sheaf of rings
$\sh{A}$ on $X$ is {\it regular at a point $x$} (resp. {\it regular}) if the
stalk $\sh{A}_x$ is a regular ring (resp. if $\sh{A}$ is regular at each point).
Finally, we will say that a sheaf of rings $\sh{A}$ on $X$ is {\it normal at a
point $x$} (resp. {\it normal}) if the stalk $\sh{A}_x$ is an {\it integral
and integrally closed} ring (resp. if $\sh{A}$ is normal at each point). We will
say that a ringed space $(X,\sh{A})$ has any of these preceeding properties if
the sheaf of rings $\sh{A}$ has that property.

A {\it graded} sheaf of rings $\sh{A}$ is by definition a sheaf of rings that
is the direct sum (G, II, 2,7) of a family $(\sh{A}_n)_{n\in\bb{Z}}$ of sheaves
of abelian groups with the conditions $\sh{A}_m\sh{A}_n\subset\sh{A}_{m+n}$; a
{\it graded $\sh{A}$-module} is an $\sh{A}$-module $\sh{F}$ that is the direct
sum of a family $(\sh{F}_n)_{n\in\bb{Z}}$ of sheaves of abelian groups,
satisfying the conditions $\sh{A}_m\sh{F}_n\subset\sh{F}_{m+n}$. It is
equivalent to say that $(\sh{A}_m)_x(\sh{A}_n)_x\subset(\sh{A}_{m+n})_x$
(resp. $(\sh{A}_m)_x(\sh{F}_n)_x\subset(\sh{F}_{m+n})_x$) for each point $x$.
\end{env}

\begin{env}[4.1.5]
\label{env-0.4.1.5}
Given a ringed space $(X,\sh{A})$ (not necessarily commutative), we will not
recall here the definitions of the bifunctors $\sh{F}\otimes_\sh{A}\sh{G}$,
$\shHom_\sh{A}(\sh{F},\sh{F})$, and $\Hom_\sh{A}(\sh{F},\sh{G})$
(G, II, 2.8 and 2.2) in the categories of left or right (depending on the case)
$\sh{A}$-modules, with values in the category of sheaves of abelian groups (or
more generally of $\sh{C}$-modules, if $\sh{C}$ is the center of $\sh{A}$). The
stalk $(\sh{F}\otimes_\sh{A}\sh{G})_x$ for each point $x\in X$ canonically
identifies with $\sh{F}_x\otimes_{\sh{A}_x}\sh{G}_x$ and we define a canonical
and functorial homomorphism
$(\shHom_\sh{A}(\sh{F},\sh{G}))_x\to\Hom_{\sh{A}_x}(\sh{F}_x,\sh{G}_x)$ which is
in general neither injective nor surjective. The bifunctors considered above are
additive and in particular, commute with finite direct limits;
$\sh{F}\otimes_\sh{A}\sh{G}$ is right exact in $\sh{F}$ and in $\sh{G}$,
commutes with inductive limits, and $\sh{A}\otimes_\sh{A}\sh{G}$
(resp. $\sh{F}\otimes_\sh{A}\sh{A}$) canonically identifies with $\sh{G}$
(resp. $\sh{F}$). The functors $\shHom_\sh{A}(\sh{F},\sh{G})$ and
$\Hom_\sh{A}(\sh{F},\sh{G})$ are {\it left exact} in $\sh{F}$ and $\sh{G}$;
more precisely, if we have an exact sequence of the form
$0\to\sh{G}'\to\sh{G}\to\sh{G}''$, the sequence
\[
  0\longrightarrow\shHom_\sh{A}(\sh{F},\sh{G}')\longrightarrow
  \shHom_\sh{A}(\sh{F},\sh{G})\longrightarrow\shHom_\sh{A}(\sh{F},\sh{G}'')
\]
is exact, and if we have an exact sequence of the form
$\sh{F}'\to\sh{F}\to\sh{F}''\to 0$, the sequence
\[
  0\longrightarrow\shHom_\sh{A}(\sh{F}'',\sh{G})\longrightarrow
  \shHom_\sh{A}(\sh{F},\sh{G})\longrightarrow\shHom_\sh{A}(\sh{F}',\sh{G})
\]
is exact, with the analagous properties for the functor $\Hom$. In addiiton,
$\shHom_\sh{A}(\sh{A},\sh{G})$ canonically identifies with $\sh{G}$; finally,
for each open $U\subset X$, we have
\[
  \Gamma(U,\shHom_\sh{A}(\sh{F},\sh{G})=\Hom_{\sh{A}|U}(\sh{F}|U,\sh{G}|U).
\]

For each left (resp. right) $\sh{A}$-module, we define the {\it dual} of
$\sh{F}$ and denote it by $\dual{\sh{F}}$ the right (resp. left) $\sh{A}$-module
$\shHom_\sh{A}(\sh{F},\sh{A})$.

Finally, if $\sh{A}$ is a sheaf of commutative rings, $\sh{F}$ an
$\sh{A}$-module, $U\mapsto\wedge^p\Gamma(U,\sh{F})$ is a presheaf whose
associated sheaf is an $\sh{A}$-module denoted $\wedge^p\sh{F}$ and is called
the {\it $p$-th exterior power of $\sh{F}$}; we verify easily that the
canonical map of the presheaf $U\mapsto\wedge^p\Gamma(U,\sh{F})$ to the
associated sheaf $\wedge^p\sh{F}$ is {\it injective}, and for each $x\in X$,
$(\wedge^p\sh{F})_x=\wedge^p(\sh{F}_x)$. It is clear that $\wedge^p\sh{F}$ is a
covariant functor in $\sh{F}$.
\end{env}

\begin{env}[4.1.6]
\label{env-0.4.1.6}
Suppose that $\sh{A}$ is a sheaf of non necessarily commutative rings, $\sh{J}$
a left sheaf of ideals of $\sh{A}$, $\sh{F}$ an left $\sh{A}$-module; we then
denote by $\sh{J}\sh{F}$ the $\sh{A}$-submodule of $\sh{F}$, the image of
$\sh{J}\otimes_\bb{Z}\sh{F}$ (where $\bb{Z}$ is the sheaf associated to the
constant presheaf $U\mapsto\bb{Z}$) under the canonical map
$\sh{J}\otimes_\bb{Z}\sh{F}\to\sh{F}$; it is clear that for each $x\in X$, we
have $(\sh{J}\sh{F})_x=\sh{J}_x\sh{F}_x$. When $\sh{A}$ is commutative,
$\sh{J}\sh{F}$ is also the canonical image of
$\sh{J}\otimes_\sh{A}\sh{F}\to\sh{F}$. It is immediate that $\sh{J}\sh{F}$ is
also the $\sh{A}$-module associated to the presheaf
$U\mapsto\Gamma(U,\sh{J})\Gamma(U,\sh{F})$. If $\sh{J}_1$, $\sh{J}_2$ are two
left sheaves of ideals of $\sh{A}$, we have
$\sh{J}_1(\sh{J}_2\sh{F})=(\sh{J}_1\sh{J}_2)\sh{F}$.
\end{env}

\begin{env}[4.1.7]
\label{env-0.4.1.7}
Let $(X_\lambda,\sh{A}_\lambda)_{\lambda\in L}$ be a family of ringed spaces;
for each couple $(\lambda,\mu)$, suppose we are given an open subset
$V_{\lambda\mu}$ of $X_\lambda$, and an isomorphism of ringed spaces
$\vphi_{\lambda\mu}:(V_{\mu\lambda},\sh{A}_\mu|V_{\lambda\mu})
  \isoto(V_{\lambda\mu},\sh{A}_\lambda|V_{\lambda\mu})$, with
$V_{\lambda\lambda}=X_\lambda$, $\vphi_{\lambda\lambda}$ being the identity.
Furthermore, suppose that, for each triple $(\lambda,\mu,\nu)$, if we denote by
$\vphi_{\mu\lambda}'$ the restriction of $\vphi_{\mu\lambda}$ to
$V_{\lambda\mu}\cap V_{\lambda\nu}$, $\vphi_{\mu\lambda}'$ is an isomorphism
from $(V_{\lambda\mu}\cap V_{\lambda\nu},
  \sh{A}_\lambda|(V_{\lambda\mu}\cap V_{\lambda\nu}))$ to
$(V_{\mu\nu}\cap V_{\mu\lambda},\sh{A}_\mu|(V_{\mu\nu}\cap V_{\mu\lambda}))$ and
that we have $\vphi_{\lambda\nu}'=\vphi_{\lambda\mu}'\circ\vphi_{\mu\nu}'$
({\it gluing condition} for the $\vphi_{\lambda\mu}$). We can first consider
the topological space obtained by gluing (by means of the $\vphi_{\lambda\mu}$)
of the $X_\lambda$
\oldpage{39}
along the $V_{\lambda\mu}$; if we identify $X_\lambda$ with the corresponding
open subset $X_\lambda'$ in $X$, the hypotheses imply that the three sets
$V_{\lambda\mu}\cap V_{\lambda\nu}$, $V_{\mu\nu}\cap V_{\mu\lambda}$,
$V_{\nu\lambda}\cap V_{\nu\mu}$ identify with
$X_\lambda'\cap X_\mu'\cap X_\nu'$. We can also transport to $X_\lambda'$ the
ringed space structure of $X_\lambda$, and if $\sh{A}_\lambda'$ are the
transported sheaves of rings corresponding to the $\sh{A}_\lambda$, the
$\sh{A}_\lambda'$ satisfy the gluing condition \hyperref[env-0.3.3.1]{(3.3.1)} and therefore
define a sheaf of rings $\sh{A}$ on $X$; we say that $(X,\sh{A})$ is the ringed
space obtained by {\it gluing the $(X_\lambda,\sh{A}_\lambda)$ along the
$V_{\lambda\mu}$}, by means of the $\vphi_{\lambda\mu}$.
\end{env}

\subsection{Direct image of an $\mathcal{A}$-module}
\label{subsection-direct-image-of-module-sheaf}

\begin{env}[4.2.1]
\label{env-0.4.2.1}
Let $(X,\sh{A})$, $(Y,\sh{B})$ be two ringed spaces, $\Psi=(\psi,\theta)$ a
morphism $(X,\sh{A})\to(Y,\sh{B})$; $\psi_*(\sh{A})$ is then a sheaf of rings on
$Y$, and $\theta$ a homomorphism $\sh{B}\to\psi_*(\sh{A})$ of sheaves of rings.
Then let $\sh{F}$ be an $\sh{A}$-module; the direct image $\psi_*(\sh{F})$ is a
sheaf of abelian groups on $Y$. In addition, for each open $U\subset Y$,
\[
  \Gamma(U,\psi_*(\sh{F}))=\Gamma(\psi^{-1}(U),\sh{F})
\]
is equipped with the structure of a module over the ring
$\Gamma(U,\psi_*(\sh{A}))=\Gamma(\psi^{-1}(U),\sh{A})$; the bilinear maps which
define these structures are compatible with the restriction operations, defining
on $\psi_*(\sh{F})$ the structure of a $\psi_*(\sh{A})$-module. The homomorphism
$\theta:\sh{B}\to\psi_*(\sh{A})$ then defines also on $\psi_*(\sh{F})$ a
{\it $\sh{B}$-module} structure; we say that this
$\sh{B}$-module is the {\it direct image of $\sh{F}$ under the morphism
$\Psi$}, and we denote it by $\Psi_*(\sh{F})$. If $\sh{F}_1$, $\sh{F}_2$ are two
$\sh{A}$-modules over $X$ and $u$ an $\sh{A}$-homomorphism
$\sh{F}_1\to\sh{F}_2$, it is immediate (by considering the sections over the
open subsets of $Y$) that $\psi_*(u)$ is a $\psi_*(\sh{A})$-homomorphism
$\psi_*(\sh{F}_1)\to\psi_*(\sh{F}_2)$, and {\it a fortiori} a
$\sh{B}$-homomorphism $\Psi_*(\sh{F}_1)\to\Psi_*(\sh{F}_2)$; as a
$\sh{B}$-homomorphism, we denote it by $\Psi_*(u)$. So we see that $\Psi_*$ is a
{\it covariant functor} from the category of $\sh{A}$-modules to that of
$\sh{B}$-modules. In addition, it is immediate that this functor is {\it left
exact} (G, II, 2.12).

On $\psi_*(\sh{A})$, the structure of a $\sh{B}$-module and the structure of a
sheaf of rings define a $\sh{B}$-algebra structure; we denote by
$\Psi_*(\sh{A})$ this $\sh{B}$-algebra.
\end{env}

\begin{env}[4.2.2]
\label{env-0.4.2.2}
Let $\sh{M}$, $\sh{N}$ be two $\sh{A}$-modules. For each open set $U$ of $Y$, we
have a canonical map
\[
  \Gamma(\psi^{-1}(U),\sh{M})\times\Gamma(\psi^{-1}(U),\sh{N})
  \longrightarrow\Gamma(\psi^{-1}(U),\sh{M}\otimes_\sh{A}\sh{N})
\]
which is bilinear over the ring
$\Gamma(\psi^{-1}(U),\sh{A})=\Gamma(U,\psi_*(\sh{A}))$, and {\it a fortiori}
over $\Gamma(U,\sh{B})$; it therefore defines a homomorphism
\[
  \Gamma(U,\Psi_*(\sh{M}))\otimes_{\Gamma(U,\sh{B})}\Gamma(U,\Psi_*(\sh{N}))
  \longrightarrow\Gamma(U,\Psi_*(\sh{M}\otimes_\sh{A}\sh{N}))
\]
and as we check immediately that these homomorphisms are compatible with the
restriction operations, they give a canonical functorial homomorphism of
$\sh{B}$-modules
\[
  \Psi_*(\sh{M})\otimes_\sh{B}\Psi_*(\sh{N})
  \longrightarrow\Psi_*(\sh{M}\otimes_\sh{A}\sh{N})
  \tag{4.2.2.1}
\]
\oldpage{40}
which is in general neither injective nor surjective. If $\sh{P}$ is a third
$\sh{A}$-module, we check immediately that the diagram
\[
  \xymatrix{
    \Psi_*(\sh{M})\otimes_\sh{B}\Psi_*(\sh{N})\otimes_\sh{B}\Psi_*(\sh{P})\ar[r]\ar[d]
    & \Psi_*(\sh{M}\otimes_\sh{A}\sh{N})\otimes_\sh{B}\Psi_*(\sh{P})\ar[d]\\
    \Psi_*(\sh{M})\otimes_\sh{B}\Psi_*(\sh{N}\otimes_\sh{A}\sh{P})\ar[r]
    & \Psi_*(\sh{M}\otimes_\sh{A}\sh{N}\otimes_\sh{A}\sh{P})
  }
  \tag{4.2.2.2}
\]
is commutative.
\end{env}

\begin{env}[4.2.3]
\label{env-0.4.2.3}
Let $\sh{M}$, $\sh{N}$ be two $\sh{A}$-modules. For each open $U\subset Y$, we
have by definition that
$\Gamma(\psi^{-1}(U),\shHom_\sh{A}(\sh{M},\sh{N}))
  =\Hom_{\sh{A}|V}(\sh{M}|V,\sh{N}|V)$, where we put $V=\psi^{-1}(U)$; the map
$u\mapsto\Psi_*(u)$ is a homomorphism
\[
  \Hom_{\sh{A}|V}(\sh{M}|V,\sh{N}|V)
  \longrightarrow\Hom_{\sh{B}|U}(\Psi_*(\sh{M})|U,\Psi_*(\sh{N})|U)
\]
on the $\Gamma(U,\sh{B})$-module structures; these homomorphisms are compatible
with the restriction operations, hence they define a canonical functorial
homomorphism of $\sh{B}$-modules
\[
  \Psi_*(\shHom_\sh{A}(\sh{M},\sh{N}))
  \longrightarrow\shHom_\sh{B}(\Psi_*(\sh{M}),\Psi_*(\sh{N})).
  \tag{4.2.3.1}
\]
\end{env}

\begin{env}[4.2.4]
\label{env-0.4.2.4}
If $\sh{C}$ is an $\sh{A}$-algebra, the composite homomorphism
\[
  \Psi_*(\sh{C})\otimes_\sh{B}\Psi_*(\sh{C})
  \longrightarrow\Psi_*(\sh{C}\otimes_\sh{A}\sh{C})
  \longrightarrow\Psi_*(\sh{C})
\]
defines on $\Psi_*(\sh{C})$ the structure of a {\it $\sh{B}$-algebra}, as a
result of (4.2.2.2). We see similarly that if $\sh{M}$ is a $\sh{C}$-module,
$\Psi_*(\sh{M})$ is canonically equipped with the structure of a
$\Psi_*(\sh{C})$-module.
\end{env}

\begin{env}[4.2.5]
\label{env-0.4.2.5}
Consider in particular the case where $X$ is a {\it closed} subspace of $Y$ and
where $\psi$ is the canonical injection $j:X\to Y$. If
$\sh{B}'=\sh{B}|X=j^*(\sh{B})$ is the restriction of the sheaf of rings $\sh{B}$
to $X$, an $\sh{A}$-module $\sh{M}$ can be considered as a $\sh{B}'$-module by
means of the homomorphism $\theta^\sharp:\sh{B}'\to\sh{A}$; then
$\Psi_*(\sh{M})$ is the $\sh{B}$-module which induces $\sh{M}$ on $X$ and $0$
elsewhere. If $\sh{N}$ is a second $\sh{A}$-module,
$\Psi_*(\sh{M})\otimes_\sh{B}\Psi_*(\sh{N})$ canonically identifies with
$\Psi_*(\sh{M}\otimes_{\sh{B}'}\sh{N})$ and
$\shHom_\sh{B}(\Psi_*(\sh{M}),\Psi_*(\sh{N}))$ with
$\Psi_*(\shHom_{\sh{B}'}(\sh{M},\sh{N}))$.
\end{env}

\begin{env}[4.2.6]
\label{env-0.4.2.6}
Let $(Z,\sh{C})$ be a third ringed space, $\Psi'=(\psi',\theta')$ a morphism
$(Y,\sh{B})\to(Z,\sh{C})$; if $\Psi''$ is the composite morphism
$\Psi'\circ\Psi$, it is clear that we have $\Psi_*''=\Psi_*'\circ\Psi_*$.
\end{env}

\subsection{Inverse image of an $\mathcal{A}$-module}
\label{subsection-inverse-image-of-module-sheaf}

\begin{env}[4.3.1]
\label{env-0.4.3.1}
The hypotheses and notation being the same as \hyperref[env-0.4.2.1]{(4.2.1)}, let $\sh{G}$ be
a $\sh{B}$-module and $\psi^*(\sh{G})$ the inverse image \hyperref[env-0.3.7.1]{(3.7.1)} which
is therefore a sheaf of abelian groups on $X$. The definition of sections of
$\psi^*(\sh{G})$ and of $\psi^*(\sh{B})$ \hyperref[env-0.3.7.1]{(3.7.1)} shows that
$\psi^*(\sh{G})$ is canonically equipped with a $\psi^*(\sh{B})$-module
structure. On the other hand, the homomorphism
$\theta^\sharp:\psi^*(\sh{B})\to\sh{A}$ endows $\sh{A}$ with the a
$\psi^*(\sh{B})$-module structure, which we denote by $\sh{A}_{[\theta]}$ when
necessary to avoid confusion; the tensor product
$\psi^*(\sh{G})\otimes_{\psi^*(\sh{B})}\sh{A}_{[\theta]}$ is then equipped with
an $\sh{A}$-module structure. We say that this $\sh{A}$-module is {\it the
inverse image of $\sh{G}$ under the morphism $\Psi$}
\oldpage{41}
and we denote it by $\Psi^*(\sh{G})$. If $\sh{G}_1$, $\sh{G}_2$ are two
$\sh{B}$-modules over $Y$, $v$ a $\sh{B}$-homomorphism $\sh{G}_1\to\sh{G}_2$,
then $\psi^*(v)$, as we check immediately, is a $\psi^*(\sh{B})$-homomorphism
from $\psi^*(\sh{G}_1)$ to $\psi^*(\sh{G}_2)$; as a result $\psi^*(v)\otimes 1$
is an $\sh{A}$-homomorphism $\Psi^*(\sh{G}_1)\to\Psi^*(\sh{G}_2)$, which we
denote by $\Psi^*(v)$. So we define $\Psi^*$ as a {\it covariant functor} from
the category of $\sh{B}$-modules to that of $\sh{A}$-modules. Here, this functor
(contrary to $\psi^*$) is no longer exact in general, but only {\it right
exact}, the tensorization by $\sh{A}$ being a right exact functor to the
category of $\psi^*(\sh{B})$-modules.

For each $x\in X$, we have
$(\Psi^*(\sh{G}))_x=\sh{G}_{\psi(x)}\otimes_{\sh{B}_{\psi(x)}}\sh{A}_x$,
according to \hyperref[env-0.3.7.2]{(3.7.2)}. The support of $\Psi^*(\sh{G})$ is thus
contained in $\psi^{-1}(\Supp(\sh{G}))$.
\end{env}

\begin{env}[4.3.2]
\label{env-0.4.3.2}
Let $(\sh{G}_\lambda)$ be an inductive system of $\sh{B}$-modules, and let
$\sh{G}=\varinjlim\sh{G}_\lambda$ be its inductive limit. The canonical
homomorphisms $\sh{G}_\lambda\to\sh{G}$ define the
$\psi^*(\sh{B})$-homomorphisms $\psi^*(\sh{G}_\lambda)\to\psi^*(\sh{G})$, which
give a canonical homomorphism
$\varinjlim\psi^*(\sh{G}_\lambda)\to\psi^*(\sh{G})$. As the stalk at a point of
an inductive limit of sheaves is the inductive limit of the stalks at the same
point (G, II, 1.11), the preceding canonical homomorphism is {\it bijective}
\hyperref[env-0.3.7.2]{(3.7.2)}. In addition, the tensor product commutes with inductive
limits of sheaves, and we thus have a {\it canonical functorial isomorphism}
$\varinjlim\Psi^*(\sh{G}_\lambda)\isoto\Psi^*(\varinjlim\sh{G}_\lambda)$ of
$\sh{A}$-modules.

On the other hand, for a finite direct sum $\bigoplus_i\sh{G}_i$ of
$\sh{B}$-modules, it is clear that
$\psi^*(\bigoplus_i\sh{G}_i)=\bigoplus_i\psi^*(\sh{G}_i)$, therefore, by
tensoring with $\sh{A}_{[\theta]}$,
\[
  \Psi^*\big(\bigoplus_i\sh{G}_i\big)=\bigoplus_i\Psi^*(\sh{G}_i).
  \tag{4.3.2.1}
\]
By passing to the inductive limit, we deduce, in light of the above, that the
above equality is still true for {\it any} direct sum.
\end{env}

\begin{env}[4.3.3]
\label{env-0.4.3.3}
Let $\sh{G}_1$, $\sh{G}_2$ be two $\sh{B}$-modules; from the definition of the
inverse images of sheaves of abelian groups \hyperref[env-0.3.7.1]{(3.7.1)}, we obtain
immediately a canonical homomorphism
$\psi^*(\sh{G}_1)\otimes_{\psi^*(\sh{B})}\psi^*(\sh{G}_2)
  \to\psi^*(\sh{G}_1\otimes_\sh{B}\sh{G}_2)$ of $\psi^*(\sh{B})$-modules, and
the stalk at a point of a tensor product of sheaves being the tensor product of
the stalks at this point (G, II, 2.8), we deduce from \hyperref[env-0.3.7.2]{(3.7.2)} that the
above homomorphism is in fact a {\it isomorphism}. By tensoring with $\sh{A}$,
we obtain a {\it canonical functorial isomorphism}
\[
  \Psi^*(\sh{G}_1)\otimes_\sh{A}\Psi^*(\sh{G}_2)
  \isoto\Psi^*(\sh{G}_1\otimes_\sh{B}\sh{G}_2).
  \tag{4.3.3.1}
\]
\end{env}

\begin{env}[4.3.4]
\label{env-0.4.3.4}
Let $\sh{C}$ be a $\sh{B}$-algebra; the data of the algebra structure on
$\sh{C}$ is the same as the data of a $\sh{B}$-homomorphism
$\sh{C}\otimes_\sh{B}\sh{C}\to\sh{C}$ satifying the associativity and
commutativity conditions (conditions which are checked stalk-wise); the above
isomorphism allows us to consider this homomorphism as a homomorphism of
$\sh{A}$-modules $\Psi^*(\sh{C})\otimes_\sh{A}\Psi^*(\sh{C})\to\Psi^*(\sh{C})$
satisfying the same conditions, so $\Psi^*(\sh{C})$ is thus equipped with an
$\sh{A}$-algebra structure. In particular, it follows immediately from the
definitions that the $\sh{A}$-algebra $\Psi^*(\sh{B})$ is {\it equal to
$\sh{A}$} (up to a canonical isomorphism).

Similarly, if $\sh{M}$ is a $\sh{C}$-module, the data of this module structure
is the same
\oldpage{42}
as that of a $\sh{B}$-homomorphism $\sh{C}\otimes_\sh{B}\sh{M}\to\sh{M}$
satisying the associativity condition; hence we give a $\Psi^*(\sh{C})$-module
structure on $\Psi^*(\sh{M})$.
\end{env}

\begin{env}[4.3.5]
\label{env-0.4.3.5}
Let $\sh{J}$ be a sheaf of ideals of $\sh{B}$; as the functor $\psi^*$ is exact,
the $\psi^*(\sh{B})$-module $\psi^*(\sh{J})$ canonically identifies with a sheaf
of ideals of $\psi^*(\sh{B})$; the canonical injection
$\psi^*(\sh{J})\to\psi^*(\sh{B})$ then gives a homomorphism of $\sh{A}$-modules
$\Psi^*(\sh{J})=\psi^*(\sh{J})\otimes_{\psi^*(\sh{B})}\sh{A}_{[\theta]}
  \to\sh{A}$; we denote by $\Psi^*(\sh{J})\sh{A}$, or $\sh{J}\sh{A}$ if there is
no fear of confusion, the image of $\Psi^*(\sh{J})$ under this homomorphism. So
we have by definition $\sh{J}\sh{A}=\theta^\sharp(\psi^*(\sh{J}))\sh{A}$ and in
particular, for each $x\in X$,
$(\sh{J}\sh{A})_x=\theta_x^\sharp(\sh{J}_{\psi(x)})\sh{A}_x$, taking into
account the canonical identification between the stalks of $\psi^*(\sh{J})$ and
those of $\sh{J}$ \hyperref[env-0.3.7.2]{(3.7.2)}. If $\sh{J}_1$, $\sh{J}_2$ are two sheaves
of ideals of $\sh{B}$, then we have
$(\sh{J}_1\sh{J}_2)\sh{A}
  =\sh{J}_1(\sh{J}_2\sh{A})=(\sh{J}_1\sh{A})(\sh{J}_2\sh{A})$.

If $\sh{F}$ is an $\sh{A}$-module, we set $\sh{J}\sh{F}=(\sh{J}\sh{A})\sh{F}$.
\end{env}

\begin{env}[4.3.6]
\label{env-0.4.3.6}
Let $(Z,\sh{C})$ be a third ringed space, $\Psi'=(\psi',\theta')$ a morphism
$(Y,\sh{B})\to(Z,\sh{C})$; if $\Psi''$ is the composite morphism
$\Psi'\circ\Psi$, it follows from the definition \hyperref[env-0.4.3.1]{(4.3.1)} and from
(4.3.3.1) that we have ${\Psi''}^*=\Psi^*\circ{\Psi'}^*$.
\end{env}

\subsection{Relation between direct and inverse images}
\label{subsection-relation-between-direct-and-inverse-images}

\begin{env}[4.4.1]
\label{env-0.4.4.1}
The hypotheses and notations being the same as in \hyperref[env-0.4.2.1]{(4.2.1)}, let
$\sh{G}$ be a $\sh{B}$-module. By definition, a homomorphism
$u:\sh{G}\to\Psi_*(\sh{F})$ of $\sh{B}$-modules is still called a
{\it $\Psi$-morphisms from $\sh{G}$ to $\sh{F}$}, or simply a
{\it homomorphism from $\sh{G}$ to $\sh{F}$} and we write it as
$u:\sh{G}\to\sh{F}$ when no confusion will occur. To give such a homomorphism is
the same as giving, for each pair $(U,V)$ where $U$ is an open set of $X$, $V$
an open set of $Y$ such that $\psi(U)\subset V$, a {\it homomorphism
$u_{U,V}:\Gamma(V,\sh{G})\to\Gamma(U,\sh{F})$ of $\Gamma(V,\sh{B})$-modules},
$\Gamma(U,\sh{F})$ being considered as a $\Gamma(V,\sh{B})$-module by means of
the ring homomorphism $\theta_{U,V}:\Gamma(V,\sh{B})\to\Gamma(U,\sh{A})$; the
$u_{U,V}$ must in addition render commutative the diagrams (3.5.1.1). It
suffices, moreover, to define $u$ by the data of the $u_{U,V}$ when $U$
(resp. $V$) varies over a basis $\mathfrak{B}$ (resp. $\mathfrak{B}'$) for the
topology of $X$ (resp. $Y$) and to check the commutativity of (3.5.1.1) for
these restrictions.
\end{env}

\begin{env}[4.4.2]
\label{env-0.4.4.2}
Under the hypotheses of \hyperref[env-0.4.2.1]{(4.2.1)} and \hyperref[env-0.4.2.6]{(4.2.6)}, let $\sh{H}$ be
a $\sh{C}$-module, $v:\sh{H}\to\Psi_*'(\sh{G})$ a $\Psi'$-morphism; then
$w:\sh{H}\xrightarrow{v}\Psi_*'(\sh{G})
  \xrightarrow{\Psi_*'(u)}\Psi_*'(\Psi_*(\sh{F}))$ is a $\Psi''$-morphism which
we call the {\it composition} of $u$ and $v$.
\end{env}

\begin{env}[4.4.3]
\label{env-0.4.4.3}
We will now see that we can define a canonical {\it isomorphism} of {\it bifunctors} in
$\sh{F}$ and $\sh{G}$
\[
  \Hom_\sh{A}(\Psi^*(\sh{G}),\sh{F})\isoto\Hom_\sh{B}(\sh{G},\Psi_*(\sh{F}))
  \tag{4.4.3.1}
\]
which we denote by $v\mapsto v_\theta^\flat$ (or simply $v\mapsto v^\flat$ if there is no
chance of confusion); we denote by $u\mapsto u_\theta^\sharp$, or $u\mapsto u^\sharp$, the
inverse isomorphism. This definition is the following: by composing
$v:\Psi^*(\sh{G})\to\sh{F}$ with the canonical map $\psi^*(\sh{G})\to\Psi^*(\sh{G})$, we
obtain a homomorphism of sheaves of groups $v':\psi^*(\sh{G})\to\sh{F}$, which is also a
homomorphism of $\psi^*(\sh{B})$-modules. We obtain \hyperref[env-0.3.7.1]{(3.7.1)} a homomorphism
${v'}^\flat:\sh{G}\to\psi_*(\sh{F})=\Psi_*(\sh{F})$, which is also a homomorphism of
$\sh{B}$-modules as we
\oldpage{43}
check easily; we take $v_\theta^\flat={v'}^\flat$. Similarly, for
$u:\sh{G}\to\Psi_*(\sh{F})$, which is a homomorphism of $\sh{B}$-modules, we obtain
\hyperref[env-0.3.7.1]{(3.7.1)} a homomorphism $u^\sharp:\psi^*(\sh{G})\to\sh{F}$ of
$\psi^*(\sh{B})$-modules, hence by tensoring with $\sh{A}$ we have a homomorphism of
$\sh{A}$-modules $\Psi^*(\sh{G})\to\sh{F}$, which we denote by $u_\theta^\sharp$. It is
immediate to check that $(u_\theta^\sharp)_\theta^\flat=u$ and
$(v_\theta^\flat)_\theta^\sharp=v$, so we have established the functorial nature in $\sh{F}$
of the isomorphism $v\mapsto v_\theta^\flat$. The functorial nature in $\sh{G}$ of
$u\mapsto u_\theta^\sharp$ is then formally shown as in \hyperref[env-0.3.5.4]{(3.5.4)} (reasoning that
would also prove the functorial nature of $\Psi^*$ established in \hyperref[env-0.4.3.1]{(4.3.1)}
directly).

If we take for $v$ the identity homomorphism of $\Psi^*(\sh{B})$, $v_\theta^\flat$ is a
homomorphism
\[
  \rho_\sh{G}:\sh{G}\longrightarrow\Psi_*(\Psi^*(\sh{G}));
  \tag{4.4.3.2}
\]
if we take for $u$ the identity homomorphism of $\Psi_*(\sh{F})$, $u_\theta^\sharp$ is a
homomorphism
\[
  \sigma_\sh{F}:\Psi^*(\Psi_*(\sh{F}))\longrightarrow\sh{F};
  \tag{4.4.3.3}
\]
these homomorphisms will be called {\it canonical}. They are in general neither injective or
surjective. We have canonical factorizations analogous to (3.5.3.3) and (3.5.4.4).

We note that if $s$ is a section of $\sh{G}$ over an open set $V$ of $Y$, $\rho_\sh{G}(s)$ is
the section $s'\otimes 1$ of $\Psi^*)(\sh{G})$ over $\psi^{-1}(V)$, $s'$ being such that
$s_x'=s_{\psi(x)}$ for all $x\in\psi^{-1}(V)$. We also note that if
$u:\sh{G}\to\psi_*(\sh{F})$ is a homomorphism, it defines for all $x\in X$ a homomorphism
$u_x:\sh{G}_{\psi(x)}\to\sh{F}_x$ on the stalks, obtained by composing
$(u^\sharp)_x:(\Psi^*(\sh{G}))_x\to\sh{F}_x$ and the canonical homomorphism
$s_x\mapsto s_x\otimes 1$ from $\sh{G}_{\psi(x)}$ to
$(\Psi^*(\sh{G}))_x=\sh{G}_{\psi(x)}\otimes_{\sh{B}_{\psi(x)}}\sh{A}_x$. The homomorphism
$u_x$ is obtained also by passing to the inductive limit relative to the homomorphisms
$\Gamma(V,\sh{G})\xrightarrow{u}\Gamma(\psi^{-1}(V),\sh{F})\to\sh{F}_x$, where $V$ varies
over the neighborhoods of $\psi(x)$.
\end{env}

\begin{env}[4.4.4]
\label{env-0.4.4.4}
Let $\sh{F}_1$, $\sh{F}_2$ be $\sh{A}$-modules, $\sh{G}_1$, $\sh{G}_2$ be $\sh{B}$-modules,
$u_i$ ($i=1,2$) a homomorphism from $\sh{G}_i$ to $\sh{F}_i$. We denote by $u_1\otimes u_2$
the homomorphism $u:\sh{G}_1\otimes_\sh{B}\sh{G}_2\to\sh{F}_1\otimes_\sh{A}\sh{F}_2$ such
that $u^\sharp=(u_1)^\sharp\otimes(u_2)^\sharp$ (taking into account (4.3.3.1)); we check
that $u$ is also the composition
$\sh{G}_1\otimes_\sh{B}\sh{G}_2\to\Psi_*(\sh{F}_1)\otimes_\sh{B}\Psi_*(\sh{F}_2)
\to\Psi_*(\sh{F}_1\otimes_\sh{A}\sh{F}_2)$, where the first arrow is the ordinary tensor
product $u_1\otimes_\sh{B}u_2$ and the second is the canonical homomorphism (4.2.2.1).
\end{env}

\begin{env}[4.4.5]
\label{env-0.4.4.5}
Let $(\sh{G}_\lambda)_{\lambda\in L}$ be an inductive system of
$\sh{B}$-modules, and, for each $\lambda\in L$, let $u_\lambda$ be a
homomorphism $\sh{G}_\lambda\to\Psi_*(\sh{F})$, form an inductive limit; we put
$\sh{G}=\varinjlim\sh{G}_\lambda$ and $u=\varinjlim u_\lambda$; then the
$(u_\lambda)^\sharp$ form an inductive system of homomorphisms
$\Psi^*(\sh{G}_\lambda)\to\sh{F}$, and the inductive limit of this system is
none other than $u^\sharp$.
\end{env}

\begin{env}[4.4.6]
\label{env-0.4.4.6}
Let $\sh{M}$, $\sh{N}$ be two $\sh{B}$-modules, $V$ an open set of $Y$,
$U=\psi^{-1}(V)$; the map $v\mapsto\Psi^*(v)$ is a homomorphism
\[
  \Hom_{\sh{B}|V}(\sh{M}|V,\sh{N}|V)
  \longrightarrow\Hom_{\sh{A}|U}(\Psi^*(\sh{M})|U,\Psi^*(\sh{N})|U)
\]
for the $\Gamma(V,\sh{B})$-module structures
($\Hom_{\sh{A}|U}(\Psi^*(\sh{M})|U,\Psi^*(\sh{N})|U)$ is normaly equipped with the a
$\Gamma(U,\psi^*(\sh{B}))$-module structure, and thanks to the canonical homomorphism
\oldpage{44}
\hyperref[env-0.3.7.2]{(3.7.2)} $\Gamma(V,\sh{B})\to\Gamma(U,\psi^*(\sh{B}))$, it is also a
$\Gamma(V,\sh{B})$-module). We see immediately that these homomorphisms are compatible with
the restriction morphisms, and as a result define a canonical functorial homomorphism
\[
  \gamma:\shHom_\sh{B}(\sh{M},\sh{N})
  \longrightarrow\Psi_*(\shHom_\sh{A}(\Psi^*(\sh{M}),\Psi^*(\sh{N}));
\]
it also corresponds to this homomorphism the homomorphism
\[
  \gamma^\sharp:\Psi^*(\shHom_\sh{B}(\sh{M},\sh{N}))
  \longrightarrow\shHom_\sh{A}(\Psi^*(\sh{M}),\Psi^*(\sh{N}))
\]
and these canonical morphisms are functorial in $\sh{M}$ and $\sh{N}$.
\end{env}

\begin{env}[4.4.7]
\label{env-0.4.4.7}
Suppose that $\sh{F}$ (resp. $\sh{G}$) is an $\sh{A}$-algebra (resp. a $\sh{B}$-algebra). If
$u:\sh{G}\to\Psi_*(\sh{F})$ is a homomorphism of $\sb{B}$-algebras, $u^\sharp$ is a
homomorphism $\Psi^*(\sh{G})\to\sh{F}$ of $\sh{A}$-algebras; this follows from the
commutativity of the diagram
\[
  \xymatrix{
    \sh{G}\otimes_\sh{B}\sh{G}\ar[r]\ar[d] &
    \sh{G}\ar[d]^u\\
    \Psi_*(\sh{F}\otimes_\sh{A}\sh{F})\ar[r] &
    \Psi_*(\sh{F})
  }
\]
and from \hyperref[env-0.4.4.4]{(4.4.4)}. Similarly, if $v:\Psi^*(\sh{G})\to\sh{F}$ is a homomorphism of
$\sh{A}$-algebras, $v^\flat:\sh{G}\to\Psi_*(\sh{F})$ is a homomorphism of $\sh{B}$-algebras.
\end{env}

\begin{env}[4.4.8]
\label{env-0.4.4.8}
Let $(Z,\sh{C})$ be a third ringed space, $\Psi'=(\psi',\theta')$ a morphism
$(Y,\sh{B})\to(Z,\sh{C})$, and $\Psi'':(X,\sh{A})\to(Z,\sh{C})$ the composite morphism
$\Psi'\circ\Psi$. Let $\sh{H}$ be a $\sh{C}$-module, $u'$ a homomorphsim from $\sh{H}$ to
$\sh{G}$; the composition $v''=v\circ v'$ is by definition the homomorphism from $\sh{H}$ to
$\sh{F}$ defined by
$\sh{H}\xrightarrow{v'}\Psi_*'(\sh{G})\xrightarrow{\Psi_*'(v)}\Psi_*'(\Psi_*(\sh{F}))$; we
check that ${v''}^\sharp$ is the homomorphism
\[
  \Psi^*({\Psi'}^*(\sh{H}))\xrightarrow{\Psi^*({v'}^\sharp)}\Psi^*(\sh{G})
  \xrightarrow{v^\sharp}\sh{F}.
\]
\end{env}

\section{Quasi-coherent and coherent sheaves}
\label{section-qcoh-and-coh-sheaves}

\subsection{Quasi-coherent sheaves}
\label{subsection-qcoh-sheaves}

\begin{env}[5.1.1]
\label{env-0.5.1.1}
Let $(X,\OO_X)$ be a ringed space, $\sh{F}$ an $\OO_X$-module. The data of a homomorphism
$u:\OO_X\to\sh{F}$ of $\OO_X$-modules is equivalent to that of the section
$s=u(1)\in\Gamma(X,\sh{F})$. Indeed, when $s$ is given, for each section
$t\in\Gamma(U,\OO_X)$, we necessarily have $u(t)=t\cdot(s|U)$; we say that $u$ is
{\it defined by the section $s$}. If now $I$ is any set of indices, consider the direct
sum sheaf $\OO_X^{(I)}$, and for each $i\in I$, let $h_i$ be the canonical injection of
the $i$-th factor into $\OO_X^{(I)}$; we know that $u\mapsto(u\circ h_i)$ is an isomorphism
from $\Hom_{\OO_X}(\OO_X^{(I)},\sh{F})$ to the product $(\Hom_{\OO_X}(\OO_X,\sh{F}))^I$. So
there is a canonical one-to-one correspondence between the homomorphisms
$u:\OO_X^{(I)}\to\sh{F}$ and the {\it families of sections $(s_i)_{i\in I}$ of $\sh{F}$ over
$X$}. The homomorphism $u$ corresponding to $(s_i)$ sends an element
$(a_i)\in(\Gamma(U,\OO_X))^{(I)}$ to $\sum_{i\in I}a_i\cdot(s_i|U)$.

We say that $\sh{F}$ is {\it generated by the family $(s_i)$} if the homomorphism
$\OO_X^{(I)}\to\sh{F}$ defined
\oldpage{45}
for each family is {\it surjective} (in other words, if, for each $x\in X$, $\sh{F}_x$ is an
$\OO_x$-module generated by the $(s_i)_x$). We say that $\sh{F}$ is {\it generated by its
sections over $X$} if it is generated by the family of all these sections (or by a
subfamily), in other words, if there exists a surjective homomorphism $\OO_X^{(I)}\to\sh{F}$
for a suitable $I$.

We note that a $\OO_X$-module $\sh{F}$ can be such that there exists a point $x_0\in X$ for
which $\sh{F}|U$ is not generated by its sections over $U$, {\it regardless of the choice
of neighborhood $U$ of $x_0$}: it suffices to take $X=\bb{R}$, for $\OO_X$ the simple sheaf
$\bb{Z}$, for $\sh{F}$ the algebraic subsheaf of $\OO_X$ such that $\sh{F}_0=\{0\}$,
$\sh{F}_x=\bb{Z}$ for $x\neq 0$, and finally $x_0=0$: the only section of $\sh{F}|U$ over $U$
is $0$ for a neighborhood $U$ of $0$.
\end{env}

\begin{env}[5.1.2]
\label{env-0.5.1.2}
Let $f:X\to Y$ be a morphism of ringed spaces. If $\sh{F}$ is a $\OO_X$-module generated by
its sections over $X$, then the canonical homomorphism $f^*(f_*(\sh{F}))\to\sh{F}$ (4.4.3.3)
is {\it surjective}; indeed, with the notations of \hyperref[env-0.5.1.1]{(5.1.1)}, $s_i\otimes 1$ is a
section of $f^*(f_*(\sh{F}))$ over $X$, and its image in $\sh{F}$ is $s_i$. The example of
\hyperref[env-0.5.1.1]{(5.1.1)} where $f$ is the identity shows that the inverse of this proposition is
false in general.

If $\sh{G}$ is an $\OO_Y$-module generated by its sections over $Y$, then $f^*(\sh{G})$ is
generated by its sections over $X$, since $f^*$ is a right exact functor.
\end{env}

\begin{env}[5.1.3]
\label{env-0.5.1.3}
We say that an $\OO_X$-module $\sh{F}$ is {\it quasi-coherent} if, for each $x\in X$, there
is an open neighborhood $U$ of $x$ wuch that $\sh{F}|U$ is isomorphic to the {\it cokernel}
of a homomorphism of the form $\OO_X^{(I)}|U\to\OO_X^{(J)}|U$, where $I$ and $J$ are sets of
arbitrary indices. It is clear that $\OO_X$ is itself a quasi-coherent $\OO_X$-module, and
that any direct sum of quasi-coherent $\OO_X$-modules is again a quasi-coherent
$\OO_X$-module. We say that an {\it $\OO_X$-algebra $\sh{A}$} is {\it quasi-coherent} if
it is quasi-coherent as an $\OO_X$-module.
\end{env}

\begin{env}[5.1.4]
\label{env-0.5.1.4}
Let $f:X\to Y$ be a morphism of ringed spaces. If $\sh{G}$ is a quasi-coherent
$\OO_Y$-module, then $f^*(\sh{G})$ is a quasi-coherent $\OO_X$-module. Indeed, for each
$x\in X$, there is an open neighborhood $V$ of $f(x)$ in $Y$ such that $\sh{G}|V$ is the
cokernel of a homomorphism $\OO_Y^{(I)}|V\to\OO_Y^{(J)}|V$. If $U=f^{-1}(V)$, and if $f_U$ is
the restriction of $f$ to $U$, we have $f^*(\sh{G})|U=f_U^*(\sh{G}|V)$; as $f_U^*$ is right
exact and commutes with direct sums, $f_U^*(\sh{G}|V)$ is the cokernel of a homomorphism
$\OO_X^{(I)}|U\to\OO_X^{(J)}|U$.
\end{env}

\subsection{Sheaves of finite type}
\label{subsection-sheaves-of-finite-type}

\begin{env}[5.2.1]
\label{env-0.5.2.1}
We say that an $\OO_X$-module $\sh{F}$ is {\it of finite type} if, for each $x\in X$, there
exists an open neighborhood $U$ of $x$ such that $\sh{F}|U$ is generated by a {\it finite}
family of sections over $U$, or if it is isomorphic to a sheaf quotient of a sheaf of the
form $(\OO_X|U)^p$ where $p$ is finite. Each sheaf quotient of a sheaf of finite type is
again a sheaf of finite type, as well as each finite direct sum and each finite tensor
product of sheaves of finite type. An $\OO_X$-module of finite type is not necessarily
quasi-coherent, as we can see for the $\OO_X$-module $\OO_X/\sh{F}$, where $\sh{F}$ is the
example in \hyperref[env-0.5.1.1]{(5.1.1)}. If $\sh{F}$ is of finite type, $\sh{F}_x$ is a $\OO_x$-module
of finite type for each $x\in X$, but the example in \hyperref[env-0.5.1.1]{(5.1.1)} shows that this
condition is necessary but not sufficient in general.
\end{env}

\begin{env}[5.2.2]
\label{env-0.5.2.2}
Let $\sh{F}$ be an $\OO_X$-module {\it of finite type}. If $s_i$ ($1\leqslant i\leqslant n$)
are the sections of $\sh{F}$ over an open neighborhood $U$ of a point $x\in X$ and the
$(s_i)_x$ generate $\sh{F}_x$, there exists an open neighborhood $V\subset U$ of $x$ such
that the $(s_i)_y$ generate $\sh{F}_y$ for all $y\in Y$ (FAC, I, 2, 12, prop.~1). In
particular, we conclude that the support of $\sh{F}$ is {\it closed}.

\oldpage{46}
Similarly, if $u:\sh{F}\to\sh{G}$ is a homomorphism such that $u_x=0$, then there exists a
neighborhood $U$ of $x$ suc that $u_y=0$ for all $y\in U$.
\end{env}

\begin{env}[5.2.3]
\label{env-0.5.2.3}
Suppose that $X$ is {\it quasi-compact}, and let $\sh{F}$, $\sh{G}$ be two $\OO_X$-modules
such that $\sh{G}$ is {\it of finite type}, $u:\sh{F}\to\sh{G}$ a {\it surjective}
homomorphism. In addition, suppose that $\sh{F}$ is the inductive limit of an inductive
system $(\sh{F}_\lambda)$ of $\OO_X$-modules. Then there exists an index $\mu$ such that the
homomorphism $\sh{F}_\mu\to\sh{G}$ is {\it surjective}. Indeed, for each $x\in X$, there
exists a finite system of sections $s_i$ of $\sh{G}$ over an open neighborhood $U(x)$ of $x$
such that the $(s_i)_y$ generate $\sh{G}_y$ for all $y\in U(x)$; there is then an open
neighborhood $V(x)\subset U(x)$ of $x$ and $n$ sections $t_i$ of $\sh{F}$ over $V(x)$ such
that $s_i|V(s)=u(t_i)$ for all $i$; we can also suppose that the $t_i$ are the canonical
images of sections of a similar sheaf $\sh{F}_{\lambda(x)}$ over $V(x)$. We then cover $X$
with a finite number of neighborhoods $V(x_k)$, and let $\mu$ be the maximal index of the
$\lambda(x_k)$; it is clear that this index gives the answer.

Suppose still that $X$ is quasi-compact, and let $\sh{F}$ be an $\OO_X$-module of finite type
generated by its sections over $X$ \hyperref[env-0.5.1.1]{(5.1.1)}; then $\sh{F}$ is generated by a
{\it finite} subfamily of these sections: indeed, it suffices to cover $X$ by a finite
number of open neighborhoods $U_k$ such that, for each $k$, there is a finite number of
sections $s_{ik}$ of $\sh{F}$ over $X$ whose restrictions to $U_k$ generate $\sh{F}|U_k$; it
is clear that the $s_{ik}$ then generate $\sh{F}$.
\end{env}

\begin{env}[5.2.4]
\label{env-0.5.2.4}
Let $f:X\to Y$ be a morphism of ringed spaces. If $\sh{G}$ is an $\OO_Y$-module of finite
type, then $f^*(\sh{G})$ is an $\OO_X$-module of finite type. Indeed, for each $x\in X$,
there is an open neighborhood $V$ of $f(x)$ in $Y$ and a surjective homomorphism
$v:\OO_Y^p|V\to\sh{G}|V$. If $U=f^{-1}(V)$ and if $f_U$ is the restriction of $f$ to $U$, we
have $f^*(\sh{G})|U=f_U^*(\sh{G}|V)$; as $f_U^*$ is right exact \hyperref[env-0.4.3.1]{(4.3.1)} and
commutes with direct sums \hyperref[env-0.4.3.2]{(4.3.2)}, $f_U^*(v)$ is a surjective homomorphism
$\OO_X^p|U\to f^*(\sh{G})|U$.
\end{env}

\begin{env}[5.2.5]
\label{env-0.5.2.5}
We say that an $\OO_X$-module $\sh{F}$ {\it admits a finite presentation} if, for each
$x\in X$, there exists an open neighborhood $U$ of $x$ such that $\sh{F}|U$ is isomorphic
to a {\it cokernel of a $(\OO_X|U)$-homomorphism $\OO_X^p|U\to\OO_X^q|U$}, $p$ and $q$ being
two integers $>0$. Such an $\OO_X$-module is therefore of finite type and quasi-coherent. If
$f:X\to Y$ is a morphism of ringed spaces, and if $\sh{G}$ is an $\OO_Y$-module admitting a
finite presentation, $f^*(\sh{G})$ admits a finite presentation, as shown in the argument of
\hyperref[env-0.5.1.4]{(5.1.4)}.
\end{env}

\begin{env}[5.2.6]
\label{env-0.5.2.6}
Let $\sh{F}$ be an $\OO_X$-module admitting a finite presentation \hyperref[env-0.5.2.5]{(5.2.5)}; then,
for each $\OO_X$-module $\sh{H}$, the canonical functorial homomorphism
\[
  (\shHom_{\OO_X}(\sh{F},\sh{H}))_x\longrightarrow\Hom_{\OO_x}(\sh{F}_x,\sh{H}_x)
\]
is {\it bijective} (T, 4.1.1).
\end{env}

\begin{env}[5.2.7]
\label{env-0.5.2.7}
Let $\sh{F}$, $\sh{G}$ be two $\OO_X$-modules admitting a finite presentation. If, for an
$x\in X$, $\sh{F}_x$ ad $\sh{G}_x$ are {\it isomorphic} as $\OO_x$-modules, then there
exists an open neighborhood $U$ of $x$ such that $\sh{F}|U$ and $\sh{G}|U$ are
{\it isomorphic}. Indeed, if $\vphi:\sh{F}_x\to\sh{G}_x$ and $\psi:\sh{G}_x\to\sh{F}_x$ are
an isomorphism and its inverse isomorphism, then there exists, according to
\hyperref[env-0.5.2.6]{(5.2.6)}, an open neighborhood $V$ of $x$ and a section $u$ (resp. $v$) of
$\shHom_{\OO_X}(\sh{F},\sh{G})$ (resp. $\shHom_{\OO_X}(\sh{G},\sh{F})$) over $V$ such
\oldpage{47}
that $u_x=\vphi$ (resp. $v_x=\psi$). As $(u\circ v)_x$ and $(v\circ u)_x$ are the identity
automorphisms, there exists an open neighborhood $U\subset V$ of $x$ such that $(u\circ v)|U$
and $(v\circ u)|U$ are the identity automorphisms, hence the proposition.
\end{env}

\subsection{Coherent sheaves}
\label{subsection-coh-sheaves}

\begin{env}[5.3.1]
\label{env-0.5.3.1}
We say that an $\OO_X$-module $\sh{F}$ is {\it coherent} if it satisfies the two following
conditions:
\begin{itemize}
  \item[(a)] $\sh{F}$ is of finite type.
  \item[(b)] for each open $U\subset X$, integer $n>0$, and homomorphism $u:\OO_X^n|U\to\sh{F}|U$,
             the kernel of $u$ is of finite type.
\end{itemize}
We note that these two conditions are of a {\it local} nature.

For most of the proofs of the properties of coherent sheaves in what follows,
cf. (FAC, I, 2).
\end{env}

\begin{env}[5.3.2]
\label{env-0.5.3.2}
Each coherent $\OO_X$-module admits a finite presentation \hyperref[env-0.5.2.5]{(5.2.5)}; the inverse is
not necessarily true, since $\OO_X$ itself is not necessarily a coherent $\OO_X$-module.

Each $\OO_X$-submodule {\it of finite type} of a coherent $\OO_X$-module is coherent; each
{\it finite} direct sum of coherent $\OO_X$-modules is a coherent $\OO_X$-module.
\end{env}

\begin{env}[5.3.3]
\label{env-0.5.3.3}
If $0\to\sh{F}\to\sh{G}\to\sh{H}\to 0$ is an exact sequence  of $\OO_X$-modules and if two of
these $\OO_X$-modules are coherent, so is the third.
\end{env}

\begin{env}[5.3.4]
\label{env-0.5.3.4}
If $\sh{F}$ and $\sh{G}$ are two coherent $\OO_X$-modules, $u:\sh{F}\to\sh{G}$ a
homomorphism, then $\Im(u)$, $\Ker(u)$, and $\Coker(u)$ are coherent $\OO_X$-modules. In
particular, if $\sh{F}$ and $\sh{G}$ are $\OO_X$-submodules of a coherent $\OO_X$-module,
then $\sh{F}+\sh{G}$ and $\sh{F}\cap\sh{G}$ are coherent.

If $\sh{A}\to\sh{B}\to\sh{C}\to\sh{D}\to\sh{E}$ is an exact sequence of $\OO_X$-modules, and
if $\sh{A}$, $\sh{B}$, $\sh{D}$, $\sh{E}$ are coherent, then $\sh{C}$ is coherent.
\end{env}

\begin{env}[5.3.5]
\label{env-0.5.3.5}
If $\sh{F}$ and $\sh{G}$ are two coherent $\OO_X$-modules, then so are
$\sh{F}\otimes_{\OO_X}\sh{G}$ are $\shHom_{\OO_X}(\sh{F},\sh{G})$.
\end{env}

\begin{env}[5.3.6]
\label{env-0.5.3.6}
Let $\sh{F}$ be a coherent $\OO_X$-module, $\sh{J}$ a coherent sheaf of ideals of $\OO_X$.
Then the $\OO_X$-module $\sh{J}\sh{F}$ is coherent, as the image of
$\sh{J}\otimes_{\OO_X}\sh{F}$ under the canonical homomorphism
$\sh{J}\otimes_{\OO_X}\sh{F}\to\sh{F}$ (\hyperref[env-0.5.3.4]{(5.3.4)} and \hyperref[env-0.5.3.5]{(5.3.5)}).
\end{env}

\begin{env}[5.3.7]
\label{env-0.5.3.7}
We say that an $\OO_X$-algebra $\sh{A}$ is {\it coherent} if it is coherent as an
$\OO_X$-module. In particular, $\OO_X$ is a {\it coherent sheaf of rings} if, and only if,
for each open $U\subset X$ and each homomorphism of the form $u:\OO_X^p|U\to\OO_X|U$, the
kernel of $u$ is an $(\OO_X|U)$-module of finite type.

If $\OO_X$ is a coherent sheaf of rings, each $\OO_X$-module $\sh{F}$ admitting a finite
presentation \hyperref[env-0.5.2.5]{(5.2.5)} is coherent, according to \hyperref[env-0.5.3.4]{(5.3.4)}.

The {\it annihilator} of an $\OO_X$-module $\sh{F}$ is the kernel $\sh{J}$ of the canonical
homomorphism $\OO_X\to\shHom_{\OO_X}(\sh{F},\sh{F})$ which sends each section
$s\in\Gamma(U,\OO_X)$ to the multiplication by $s$ map in $\Hom(\sh{F}|U,\sh{F}|U)$; if
$\OO_X$ is coherent and if $\sh{F}$ is a coherent $\OO_X$-module, then $\sh{J}$ is coherent
(\hyperref[env-0.5.3.4]{(5.3.4)} and \hyperref[env-0.5.3.5]{(5.3.5)}) and for each $x\in X$, $\sh{J}_x$ is the
annihilator of $\sh{F}_x$ \hyperref[env-0.5.2.6]{(5.2.6)}.
\end{env}

\begin{env}[5.3.8]
\label{env-0.5.3.8}
\oldpage{48}
Suppose that $\OO_X$ is coherent; let $\sh{F}$ be a coherent $\OO_X$-module, $x$ a point of
$X$, $M$ a submodule of finite type of $\sh{F}_x$; then there exists an open neighborhood $U$
of $x$ and a coherent $(\OO_X|U)$-submodule $\sh{G}$ of $\sh{F}|U$ such that $\sh{G}_x=M$
(T, 4.1, Lemma~1).

This result, along with the properties of the $\OO_X$-submodules of a coherent
$\OO_X$-module, impose the necessary conditions on the rings $\OO_x$ such that
$\OO_X$ is coherent. For example \hyperref[env-0.5.3.4]{(5.3.4)}, the intersection of two
ideals of finite type of $\OO_x$ must still be an ideal of finite type.
\end{env}

\begin{env}[5.3.9]
\label{env-0.5.3.9}
Supppose that $\OO_X$ is coherent, and let $M$ be an $\OO_x$-module admitting a
finite presentation, therefore isomorphic to a cokernel of a homomorphism
$\vphi:\OO_x^p\to\OO_x^q$; then there exists an open neighborhood $U$ of $X$ and
a coherent $(\OO_X|U)$-module $\sh{F}$ such that $\sh{F}_x$ is isomorphic to
$M$. Indeed, according to \hyperref[env-0.5.2.6]{(5.2.6)}, there exists a section $u$ of
$\shHom_{\OO_X}(\OO_X^p,\OO_X^q)$ such that $u_x=\vphi$; the cokernel $\sh{F}$
of the homomorphism $u:\OO_X^p|U\to\OO_X^q|U$ gives the answer
\hyperref[env-0.5.3.4]{(5.3.4)}.
\end{env}

\begin{env}[5.3.10]
\label{env-0.5.3.10}
Suppose that $\OO_X$ is coherent, and let $\sh{J}$ be a coherent sheaf of ideals
of $\OO_X$. For a $(\OO_X/\sh{J})$-module $\sh{F}$ to be coherent, it is
necessary and sufficient that it is coherent as a $\OO_X$-module. In particular,
$\OO_X/\sh{J}$ is a coherent sheaf of rings.
\end{env}

\begin{env}[5.3.11]
\label{env-0.5.3.11}
Let $f:X\to Y$ be a morphism of ringed spaces, and suppose that $\OO_X$ is
coherent; then, for each coherent $\OO_Y$-module $\sh{G}$, $f^*(\sh{G})$ is a
coherent $\OO_X$-module. Indeed, with the notations of \hyperref[env-0.5.2.4]{(5.2.4)}, we can
assume that $\sh{G}|V$ is the cokernel of a homomorphism
$v:\OO_Y^q|V\to\OO_Y^p|V$; as $f_U^*$ is right exact,
$f^*(\sh{G})|U=f_U^*(\sh{G}|V)$ is the cokernel of the homomorphism
$f_U^*(v):\OO_X^q|U\to\OO_X^p|U$, hence our assertion.
\end{env}

\begin{env}[5.3.12]
\label{env-0.5.3.12}
Let $Y$ be a closed subset of $X$, $j:Y\to X$ the canonical injection, $\OO_Y$ a
sheaf of rings on $Y$, and put $\OO_X=j_*(\OO_Y)$. For a $\OO_Y$-module $\sh{G}$
to be of finite type (resp. quasi-coherent, coherent), it is necessary and
sufficient that $j_*(\sh{G})$ is an $\OO_X$-module of finite type
(resp. quasi-coherent, coherent).
\end{env}

\subsection{Locally free sheaves}
\label{subsection-locally-free-sheaves}

\begin{env}[5.4.1]
\label{env-0.5.4.1}
Let $X$ be a ringed space. We say that an $\OO_X$-module $\sh{F}$ is
{\it locally free}, if, for each $x\in X$, there exists an open neighborhood
$U$ of $x$ such that $\sh{F}|U$ is isomorphic to a $(\OO_X|U)$-module of the
form $\OO_X^{(I)}|U$, where $I$ can depend on $U$. If for each $U$, $I$ is
finite, we say that $\sh{F}$ is {\it of finite rank}; if for each $U$, $I$ has
the same finite number of elements $n$, we say that $\sh{F}$ is {\it of rank
$n$}. A locally free $\OO_X$-module of rank $1$ is called {\it invertible}
(cf. \hyperref[env-0.5.4.3]{(5.4.3)}). If $\sh{F}$ is a locally free $\OO_X$-module of finite
rank, for each $x\in X$, $\sh{F}_x$ is a free $\OO_x$-module of finite rank
$n(x)$, and there exists a neighborhood $U$ of $x$ such that $\sh{F}|U$, is of
rank $n(x)$; if $X$ is connected, then $n(x)$ is {\it constant}.

It is clear that each locally free sheaf is quasi-coherent, and if $\OO_X$ is a
coherent sheaf of rings, each locally free $\OO_X$-module of finite rank is
coherent.

If $\sh{L}$ is locally free, $\sh{L}\otimes_{\OO_X}\sh{F}$ is an {\it exact}
functor in $\sh{F}$ to the category of $\OO_X$-modules.

We will mostly consider locally free $\OO_X$-modules of finite rank,
\oldpage{49}
and when we speak of locally free sheaves without specifying, it will be
understood that they are of {\it finite rank}.

Suppose that $\OO_X$ is {\it coherent}, and let $\sh{F}$ be a {\it coherent}
$\OO_X$-module. Then, if at a point $x\in X$, $\sh{F}_x$ is an $\OO_x$-module
{\it free of rank $n$}, there exists a neighborhood $U$ of $x$ such that
$\sh{F}|U$ is {\it locally free of rank $n$}; in fact, $\sh{F}_x$ is then
isomorphic to $\OO_x^n$, and the proposition follows from \hyperref[env-0.5.2.7]{(5.2.7)}.
\end{env}

\begin{env}[5.4.2]
\label{env-0.5.4.2}
If $\sh{L}$, $\sh{F}$ are two $\OO_X$-modules, we have a canonical functorial
homomorphism
\[
  \dual{\sh{L}}\otimes_{\OO_X}\sh{F}
  =\shHom_{\OO_X}(\sh{L},\OO_X)\otimes_{\OO_X}\sh{F}
  \longrightarrow\shHom_{\OO_X}(\sh{L},\sh{F})
  \tag{5.4.2.1}
\]
defined in the following way: for each open set $U$, send any pair $(u,t)$,
where $u\in\Gamma(U,\shHom_{\OO_X}(\sh{L},\OO_X))=\Hom(\sh{L}|U,\OO_X|U)$ and
$t\in\Gamma(U,\sh{F})$, to the element of $\Hom(\sh{L}|U,\sh{F}|U)$ which, for
each $x\in U$, sends $s_x\in\sh{L}_x$ to the element $u_x(s_x)t_x$ of
$\sh{F}_x$. If $\sh{L}$ is {\it locally free of finite rank}, this homomorphism
is {\it bijective}; the property being local, we can in fact reduce to the case
where $\sh{L}=\OO_X^n$; as for each $\OO_X$-module $\sh{G}$,
$\shHom_{\OO_X}(\OO_X^n,\sh{G})$ is canonically isomorphic to $\sh{G}^n$, we
have reduced to the case $\sh{L}=\sh{O}_X$, which is immediate.
\end{env}

\begin{env}[5.4.3]
\label{env-0.5.4.3}
If $\sh{L}$ is invertible, so is its dual
$\dual{\sh{L}}=\shHom_{\OO_X}(\sh{L},\OO_X)$, since we can immediately reduce
(as the question is local) to the case $\sh{L}=\OO_X$. In addition, we have a
canonical isomorphism
\[
  \shHom_{\OO_X}(\sh{L},\OO_X)\otimes_{\OO_X}\sh{L}\isoto\OO_X
  \tag{5.4.3.1}
\]
as, according to \hyperref[env-0.5.3.2]{(5.3.2)}, it suffices to define a canonical
isomorphism $\shHom_{\OO_X}(\sh{L},\sh{L})\isoto\OO_X$. For {\it each}
$\OO_X$-module $\sh{F}$, we have a canonical homomorphism
$\OO_X\isoto\shHom_{\OO_X}(\sh{F},\sh{F})$ \hyperref[env-0.5.3.7]{(5.3.7)}. It remains to
prove that if $\sh{F}=\sh{L}$ is invertible, this homomorphism is bijective, and
as the question is local, it reduces to the case $\sh{L}=\OO_X$, which is
immediate.

Due to the above, we put $\sh{L}^{-1}=\shHom_{\OO_X}(\sh{L},\OO_X)$, and we say
that $\sh{L}^{-1}$ is the {\it inverse} of $\sh{L}$. The terminology
``invertible sheaf'' can be justified in the following way when $X$ is reduced
to a point and $\OO_X$ is a {\it local} ring $A$ with maximal ideal
$\mathfrak{m}$; if $M$ and $M'$ are two $A$-modules ($M$ being of finite type)
such that $M\otimes_A M'$ is isomorphic to $A$, as
$(A/\mathfrak{m})\otimes_A(M\otimes_A M')$ identifies with
$(M/\mathfrak{m}M)\otimes_{A/\mathfrak{m}}(M'/\mathfrak{m}M')$, this latter
tensor product of vector spaces over the field $A/\mathfrak{m}$ is isomorphic to
$A/\mathfrak{m}$, which requires $M/\mathfrak{m}M$ and $M'/\mathfrak{m}M'$ to be
of dimension $1$. For each element $z\in M$ not in $\mathfrak{m}M$, we have
$M=Az+\mathfrak{m}M$, which implies that $M=Az$ according to Nakayama's Lemma,
$M$ being of finite type. Moreover, as the annihilator of $z$ kills
$M\otimes_A M'$, which is isomorphic to $A$, this annihilator is $\{0\}$, and
as a result $M$ is {\it isomorphic to $A$}. In the general case, this shows
that $\sh{L}$ is an $\OO_X$-module of finite type, such that there exists an
$\OO_X$-module $\sh{F}$ for which $\sh{L}\otimes_{\OO_X}\sh{F}$ is isomorphic to
$\OO_X$, and if in addition the rings $\OO_x$ are local rings, then the
$\sh{L}_x$ is an $\OO_x$-module isomorphic to $\OO_x$ for each $x\in X$. If
$\OO_X$ and $\sh{L}$ are assumed to be {\it coherent}, we then conclude that
$\sh{L}$ is invertible according to \hyperref[env-0.5.2.7]{(5.2.7)}.
\end{env}

\begin{env}[5.4.4]
\label{env-0.5.4.4}
If $\sh{L}$ and $\sh{L}'$ are two invertible $\OO_X$-modules, then so is
$\sh{L}\otimes_{\OO_X}\sh{L}'$, since the question is local, we can assume that
$\sh{L}=\OO_X$, and the result is then trivial. For each integer $n\geqslant 1$,
we denote by $\sh{L}^{\otimes n}$ the tensor product of $n$ copies of the sheaf
\oldpage{50}
$\sh{L}$; we put by convention $\sh{L}^{\otimes 0}=\OO_X$, and for
$n\geqslant 1$, $\sh{L}^{\otimes(-n)}=(\sh{L}^{-1})^{\otimes n}$. With these
notations, there is then a {\it canonical functorial isomorphism}
\[
  \sh{L}^{\otimes m}\otimes_{\OO_X}\sh{L}^{\otimes n}\isoto\sh{L}^{\otimes(n+m)}
  \tag{5.4.4.1}
\]
for any rational integers $m$, $n$: indeed, by definition, we immediately reduce
to the case where $m=-1$, $n=1$, and the isomorphism in question is then that
defined in \hyperref[env-0.5.4.3]{(5.4.3)}.
\end{env}

\begin{env}[5.4.5]
\label{env-0.5.4.5}
Let $f:Y\to X$ be a morphism of ringed spaces. If $\sh{L}$ is a locally free
(resp. invertible) $\OO_X$-module, $f^*(\sh{L})$ is a locally free
(resp. invertible) $\OO_Y$-module: this follows immediately from that the
inverse images of two locally isomorphic $\OO_X$-modules are locally isomorphic,
that $f^*$ commutes with finite direct sums, and that $f^*(\OO_X)=\OO_Y$
\hyperref[env-0.4.3.4]{(4.3.4)}. In addition, we know that we have a canonical functorial
homomorphism $f^*(\dual{\sh{L}})\to\dual{(f^*(\sh{L}))}$ \hyperref[env-0.4.4.6]{(4.4.6)}, and
when $\sh{L}$ is locally free, this homomorphism is {\it bijective}: indeed, we
again reduce to the case where $\sh{L}=\OO_X$ which is trivial. We conclude that
if $\sh{L}$ is invertible, $f^*(\sh{L}^{\otimes n})$ canonically identifies with
$(f^*(\sh{L}))^{\otimes n}$ for each rational integer $n$.
\end{env}

\begin{env}[5.4.6]
\label{env-0.5.4.6}
Let $\sh{L}$ be an invertible $\OO_X$-module; we denote by $\Gamma_*(X,\sh{L})$
or simply $\Gamma_*(\sh{L})$ the abelian group direct sum
$\bigoplus_{n\in\bb{Z}}\Gamma(X,\sh{L}^{\otimes n})$; we equip it with the
structure of a {\it graded ring}, by corresponding to a pair $(s_n,s_m)$, where
$s_n\in\Gamma(X,\sh{L}^{\otimes n})$, $s_m\in\Gamma(X,\sh{L}^{\otimes m})$, the
section of $\sh{L}^{\otimes(n+m)}$ over $X$ which corresponds canonically
(5.4.4.1) to the section $s_n\otimes s_m$ of
$\sh{L}^{\otimes n}\otimes_{\OO_X}\sh{L}^{\otimes m}$; the associativity of this
multiplication is verified in an immediate way. It is clear that
$\Gamma_*(X,\sh{L})$ is a covariant functor in $\sh{L}$, with values in the
category of graded rings.

If now $\sh{F}$ is any $\OO_X$-module, we put
\[
  \Gamma_*(\sh{L},\sh{F})
  =\bigoplus_{n\in\bb{Z}}\Gamma(X,\sh{F}\otimes_{\OO_X}\sh{L}^{\otimes n}).
\]
We equip this abelian group with the structure of a {\it graded module} over
the graded ring $\Gamma_*(\sh{L})$ in the following way: to a pair $(s_n,u_m)$,
where $s_n\in\Gamma(X,\sh{L}^{\otimes n})$ and
$u_m\in\Gamma(X,\sh{F}\otimes_{\OO_X}\sh{L}^{\otimes m})$, we associate the
section of $\sh{F}\otimes_{\OO_X}\sh{L}^{\otimes(m+n)}$ which canonically
corresponds (5.4.4.1) to $s_n\otimes u_m$; the verification of the module axioms
are immediate. For $X$ and $\sh{L}$ fixed, $\Gamma_*(\sh{L},\sh{F})$ is a
covariant functor in $\sh{F}$ with values in the category of graded
$\Gamma_*(\sh{L})$-modules; for $X$ and $\sh{F}$ fixed, it is a covariant
functor in $\sh{L}$ with values in the category of abelian groups.

If $f:Y\to X$ is a morphism of ringed spaces, the canonical homomorphism
(4.4.3.2) $\rho:\sh{L}^{\otimes n}\to f_*(f^*(\sh{L}^{\otimes n}))$ defines a
homomorphism of abelian groups
$\Gamma(X,\sh{L}^{\otimes n})\to\Gamma(Y,f^*(\sh{L}^{\otimes n}))$, and as
$f^*(\sh{L}^{\otimes n})=(f^*(\sh{L}))^{\otimes n})$, it follows from the
definitions of the canonical homomorphisms (4.4.3.2) and (5.4.4.1) that the
above homomorphisms define a {\it functorial homomorphism of graded rings
$\Gamma_*(\sh{L})\to\Gamma_*(f^*(\sh{L}))$}. The same canonical homomorphism
\hyperref[env-0.4.4.3]{(4.4.3)} similarly defines a homomorphism of abelian groups
$\Gamma(X,\sh{F}\otimes_{\OO_X}\sh{L}^{\otimes n})
  \to\Gamma(Y,f^*(\sh{F}\otimes_{\OO_X}\sh{L}^{\otimes n}))$, and as
\[
  f^*(\sh{F}\otimes_{\OO_X}\sh{L}^{\otimes n})
  =f^*(\sh{F})\otimes_{\OO_Y}(f^*(\sh{L}))^{\otimes n}
  \quad(4.3.3.1),
\]
\oldpage{51}
these homomorphism (for $n$ variable) define a {\it di-homomorphism of graded
modules $\Gamma_*(\sh{L},\sh{F})\to\Gamma_*(f^*(\sh{L}),f^*(\sh{F}))$}.
\end{env}

\begin{env}[5.4.7]
\label{env-0.5.4.7}
One can show that there exists a {\it set} $\mathfrak{M}$ (also denoted
$\mathfrak{M}(X)$) of invertible $\OO_X$-modules such that each invertible
$\OO_X$-module is isomorphic to an element of $\mathfrak{M}$ only
one;\footnote{See the book in preparation cited in the introduction.} we define
on $\mathfrak{M}$ a composition law by sending two elements $\sh{L}$, $\sh{L}'$
of $\mathfrak{M}$ to the unique element of $\mathfrak{M}$ isomorphic to
$\sh{L}\otimes_{\OO_X}\sh{L}'$. With this composition law, {\it $\mathfrak{M}$
is a group isomorphic to the cohomology group $\HH^1(X,\OO_X^*)$}, where
$\OO_X^*$ is the subsheaf of $\OO_X$ such that $\Gamma(U,\OO_X^*)$ is the group
of invertible elements of the ring $\Gamma(U,\OO_X)$ for each open $U\subset X$
($\OO_X^*$ is therefore a sheaf of {\it multiplicative} abelian groups).

We will note that for all open $U\subset X$, the group of sections
$\Gamma(U,\OO_X^*)$ canonically identifies with the {\it automorphism group} of
the $(\OO_X|U)$-module $\OO_X|U$, the identification sending a section
$\varepsilon$ of $\OO_X^*$ over $U$ to the automorphism $u$ of $\OO_X|U$ such
that $u_x(s_x)=\varepsilon_x s_x$ for all $x\in X$ and all $s_x\in\OO_x$. Then
let $\mathfrak{U}=(U_\lambda)$ be an open cover of $X$; the data, for each pair
of indices $(\lambda,\mu)$, of an automorphism $\theta_{\lambda\mu}$ of
$\OO_X|(U_\lambda\cap U_\mu)$ is the same as giving a {\it $1$-cochain} of the
cover $\mathfrak{U}$, with values in $\OO_X^*$, and say that the
$\theta_{\lambda\mu}$ satisfy the gluing condition \hyperref[env-0.3.3.1]{(3.3.1)}, meaning
that the corresponding cochain is a {\it cocycle}. Similarly, the data, for
each $\lambda$, of an automorphism $\omega_\lambda$ of $\OO_X|U_\lambda$ is the
same as the data of a $0$-cochain of the cover $\mathfrak{U}$, with values in
$\OO_X^*$, and its {\it coboundary} corresponds to the family of automorphisms
$(\omega_\lambda|U_\lambda\cap U_\mu)
  \circ(\omega_\mu|U_\lambda\cap U_\mu)^{-1}$. We can send each $1$-cocycle of
$\mathfrak{U}$ with values in $\OO_X^*$ to the element of $\mathfrak{M}$
isomorphic to an invertible $\OO_X$-module obtained by gluing with respect to
the family of automorphisms $(\theta_{\lambda\mu})$ corresponding to this
cocycle, and to two cohomologous coycles correspond two equal elements of
$\mathfrak{M}$ \hyperref[env-0.3.3.2]{(3.3.2)}; in other words, we so define a map
$\vphi_\mathfrak{U}:\HH^1(\mathfrak{U},\OO_X^*)\to\mathfrak{M}$. In addition, if
$\mathfrak{B}$ is a second open cover of $X$, finer than $\mathfrak{U}$, the
diagram
\[
  \xymatrix{
    \HH^1(\mathfrak{U},\OO_X^*)\ar[rd]^{\vphi_\mathfrak{U}}\ar[dd]\\
    & \mathfrak{M}\\
    \HH^1(\mathfrak{B},\OO_X^*)\ar[ur]_{\vphi_\mathfrak{B}}
  }
\]
where the vertical arrow is the canonical homomorphism (G, II, 5.7), is
commutative, as a result of \hyperref[env-0.3.3.3]{(3.3.3)}. By passing to the inductive
limit, we therefore obtain a map $\HH^1(X,\OO_X^*)\to\mathfrak{M}$, the \v Cech
cohomology group $\check{\HH}^1(X,\OO_X^*)$ identifying as we know with the
first cohomology group $\HH^1(X,\OO_X^*)$ (G, II, 5.9, Cor. of Thm.~5.9.1). This
map is {\it surjective}: indeed, by definition, for each invertible
$\OO_X$-module $\sh{L}$, there is an open cover $(U_\lambda)$ of $X$ such that
$\sh{L}$ is obtained by gluing the sheaves $\OO_X|U_\lambda$ \hyperref[env-0.3.3.1]{(3.3.1)}.
It is also {\it injective}, since it suffices to prove for the maps
$\HH^1(\mathfrak{U},\OO_X)\to\mathfrak{M}$, and this follows from
\hyperref[env-0.3.3.2]{(3.3.2)}. It remains to show that
\oldpage{52}
the bijection thus defined is a group homomorphism. Given two invertible
$\OO_X$-modules $\sh{L}$, $\sh{L}'$, there is an open cover $(U_\lambda)$ such
that $\sh{L}|U_\lambda$ and $\sh{L}'|U_\lambda$ are isomorphic to
$\OO_X|U_\lambda$ for each $\lambda$; so there is for each index $\lambda$ an
element $a_\lambda$ (resp. $a_\lambda'$) of $\Gamma(U_\lambda,\sh{L})$
(resp. $\Gamma(U_\lambda,\sh{L}')$) such that the elements of
$\Gamma(U_\lambda,\sh{L})$ (resp. $\Gamma(U_\lambda,\sh{L}')$) are the
$s_\lambda\cdot a_\lambda$ (resp. $s_\lambda\cdot a_\lambda'$), where
$s_\lambda$ varies over $\Gamma(U_\lambda,\OO_X)$. The corresponding cocycles
$(\varepsilon_{\lambda\mu})$, $(\varepsilon_{\lambda\mu}')$ are such that
$s_\lambda\cdot a_\lambda=s_\mu\cdot a_\mu$
(resp. $s_\lambda\cdot a_\lambda'=s_\mu\cdot a_\mu'$) over $U_\lambda\cap U_\mu$
is equivalent to $s_\lambda=\varepsilon_{\lambda\mu}s_\mu$
(resp. $s_\lambda=\varepsilon_{\lambda\mu}' s_\mu$) over $U_\lambda\cap U_\mu$.
As the sections of $\sh{L}\otimes_{\OO_X}\sh{L}'$ over $U_\lambda$ are the
finite sums of the $s_\lambda s_\lambda'\cdot(a_\lambda\otimes a_\lambda')$
where $s_\lambda$ and $s_\lambda'$ vary over $\Gamma(U_\lambda,\OO_X)$, it is
clear that the cocycle $(\varepsilon_{\lambda\mu},\varepsilon_{\lambda\mu}')$
corresponds to $\sh{L}\otimes_{\OO_X}\sh{L}'$, which finishes the
proof.\footnote{For a general form of this result, see the book cited in the
note on p.~51.}
\end{env}

\begin{env}[5.4.8]
\label{env-0.5.4.8}
Let $f=(\psi,\omega)$ be a morphism $Y\to X$ of ringed spaces. The functor
$f^*(\sh{L})$ to the category of free $\OO_X$-modules defines a map (which we
still denote $f^*$ by abuse of language) from the set $\mathfrak{M}(X)$ to the
set $\mathfrak{M}(Y)$. Second, we have a canonical homomorphism (T, 3.2.2)
\[
  \HH^1(X,\OO_X^*)\longrightarrow\HH^1(Y,\OO_Y^*).
  \tag{5.4.8.1}
\]
When we canonically identify \hyperref[env-0.5.4.7]{(5.4.7)} $\mathfrak{M}(X)$ and
$\HH^1(X,\OO_X^*)$ (resp. $\mathfrak{M}(Y)$ and $\HH^1(Y,\OO_Y^*)$), the
homomorphism (5.4.8.1) {\it identifies with the map $f^*$}. Indeed, if $\sh{L}$
comes from a cocycle $(\varepsilon_{\lambda\mu})$ corresponding to an open cover
$(U_\lambda)$ of $X$, it suffices to show that $f^*(\sh{L})$ comes from a
cocycle whose cohomology class is the image under (5.4.8.1) of
$(\varepsilon_{\lambda\mu})$. If $\theta_{\lambda\mu}$ is the automorphism of
$\OO_X|(U_\lambda\cap U_\mu)$ which corresponds to $\varepsilon_{\lambda\mu}$,
it is clear that $f^*(\sh{L})$ is obtained by gluing the
$\OO_Y|\psi^{-1}(U_\lambda)$ by means of the automorphisms
$f^*(\theta_{\lambda\mu})$, and it then suffices to check that these latter
automorphisms corresponds to the cocycle
$(\omega^\sharp(\varepsilon_{\lambda\mu}))$, which follows immediately from the
definitions (we can identify $\varepsilon_{\lambda\mu}$ with its canonical image
under $\rho$ \hyperref[env-0.3.7.2]{(3.7.2)}, a section of $\psi^*(\OO_X^*)$ over
$\psi^{-1}(U_\lambda\cap U_\mu)$).
\end{env}

\begin{env}[5.4.9]
\label{env-0.5.4.9}
Let $\sh{E}$, $\sh{F}$ be two $\OO_X$-modules, $\sh{F}$ assumed to be
{\it locally free}, and let $\sh{G}$ be an {\it $\OO_X$-module extension of
$\sh{F}$ by $\sh{E}$}, in other words there exists an exact sequence
$0\to\sh{E}\xrightarrow{i}\sh{G}\xrightarrow{p}\sh{F}\to 0$. Then, for each
$x\in X$, there exists an open neighborhood $U$ of $x$ such that $\sh{G}|U$ is
isomorphic to the {\it direct sum $\sh{E}|U\oplus\sh{F}|U$}. In fact, we can
reduce to the case where $\sh{F}=\OO_X^n$; let $e_i$ ($1\leqslant i\leqslant n$)
be the canonical sections \hyperref[env-0.5.5.5]{(5.5.5)} of $\OO_X^n$; there then exists an
open neighborhood $U$ of $x$ and $n$ sections $s_i$ of $\sh{G}$ over $U$ such
that $p(s_i|U)=e_i|U$ for $1\leqslant i\leqslant n$. That being so, let $f$ be
the homomorphism $\sh{F}|U\to\sh{G}|U$ defined by the sections $s_i|U$
\hyperref[env-0.5.1.1]{(5.1.1)}. It is immediate that for each open $V\subset U$, and each
section $s\in\Gamma(V,\sh{G})$ we have $s-f(p(s))\in\Gamma(V,\sh{E})$, hence our
assertion.
\end{env}

\begin{env}[5.4.10]
\label{env-0.5.4.10}
Let $f:X\to Y$ be a morphism of ringed spaces, $\sh{F}$ an $\OO_X$-module,
$\sh{L}$ a locally free $\OO_Y$-module of finite rank. Then there exists a
canonical isomorphism
\[
  f_*(\sh{F})\otimes_{\OO_Y}\sh{L}\isoto f_*(\sh{F}\otimes_{\OO_X}f^*(\sh{L}))
  \tag{5.4.10.1}
\]

\oldpage{53}
Indeed, for each $\OO_Y$-module $\sh{L}$, we have a canonical homomorphism
\[
  f_*(\sh{F})\otimes_{\OO_Y}\sh{L}
  \xrightarrow{1\otimes\rho}f_*(\sh{F})\otimes_{\OO_Y}f_*(f^*(\sh{L}))
  \xrightarrow{\alpha}f_*(\sh{F}\otimes_{\OO_X}f^*(\sh{L})),
\]
$\rho$ the homomorphism (4.4.3.2) and $\alpha$ the homomorphism (4.2.2.1). To
show that when $\sh{L}$ is locally free, this homomorphism is bijective, it
suffices, the question being local, to consider the case where $\sh{L}=\OO_X^n$;
in addition, $f_*$ and $f^*$ commute with finite direct sums, so we can assume
$n=1$, and in this case the proposition follows immediately from the definitions
and from the relation $f^*(\OO_Y)=\OO_X$.
\end{env}

\subsection{Sheaves on a locally ringed space}
\label{subsection-sheaves-on-lrs}

\begin{env}[5.5.1]
\label{env-0.5.5.1}
We say that a ringed space $(X,\OO_X)$ is a {\it locally ringed space} if, for
each $x\in X$, $\OO_x$ is a local ring; these ringed spaces will be by far the
most frequent ringed spaces that we will consider in this work. We then denote
by $\mathfrak{m}_x$ the {\it maximal ideal} of $\OO_x$, by $\kres(x)$ the
{\it residue field $\OO_x/\mathfrak{m}_x$}; for each $\OO_X$-module $\sh{F}$,
each open set $U$ of $X$, each point $x\in U$, and each section
$f\in\Gamma(U,\sh{F})$, we denote by $f(x)$ the {\it class} of the germ
$f_x\in\sh{F}_x$ mod $\mathfrak{m}_x\sh{F}_x$, and we say that this is the
{\it value} of $f$ at the point $x$. The relation $f(x)=0$ then means that
$f_x\in\mathfrak{m}_x\sh{F}_x$; when this is so, we say (by abuse of language)
that {\it $f$ is zero at $x$}. We will take care not to confuse this relation
with $f_x=0$.
\end{env}

\begin{env}[5.5.2]
\label{env-0.5.5.2}
Let $X$ be a locally ringed space, $\sh{L}$ an invertible $\OO_X$-module, $f$ a
section of $\sh{L}$ over $X$. There is then an {\it equivalence} between the
three following properties for a point $x\in X$:
\begin{itemize}
  \item[(a)] {\it $f_x$ is a generator of $\sh{L}_x$};
  \item[(b)] {\it $f_x\not\in\mathfrak{m}_x\sh{L}_x$}
             (in other words, $f(x)\neq 0$);
  \item[(c)] {\it there exists a section $g$ of $\sh{L}^{-1}$ over an open
              neighborhood $V$ of $x$ such that the canonical image of $f\otimes g$
              in $\Gamma(V,\OO_X)$ \hyperref[env-0.5.4.3]{(5.4.3)} is the unit section}.
\end{itemize}

Indeed, the question being local, we can reduce to the case where
$\sh{L}=\OO_X$; the equivalence of (a) and (b) are then evident, and it is clear
that (c) implies (b). Conversely, if $f_x\not\in\mathfrak{m}_x$, $f_x$ is
invertible in $\OO_x$, say $f_x g_x=1_x$. By definition of germs of sections,
this means that there exists a neighborhood $V$ of $x$ and a section $g$ of
$\OO_X$ over $V$ such that $fg=1$ in $V$, hence (c).

It follows immediately from the condition (c) that the set $X_f$ of $x$ satisfying the
equivalent conditions (a), (b), (c) is {\it open} in $X$; following the terminology
introduced in \hyperref[env-0.5.5.1]{(5.5.1)}, this is the set of the $x$ for which {\it $f$ does not
vanish}.
\end{env}

\begin{env}[5.5.3]
\label{env-0.5.5.3}
Under the hypotheses of \hyperref[env-0.5.5.2]{(5.5.2)}, let $\sh{L}'$ be a second invertible
$\OO_X$-module; then, if $f\in\Gamma(X,\sh{L})$, $g\in\Gamma(X,\sh{L}')$, we have
\[
  X_f\cap X_g=X_{f\otimes g}.
\]

We can in fact reduce immediately to the case where $\sh{L}=\sh{L}'=\OO_X$ (the question
being local); as $f\otimes g$ then canonically identifies with the product $fg$, the
proposition is evident.
\end{env}

\begin{env}[5.5.4]
\label{env-0.5.5.4}
\oldpage{54}
Let $\sh{F}$ be a locally free $\OO_X$ of rank $n$; it is immediate that $\wedge^p\sh{F}$ is
a locally free $\OO_X$-module of rank $\binom{n}{p}$ if $p\leqslant n$, reduced to $0$ if
$p>n$, since the question is local and we can reduce to the case where $\sh{F}=\OO_X^n$;
in addition, for each $x\in X$, $(\wedge^p\sh{F})_x/\mathfrak{m}_x(\wedge^p\sh{F})_x$ is a
vector space of dimension $\binom{n}{p}$ over $\kres(x)$, which canonically identifies with
$\wedge^p(\sh{F}_x/\mathfrak{m}_x\sh{F}_x)$. Let $s_1,\dots,s_p$ be the sections of $\sh{F}$
over an open set $U$ of $X$, and let $s=s_1\wedge\cdots\wedge s_p$, which is a section of
$\wedge^p\sh{F}$ over $U$ \hyperref[env-0.4.1.5]{(4.1.5)}; we have $s(x)=s_1(x)\wedge\cdots\wedge s_p(x)$,
and as a result, we say that the $s_1(x),\dots,s_p(x)$ are {\it linearly dependent} means
that $s(x)=0$. We conclude that the {\it set of the $x\in X$ such that $s_1(x),\dots,s_p(x)$
are linearly independent is open in $X$}: it suffices in fact, by reducing to the case where
$\sh{F}=\OO_X^n$, to apply \hyperref[env-0.5.5.2]{(5.5.2)} to the section image of $s$ under one of the
projections of $\wedge^p\sh{F}=\OO_X^{\binom{n}{p}}$ to the $\binom{n}{p}$ factors.

In particular, if $s_1,\dots,s_n$ are $n$ sections of $\sh{F}$ over $U$ such that
$s_1(x),\dots,s_n(x)$ are linealy independent for each point $x\in U$, the homomorphism
$u:\OO_X^n|U\to\sh{F}|U$ defined by the $s_i$ \hyperref[env-0.5.1.1]{(5.1.1)} is an {\it isomorphism}:
indeed, we can restrict to the case where $\sh{F}=\OO_X^n$ and where we canonically identify
$\wedge^n\sh{F}$ and $\OO_X$; $s=s_1\wedge\cdots\wedge s_n$ is then an {\it invertible}
section of $\OO_X$ over $U$, and we define an inverse homomorphism for $u$ by means of the
Cramer formulas.
\end{env}

\begin{env}[5.5.5]
\label{env-0.5.5.5}
Let $\sh{E}$, $\sh{F}$ be two locally free $\OO_X$-modules (of finite rank), and let
$u:\sh{E}\to\sh{F}$ be a homomorphism. For there to exist a neighborhood $U$ of $x\in X$ such
that $u|U$ is {\it injective} and that $\sh{F}|U$ is {\it the direct sum of the
$u(\sh{E})|U$ and of a locally free $(\OO_X|U)$-submodule $\sh{G}$}, it is necessary and
sufficient that $u_x:\sh{E}_x\to\sh{F}_x$ gives, by passing to quotients, an {\it injective}
homomorphism of vector spaces
$\sh{E}_x/\mathfrak{m}_x\sh{E}_x\to\sh{F}_x/\mathfrak{m}_x\sh{F}_x$. The condition is indeed
{\it necessary}, since $\sh{F}_x$ is then the direct sum of the free $\OO_x$-modules
$u_x(\sh{E}_x)$ and $\sh{G}_x$, so $\sh{F}_x/\mathfrak{m}_x\sh{F}_x$ is the direct sum of
$u_x(\sh{E}_x)/\mathfrak{m}_x u_x(\sh{E}_x)$ and of $\sh{G}_x/\mathfrak{m}_x\sh{G}_x$. The
condition is {\it sufficient}, since we can reduce to the case where $\sh{E}=\OO_X^m$; let
$s_1,\dots,s_m$ be the images under $u$ of the sections $e_i$ of $\OO_X^m$ such that
$(e_i)_y$ is equal to the $i$-th element of the canonical basis of $\OO_y^m$ for each
$y\in Y$ ({\it canonical sections} of $\OO_X^m$); by hypothesis $s_1(x),\dots,s_m(x)$ are
linearly independent, so, if $\sh{F}$ is of rank $n$, there exists $n-m$ sections
$s_{m+1},\dots,s_n$ of $\sh{F}$ over a neighborhood $V$ of $x$ such that the $s_i(x)$
($1\leqslant i\leqslant n$) form a basis for $\sh{F}_x/\mathfrak{m}_x\sh{F}_x$. There then
exists \hyperref[env-0.5.5.4]{(5.5.4)} a neighborhood $U\subset V$ of $x$ such that the $s_i(y)$
($1\leqslant i\leqslant n$) form a basis for $\sh{F}_y/\mathfrak{m}_y\sh{F}_y$ for each
$y\in V$, and we conclude \hyperref[env-0.5.5.4]{(5.5.4)} that there is an isomorphism from $\sh{F}|U$ to
$\OO_X^n|U$, sending the $s_i|U$ ($1\leqslant i\leqslant m$) to the $e_i|U$, which finishes
the proof.
\end{env}

\section{Flatness}
\label{section-flatness}

\begin{env}[6.0]
\label{env-0.6.0.0}
The notion of flatness is due to J.-P.~Serre \cite{I-16}; in the following, we omit the
proofs of the results which are presented in the {\it Alg\`ebre commutative} of N.~Bourbaki,
to which we refer the reader. We assume that all rings are commutative.\footnote{See the
expos\'e cited of N.~Bourbaki for the generalization from most of the results to the
noncommutative case.}

\oldpage{55}
If $M$, $N$ are two $A$-modules, $M'$ (resp. $N'$) a submodule of $M$ (resp. $N$), we denote
by $\Im(M'\otimes_A N')$ the submodule of $M\otimes_A N$, the image under the canonical map
$M'\otimes_A N'\to M\otimes_A N$.
\end{env}

\subsection{Flat modules}
\label{subsection-flat-modules}

\begin{env}[6.1.1]
\label{env-0.6.1.1}
Let $M$ be an $A$-module. The following conditions are equivalent:
\begin{itemize}
  \item[(a)] The functor $M\otimes_A N$ is exact in $N$ on the category of
             $A$-modules;
  \item[(b)] $\Tor_i^A(M,N)=0$ for each $i>0$ and for each $A$-module $N$;
  \item[(c)] $\Tor_1^A(M,N)=0$ for each $A$-module $N$.
\end{itemize}

When $M$ satisfies these conditions, we say that $M$ is a
{\it flat $A$-module}. It is clear that each free $A$-module is flat.

For $M$ to be a flat $A$-module, it suffices that for each ideal $\mathfrak{J}$
of $A$, {\it of finite type}, the canonical map
$M\otimes_A\mathfrak{J}\to M\otimes_A A=M$ is {\it injective}.
\end{env}

\begin{env}[6.1.2]
\label{env-0.6.1.2}
Each inductive limit of flat $A$-modules is a flat $A$-module. For a direct sum
$\bigoplus_{\lambda\in L}M_\lambda$ of $A$-modules to be a flat $A$-modules, it
is necessary and sufficient that each of the $A$-modules $M_\lambda$ is flat. In
particular, every projective $A$-module is flat.

Let $0\to M'\to M\to M''\to 0$ be an exact sequence of $A$-modules, such that
$M''$ is {\it flat}. Then, for each $A$-module $N$, the sequence
\[
  0\longrightarrow M'\otimes_A N\longrightarrow M\otimes_A N
  \longrightarrow M''\otimes_A N\longrightarrow 0
\]
is exact. In addition, for $M$ to be flat, is it necessary and sufficient that
$M'$ is (but is can be that $M$ and $M'$ are flat without $M''=M/M'$ being so).
\end{env}

\begin{env}[6.1.3]
\label{env-0.6.1.3}
Let $M$ be a flat $A$-module, $N$ any $A$-module; for two submodules $N'$, $N''$
of $N$, we then have
\[
  \Im(M\otimes_A(N'+N''))=\Im(M\otimes_A N')+\Im(M\otimes_A N''),
\]
\[
  \Im(M\otimes_A(N'\cap N''))=\Im(M\otimes_A N')\cap\Im(M\otimes_A N'')
\]
(images taken in $M\otimes_A N$).
\end{env}

\begin{env}[6.1.4]
\label{env-0.6.1.4}
Let $M$, $N$ be two $A$-modules, $M'$ (resp. $N'$) a submodule of $M$
(resp. $N$), and suppose that one of the modules $M/M'$, $N/N'$ is flat. Then we
have $\Im(M'\otimes_A N')=\Im(M'\otimes_A N)\cap(M\otimes_A N')$ (images in
$M\otimes_A N$), In particular, if $\mathfrak{J}$ is an ideal of $A$ and if
$M/M'$ is flat, then we have $\mathfrak{J}M'=M'\cap\mathfrak{J}M$.
\end{env}

\subsection{Change of ring}
\label{subsection-change-of-ring}

When an additive group $M$ is equipped with multiple modules structures relative
to the rings $A$, $B$, ..., we say that $M$ is flat as an $A$-module,
$B$-module, ..., we sometimes also say that $M$ is {\it $A$-flat},
{\it $B$-flat}, ....

\begin{env}[6.2.1]
\label{env-0.6.2.1}
Let $A$ and $B$ be two rings, $M$ an $A$-module, $N$ an $(A,B)$-bimodule. If $M$
is flat and if $N$ is $B$-flat, then $M\otimes_A N$ is $B$-flat. In particular,
if $M$ and $N$ are two flat $A$-modules, $M\otimes_A N$ is a flat $A$-module. If
$B$ is an $A$-algebra and if $M$ is
\oldpage{56}
a flat $A$-module, then the $B$-module $M_{(B)}=M\otimes_A B$ is flat. Finally,
if $B$ is an $A$-algebra which is flat as an $A$-module, and if $N$ is a flat
$B$-module, then $N$ is also $A$-flat.
\end{env}

\begin{env}[6.2.2]
\label{env-0.6.2.2}
Let $A$ be a ring, $B$ an $A$-algebra which is flat as an $A$-module. Let $M$,
$N$ be two $A$-modules, such that $M$ admits a finite presentation; then the
canonical homomorphism
\[
  \Hom_A(M,N)\otimes_A B\longrightarrow\Hom_B(M\otimes_A B,N\otimes_A B)
  \tag{6.2.2.1}
\]
(sending $u\otimes b$ to the homomorphism $m\otimes b'\mapsto u(m)\otimes b' b$)
is an isomorphism.
\end{env}

\begin{env}[6.2.3]
\label{env-0.6.2.3}
Let $(A_\lambda,\vphi_{\mu\lambda})$ be a filtered inductive system of rings;
let $A=\varinjlim A_\lambda$. On the other hand, for each $\lambda$, let
$M_\lambda$ be an $A_\lambda$-module, and for $\lambda\leqslant\mu$ let
$\theta_{\mu\lambda}:M_\lambda\to M_\mu$ be a $\vphi_{\mu\lambda}$-homomorphism,
such that $(M_\lambda,\theta_{\mu\lambda})$ is an inductive system;
$M=\varinjlim M_\lambda$ is then an $A$-module. This being so, if for each
$\lambda$, $M_\lambda$ is a {\it flat} $A_\lambda$-module, then $M$ is a
{\it flat} $A$-module. Indeed, let $\mathfrak{J}$ be an ideal {\it of finite
type} of $A$; by definition of the inductive limit, there exists an index
$\lambda$ and an ideal $\mathfrak{J}_\lambda$ of $A_\lambda$ such that
$\mathfrak{J}=\mathfrak{J}_\lambda A$. If we put
$\mathfrak{J}_\mu'=\mathfrak{J}_\lambda A_\mu$ for $\mu\geqslant\lambda$, we
also have $\mathfrak{J}=\varinjlim\mathfrak{J}_\mu'$ (where $\mu$ varies over
the indices $\geqslant\lambda$), hence (the functor $\varinjlim$ being exact and
commuting with tensor products)
\[
  M\otimes_A\mathfrak{J}=\varinjlim(M_\mu\otimes_{A_\mu}\mathfrak{J}_\mu')
  =\varinjlim\mathfrak{J}_\mu' M_\mu=\mathfrak{J}M.
\]
\end{env}

\subsection{Local nature of flatness}
\label{subsection-local-nature-of-flatness}

\begin{env}[6.3.1]
\label{env-0.6.3.1}
If $A$ is a ring, $S$ a multiplicative subset of $A$, $S^{-1}A$ is a {\it flat
$A$-module}. Indeed, for each $A$-module $N$, $N\otimes_A S^{-1}A$ identifies
with $S^{-1}N$ \hyperref[env-0.1.2.5]{(1.2.5)} and we know \hyperref[env-0.1.3.2]{(1.3.2)}
that $S^{-1}N$ is an exact functor in $N$.

If now $M$ is a flat $A$-module, $S^{-1}M=M\otimes_A S^{-1}A$ is a flat
$S^{-1}A$-module \hyperref[env-0.6.2.1]{(6.2.1)}, so it is also $A$-flat according to the
above and from \hyperref[env-0.6.2.1]{(6.2.1)}. In particular, if $P$ is an $S^{-1}A$-module,
we can consider it as an $A$-module isomorphic to $S^{-1}P$; for $P$ to be
$A$-flat, it is necessary and sufficient that it is $S^{-1}A$-flat.
\end{env}

\begin{env}[6.3.2]
\label{env-0.6.3.2}
Let $A$ be a ring, $B$ an $A$-algebra, and $T$ a multiplicative subset of $B$.
If $P$ is a $B$-module which is {\it $A$-flat}, $T^{-1}P$ is {\it $A$-flat}.
Indeed, for each $A$-module $N$, we have
$(T^{-1}P)\otimes_A N=(T^{-1}B\otimes_B P)\otimes_A N
  =T^{-1}B\otimes_B(P\otimes_A N)
  =T^{-1}(P\otimes_A N)$; $T^{-1}(P\otimes_A N)$ is an exact functor in $N$,
being the composition of the two exact functors $P\otimes_A N$ (in $N$) and
$T^{-1}Q$ (in $Q$). If $S$ is a multiplicative subset of $A$ such that its image
in $B$ is {\it contained in $T$}, then $T^{-1}P$ is equal to $S^{-1}(T^{-1}P)$,
so it is also $S^{-1}A$-flat according to \hyperref[env-0.6.3.1]{(6.3.1)}.
\end{env}

\begin{env}[6.3.3]
\label{env-0.6.3.3}
Let $\vphi:A\to B$ be a ring homomorphism, $M$ a $B$-module. The following
properties are equivalent:
\begin{itemize}
  \item[(a)] $M$ is a flat $A$-module.
  \item[(b)] For each maximal ideal $\mathfrak{n}$ of $B$, $M_\mathfrak{n}$ is a flat
             $A$-module.
  \item[(c)] For each maximal ideal $\mathfrak{n}$ of $B$, by setting
             $\mathfrak{m}=\vphi^{-1}(\mathfrak{n})$, $M_\mathfrak{n}$ is a flat
             $A_\mathfrak{m}$-module.
\end{itemize}

Indeed, as $M_\mathfrak{n}=(M_\mathfrak{n})_\mathfrak{m}$, the equivalence of
(b) and (c) follows from \hyperref[env-0.6.3.1]{(6.3.1)}, and the fact that (a) implies (b) is
a particular case of \hyperref[env-0.6.3.2]{(6.3.2)}. It remains to see that (b) implies (a),
\oldpage{57}
that is to say, that for each injective homomorhism $u:N'\to N$ of $A$-modules, the
homomorphism $v=1\otimes u:M\otimes_A N'\to M\otimes_A N$ is injective. We have that $v$ is
also a homomorphism of $B$-modules, and we know that for it to be injective, it suffices that
for each maximal ideal $\mathfrak{n}$ of $B$,
$v_\mathfrak{n}:(M\otimes_A N')_\mathfrak{n}\to(M\otimes_A N)_\mathfrak{n}$ is injective. But
as
\[
  (M\otimes_A N)_\mathfrak{n}=B_\mathfrak{n}\otimes_B(M\otimes_A N)
  =M_\mathfrak{n}\otimes_A N,
\]
$v_\mathfrak{n}$ is none other that the homomorphism
$1\otimes u:M_\mathfrak{n}\otimes_A N'\to M_\mathfrak{n}\otimes_A N$, which is injective
since $M_\mathfrak{n}$ is $A$-flat.

In particular (by taking $B=A$), for an $A$-module $M$ to be flat, it is necessary and
sufficient that $M_\mathfrak{m}$ is $A_\mathfrak{m}$-flat for each maximal ideal
$\mathfrak{m}$ of $A$.
\end{env}

\begin{env}[6.3.4]
\label{env-0.6.3.4}
Let $M$ be an $A$-module; if $M$ is flat, and if $f\in A$ does not divide $0$ in $A$, $f$
does not kill any element $\neq 0$ in $M$, since the homomorphism $m\mapsto f\cdot m$ is
expressed as $1\otimes u$, where $u$ is the multiplication $a\mapsto f\cdot a$ on $A$ and
$M$ is identified with $M\otimes_A A$; if $u$ is injective, it is the same for $1\otimes u$
since $M$ is flat. In particular, if $A$ is {\it integral}, $M$ is {\it torsion-free}.

Conversely, suppose that $A$ is integral, $M$ is torsion-free, and suppose that for each
maximal ideal $\mathfrak{m}$ of $A$, $A_\mathfrak{m}$ is a {\it discrete valuation ring};
then $M$ is {\it $A$-flat}. Indeed, it suffices \hyperref[env-0.6.3.3]{(6.3.3)} to prove that
$M_\mathfrak{m}$ is $A_\mathfrak{m}$-flat, and we can therefore suppose that $A$ is already
a discrete valuation ring. But as $M$ is the inductive limit of its submodules of finite
type, and these latter submodules are torsion-free, we can in addition reduce to the case
where $M$ is of finite type \hyperref[env-0.6.1.2]{(6.1.2)}. The proposition follows in this
case from that $M$ is a free $A$-module.

In particular, if $A$ is an {\it integral} ring, $\vphi:A\to B$ a ring homomorphism making
$B$ a {\it flat} $A$-module and $\neq\{0\}$, $\vphi$ is necessarily {\it injective}.
Conversely, if $B$ is integral, $A$ a subring of $B$, and if for each maximal ideal
$\mathfrak{m}$ of $A$, $A_\mathfrak{m}$ is a discrete valuation ring, then $B$ is
{\it $A$-flat}.
\end{env}

\subsection{Faithfully flat modules}
\label{subsection-faithfully-flat-modules}

\begin{env}[6.4.1]
\label{env-0.6.4.1}
For an $A$-module $M$, the following four properties are equivalent:
\begin{itemize}
  \item[(a)] For a sequence $N'\to N\to N''$ of $A$-modules to be exact, it is necessary and
        sufficient that the sequence $M\otimes_A N'\to M\otimes_A N\to M\otimes_A N''$ is
        exact;
  \item[(b)] $M$ is flat for each $A$-module $N$, the relation $M\otimes_A N=0$ implies $N=0$;
  \item[(c)] $M$ is flat for each homomorphism $v:N\to N'$ of $A$-modules, the relation
        $1_M\otimes v=0$, $1_M$ being the identity automorphism of $M$;
  \item[(d)] $M$ is flat for each maximal ideal $\mathfrak{m}$ of $A$, $\mathfrak{m}M\neq M$.
\end{itemize}

When $M$ satisfies these conditions, we say that $M$ is a {\it faithfully flat} $A$-module;
$M$ is then necessarily a {\it faithful} module. In addition, if $u:N\to N'$ is a
homomorphism of $A$-modules, for $u$ to be injective (resp. surjective, bijective), it is
necessary and sufficient that $1\otimes u:M\otimes_A N\to M\otimes_A N'$ is so.
\end{env}

\begin{env}[6.4.2]
\label{env-0.6.4.2}
\oldpage{58}
A free module $\neq\{0\}$ is faithfully flat; it is the same for the direct sum of a flat
module and a faithfully flat module. If $S$ is a multiplicative subset of $A$, then
$S^{-1}A$ is a faithfully flat $A$-module if $S$ consists of invertible elements
(so $S^{-1}A=A$).
\end{env}

\begin{env}[6.4.3]
\label{env-0.6.4.3}
Let $0\to M'\to M\to M''\to 0$ be an exact sequence of $A$-modules; if $M'$ and $M''$ are
flat, and if one of the two is faithfully flat, then $M$ is also faithfully flat.
\end{env}

\begin{env}[6.4.4]
\label{env-0.6.4.4}
Let $A$ and $B$ be two rings, $M$ an $A$-module, $N$ an $(A,B)$-bimodule. If $M$ is
faithfully flat and if $N$ is a faithfully flat $B$-module, then $M\otimes_A N$ is a
faithfully flat $B$-module. In particular, if $M$ and $N$ are two faithfully flat
$A$-modules, then so is $M\otimes_A N$. If $B$ is an $A$-algebra and if $M$ is a faithfully
flat $A$-module, the $B$-module $M_{(B)}$ is faithfully flat.
\end{env}

\begin{env}[6.4.5]
\label{env-0.6.4.5}
If $M$ is a faithfully flat $A$-modules and if $S$ is a multiplicative subset of $A$,
$S^{-1}M$ is a faithfully flat $S^{-1}A$-module, since $S^{-1}M=M\otimes_A(S^{-1}A)$
\hyperref[env-0.6.4.4]{(6.4.4)}. Conversely, if for each maximal ideal $\mathfrak{m}$ of $A$,
$M_\mathfrak{m}$ is a faithfully flat $A_\mathfrak{m}$-module, then $M$ is a faithfully flat
$A$-module, since $M$ is $A$-flat \hyperref[env-0.6.3.3]{(6.3.3)}, and we have
\[
  M_\mathfrak{m}/\mathfrak{m}M_\mathfrak{m}
  =(M\otimes_A A_\mathfrak{m})
  \otimes_{A_\mathfrak{m}}(A_\mathfrak{m}/\mathfrak{m}A_\mathfrak{m})
  =M\otimes_A(A/\mathfrak{m})=M/\mathfrak{m}M,
\]
so the hyptheses imply that $M/\mathfrak{m}M\neq 0$ for each maximal ideal $\mathfrak{m}$ of
$A$, which proves our assertion \hyperref[env-0.6.4.1]{(6.4.1)}.
\end{env}

\subsection{Restriction of scalars}
\label{subsection-restriction-of-scalars}

\begin{env}[6.5.1]
\label{env-0.6.5.1}
Let $A$ be a ring, $\vphi:A\to B$ a ring homomorphism making $B$ an $A$-algebra. Suppose that
there exists a $B$-module $N$ which is a {\it faithfully flat} $A$-module. Then, for each
$A$-module $M$, the homomorphism $x\mapsto 1\otimes x$ from $M$ to $B\otimes_A M=M_{(B)}$ is
{\it injective}. In particular, $\vphi$ is injective; for each ideal $\mathfrak{a}$ of $A$,
we have $\vphi^{-1}(\mathfrak{a}B)=\mathfrak{a}$; for each maximal (resp. prime) ideal
$\mathfrak{m}$ of $A$, there exists a maximal (resp. prime) ideal $\mathfrak{n}$ of $B$ such
that $\vphi^{-1}(\mathfrak{n})=\mathfrak{m}$.
\end{env}

\begin{env}[6.5.2]
\label{env-0.6.5.2}
When the conditions of \hyperref[env-0.6.5.1]{(6.5.1)} are satisfied, we identify $A$ with the subring of
$B$ by $\vphi$ and more generally, for each $A$-module $M$, we identify $M$ with an
$A$-submodule of $M_{(B)}$. We note that if $B$ is also {\it Noetherian}, then so is $A$,
since the map $\mathfrak{a}\mapsto\mathfrak{a}B$ is an increasing injection from the set of
ideals of $A$ to the set of ideals of $B$; the existence of an infinite strictly increasing
sequence of ideals of $A$ thus implies the existence of an analogous sequence of ideals of
$B$.
\end{env}

\subsection{Faithfully flat rings}
\label{subsection-faithfullu-flat-rings}

\begin{env}[6.6.1]
\label{env-0.6.6.1}
Let $\vphi:A\to B$ be a ring homomorphism making $B$ an $A$-algebra. The following five
properties are equivalent:
\begin{itemize}
  \item[(a)] $B$ is a faithfully flat $A$-module (in other words, $M_{(B)}$ is an {\it exact}
        and {\it faithful} functor in $M$).
  \item[(b)] The homomorphism $\vphi$ is injective and the $A$-module $B/\vphi(A)$ is flat.
\oldpage{59}
  \item[(c)] The $A$-module $B$ is flat (in other words, the functor $M_{(B)}$ is {\it exact}),
        and for each $A$-module $M$. the homomorphism $x\mapsto 1\otimes x$ from $M$ to
        $M_{(B)}$ is injective.
  \item[(d)] The $A$-module $B$ is flat and for each ideal $\mathfrak{a}$ of $A$, we have
        $\vphi^{-1}(\mathfrak{a}B)=\mathfrak{a}$.
  \item[(e)] The $A$-module $B$ is flat and for each maximal ideal $\mathfrak{m}$ of $A$, there
        exists a maximal ideal $\mathfrak{n}$ of $B$ such that
        $\vphi^{-1}(\mathfrak{n})=\mathfrak{m}$.
\end{itemize}

When these conditions are satisfies, we identify $A$ with a subring of $B$.
\end{env}

\begin{env}[6.6.2]
\label{env-0.6.6.2}
Let $A$ be a {\it local} ring, $\mathfrak{m}$ its maximal ideal, and $B$ an $A$-algebra such
that $\mathfrak{m}B\neq B$ (which is so when for example $B$ is a local ring and $A\to B$ is
a {\it local} homomorphism). If $B$ is a {\it flat} $A$-module, $B$ is a {\it faithfully
flat} $A$-module. Indeed, as $\mathfrak{m}B\neq B$, there is a maximal ideal $\mathfrak{n}$
of $B$ containing $\mathfrak{m}B$; as $\vphi^{-1}(\mathfrak{n})\cap A$ contains
$\mathfrak{m}$ and does not contain $1$, we have that $\vphi^{-1}(\mathfrak{n})=\mathfrak{m}$
and the condition (e) of \hyperref[env-0.6.6.1]{(6.6.1)} applies.\footnote{This proof can be
replaced with just applying \hyperref[env-0.6.4.1]{(6.4.1)}, (d).} Under the indicated
conditions, we thus see that if $B$ is Noetherian, then so is
$A$ \hyperref[env-0.6.5.2]{(6.5.2)}.
\end{env}

\begin{env}[6.6.3]
\label{env-0.6.6.3}
Let $B$ be an $A$-algebra which is a faithfully flat $A$-module. For each $A$-module $M$ and
each $A$-submodule $M'$ of $M$, we have (by identifying $M$ with an $A$-submodule of
$M_{(B)}$) $M'=M\cap M_{(B)}'$. For $M$ to be a flat (resp. faithfully flat) $A$-module, it
is necessary and sufficient that $M_{(B)}$ is a flat (resp. faithfully flat) $B$-module.
\end{env}

\begin{env}[6.6.4]
\label{env-0.6.6.4}
Let $B$ be an $A$-algebra, $N$ a faithfully flat $B$-module. For $B$ to be a flat
(resp. faithfully flat) $A$-module, it is necessary and sufficient that $N$ is.

In particular, let $C$ be a $B$-algebra; if the ring $C$ is faithfully flat over $B$ and $B$
is faithfully flat over $A$, then $C$ is faithfully flat over $A$; if $C$ is faithfully flat
over $B$ and over $A$, then $B$ is faithfully flat over $A$.
\end{env}

\subsection{Flat morphisms of ringed spaces}
\label{subsection-flat-morphisms-of-ringed-spaces}

\begin{env}[6.7.1]
\label{env-0.6.7.1}
Let $f:X\to Y$ be a morphism of ringed spaces, and let $\sh{F}$ be a $\OO_X$-module. We say
that $\sh{F}$ is {\it $f$-flat} (or {\it $Y$-flat} when there is no chance of confusion
with $f$) {\it at a point $x\in X$} if $\sh{F}_x$ is a flat $\OO_{f(x)}$-module; we say that
$\sh{F}$ is {\it $f$-flat over $y\in Y$} if $\sh{F}$ is $f$-flat for all the points
$x\in f^{-1}(y)$; we say that $\sh{F}$ is {\it $f$-flat} if $\sh{F}$ is $f$-flat at all the
points of $X$. We say that the morphism $f$ is {\it flat at $x\in X$} (resp. {\it flat over
$y\in Y$}, resp. {\it flat}) if $\OO_X$ is $f$-flat at $x$ (resp. $f$-flat over $y$, resp.
$f$-flat). If $f$ is a flat morphism, we then say that $X$ if {\it flat over $Y$}, or
{\it $Y$-flat}.
\end{env}

\begin{env}[6.7.2]
\label{env-0.6.7.2}
With the notations of \hyperref[env-0.6.7.1]{(6.7.1)}, if $\sh{F}$ is $f$-flat at $x$, for each open
neighborhood $U$ of $y=f(x)$, the functor $(f^*(\sh{G})\otimes_{\OO_X}\sh{F})_x$ in $\sh{G}$
is {\it exact} on the category of $(\OO_Y|U)$-modules; indeed, this stalk canonically
identifies with $\sh{G}_y\otimes_{\OO_y}\sh{F}_x$, and our assertion follows from the
definition. In particular, if $f$ is a {\it flat} morphism, the functor $f^*$ is
{\it exact} on the category of $\OO_Y$-modules.
\end{env}

\begin{env}[6.7.3]
\label{env-0.6.7.3}
Conversely, suppose the sheaf of rings $\OO_Y$ is {\it coherent}, and suppose that for
{\it each} open neighborhood $U$ of $y$, the functor $(f^*(\sh{G})\otimes_{\OO_X}\sh{F})_x$
is exact in $\sh{G}$ on the category of {\it coherent} $(\OO_Y|U)$-modules. Then $\sh{F}$ is
{\it $f$-flat at $x$}. In fact, it suffices to prove that for each ideal of finite type
$\mathfrak{J}$ of $\OO_y$, the canonical homomorphism
$\mathfrak{J}\otimes_{\OO_y}\sh{F}_x\to\sh{F}_x$ is injective \hyperref[env-0.6.1.1]{(6.1.1)}. We know
\hyperref[env-0.5.3.8]{(5.3.8)} that there then exists an open neighborhood
\oldpage{60}
$U$ of $y$ and a coherent sheaf of ideals $\sh{J}$ of $\OO_Y|U$ such that
$\sh{J}_y=\mathfrak{J}$, hence the conclusion.
\end{env}

\begin{env}[6.7.4]
\label{env-0.6.7.4}
The results of (6.1) for flat modules are immediately translated into propositions for
sheaves with are $f$-flat at a point:

If $0\to\sh{F}'\to\sh{F}\to\sh{F}''\to 0$ is an exact sequence of $\OO_X$-modules and if
$\sh{F}''$ is $f$-flat at a point $x\in X$, then, for each open neighborhood $U$ of $y=f(x)$
and each $(\OO_Y|U)$-module $\sh{G}$, the sequence
\[
  0\longrightarrow(f^*(\sh{G})\otimes_{\OO_X}\sh{F}')_x
  \longrightarrow(f^*(\sh{G})\otimes_{\OO_X}\sh{F})_x
  \longrightarrow(f^*(\sh{G})\otimes_{\OO_X}\sh{F}'')_x\longrightarrow 0
\]
is exact. For $\sh{F}$ to be $f$-flat at $x$, it is necessary and sufficient that $\sh{F}'$
is. We have similar statements for the corresponding notions of a $f$-flat $\OO_X$-modules
over $y\in Y$, or of a $f$-flat $\OO_X$-module.
\end{env}

\begin{env}[6.7.5]
\label{env-0.6.7.5}
Let $f:X\to Y$, $g:Y\to Z$ be two morphisms of ringed spaces; let $x\in X$, $y=f(x)$, and
$\sh{F}$ be an $\OO_X$-module. If $\sh{F}$ is $f$-flat at the point $x$ and if the morphism
$g$ is flat at the point $y$, then $\sh{F}$ is $(g\circ f)$-flat at $x$ \hyperref[env-0.6.2.1]{(6.2.1)}. In
particular, if $f$ and $g$ are flat morphisms, then $g\circ f$ is flat.
\end{env}

\begin{env}[6.7.6]
\label{env-0.6.7.6}
Let $X$, $Y$ be two ringed spaces, $f:X\to Y$ a {\it flat} morphism. Then the canonical
homomorphism of bifunctors \hyperref[env-0.4.4.6]{(4.4.6)}
\[
  f^*(\shHom_{\OO_Y}(\sh{F},\sh{G}))\longrightarrow\shHom_{\OO_X}(f^*(\sh{F}),f^*(\sh{G}))
  \tag{6.7.6.1}
\]
is an {\it isomorphism} when $\sh{F}$ admits a {\it finite presentation} \hyperref[env-0.5.2.5]{(5.2.5)}.

Indeed, the question being local, we can assume that there exists an exact sequence
$\OO_Y^m\to\OO_Y^n\to\sh{F}\to 0$. The two sides of (6.7.6.1) are right exact functors in
$\sh{F}$ according to the hypotheses on $f$; we then have reduced to proving the proposition
in the case where $\sh{F}=\OO_Y$, in which the result is trivial.
\end{env}

\begin{env}[6.7.8]
\label{env-0.6.7.8}
We say that a morphism $f:X\to Y$ of ringed spaces is {\it faithfully flat} if $f$ is
{\it surjective} and if, for each $x\in X$, $\OO_x$ is a {\it faithfully flat}
$\OO_{f(x)}$-module. When $X$ and $Y$ are locally ringed spaces \hyperref[env-0.5.5.1]{(5.5.1)}, it is
equivalent to say that the morphism $f$ is {\it surjective} and {\it flat}
\hyperref[env-0.6.6.2]{(6.2.2)}. When $f$ is faithfully flat, $f^*$ is an {\it exact} and {\it faithful}
functor on the category of $\OO_Y$-modules \hyperref[env-0.6.6.1]{(6.6.1)}, (a), and for a $\OO_Y$-module
$\sh{G}$ to be $Y$-flat, it is necessary and sufficient that $f^*(\sh{G})$ is
\hyperref[env-0.6.6.3]{(6.6.3)}.
\end{env}

\section{Adic rings}
\label{section-adic-rings}

\subsection{Admissible rings}
\label{subsection-admissible-rings}

\begin{env}[7.1.1]
\label{env-0.7.1.1}
Recall that in a topological ring $A$ (not necessarily separated), we say that an element $x$
is {\it topologically nilpotent} if $0$ is {\it a} limit of the sequence
$(x^n)_{n\geqslant 0}$. We say that a topological ring $A$ is {\it linearly topologized} if
there exists a fundamental system of neighborhoods of $0$ in $A$ of (necessarily {\it open})
{\it ideals}.
\end{env}

\begin{defn}[7.1.2]
\label{defn-0.7.1.2}
In a linearly topologized ring $A$, we say that an ideal $\mathfrak{J}$ is an {\it ideal of
definition} if $\mathfrak{J}$ is open and if, for each neighborhood $V$ of $0$, there exists
a integer $n>0$ such
\oldpage{61}
that $\mathfrak{J}^n\subset V$ {\it (which we express, by abuse of language, by saying that
the sequence $(\mathfrak{J}^n)$ {\it tends to $0$})}. We say that a linearly topologized
ring $A$ is {\it pre-admissible} if there exists in $A$ an ideal of definition; we say that
$A$ is {\it admissible} if it is pre-admissible and if in addition it is separated and
complete.
\end{defn}

It is clear that if $\mathfrak{J}$ is an ideal of definition, $\mathfrak{L}$ an open ideal of
$A$, then $\mathfrak{J}\cap\mathfrak{L}$ is also an ideal of definition; the ideals of
definition of a pre-admissible ring $A$ thus form a {\it fundamental system of neighborhoods
of $0$}.

\begin{lem}[7.1.3]
\label{lem-0.7.1.3}
Let $A$ be a linearly topologized ring.
\begin{itemize}
  \item[{\rm(i)}] For $x\in A$ to be topologically nilpotent, it is necessary and sufficient that for
        each open ideal $\mathfrak{J}$ of $A$, the canonical image of $x$ in $A/\mathfrak{J}$
        is nilpotent. The set $\mathfrak{T}$ of topologically nilpotent elements of $A$ is an
        ideal.
  \item[{\rm(ii)}] Suppose that in addition $A$ is pre-admissible, and let $\mathfrak{J}$ be an ideal of
        definition for $A$. For $x\in A$ to be topologically nilpotent, it is necessary and
        sufficient that its canonical image in $A/\mathfrak{J}$ is nilpotent; the ideal
        $\mathfrak{T}$ is the inverse image of the nilradical of $A/\mathfrak{J}$ and is thus
        open.
\end{itemize}
\end{lem}

\begin{proof}
\label{proof-lem-0.7.1.3}
(i) follows immediately from the definitions. To prove (ii), it suffices to note that for
each neighborhood $V$ of $0$ in $A$, there exists an $n>0$ such that
$\mathfrak{J}^n\subset V$; if $x\in A$ is such that $x^m\in\mathfrak{J}$, we have
$x^{mq}\in V$ for $q\geqslant n$, so $x$ is topologically nilpotent.
\end{proof}

\begin{prop}[7.1.4]
\label{prop-0.7.1.4}
Let $A$ be a pre-admissible ring, $\mathfrak{J}$ an ideal of definition for $A$.
\begin{itemize}
  \item[{\rm(i)}] For an ideal $\mathfrak{J}'$ of $A$ to be contained in an ideal of
        definition, it is necessary and sufficient that there exists an integer
        $n>0$ such that ${\mathfrak{J}'}^n\subset\mathfrak{J}$.
  \item[{\rm(ii)}] For an $x\in A$ to be contained in an ideal of definition, it is
        necessary and sufficient that it is topologically nilpotent.
\end{itemize}
\end{prop}

\begin{proof}
\label{proof-prop-0.7.1.4}
\medskip\noindent
\begin{itemize}
  \item[(i)] If ${\mathfrak{J}'}^n\subset\mathfrak{J}$, for each open neighborhood
        $V$ of $0$ in $A$, there exists an $m$ such that
        $\mathfrak{J}^m\subset V$, thus ${\mathfrak{J}'}^{mn}\subset V$.
  \item[(ii)] The condition is evidently necessary; it is sufficient, since if it
        satisfied, there exists an $n$ such that $x^n\in\mathfrak{J}$, so
        $\mathfrak{J}'=\mathfrak{J}+Ax$ is an ideal of definition, because it is
        open, and ${\mathfrak{J}'}^n\subset\mathfrak{J}$.
\end{itemize}
\end{proof}

\begin{cor}[7.1.5]
\label{cor-0.7.1.5}
In a pre-admissible ring $A$, an open prime ideal contains all the ideals of
definition.
\end{cor}

\begin{cor}[7.1.6]
\label{cor-0.7.1.6}
The notations and hypotheses being that of \hyperref[prop-0.7.1.4]{(7.1.4)}, the following
properties of an ideal $\mathfrak{J}_0$ of $A$ are equivalent:
\begin{itemize}
  \item[{\rm(a)}] $\mathfrak{J}_0$ is the largest ideal of definition of $A$;
  \item[{\rm(b)}] $\mathfrak{J}_0$ is a maximal ideal of definition;
  \item[{\rm(c)}] $\mathfrak{J}_0$ is an ideal of definition such that the ring
        $A/\mathfrak{J}_0$ is reduced.
\end{itemize}
For there to exist an ideal $\mathfrak{J}_0$ to have these properties, it is
necessary and sufficient that the nilradical of $A/\mathfrak{J}$ to be
nilpotent; $\mathfrak{J}_0$ is then equal to the ideal $\mathfrak{T}$ of
topologically nilpotent elements of $A$.
\end{cor}

\begin{proof}
\label{proof-cor-0.7.1.6}
It is clear that (a) implies (b), and (b) implies (c) according to
\hyperref[prop-0.7.1.4]{(7.1.4)}, (ii), and \hyperref[lem-0.7.1.3]{(7.1.3)}, (ii); for the same
reason, (c) implies (a). The latter assertion follows from \hyperref[prop-0.7.1.4]{(7.1.4)}, (i) and
\hyperref[lem-0.7.1.3]{(7.1.3)}, (ii).
\end{proof}

When $\mathfrak{T}/\mathfrak{J}$, the nilradical of $A/\mathfrak{J}$, is
nilpotent, and we denote by $A_\text{red}$ the (reduced) quotient ring
$A/\mathfrak{T}$.

\begin{cor}[7.1.7]
\label{cor-0.7.1.7}
\oldpage{62}
A pre-admissible Noetherian ring admits a largest ideal of definition.
\end{cor}

\begin{cor}[7.1.8]
\label{cor-0.7.1.8}
If a pre-admissible ring $A$ is such that, for an ideal of definition
$\mathfrak{J}$, the powers $\mathfrak{J}^n$ ($n>0$) form a fundamental system
of neighborhoods of $0$, it is the same for the powers ${\mathfrak{J}'}^n$ for
each ideal of definition $\mathfrak{J}'$ of $A$.
\end{cor}

\begin{defn}[7.1.9]
\label{defn-0.7.1.9}
We say that a pre-admissible ring $A$ is {\it pre-adic} if there exists an
ideal of definition $\mathfrak{J}$ for $A$ such that the $\mathfrak{J}^n$ form
a fundamental system of neighborhoods of $0$ in $A$ {\it (or equivalently, such
that the $\mathfrak{J}^n$ are {\it open})}. We call a ring {\it adic} if it
is a separated and complete pre-adic ring.
\end{defn}

If $\mathfrak{J}$ is an ideal of definition for a pre-adic (resp. adic) ring
$A$, we say that $A$ is a {\it $\mathfrak{J}$-pre-adic}
(resp. {\it $\mathfrak{J}$-adic}) ring, and that its topology is the
{\it $\mathfrak{J}$-pre-adic} (resp. {\it $\mathfrak{J}$-adic}) topology. More
generally, if $M$ is an $A$-module, the topology on $M$ having for a fundamental
system of neighborhoods of $0$ the submodules $\mathfrak{J}^n M$ is called the
{\it $\mathfrak{J}$-pre-adic} (resp. {\it $\mathfrak{J}$-adic}) topology.
According to \hyperref[cor-0.7.1.8]{(7.1.8)}, these topologies are independent of the choice
of the ideal of definition $\mathfrak{J}$.

\begin{prop}[7.1.10]
\label{prop-0.7.1.10}
Let $A$ be an admissible ring, $\mathfrak{J}$ an ideal of definition for $A$.
Then $\mathfrak{J}$ is contained in the radical of $A$.
\end{prop}

This statement is equivalent to any of the following corollaries:
\begin{cor}[7.1.11]
\label{cor-0.7.1.11}
For each $x\in\mathfrak{J}$, $1+x$ is invertible in $A$.
\end{cor}

\begin{cor}[7.1.12]
\label{cor-0.7.1.12}
For $f\in A$ to be invertible in $A$, it is necessary and sufficient that its
canonical image in $A/\mathfrak{J}$ is invertible in $A/\mathfrak{J}$.
\end{cor}

\begin{cor}[7.1.13]
\label{cor-0.7.1.13}
For each $A$-module $M$ of finite type, the relation $M=\mathfrak{J}M$
(equivalent to $M\otimes_A(A/\mathfrak{J})=0$) implies that $M=0$.
\end{cor}

\begin{cor}[7.1.14]
\label{cor-0.7.1.14}
Let $u:M\to N$ be a homomorphism of $A$-modules, $N$ being of finite type; for
$u$ to be surjective, it is necessary and sufficient that
$u\otimes 1:M\otimes_A(A/\mathfrak{J})\to N\otimes_A(A/\mathfrak{J})$ is.
\end{cor}

\begin{proof}
\label{proof-prop-0.7.1.10}
The equivalence of \hyperref[prop-0.7.1.10]{(7.1.10)} and \hyperref[cor-0.7.1.11]{(7.1.11)}
follows from Bourbaki, {\it Alg.}, chap. VIII, \textsection6, no. 3,
th. 1, and the equivalence of \hyperref[prop-0.7.1.10]{(7.1.10)} and
\hyperref[prop-0.7.1.10]{(7.1.10)} and \hyperref[cor-0.7.1.13]{(7.1.13)} follows from
{\it loc. cit.}, th. 2; the fact that \hyperref[prop-0.7.1.10]{(7.1.10)} implies
\hyperref[cor-0.7.1.14]{(7.1.14)} follows from {\it loc. cit.},
cor. 4 of the prop. 6; on the other hand, \hyperref[cor-0.7.1.14]{(7.1.14)} implies
\hyperref[cor-0.7.1.13]{(7.1.13)} by applying the zero homomorphism. Finally,
\hyperref[prop-0.7.1.10]{(7.1.10)} implies that if $f$ is invertible in $A/\mathfrak{J}$,
then $f$ is not contained in any maximal ideal of $A$, thus $f$ is invertible in $A$,
in other words, \hyperref[prop-0.7.1.10]{(7.1.10)} implies \hyperref[cor-0.7.1.12]{(7.1.12)};
conversely, \hyperref[cor-0.7.1.12]{(7.1.12)} implies \hyperref[cor-0.7.1.11]{(7.1.11)}.

It therefore remains to prove \hyperref[cor-0.7.1.11]{(7.1.11)}. Now as $A$ is separated and
complete, and the sequence $(\mathfrak{J}^n)$ tends to $0$, it is immediate that
the series $\sum_{n=0}^\infty(-1)^n x^n$ is convergent in $A$, and that if $y$
is its sum, then we have $y(1+x)=1$.
\end{proof}

\subsection{Adic rings and projective limits}
\label{subsection-adic-rings-and-projective-limits}

\begin{env}[7.2.1]
\label{env-0.7.2.1}
Each projective limit of {\it discrete} rings is evidently a linearly
topologized ring, separated and compact. Conversely, let $A$ be a linearly
topologized ring, and let $(\mathfrak{J}_\lambda)$ be a fundamental system of
open neighborhoods of $0$ in $A$ consisting of
\oldpage{63}
ideals. The canonical maps $\vphi_\lambda:A\to A/\mathfrak{J}_\lambda$ form
a projective system of continuous representations and therefore defines a
continuous representation $\vphi:A\to\varprojlim A/\mathfrak{J}_\lambda$; if $A$
is {\it separated}, then $\vphi$ is a topological isomorphism from $A$ to an
everywhere dense subring of $\varprojlim A/\mathfrak{J}_\lambda$; if, in
addition, $A$ is {\it complete}, then $\vphi$ is a topological isomorphism from
$A$ to $\varprojlim A/\mathfrak{J}_\lambda$.
\end{env}

\begin{lem}[7.2.2]
\label{lem-0.7.2.2}
For a linearly topologized ring to be admissible, it is necessary and sufficient
that it is isomorphic to a projective limit $A=\varprojlim A_\lambda$, where
$(A_\lambda,\mu_{\lambda\mu})$ is a projective limit of discrete rings having
for the set of indices a filtered ordered (by $\leqslant$) $L$ which admits
a smallest element denoted $0$ and satisfies the following conditions:
1st the $u_\lambda:A\to A_\lambda$ are sujective;
2nd the kernel $\mathfrak{J}_\lambda$ of
$u_{0\lambda}:A_\lambda\to A_0$ is nilpotent. When this is so, the kernel
$\mathfrak{J}$ of $u_0:A\to A_0$ is equal to $\varprojlim\mathfrak{J}_\lambda$.
\end{lem}

\begin{proof}
\label{proof-lem-0.7.2.2}
The necessity of the condition follows from \hyperref[env-0.7.2.1]{(7.2.1)}, by choosing
$(\mathfrak{J}_\lambda)$ to be a fundamental system of neighborhoods of $0$
consisting of ideals of definitions contained in an ideal of definition
$\mathfrak{J}_0$ and by applying \hyperref[prop-0.7.1.4]{(7.1.4)}, (i). The converse follows
from the definition of the projective limit and from \hyperref[env-0.7.2.1]{(7.2.1)}, and the
latter assertion is immediate.
\end{proof}

\begin{env}[7.2.3]
\label{env-0.7.2.3}
Let $A$ be an {\it admissible} topological ring, $\mathfrak{J}$ an ideal of $A$
contained in an ideal of definition (in other words \hyperref[prop-0.7.1.4]{(7.1.4)} such that
$(\mathfrak{J}^n)$ tends to $0$); we can consider on $A$ the ring topology
having for a fundamental system of neighborhoods of $0$ the powers
$\mathfrak{J}^n$ ($n>0$); we call again this the {\it $\mathfrak{J}$-pre-adic}
topology. The hypothesis that $A$ is admissible implies that
$\bigcup_n\mathfrak{J}^n=0$, therefore the $\mathfrak{J}$-pre-adic topology on
$A$ is {\it separated}; let $\widehat{A}=\varprojlim A/\mathfrak{J}^n$ be the
completion of $A$ for this topology (where the $A/\mathfrak{J}^n$ are equipped
with the discrete topology), and denote by $u$ the (not necessarily continuous)
ring homomorphism $A\to\widehat{A}$, the projective limit of the sequence of
homomorphisms $u_n:A\to A/\mathfrak{J}^n$. On the other hand, the
$\mathfrak{J}$-pre-adic topology on $A$ is finer than the given topology
$\mathcal{T}$ on $A$; as $A$ is separated and complete for $\mathcal{T}$, we can
extend by continuity the identity map of $A$ (equipped with the
$\mathfrak{J}$-pre-adic topology) to $A$ equipped with $\mathcal{T}$; this
gives a continuous representation $v:\widehat{A}\to A$.
\end{env}

\begin{prop}[7.2.4]
\label{prop-0.7.2.4}
If $A$ is an admissible ring and $\mathfrak{J}$ is contained in an ideal of
definition of $A$, then $A$ is separated and complete for the
$\mathfrak{J}$-pre-adic topology.
\end{prop}

\begin{proof}
\label{proof-prop-0.7.2.4}
With the notations of \hyperref[env-0.7.2.3]{(7.2.3)}, it is immediate that
$v\circ u$ is the identity map of $A$. On the other hand,
$u_n\circ v:\widehat{A}\to A/\mathfrak{J}^n$ is the extension by continuity (for
the $\mathfrak{J}$-pre-adic topology on $A$ and the discrete topology on
$A/\mathfrak{J}^n$) of the canonical map $u_n$; in other words, it is the
canonical map from $\widehat{A}=\varprojlim_k A/\mathfrak{J}^k$ to
$A/\mathfrak{J}^n$; $u\circ v$ is therefore the projective limit of this
sequence of maps, which is by definition the identity map of
$\widehat{A}$; this proves the proposition.
\end{proof}

\begin{cor}[7.2.5]
\label{cor-0.7.2.5}
Under the hypotheses of \hyperref[env-0.7.2.3]{(7.2.3)}, the following conditions are
equivalent:
\begin{itemize}
  \item[{\rm(a)}] the homomorphism $u$ is continuous;
\oldpage{64}
  \item[{\rm(b)}] the homomorphism $v$ is bicontinous;
  \item[{\rm(c)}] $A$ is a $\mathfrak{J}$-adic ring.
\end{itemize}
\end{cor}

\begin{cor}[7.2.6]
\label{cor-0.7.2.6}
Let $A$ be an admissible ring $A$, $\mathfrak{J}$ an ideal of definition for
$A$. For $A$ to be Noetherian, it is necessary and sufficient that
$A/\mathfrak{J}$ is Noetherian and that $\mathfrak{J}/\mathfrak{J}^2$ is an
$(A/\mathfrak{J})$-module of finite type.
\end{cor}

These conditions are evidently necessary. Conversely, suppose the considitions
are satisfied; as according to \hyperref[prop-0.7.2.4]{(7.2.4)} $A$ is complete for the
$\mathfrak{J}$-pre-adic, for it to be Noetherian, it is necessary and sufficient
that the associated graded ring $\grad(A)$ (for the filtration on the
$\mathfrak{J}^n$) is (\cite[p~.18--07, th.~4]{I-1}). Now, let $a_1,\dots,a_n$ be
the elements of $\mathfrak{J}$ whose classes modulo $\mathfrak{J}^2$ are the
generators of $\mathfrak{J}/\mathfrak{J}^2$ as a $(A/\mathfrak{J})$-module. It
is immediate by induction that the classes modulo $\mathfrak{J}^{m+1}$ of the
monomials of total degree $m$ in the $a_i$ ($1\leqslant i\leqslant n$) form a
system of generators for the $(A/\mathfrak{J})$-module
$\mathfrak{J}^m/\mathfrak{J}^{m+1}$. We conclude that $\grad(A)$ is a ring
isomorphic to a quotient of $(A/\mathfrak{J})[T_1,\dots,T_n]$ ($T_i$
indeterminates), which finishes the proof.

\begin{prop}[7.2.7]
\label{prop-0.7.2.7}
Let $(A_i,u_{ij})$ be a projective system $(i\in\bb{N})$ of discrete rings, and
for each integer $i$, let $\mathfrak{J}_i$ be the kernel in $A_i$ of the
homomorphism $u_{0i}:A_i\to A_0$. We suppose that:
\begin{itemize}
  \item[{\rm(a)}] For $i\leqslant j$, $u_{ij}$ is surjective and its kernel is
        $\mathfrak{J}_j^{i+1}$ {\it (therefore $A_i$ is isomorphic to
        $A_j/\mathfrak{J}_j^{i+1}$)}.
  \item[{\rm(b)}] $\mathfrak{J}_1/\mathfrak{J}_1^2$ ($=\mathfrak{J}_1$) is a module of
        finite type over $A_0=A_1/\mathfrak{J}_1$.
\end{itemize}
Let $A=\varprojlim_i A_i$, and for each integer $n\geqslant 0$, let $u_n$ be the
canonical homomorphism $A\to A_n$, and let $\mathfrak{J}^{(n+1)}\subset A$ be
its kernel. Then we have these conditions:
\begin{itemize}
  \item[{\rm(i)}] $A$ is an adic ring, having $\mathfrak{J}=\mathfrak{J}^{(1)}$ for an
        ideal of definition.
  \item[{\rm(ii)}] We have $\mathfrak{J}^{(n)}=\mathfrak{J}^n$ for each $n\geqslant 1$.
  \item[{\rm(iii)}] $\mathfrak{J}/\mathfrak{J}^2$ is isomorphic to
        $\mathfrak{J}_1=\mathfrak{J}_1/\mathfrak{J}_1^2$, and as a result
        is a module of finite type over $A_0=A/\mathfrak{J}$.
\end{itemize}
\end{prop}

\begin{proof}
\label{proof-prop-0.7.2.7}
The hypothesis of surjectivity on the $u_{ij}$ implies that $u_n$ is surjective;
in addition, the hypothesis (a) implies that $\mathfrak{J}_j^{j+1}=0$, therefore
$A$ is an admissible ring \hyperref[lem-0.7.2.2]{(7.2.2)}; by definition, the
$\mathfrak{J}^{(n)}$ form a fundamental system of neighborhoods of $0$ in $A$,
so (ii) implies (i). In addition, we have
$\mathfrak{J}=\varprojlim_i\mathfrak{J}_i$ and the maps
$\mathfrak{J}\to\mathfrak{J}_i$ are surjective, so (ii) implies (iii), and it
remains to prove (ii). By definition, $\mathfrak{J}^{(n)}$ consists of the
elements $(x_k)_{k\geqslant 0}$ of $A$ such that $x_k=0$ for $k<n$, therefore
$\mathfrak{J}^{(n)}\mathfrak{J}^{(m)}\subset\mathfrak{J}^{(n+m)}$, in other
words the $\mathfrak{J}^{(n)}$ form a {\it filtration} of $A$. On the other
hand, $\mathfrak{J}^{(n)}/\mathfrak{J}^{(n+1)}$ is isomorphic to the projection
from $\mathfrak{J}^{(n)}$ to $A_n$; as
$\mathfrak{J}^{(n)}=\varprojlim_{i>n}\mathfrak{J}_i^n$, this projection is none
other than $\mathfrak{J}_n^n$, which is a module over $A_0=A_n/\mathfrak{J}_n$.
Now let $a_j=(a_{jk})_{k\geqslant 0}$ be $r$ elements of
$\mathfrak{J}=\mathfrak{J}^{(1)}$ such that $a_{11},\dots,a_{r1}$ form a system
of generators for $\mathfrak{J}_1$ over $A_0$; we will see that the set $S_n$ of
monomials of total degree $n$ and the $a_j$ generate the ideal
$\mathfrak{J}^{(n)}$ of $A$. As $\mathfrak{J}_i^{i+1}=0$, it is clear first of
all that $S_n\subset\mathfrak{J}^{(n)}$; since $A$ is complete for the
filtration $(\mathfrak{J}^{(m)})$, it suffices to prove that the set
$\overline{S}_n$ of classes modulo $\mathfrak{J}^{(n+1)}$ of elements of $S_n$
generate the graded module $\grad(\mathfrak{J}^{(n)})$ over the graded ring
$\grad(A)$ for the above filtration (\cite[p.~18--06, lemme]{I-1}); according to
the definition of the multiplication on $\grad(A)$,
\oldpage{65}
it suffices to prove that for each $m$, $\overline{S}_m$ is a system of
generators for the $A_0$-module $\mathfrak{J}^{(m)}/\mathfrak{J}^{(m+1)}$, or
that $\mathfrak{J}_m^m$ is generated by the monomials of degree $m$ in the
$a_{jm}$ ($1\leqslant j\leqslant r$). For this, it remains to show that
$\mathfrak{J}_m$ is generated (as an $A_m$-module) by the monomials of degree
$\leqslant m$ relative to $a_{jm}$; the proposition being evident by definition
for $m=1$, we argue by induction on $m$, and let $\mathfrak{J}_m'$ be the
$A_m$-submodule of $\mathfrak{J}_m$ generated by these monomials. The relation
$\mathfrak{J}_{m-1}=\mathfrak{J}_m/\mathfrak{J}_m^m$ and the induction
hypothesis prove that $\mathfrak{J}_m=\mathfrak{J}_m'+\mathfrak{J}_m^m$, hence,
since $\mathfrak{J}_m^{m+1}=0$, we have $\mathfrak{J}_m^m={\mathfrak{J}_m'}^m$,
and finally $\mathfrak{J}_m=\mathfrak{J}_m'$.
\end{proof}

\begin{cor}[7.2.8]
\label{cor-0.7.2.8}
Under the conditions of Proposition \hyperref[prop-0.7.2.7]{(7.2.7)}, for $A$ to
be Noetherian, it is necessary and sufficient that $A_0$ is.
\end{cor}

\begin{proof}
\label{proof-cor-0.7.2.8}
This follows immediately from Corollary \hyperref[cor-0.7.2.6]{(7.2.6)}.
\end{proof}

\begin{prop}[7.2.9]
\label{prop-0.7.2.9}
Suppose the hypotheses of Proposition \hyperref[prop-0.7.2.7]{(7.2.7)}: for each integer $i$,
let $M_i$ be an $A_i$-module, and for $i\leqslant j$, let $v_{ij}:M_j\to M_i$ be a
$u_{ij}$-homomorphism, such that $(M_i,v_{ij})$ is a projective system. In addition, suppose
that $M_0$ is an $A_0$-module of finite type and that the $v_{ij}$ are surjective with kernel
$\mathfrak{J}_j^{i+1}M_j$. Then $M=\varprojlim M_i$ is an $A$-module of finite type, and the
kernel of the surjective $u_n$-homomorphism $v_n:M\to M_n$ is $\mathfrak{J}^{n+1}M$
{\it (such that $M_n$ identifies with
$M/\mathfrak{J}^{n+1}M=M\otimes_A(A/\mathfrak{J}^{n+1})$)}.
\end{prop}

\begin{proof}
\label{proof-prop-0.7.2.9}
Let $z_h=(z_{hk})_{k\geqslant 0}$ be a system of $s$ elements of $M$ such that the $z_{h0}$
($1\leqslant h\leqslant s$) forms a system of generators for $M_0$; we will show that the
$z_h$ generate the $A$-module $M$. The $A$-module $M$ is separated and complete for the
filtration by the $M^{(n)}$, where $M^{(n)}$ is the set of $y=(y_k)_{k\geqslant 0}$ in $M$
such that $y_k=0$ for $k<n$; it is clear that we have $\mathfrak{J}^{(n)}M\subset M^{(n)}$
and that $M^{(n)}/M^{(n+1)}=\mathfrak{J}_n^n M_n$. We therefore have reduced to showing that
the classes of the $z_h$ modulo $M^{(0)}$ generate the graded module $\grad(M)$ (by the
above filtration) over the graded ring $\grad(A)$ \cite[p. 18--06, lemme]{I-1}; for this, we
observe that it suffices to ptove that the $z_{hn}$ ($1\leqslant h\leqslant s$) generate the
$A_n$-module $M_n$. We argue by induction on $n$, the proposition being evident by definition
for $n=0$; the relation $M_{n-1}=M_n/\mathfrak{J}_n^n M_n$ and the induction hypothesis show
that if $M_n'$ is the submodule of $M_n$ generated by the $z_{hn}$, we have that
$M_n=M_n'+\mathfrak{J}_n^n M_n$, and as $\mathfrak{J}_n$ is nilpotent, this implies that
$M_n=M_n'$. Similarly, passing to the associated graded modules shows that the canonical map
from $\mathfrak{J}^{(n)}$ to $M^{(n)}$ is surjective (thus bijection), in other words that
$\mathfrak{J}^{(n)}M=\mathfrak{J}^n M$ is the kernel of $M\to M_n$.
\end{proof}

\begin{cor}[7.2.10]
\label{cor-0.7.2.10}
Let $(N_i,w_{ij})$ be a second projective system of $A_i$-modules satisfying the conditions
of Proposition \hyperref[prop-0.7.2.9]{(7.2.9)}, and let $N=\varprojlim N_i$. There is a
bijective correspondenc between the projective systems $(h_i)$ of $A_i$-homomorphisms
$h_i:M_i\to N_i$ and the homomomorphisms of $A$-modules $h:M\to N$ (which is necessarily
continuous for the $\mathfrak{J}$-adic topologies).
\end{cor}

\begin{proof}
\label{proof-cor-0.7.2.10}
It is clear that if $h:M\to N$ is an $A$-homomorphism, then we have
$h(\mathfrak{J}^n M)\subset\mathfrak{J}^n N$, hence the continuity of $h$; by passing to
quotients, there corresponds to $h$ a projective system of $A_i$-homomorphisms
$h_i:M_i\to N_i$, whose projective limit is $h$, hence the corollary.
\end{proof}

\begin{rmk}[7.2.11]
\label{rmk-0.7.2.11}
Let $A$ be an adic ring with an ideal of definition $\mathfrak{J}$ such that
$\mathfrak{J}/\mathfrak{J}^2$ is an $(A/\mathfrak{J})$-module of finite type; it is clear
that the $A_i=A/\mathfrak{J}^{i+1}$ satisfy
\oldpage{66}
the conditions of Proposition \hyperref[prop-0.7.2.7]{(7.2.7)}; as $A$ is the projective
limit of the $A_i$, we see that Proposition \hyperref[prop-0.7.2.7]{(7.2.7)} gives the
description of {\it all} the adic rings of the type considered (and in particular of all
the {\it adic Noetherian} rings).
\end{rmk}

\begin{exm}[7.2.12]
\label{exm-0.7.2.12}
Let $B$ be a ring, $\mathfrak{J}$ an ideal of $B$ such that $\mathfrak{J}/\mathfrak{J}^2$ is
a module of finite type over $B/\mathfrak{J}$ (or over $B$, equivalently); set
$A=\varprojlim_n B/\mathfrak{J}^{n+1}$; $A$ is the separated completion of $B$ equipped with
the $\mathfrak{J}$-pre-adic topology. If $A_n=B/\mathfrak{J}^{n+1}$, then it is immediate
that the $A_n$ satisfy the conditions of Proposition \hyperref[prop-0.7.2.7]{(7.2.7)};
therefore $A$ is an adic ring and if $\overline{\mathfrak{J}}$ is the closure in $A$ of the
canonical image of $\mathfrak{J}$, then $\overline{\mathfrak{J}}$ is an ideal of definition
for $A$, $\overline{\mathfrak{J}^n}$ is the closure of the canonical image of
$\mathfrak{J}^n$, $A/\overline{\mathfrak{J}^n}$ identifies with $B/\mathfrak{J}^n$ and
$\overline{\mathfrak{J}}/\overline{\mathfrak{J}^2}$ is isomorphic to
$\mathfrak{J}/\mathfrak{J}^2$ as an $(A/\overline{\mathfrak{J}})$-module. Similarly, if $N$
is such that $N/\mathfrak{J}N$ is a $B$-module of finite type, and if we set
$M_i=N/\mathfrak{J}^{i+1}N$, then $M=\varprojlim M_i$ is an $A$-module of finite type,
isomorphic to the separated completion of $N$ for the $\mathfrak{J}$-pre-adic topology, and
$\overline{\mathfrak{J}^n}M$ identifies with the closure of the canonical image of
$\mathfrak{J}^n N$, and $M/\overline{\mathfrak{J}^n}M$ identifies with
$N/\mathfrak{J}^n N$.
\end{exm}

\subsection{Pre-adic Noetherian rings}
\label{subsection-pre-adic-noetherian-rings}

\begin{env}[7.3.1]
\label{env-0.7.3.1}
Let $A$ be a ring, $\mathfrak{J}$ an ideal of $A$, and $M$ an $A$-module; we denote by
$\widehat{A}=\varprojlim_n A/\mathfrak{J}^n$
(resp. $\widehat{M}=\varprojlim_n M/\mathfrak{J}^n M$) the separated completion of $A$
(resp. $M$) for the $\mathfrak{J}$-pre-adic topology. Let
$M'\xrightarrow{u}M\xrightarrow{v}M''\to 0$ be an exact sequence of $A$-modules; as
$M/\mathfrak{J}^n M=M\otimes_A(A/\mathfrak{J}^n)$, the sequence
\[
  M'/\mathfrak{J}^n M'\xrightarrow{u_n}M/\mathfrak{J}^n M
  \xrightarrow{v_n}M''/\mathfrak{J}^n M''\longrightarrow 0
\]
is exact for each $n$. In addition, as
$v(\mathfrak{J}^n M)=\mathfrak{J}^n v(M)=\mathfrak{J}^n M''$,
$\widehat{v}=\varprojlim v_n$ is surjective (Bourbaki, {\it Top. g\'en.}, Chap.~IX,
2nd ed., p.~60, Cor.~2). On the other hand, if $z=(z_k)$ is an element of the kernel of
$\widehat{v}$, then for each integer $k$, there exists a $z_k'\in M'/\mathfrak{J}^k M'$
such that $u_k(z_k')=z_k$; we conclude that there exists  a $z'=(z_n')\in\widehat{M'}$
such that the first $k$ components of $\widehat{u}(z')$ coincide with the $z$; in other
words, the image of $\widehat{M'}$ under $\widehat{u}$ is {\it dense} in the kernel of
$\widehat{v}$.

If we suppose that $A$ is {\it Noetherian}, then so is $\widehat{A}$, according to
\hyperref[exm-0.7.2.12]{(7.2.12)}, $\mathfrak{J}/\mathfrak{J}^2$ is then an $A$-module of
finite type. In addition, we have the following theorem.
\end{env}

\begin{thm}[7.3.2]
\label{thm-0.7.3.2}
{\it (Krull's Theorem)}. Let $A$ be a {\it Noetherian} ring, $\mathfrak{J}$ an ideal of
$A$, $M$ an $A$-module {\it of finite type}, and $M'$ a submodule of $M$; then the induced
topology on $M'$ by the $\mathfrak{J}$-pre-adic topology of $M$ is identical to the
$\mathfrak{J}$-pre-adic topology of $M'$.
\end{thm}

This follows immediately from
\begin{lem}[7.3.2.1]
\label{lem-0.7.3.2.1}
{\it (Artin--Rees Lemma)}. Under the hypotheses of \hyperref[thm-0.7.3.2]{(7.3.2)}, there
exists an integer $p$ such that, for $n\geqslant p$, we have
\[
  M'\cap\mathfrak{J}^n M=\mathfrak{J}^{n-p}(M'\cap\mathfrak{J}^p M).
\]
\end{lem}

For the proof, see \cite[p.~2--04]{I-1}.

\begin{cor}[7.3.3]
\label{cor-0.7.3.3}
\oldpage{67}
Under the hypotheses of \hyperref[thm-0.7.3.2]{(7.3.2)}, the canonical map
$M\otimes_A\widehat{A}\to\widehat{M}$ is bijective, and the functor $M\otimes_A\widehat{A}$
is exact in $M$ on the category of $A$-modules of finite type; as a result, the separated
$\mathfrak{J}$-adic completion $\widehat{A}$ is a flat $A$-module
\hyperref[env-0.6.1.1]{(6.1.1)}.
\end{cor}

\begin{proof}
\label{proof-cor-0.7.3.3}
We first note that $\widehat{M}$ is an {\it exact} functor in $M$ on the category of
$A$-modules of finite type. Indeed, let $0\to M'\xrightarrow{u}M\xrightarrow{v}M''\to 0$ be
an exact sequence; we have seen that $\widehat{v}:\widehat{M}\to\widehat{M''}$ is surjective
\hyperref[env-0.7.3.1]{(7.3.1)}; on the other hand, if $i$ is the canonical homomorphism
$M\to\widehat{M}$, it follows from Krull's Theorem \hyperref[thm-0.7.3.2]{(7.3.2)} that the
closure of $i(u(M'))$ in $\widehat{M}$ identifies with the separated completion of $M'$ for
the $\mathfrak{J}$-pre-adic topology; thus $\widehat{u}$ is injective, and according to
\hyperref[env-0.7.3.1]{(7.3.1)}, the image of $\widehat{u}$ is equal to the kernel of
$\widehat{v}$.

This being so, the canonical map $M\otimes_A\widehat{A}\to\widehat{M}$ is obtained by passing
to the projective limit of the maps
$M\otimes_A\widehat{A}\to M\otimes_A(A/\mathfrak{J}^n)=M/\mathfrak{J}^n M$. It is clear that
this map is bijective when $M$ is of the form $A^p$. If $M$ is an $A$-module of finite type,
then we have an exact sequence $A^p\to A^q\to M\to 0$, hence, by virtue of the {\it right}
exactness of the functors $M\otimes_A\widehat{A}$ and $\widehat{M}$ (in $M$) on the category
of $A$-modules of finite type, we have the commutative diagram
\[
  \xymatrix{
    A^p\otimes_A\widehat{A}\ar[r]\ar[d] &
    A^q\otimes_A\widehat{A}\ar[r]\ar[d] &
    M\otimes_A\widehat{A}\ar[r]\ar[d] &
    0\\
    \widehat{A^p}\ar[r] &
    \widehat{A^q}\ar[r] &
    \widehat{M}\ar[r] &
    0,
  }
\]
where the two rows are exact and the first two vertical arrows are isomorphisms; this
immediately finishes the proof.
\end{proof}

\begin{cor}[7.3.4]
\label{cor-0.7.3.4}
Let $A$ be a Noetherian ring, $\mathfrak{J}$ an ideal of $A$, $M$ and $N$ two $A$-modules of
finite type; we have the canonical functorial isomorphisms
\[
  (M\otimes_A N)^\wedge\isoto\widehat{M}\otimes_{\widehat{A}}\widehat{N},
  \quad
  (\Hom_A(M,N))^\wedge\isoto\Hom_{\widehat{A}}(\widehat{M},\widehat{N}).
\]
\end{cor}

\begin{proof}
\label{proof-cor-0.7.3.4}
This follows from Corollary \hyperref[cor-0.7.3.3]{(7.3.3)}, \hyperref[env-0.6.2.1]{(6.2.1)},
and \hyperref[env-0.6.2.2]{(6.2.2)}.
\end{proof}

\begin{cor}[7.3.5]
\label{cor-0.7.3.5}
Let $A$ be a Noetherian ring, $\mathfrak{J}$ an ideal of $A$. The following conditions are
equivalent:
\begin{itemize}
  \item[{\rm(a)}] $\mathfrak{J}$ is contained in the radical of $A$.
  \item[{\rm(b)}] $\widehat{A}$ is a faithfully flat $A$-module
                  \hyperref[env-0.6.4.1]{(6.4.1)}.
  \item[{\rm(c)}] Each $A$-module of finite type is separated for the $\mathfrak{J}$-pre-adic
                  topology.
  \item[{\rm(d)}] Each submodule of an $A$-module of finite type is closed for the
                  $\mathfrak{J}$-pre-adic topology.
\end{itemize}
\end{cor}

\begin{proof}
\label{proof-cor-0.7.3.5}
As $\widehat{A}$ is a flat $A$-module, the conditions (b) and (c) are equivalent, since
(b) is equivalent to saying that if $M$ is an $A$-module of finite type, then the canonical
map $M\to\widehat{M}=M\otimes_A\widehat{A}$ is injective \hyperref[env-0.6.6.1]{(6.6.1)}, (c).
It is immediate that (c) implies (d), since if $N$ is a submodule of an $A$-module $M$ of
finite type, then $M/N$ is separated for the $\mathfrak{J}$-pre-adic topology, so $N$ is
closed in $M$. We show that (d) implies (a): if $\mathfrak{m}$ is a maximal ideal of $A$,
then $\mathfrak{m}$ is closed in $A$ for the $\mathfrak{J}$-pre-adic topology, so
$\mathfrak{m}=\bigcap_{p\geqslant 0}(\mathfrak{m}+\mathfrak{J}^p)$, and as
$\mathfrak{m}+\mathfrak{J}^p$ is necessarily equal to $A$ or to $\mathfrak{m}$, we have that
$\mathfrak{m}+\mathfrak{J}^p=\mathfrak{m}$ for large enough $p$,
\oldpage{68}
hence $\mathfrak{J}^p\subset\mathfrak{m}$, and $\mathfrak{J}\subset\mathfrak{m}$ when
$\mathfrak{m}$ is prime. Finally, (a) implies (b): indeed, let $P$ be the closure of $\{0\}$
in an $A$-module $M$ of finite type, for the $\mathfrak{J}$-pre-adic topology; according to
Krull's Theorem \hyperref[thm-0.7.3.2]{(7.3.2)}, the topology induced on $P$ by the
$\mathfrak{J}$-pre-adic topology of $M$ is the $\mathfrak{J}$-pre-adic topology of $P$,
so $\mathfrak{J}P=P$; as $P$ is of finite type, it follows from Nakayama's Lemma that
$P=0$ ($\mathfrak{J}$ being contained in the radical of $A$).
\end{proof}

We note that the conditions of Corollary \hyperref[cor-0.7.3.5]{(7.3.5)} are satisfied
when $A$ is a {\it local Noetherian ring} and $\mathfrak{J}\neq A$ is any ideal of $A$.

\begin{cor}[7.3.6]
\label{cor-0.7.3.6}
If $A$ is a $\mathfrak{J}$-pre-adic Noetherian ring, then each $A$-module of finite type
is separated and complete for the $\mathfrak{J}$-pre-adic topology.
\end{cor}

\begin{proof}
\label{proof-cor-0.7.3.6}
As we then have $\widehat{A}=A$, this follows immediately from
Corollary \hyperref[cor-0.7.3.3]{(7.3.3)}.
\end{proof}

We conclude that Proposition \hyperref[prop-0.7.2.9]{(7.2.9)} gives the description of
{\it all} the modules of finite type over an adic Noetherian ring.

\begin{cor}[7.3.7]
\label{cor-0.7.3.7}
Under the hypotheses of \hyperref[thm-0.7.3.2]{(7.3.2)}, the kernel of the canonical map
$M\to\widehat{M}=M\otimes_A\widehat{A}$ is the set of the $x\in M$ killed by an element of
$1+\mathfrak{J}$.
\end{cor}

\begin{proof}
\label{proof-cor-0.7.3.7}
For each $x\in M$ in this kernel, it is necessary and sufficient that the separated
completion of the submodule $Ax$ is reduced to $0$
(by Krull's Theorem \hyperref[thm-0.7.3.2]{(7.3.2)}), in other words, that
$x\in\mathfrak{J}x$.
\end{proof}

\subsection{Quasi-finite modules over local rings}
\label{subsection-quasi-finite-modules-over-local-rings}

\begin{defn}[7.4.1]
\label{defn-0.7.4.1}
Given a local ring $A$, with maximal ideal $\mathfrak{m}$, we say that an $A$-module $M$
is quasi-finite (over $A$) if $M/\mathfrak{m}M$ is of finite rank over the residue field
$k=A/\mathfrak{m}$.
\end{defn}

When $A$ is {\it Noetherian}, the separated completion $\widehat{M}$ of $M$ for the
$\mathfrak{m}$-pre-adic topology is then an {\it $\widehat{A}$-module of finite type};
indeed, as $\mathfrak{m}/\mathfrak{m}^2$ is then an $A$-module of finite type, this follows
from Example \hyperref[exm-0.7.2.12]{(7.2.12)} and from the hypothesis on $M/\mathfrak{m}M$.

In particular, if we suppose that in addition $A$ is {\it complete} and $M$ is
{\it separated} for the $\mathfrak{m}$-pre-adic topology (in other words,
$\bigcap_n\mathfrak{m}^n M=0$), then $M$ is also an {\it $A$-module of finite type}: indeed,
$\widehat{M}$ is then an $A$-module of finite type, and as $M$ identfies with a submodule of
$\widehat{M}$, $M$ is also of finite type (and is indeed identical to its completion
according to Corollary \hyperref[cor-0.7.3.6]{(7.3.6)}).

\begin{prop}[7.4.2]
\label{prop-0.7.4.2}
Let $A$, $B$ be two local rings, $\mathfrak{m}$, $\mathfrak{n}$ their maximal ideals, and
suppose that $B$ is Noetherian. Let $\vphi:A\to B$ be a local homomorphism, $M$ a $B$-module
of finite type. If $M$ is a quasi-finite $A$-module, then the $\mathfrak{m}$-pre-adic and
$\mathfrak{n}$-pre-adic topologies on $M$ are identical, thus separated.
\end{prop}

\begin{proof}
\label{proof-prop-0.7.4.2}
We note that by hypothesis $M/\mathfrak{m}M$ is of {\it finite length} as an $A$-module,
thus also {\it a fortiori} as a $B$-module. We conclude that $\mathfrak{n}$ is the
{\it unique prime ideal} of $B$ containing the annihilator of $M/\mathfrak{m}M$: indeed, we
immediately reduce (according to \hyperref[env-0.1.7.4]{(1.7.4)} and
\hyperref[env-0.1.7.2]{(1.7.2)}) to the case where $M/\mathfrak{m}M$ is {\it simple}, thus
necessarily isomorphic to $B/\mathfrak{n}$, and our assertion is evident in this case. On
the other hand, as $M$ is a $B$-module of finite type, the prime ideals which contain the
annihilator of $M/\mathfrak{m}M$ are those which contain $\mathfrak{m}B+\mathfrak{b}$, where
we denote by $\mathfrak{b}$ the annihilartor of the $B$-module $M$
\hyperref[env-0.1.7.5]{(1.7.5)}. As $B$ is Noetherian, we conclude
(\cite[p.~127, Cor.~4]{I-11}) that $\mathfrak{m}B+\mathfrak{b}$ is an ideal
\oldpage{69}
of definition for $B$, in other words there exists a $k>0$ such that
$\mathfrak{n}^k\subset\mathfrak{m}B+\mathfrak{b}\subset\mathfrak{n}$; as a result, for each
$h>0$, we have
\[
  \mathfrak{n}^{hk}\subset(\mathfrak{m}B+\mathfrak{b})^h M
  =\mathfrak{m}^h M\subset\mathfrak{n}^h M,
\]
which proves that the $\mathfrak{m}$-pre-adic and $\mathfrak{n}$-pre-adic topologies on $M$
are the same; the second is separated according to Corollary \hyperref[cor-0.7.3.5]{(7.3.5)}.
\end{proof}

\begin{cor}[7.4.3]
\label{cor-0.7.4.3}
Under the hypotheses of Proposition \hyperref[prop-0.7.2.4]{(7.2.4)}, if in addition $A$ is
Noetherian and complete for the $\mathfrak{m}$-pre-adic topology, then $M$ is an $A$-module
of finite type.
\end{cor}

\begin{proof}
\label{proof-cor-0.7.4.3}
Indeed, $M$ is then separated for the $\mathfrak{m}$-pre-adic topology, and our assertion
follows from the remark after Definition \hyperref[defn-0.7.4.1]{(7.4.1)}.
\end{proof}

\begin{env}[7.4.4]
\label{env-0.7.4.4}
The most important case of Proposition \hyperref[prop-0.7.4.2]{(7.4.2)} is when $B$ is a
quasi-finite $A$-module, i.e., $B/\mathfrak{m}B$ is an {\it algebra of finite rank over
$k=A/\mathfrak{m}$}; furthermore, this condition can be broken down into the combination
of the following:
\begin{itemize}
  \item[(i)] {\it $\mathfrak{m}B$ is an ideal of definition for $B$};
  \item[(ii)] {\it $B/\mathfrak{n}$ is an extension of finite rank of the field
              $A/\mathfrak{m}$}.
\end{itemize}
When this is so, every $B$-module of finite type is evidently a quasi-finite $A$-module.
\end{env}

\begin{cor}[7.4.5]
\label{cor-0.7.4.5}
Under the hypotheses of Proposition \hyperref[prop-0.7.4.2]{(7.4.2)}, if
$\mathfrak{b}$ is the annihilator of the $B$-module $M$, then $B/\mathfrak{b}$ is a
quasi-finite $A$-module.
\end{cor}

\begin{proof}
\label{proof-cor-0.7.4.5}
Suppose $M\neq 0$ (otherwise the corollary is evident). We can consider $M$ as a
module over the local Noetherian ring $B/\mathfrak{b}$; its annihilator then being
reduced to $0$, the proof of Proposition \hyperref[prop-0.7.4.2]{(7.4.2)} shows
that $\mathfrak{m}(B/\mathfrak{b})$ is an ideal of definition for $B/\mathfrak{b}$.
On the other hand, $M/\mathfrak{n}M$ is a vector space of finite rank over
$A/\mathfrak{m}$, being a quotient of $M/\mathfrak{m}M$, which is by hypothesis of
finite rank over $A/\mathfrak{m}$; as $M\neq 0$, we have $M\neq\mathfrak{n}M$ by
virtue of Nakayama's Lemma; as $M/\mathfrak{n}M$ is a vector space $\neq 0$ over
$B/\mathfrak{n}$, the fact that it is of finite rank over $A/\mathfrak{m}$ implies
that $B/\mathfrak{n}$ is also of finite rank over $A/\mathfrak{m}$; the conclusion
follows from \hyperref[env-0.7.4.4]{(7.4.4)} applied to the ring $B/\mathfrak{b}$.
\end{proof}

\subsection{Rings of restricted formal series}
\label{subsection-rings-of-restricted-formal-series}

\begin{env}[7.5.1]
\label{env-0.7.5.1}
Let $A$ be a topological ring, linearly topologized, separated and complete; let
$(\mathfrak{J}_\lambda)$ be a fundamental system of neighborhoods of $0$ in $A$
consisting of (open) ideals, such that $A$ canonically identifies with
$\varprojlim A/\mathfrak{J}_\lambda$ \hyperref[env-0.7.2.1]{(7.2.1)}. For each
$\lambda$, let $B_\lambda=(A/\mathfrak{J}_\lambda)[T_1,\dots,T_r]$, where the
$T_i$ are indeterminates; it is clear that the $B_\lambda$ form a projective system
of discrete rings. We set $\varprojlim B_\lambda=A\{T_1,\dots,T_r\}$, and we will
see that this topological ring is independent of the fundamental system of ideals
$(\mathfrak{J}_\lambda)$ considered. More precisely, let $A'$ be the subring of the
ring of formal series $A[\![T_1,\dots,T_r]\!]$ consisting of formal series
$\sum_\alpha c_\alpha T^\alpha$ (with $\alpha=(\alpha_1,\dots,\alpha_r)\in\bb{N}^r$)
such that $\lim c_\alpha=0$ (according to the filter by compliments of finite subsets
of $\bb{N}^r$); we say that these series are the {\it restricted} formal series in the
$T_i$, with coefficients in $A$.
\oldpage{70}
For each neighborhood $V$ of $0$ in $A$, let $V'$ be the set of
$x=\sum_\alpha c_\alpha T^\alpha\in A'$ such that $c_\alpha\in V$ for all $\alpha$.
We verify immediately that the $V'$ form a fundamental system of neighborhoods of $0$
defining on $A'$ a {\it separated} ring topology; we will canonically define a
{\it topological isomorphism} from the ring $A\{T_1,\dots,T_r\}$ to $A'$. For each
$\alpha\in\bb{N}^r$ and each $\lambda$, let $\vphi_{\lambda,\alpha}$ be the map from
$(A/\mathfrak{J}_\lambda)[T_1,\dots,T_r]$ to $A/\mathfrak{J}\lambda$ which sends each
polynomial in the first ring to coefficient of $T^\alpha$ in that polynomial. It is
clear that the $\vphi_{\lambda,\alpha}$ form a projective system of homomorphisms of
$(A/\mathfrak{J}_\lambda)$-modules, so their projective limit is a continuous
homomorphism $\vphi_\alpha:A\{T_1,\dots,T_r\}\to A$; we will see that, for each
$y\in A\{T_1,\dots,T_r\}$, the formal series $\sum_\alpha\vphi_\alpha(y)T^\alpha$ is
{\it restricted}. Indeed, if $y_\lambda$ is the component of $y$ in $B_\lambda$, and
if we denote by $H_\lambda$ the finite set of the $\alpha\in\bb{N}^r$ for which the
coefficients of the polynomial $y_\lambda$ are nonzero, then we have
$\vphi_{\lambda,\alpha}(y_\mu)\in\mathfrak{J}_\lambda$ for
$\mathfrak{J}_\mu\subset\mathfrak{J}_\lambda$ and $\alpha\not\in H_\lambda$, and by
passing to the limit, $\vphi_\alpha(y)\in\mathfrak{J}_\lambda$ for
$\alpha\not\in H_\lambda$. We thus define a ring homomorphism
$\vphi:A\{T_1,\dots,T_r\}\to A'$ by setting
$\vphi(y)=\sum_\alpha\vphi_\alpha(y)T^\alpha$, and it is immediate that $\vphi$ is
continuous. Conversely, if $\theta_\lambda$ is the canonical homomorphism
$A\to A/\mathfrak{J}_\lambda$, then for each element
$z=\sum_\alpha c_\alpha T^\alpha\in A'$ and each $\lambda$, there are only a finite
number of indices $\alpha$ such that $\theta_\lambda(c_\alpha)\neq 0$, and as a
result $\psi_\lambda(z)=\sum_\alpha\theta_\lambda(c_\alpha)T^\alpha$ is in
$B_\lambda$; the $\psi_\lambda$ are continuous and form a projective system of
homomorphisms whose projective limit is a continuous homomorphism
$\psi:A'\to A\{T_1,\dots,T_r\}$; is remains to verify that $\vphi\circ\psi$ and
$\psi\circ\vphi$ are the identity automorphisms, which is immediate.
\end{env}

\begin{env}[7.5.2]
\label{env-0.7.5.2}
We identify $A\{T_1,\dots,T_r\}$ with the ring $A'$ of restricted formal series by
means of the isomorphisms defined in \hyperref[env-0.7.5.1]{(7.5.1)}. The canonical
isomorphisms
\[
  ((A/\mathfrak{J}_\lambda)[T_1,\dots,T_r])[T_{r+1},\dots,T_s]
  \isoto(A/\mathfrak{J}_\lambda)[T_1,\dots,T_s]
\]
define, by passing to the projective limit, a canonical isomorphism
\[
  (A\{T_1,\dots,T_r\})\{T_{r+1},\dots,T_s\}
  \isoto A\{T_1,\dots,T_s\}.
\]
\end{env}

\begin{env}[7.5.3]
\label{env-0.7.5.3}
For every continuous homomorphism $u:A\to B$ from $A$ to a linearly topologized ring
$B$, separated and complete, and each system $(b_1,\dots,b_r)$ of $r$ elements of $B$,
there exists {\it a unique continuous homomorphism $\overline{u}:A\{T_1,\dots,T_r\}\to B$},
such that $\overline{u}(a)=u(a)$ for all $a\in A$ and $\overline{u}(T_j)=b_j$ for
$1\leqslant j\leqslant r$. It suffices to set
\[
  \overline{u}\big(\sum_\alpha c_\alpha T^\alpha\big)
  =\sum_\alpha u(c_\alpha)b_1^{\alpha_1}\cdots b_r^{\alpha_r};
\]
the verification of the fact that the family $(u(c_\alpha)b_1^{\alpha_1}\cdots b_r^{\alpha_r})$
is summable in $B$ and that $\overline{u}$ is continuous are immediate and left to the
reader. We note that this property (for arbitrary $B$ and $b_j$) {\it characterize} the
topological ring $A\{T_1,\dots,T_r\}$ up to unique isomorphism.
\end{env}

\begin{prop}[7.5.4]
\label{prop-0.7.5.4}
\medskip\noindent
\begin{itemize}
  \item[{\rm(i)}] If $A$ is an admissible ring, then so is $A'=A\{T_1,\dots,T_r\}$.
  \item[{\rm(ii)}] Let $A$ be an adic ring, $\mathfrak{J}$ an ideal of definition for
    $A$ such that $\mathfrak{J}/\mathfrak{J}^2$ is of finite type
\oldpage{71}
    over $A/\mathfrak{J}$. If we set $\mathfrak{J}'=\mathfrak{J}A'$, then $A'$ is also a
    $\mathfrak{J}'$-adic ring, and $\mathfrak{J}'/{\mathfrak{J}'}^2$ is of finite type over
    $A'/\mathfrak{J}'$. If in addition $A$ is Noetherian, then so is $A'$.
\end{itemize}
\end{prop}

\begin{proof}
\label{proof-prop-0.7.5.4}
\medskip\noindent
\begin{itemize}
  \item[(i)] If $\mathfrak{J}$ is an ideal of $A$, $\mathfrak{J}'$ the ideal of $A'$
    consisting of the $\sum_\alpha c_\alpha T^\alpha$ such that $c_\alpha\in\mathfrak{J}$
    for all $\alpha$, then $(\mathfrak{J}')^n\subset(\mathfrak{J}^n)'$; if $\mathfrak{J}$
    is an ideal of definition for $A$, then $\mathfrak{J}'$ is also an ideal of definition
    for $A'$.
  \item[(ii)] Set $A_i=A/\mathfrak{J}^{i+1}$, and for $i\leqslant j$, let $u_{ij}$ be the
    canonical homomorphism $A/\mathfrak{J}^{j+1}\to A/\mathfrak{J}^{i+1}$; set
    $A_i'=A_i[T_1,\dots,T_r]$, and let $u_{ij}'$ be the homomorphism $A_j'\to A_i'$
    ($i\leqslant j$) obtained by applying $u_{ij}$ to the coefficients of the polynomials
    in $A_j'$. We will show that the projective system $(A_i',u_{ij}')$ satisfies the conditions
    of Proposition \hyperref[prop-0.7.2.7]{(7.2.7)}; as $\mathfrak{J}'$ is the kernel of
    $A'\to A_0'$, this proves the first assertion of (ii). It is clear that the $u_{ij}'$ are
    surjective; the kernel $\mathfrak{J}_i'$ of $u_{0i}$ is the set of polynomials in
    $A_i[T_1,\dots,T_r]$ whose coefficients are in $\mathfrak{J}/\mathfrak{J}^{i+1}$; in
    particular, $\mathfrak{J}_1'$ is the set of polynomials in $A_1[T_1,\dots,T_r]$ whose
    coefficients are in $\mathfrak{J}/\mathfrak{J}^2$. As $\mathfrak{J}/\mathfrak{J}^2$ is
    of finite type over $A_1=A/\mathfrak{J}^2$, we see that $\mathfrak{J}_1'/{\mathfrak{J}_1'}^2$
    is a module of finite type over $A_1'$ (or equivalently, over $A_0'=A_1'/\mathfrak{J}_1'$).
    We will now show that the kernel of $u_{ij}$ is ${\mathfrak{J}_j'}^{i+1}$. It is evident that
    ${\mathfrak{J}_j'}^{i+1}$ is contained in this kernel. On the other hand, let $a_1,\dots,a_m$
    be the elements of $\mathfrak{J}$ whose classes mod $\mathfrak{J}^2$ generate
    $\mathfrak{J}/\mathfrak{J}^2$; we verify immediately that the classes mod $\mathfrak{J}^{j+1}$
    of monomials of degree $\leqslant j$ in the $a_k$ ($1\leqslant k\leqslant m$) generate
    $\mathfrak{J}/\mathfrak{J}^{j+1}$, and the classes of monomials of degree $>i$ and
    $\leqslant j$ generate $\mathfrak{J}^{i+1}/\mathfrak{J}^{j+1}$; a monomial in the $T_k$
    having such an element for a coefficient is thus a product of $i+1$ elements of
    $\mathfrak{J}_i'$, which establishes our assertion. Finally, if $A$ is Noetherian, then so
    is $A'/\mathfrak{J}'=(A/\mathfrak{J})[T_1,\dots,T_r]$, hence $A'$ is Notherian
    \hyperref[cor-0.7.2.8]{(7.2.8)}.
\end{itemize}
\end{proof}

\begin{prop}[7.5.5]
\label{prop-0.7.5.5}
Let $A$ be a Notherian $\mathfrak{J}$-adic ring, $B$ an admissible topological ring,
$\vphi:A\to B$ a continuous homomorphism, making $B$ and $A$-algebra. The following
conditions are equivalent:
\begin{itemize}
  \item[{\rm(a)}] $B$ is Noetherian and $\mathfrak{J}B$-adic, and $B/\mathfrak{J}B$ is an
    algebra of finite type over $A/\mathfrak{J}$.
  \item[{\rm(b)}] $B$ is topologically $A$-isomorphic to $\varprojlim B_n$, where
    $B_n=B_m/\mathfrak{J}^{n+1}B_m$ for $m\geqslant n$, and $B_1$ is an algebra of finite
    type over $A_1=A/\mathfrak{J}^2$.
  \item[{\rm(c)}] $B$ is topologically $A$-isomorphic to a quotient of an algebra of the form
    $A\{T_1,\dots,T_r\}$ by an ideal (necessarily closed according to
    Corollary \hyperref[cor-0.7.3.6]{(7.3.6)} and Proposition \hyperref[prop-0.7.5.4]{(7.5.4, ii)}).
\end{itemize}
\end{prop}

\begin{proof}
\label{proof-prop-0.7.5.5}
As $A$ is Noetherian, so is $A'=A\{T_1,\dots,T_r\}$ \hyperref[prop-0.7.5.4]{(7.5.4)}, so
(c) implies that $B$ is Noetherian; as $\mathfrak{J}'=\mathfrak{J}A'$ is an open neighborhood
of $0$ in $A'$ such that the ${\mathfrak{J}'}^n$ form a fundamental system of neighborhoods of
$0$, the images $\mathfrak{J}^n B$ of the ${\mathfrak{J}'}^n$ form a fundamental system of
neighborhoods of $0$ in $B$, and as $B$ is separated and complete, $B$ is a $\mathfrak{J}B$-adic
ring. Finally, $B/\mathfrak{J}B$ is an algebra (over $(A/\mathfrak{J}$) quotient of
$A'/\mathfrak{J}A'=(A/\mathfrak{J})[T_1,\dots,T_r]$, so it is of finite type, which proves that
(c) implies (a).

If $B$ is $\mathfrak{J}B$-adic and Noetherian, then $B$ is isomorphic to $\varprojlim B_n$, where
$B_n=B/\mathfrak{J}^{n+1}B$ \hyperref[rmk-0.7.2.11]{(7.2.11)}, and $\mathfrak{J}B/\mathfrak{J}^2 B$
is a module of finite type over $B/\mathfrak{J}B$. Let $(a_j)_{1\leqslant j\leqslant s}$ be a
system of generators for the $(B/\mathfrak{J}B)$-module $\mathfrak{J}B/\mathfrak{J}^2 B$, and let
$(c_i)_{1\leqslant i\leqslant r}$ be a system of elements of $B/\mathfrak{J}^2 B$ such that the
classes
\oldpage{72}
mod $\mathfrak{J}B/\mathfrak{J}^2 B$ form a system of generators for the $(A/\mathfrak{J})$-algebra
$B/\mathfrak{J}B$; we see immediately that the $c_i a_j$ form a system of generators for the
$(A/\mathfrak{J}^2)$-algebra $B/\mathfrak{J}^2 B$, hence (a) implies (b).

It remains to prove that (b) implies (c). The hypotheses imply that $B_1$ is a Noetherian ring, and
as $B_1=B_2/\mathfrak{J}^2 B_2$, we have $\mathfrak{J}^2 B_1=0$, hence
$\mathfrak{J}B_1=\mathfrak{J}B_1/\mathfrak{J}^2 B_1$ is a $B_0$-module of finite type. The
conditions of Proposition \hyperref[prop-0.7.2.7]{(7.2.7)} are thus satisfied by the projective
system $(B_n)$ and $B$ is a $\mathfrak{J}B$-adic ring. Let $(c_i)_{1\leqslant i\leqslant r}$ be a
finite system of elements of $B$ whose classes mod $\mathfrak{J}B$ generate the
$(A/\mathfrak{J})$-algebra $B/\mathfrak{J}B$, and whose linear combinations with coefficients in
$\mathfrak{J}$ are such that their classes mod $\mathfrak{J}^2 B$ generate the $B_0$-module
$\mathfrak{J}B/\mathfrak{J}^2 B$. There exists a continuous $A$-homomorphism $u$ from
$A'=A\{T_1,\dots,T_r\}$ to $B$ which reduces to $\vphi$ on $A$ and is such that $u(T_i)=c_i$ for
$1\leqslant i\leqslant r$ \hyperref[env-0.7.5.3]{(7.5.3)}; if we prove that $u$ is {\it surjective},
then (c) will be establshed, since from $u(A')=B$ we deduce that
$u(\mathfrak{J}^n A')=\mathfrak{J}^n B$, in other words that $u$ is a strict morphism of topological
rings and $B$ is this isomorphic to a quotient of $A'$ by a closed ideal. As $B$ is complete for the
$\mathfrak{J}B$-adic topology, it suffices (\cite[p.~18--07]{I-1}) to show that the homomorphism
$\grad(A')\to\grad(B)$, induced canonically by $u$ for the $\mathfrak{J}$-adic filtrations on
$A'$ and $B$, is surjective. But by definition, the homomorphisms
$A'/\mathfrak{J}A'\to B/\mathfrak{J}B$ and
$\mathfrak{J}A'/\mathfrak{J}^2 A'\to\mathfrak{J}B/\mathfrak{J}^2 B$ induced by $u$ are surjective;
by induction on $n$, we immediately deduce that so is
$\mathfrak{J}A'/\mathfrak{J}^n A'\to\mathfrak{J}B/\mathfrak{J}^n B$, and {\it a fortiori} so is
$\mathfrak{J}^n A'/\mathfrak{J}^{n+1}A'\to\mathfrak{J}^n B/\mathfrak{J}^{n+1}B$, which finishes the
proof.
\end{proof}

\subsection{Completed rings of fractions}
\label{subsection-completed-rings-of-fractions}

\subsection{Completed tensor products}
\label{subsection-completed-tensor-prods}

\subsection{Topologies on modules of homomorphisms}
\label{subsection-topologies-on-hom-modules}

\section{Representable functors}
\label{section-representable-functors}

\subsection{Representable functors}
\label{subsection-representable-functors}

\begin{env}[8.1.1]
\label{env-0.8.1.1}
\oldpage{6$'''$}
We denote by $\cat{Set}$ the category of sets. Let $\C$ be a category; for two objects
$X$, $Y$ of $\C$, we set $h_X(Y)=\Hom(Y,X)$; for each morphism $u:Y\to Y'$ in $\C$, we
denote by $h_X(u)$ the map $v\mapsto vu$ from $\Hom(Y',X)$ to $\Hom(Y,X)$. It is immediate
that with these definitions, $h_X:\C\to\cat{Set}$ is a {\it contravariant functor}, i.e., an
object of the category $\cat{Hom}(\C\op,\cat{Set})$, of covariant functors from the
category $\C\op$ (the dual of the category $\C$) to the category $\cat{Set}$ (T, 1.7, (d) and
%\cite{III-29}
).
\end{env}

\begin{env}[8.1.2]
\label{env-0.8.1.2}
Now let $w:X\to X'$ be a morphism in $\C$; for each $Y\in\C$ and each $v\in\Hom(Y,X)=h_X(Y)$,
we have $wv\in\Hom(Y,X')=h_{X'}(Y)$; we denote by $h_w(Y)$ the map $v\mapsto wv$ from
$h_X(Y)$ to $h_{X'}(Y)$. It is immediate that for each morphism $u:Y\to Y'$ in $\C$, the
diagram
\[
  \xymatrix{
    h_X(Y')\ar[r]^{h_X(u)}\ar[d]_{h_w(Y')} &
    h_X(Y)\ar[d]^{h_w(Y)}\\
    h_{X'}(Y')\ar[r]^{h_{X'}(u)} &
    h_{X'}(Y)
  }
\]
is commutative; in other words, $h_w$ is a {\it natural transformation $h_X\to h_{X'}$}
(T, 1.2), or also a morphism in the category $\cat{Hom}(\C\op,\cat{Set})$ (T, 1.7, (d)). The
definitions of $h_X$ and of $h_w$ therefore contitute the definition of a {\it canonical
covariant functor}
\[
  h:\C\longrightarrow\cat{Hom}(\C\op,\cat{Set}),\quad X\longmapsto h_X.
  \tag{8.1.2.1}
\]
\end{env}

\bibliography{the}
\bibliographystyle{amsalpha}

\end{document}

